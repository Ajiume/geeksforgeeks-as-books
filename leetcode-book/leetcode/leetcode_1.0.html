<h1> Copyright </h1>

<div class="copyright-content">
    The content of this book comes from <a href="http://leetcode.com">leetcode.com</a> and all rights belong to the site.
</div>

<div class="book-maker">
    <p>
    Made by Jing. 2015.
    </p>
    <p>
    Head over <a href="https://github.com/gnijuohz/geeksforgeeks-as-books">this
        github repo</a> to report issues or contribute.
    </p>
</div>
<body><div><div class="post-content"><h1 class="posttitle">A Distance Maximizing Problem</h1><p class="date"> May 19, 2011 <span>in <a href="http://leetcode.com/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Given an array A of integers, find the maximum of j-i subjected to the constraint of A[i] </p></blockquote><p><span id="more-765"></span><br> <strong>Hint:</strong><br> This problem seemed easy, maybe because it is easy to understand. But is it straightforward to solve? If you are thinking of a straightforward solution, think again. Try to come up with a solution with run time complexity of O(n log n). Can you do better than that?</p><p><strong>Solution:</strong></p><p><a href="http://www.leetcode.com/wp-content/uploads/2011/05/height_bars.gif"><img class="aligncenter size-full wp-image-774" title="height_bars" src="http://www.leetcode.com/wp-content/uploads/2011/05/height_bars.gif" alt="" width="633" height="287"></a><small>Visualization of the problem using <em>n</em> vertical lines. The i<sup>th</sup> line&#8217;s height is represented by A[i], assuming A[i] is positive.</small></p><p>We are able to visualize the above problem better by drawing <em>n</em> vertical lines, where the height of i<sup>th</sup> line corresponds to the i<sup>th</sup> element in A. We first assume that all elements in A are positive integers, but later it can be expanded to non-positive integers as well. Now, unless the elements in A forms a strictly non-increasing order, there must exist a pair of (i, j) such that A[i] </p><p><strong>Brute Force O(N<sup>2</sup>)</strong><br> The straightforward brute force way is to find the shortest line (the starting index, i), then try to look toward the right side (the ending index, j) and find a taller line with the furthest distance. Record the distance (j-i)and repeat with the next shortest line. Clearly, this is an O(N<sup>2</sup>) algorithm and we can do better.</p><p><strong>Sorting O(N log N)</strong></p><p><a href="http://www.leetcode.com/wp-content/uploads/2011/05/sorted_bar_lines1.gif"><img class="aligncenter size-full wp-image-776" title="sorted_bar_lines" src="http://www.leetcode.com/wp-content/uploads/2011/05/sorted_bar_lines1.gif" alt="" width="676" height="337"></a> <small>Above diagram shows <em>n</em> lines sorted according its heights. Lines with same heights are sorted using its original index. We will also need to keep track of each line&#8217;s original index in order to calculate the distance later. Finally, we build a table by scanning the lines&#8217; original index from right to left once.</small></p><p>By sorting the lines according to its height, we can achieve better run time complexity. Notice that once we sorted the lines, we are able to find the maximum distance in O(N) time. For each possible original starting index i, we find the original ending index j, which is the maximum among all j&#8217;s where A[j] &gt; A[i]. To enable the quick search for the maximum, we can build a look up table in O(N) time by scanning from right to left once. For example, we start with index i = 4, which is the shortest line. We know the maximum of all original indices to the right is 7, therefore max distance = 7 &#8211; 4 = 3. For the next line which original index is 3, the max distance = 7 &#8211; 3 = 4. Now, we must skip over the duplicates and reach the line with its original index 1. Here, we must be careful to skip over all duplicate heights which are not part of the solution because not satisfying the constraint A[j] &gt; A[i]. Therefore, the max distance for this case = 2 &#8211; 1 = 1.</p><p><strong>Best Solution O(N)</strong></p><p><a href="http://www.leetcode.com/wp-content/uploads/2011/05/height_bars_start.gif"></a><a href="http://www.leetcode.com/wp-content/uploads/2011/05/height_bars_start1.gif"><img class="aligncenter size-full wp-image-778" title="height_bars_start" src="http://www.leetcode.com/wp-content/uploads/2011/05/height_bars_start1.gif" alt="" width="626" height="356"></a><small>Given two indices a and b, where would you rather choose as a potential starting point?</small></p><p>Credits for the best O(N) solution goes to <strong><span>darksteel</span></strong>, which I first learned this neat method from him. <a href="http://www.leetcode.com/2011/05/a-distance-maximizing-problem.html#comment-1122">Anonymous</a> is the only reader who is able to solve this correctly using the same idea, great job!</p><p>Solving this problem efficiently requires some clever observations to eliminate all unnecessary comparisons. It is non obvious to me at first if there exists an O(N) algorithm for this problem.</p><p>Please look at the above diagram carefully, and ask yourself if you would choose index a or b as a potential starting point. Clearly, you would never choose index b as the starting point. Why?</p><p>Assume that choosing index b as the starting point, the max distance is j-b, where A[j] &gt; A[b]. Now, since a  A[a], we can form a farther distance by choosing a as the starting index. Therefore, we cannot choose b as the starting point as this forms a contradiction.</p><p>Generally, we want to choose only starting points with no such lines that are shorter to its left side. From the diagram above, only lines of index 0, 1, 3, 4 are valid starting points.</p><p>Once we gather all valid starting points by scanning once from left to right, we are able to obtain the maximum distance by scanning backwards.</p><p>It is obvious that if the ending point is less than the shortest starting point, then it won&#8217;t be a valid solution for all other starting points. Therefore, we scan from right to left until we meet the first ending point that satisfies the condition. Then, we proceed to the next shortest starting point, and continue on from the previous ending point. Using this strategy, we would guarantee that we are able to find the maximum distance in O(N) running time.</p><p><strong>To be continued&#8230;</strong></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a765">Rating: 4.0/<strong>5</strong> (30 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">A Distance Maximizing Problem</span></span>, <span class="rating"><span class="average">4.0</span> out of <span class="best">5</span> based on <span class="votes">30</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2011/05/a-distance-maximizing-problem.html" rel="tag">http://leetcode.com/2011/05/a-distance-maximizing-problem.html</a></p></div></div></body><body><div><div class="entry"><blockquote><p>Given the sequence <b>S1</b> = {a,b,c,d,&#8230;,x,y,z,aa,ab,ac&#8230;. } and given that this sequence corresponds (term for term) to the sequence <b>S2</b> = {0,1,2,3,&#8230;.}. Write code to convert an element of <b>S2</b> to the corresponding element of <b>S1</b>.</p></blockquote><p><span id="more-45"></span></p><p>Your challenge, should you accept it, is to code this problem correctly on your first try. Without any help from the computer of course <img src="http://leetcode.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley"> You might think you have the idea to solve it but it is tricky to code it correctly.</p><p><b>Hint:</b><br><b></b><br>I&#8217;ve created the following table for your convenience.</p><pre>      a - 0     aa - 26   .....   za - 676    aaa - 702
      b - 1     ab - 27   .....   zb - 677    aab - 703
      c - 2        .                 .            .
        .          .                 .            .
        .          .                 .            .
        .          .                 .            .
      z - 25    az - 51   .....   zz - 701    aaz - 727
</pre><p>From<b> a-z</b>, how many of them are there? How about <b>aa-zz</b>? And <b>aaa-zzz</b>?</p><p><b>Solution:</b><br>You should be able to observe that from <b>a-z</b> (a total of <b>26</b>), from <b>aa-zz</b> (a total of <b>26<sup>2</sup></b>), from <b>aaa-zzz</b> (a total of <b>26<sup>3</sup></b>), and so on&#8230; I will explain why this is important later.</p><p>Assume <b><i>s</i><sub>1</sub></b> = <b>abc</b> and we need to find its corresponding number, <b><i>s</i><sub>2</sub></b>. Now imagine that <b>aaa</b> can be magically transformed to <b>000</b>, <b>aab </b>&#8211;&gt; <b>001</b>, &#8230;, and <b>abc</b> to some number <i>xyz</i>. The question is, what should <i>xyz</i> be?</p><p>Now this is a trivial question. Why? Remember that our numeral system has 10 as its base. Here, we are merely converting the system from base 26 to base 10. Therefore, <i>xyz</i> = <b>2</b>*<b>26<sup>0</sup></b> + <b>1</b>*<b>26<sup>1</sup></b> + <b>0</b>*<b>26<sup>2</sup></b> = <b>28</b>.</p><p>But wait, we are not finished yet. To find the real value of <b><i>s</i><sub>2</sub></b>, we need to find how many of them appeared before <b>aaa</b> and add to <i>xyz</i>. Using the important observation earlier, we can easily determine that that there are a total of <b>26</b> + <b>26<sup>2</sup></b><b> </b>= <b>702 </b>that appeared before <b>aaa</b>. Therefore, <b><i>s</i><sub>1</sub></b> corresponds to the number <b><i>s</i><sub>2</sub></b> = <b>28</b> + <b>702</b> = <b>730</b>.</p><p>Assume that we are converting from<b> <i>s</i><sub>2</sub></b> = <i>n</i> to<b> <i>s</i></b><sub><b>1</b> </sub>= &#8220;abcde&#8230;&#8221;.<br>We can generalize to the following equation (Equation <b>(1)</b>):</p><pre><span>Equation <b>(1)</b></span>

<span><i>n</i> = 26 + 26<sup>2</sup> + ... + 26<sup><i>k</i>-1</sup> +<i> a</i><sub>0</sub> + <i>a</i><sub>1</sub>*26 + <i>a</i><sub>2</sub>*26<sup>2</sup> + ... + <i>a</i><sub><i>k</i>-1</sub>*26<sup><i>k</i>-1</sup>
  = <i>a</i><sub>0</sub> + (<i>a</i><sub>1</sub> + 1) 26 + (<i>a</i><sub>2</sub> + 1) 26<sup>2</sup> + ... + (<i>a</i><sub><i>k</i>-1</sub> + 1) 26<sup><i>k</i>-1</sup> 
<b>
where</b> <i>
a</i><sub><i>i</i></sub><i> </i>ranges from 0-25 (each representing a letter in <i>s</i><sub>1</sub>), 
<i>k</i> is the number of letters in <i>s</i><sub>1</sub>.</span>
</pre><p>To solve the above equation, we have to find the values of<i> a</i><sub>0</sub><i>, a</i><sub>1</sub><i>, &#8230;, a</i><sub><i>k</i>-1</sub>. Once we solve this equation, we are able to determine the string of letters of <b><i>s</i><sub>1</sub></b> directly.</p><p><i>a</i><sub>0</sub> can be solved by taking <i>n </i>% 26. Why? Because <i>a</i><sub>0</sub> ranges from 0-25, which is not divisible by 26, while the rest are factor of 26. After we obtained the value of <i>a</i><sub>0</sub>, we divide <i>n</i> by 26. This will yield the number</p><pre><span><i>n'</i> = (<i>a</i><sub>1</sub> + 1) + (<i>a</i><sub>2</sub> + 1) 26 + ... + (<i>a</i><sub><i>k</i>-1</sub> + 1) 26<sup><i>k</i>-2</sup></span></pre><p>You might think that <i>a</i><sub>1</sub> + 1 = <i>n&#8217;</i> % 26. This is wrong. What happens when <i>a</i><sub>1</sub> = 25? For sure, <i>a</i><sub>1</sub> +1 is divisible by 26, and thus the mentioned equation is invalid. We can easily resolve this by doing <i>a</i><sub>1</sub> = (<i>n&#8217;</i> &#8211; 1) % 26.</p><p>The rest is easy, we continue further with <i>n&#8221;</i> = (<i>n&#8217;</i> &#8211; 1) / 26 and <i>a</i><sub>2</sub> = (<i>n&#8221;</i> &#8211; 1) % 26, up until <i>a</i><sub>k-1</sub>.</p><p>Clearly, we need to do both modulo 26 and divide by 26 operations a total of <i>k</i>-1 times. But do we really need to know the value of <i>k</i> (or the number of letters in <i>s</i><sub>1</sub>)?</p><p>The beauty of this method is, since we start from the least significant digit and work our way up, we don&#8217;t need to evaluate <i>k</i>. We just need to divide <i>n</i> by 26 repeatedly until it becomes 0.</p><p></p><div id="crayon-54e5ce347c5b1" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
string numToStr(int n) {
  string str(1, 'a' + n%26);
  n = n/26;
  while (n != 0) {
    str = (char)('a' + (n-1)%26) + str;
    n = (n-1)/26;
  }
  return str;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e5ce347c5b1-1"><span class="t">string</span><span class="h"> </span><span class="e">numToStr</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e5ce347c5b1-2"><span class="h">&#160;&#160;</span><span class="t">string</span><span class="h"> </span><span class="e">str</span><span class="sy">(</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="s">'a'</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="i">n</span><span class="o">%</span><span class="cn">26</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e5ce347c5b1-3"><span class="h">&#160;&#160;</span><span class="v">n</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">n</span><span class="o">/</span><span class="cn">26</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e5ce347c5b1-4"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">n</span><span class="h"> </span><span class="o">!=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e5ce347c5b1-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">str</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="t">char</span><span class="sy">)</span><span class="sy">(</span><span class="s">'a'</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="o">%</span><span class="cn">26</span><span class="sy">)</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="i">str</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e5ce347c5b1-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">n</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="o">/</span><span class="cn">26</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e5ce347c5b1-7"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e5ce347c5b1-8"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">str</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e5ce347c5b1-9"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b><span>Alternative Solution:</span></b><br>The above solution can be converted to a recursive solution too. The advantage is the recursive solution can print the solution directly without storing the characters into a variable. Check my post: <a href="http://www.leetcode.com/2010/02/here-is-one-of-questions-from-microsoft.html">Recursion to the Rescue!</a> where recursion is used to reverse a string.</p><p></p><div id="crayon-54e5ce347c664" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void numToStrHelper(int n) {
  if (n == 0) return;
  numToStrHelper((n-1)/26);
  cout &lt;&lt; (char)('a'+(n-1)%26);
}

void numTostr(int n) {
  numToStrHelper(n/26);
  cout &lt;&lt; (char)('a'+n%26);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e5ce347c664-1"><span class="t">void</span><span class="h"> </span><span class="e">numToStrHelper</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e5ce347c664-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">n</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e5ce347c664-3"><span class="h">&#160;&#160;</span><span class="e">numToStrHelper</span><span class="sy">(</span><span class="sy">(</span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="o">/</span><span class="cn">26</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e5ce347c664-4"><span class="h">&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="sy">(</span><span class="t">char</span><span class="sy">)</span><span class="sy">(</span><span class="s">'a'</span><span class="o">+</span><span class="sy">(</span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="o">%</span><span class="cn">26</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e5ce347c664-5"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e5ce347c664-6">&#160;</p><p class="crayon-line" id="crayon-54e5ce347c664-7"><span class="t">void</span><span class="h"> </span><span class="e">numTostr</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e5ce347c664-8"><span class="h">&#160;&#160;</span><span class="e">numToStrHelper</span><span class="sy">(</span><span class="i">n</span><span class="o">/</span><span class="cn">26</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e5ce347c664-9"><span class="h">&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="sy">(</span><span class="t">char</span><span class="sy">)</span><span class="sy">(</span><span class="s">'a'</span><span class="o">+</span><span class="i">n</span><span class="o">%</span><span class="cn">26</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e5ce347c664-10"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b><span>Further Thoughts:</span></b> <br>This question is actually much easier to solve if <b>S2 </b>is changed to:</p><p><b>S2</b> = {1,2,3,4,&#8230;.}    ie, <i>a</i>-&gt;1, <i>b</i>-&gt;2,<i> c</i>-&gt;3, &#8230;,<i> aa</i>-&gt;27.</p><p>Then transforming from <i>n</i> to a string in <b>S1</b> is just the same as converting the number from base 10 to base 26. Using this idea as a starting point, you can derive the same Equation<b> (1) </b>above.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a45">Rating: 4.9/<strong>5</strong> (11 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Excel Sheet Row Numbers</span></span>, <span class="rating"><span class="average">4.9</span> out of <span class="best">5</span> based on <span class="votes">11</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div id="post-55" class="post-55 post type-post status-publish format-standard hentry category-uncategorized"><div class="post-content"><h1 class="posttitle">Best Time to Buy and Sell Stock</h1><p class="date"> November 10, 2010 <span>in <a href="http://leetcode.com/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Say you have an array for which the <i>i</i><sup>th</sup> element is the price of a given stock on day<i> i</i>.</p><p>If you were only permitted to buy one share of the stock and sell one share of the stock, design an algorithm to find the best times to buy and sell.</p></blockquote><p><span id="more-55"></span><br> It is a question from <a href="http://www.leetcode.com/2010/04/hacking-google-interview-from-mit.html">Hacking a Google Interview from MIT</a> handout #3 titled &#8220;<a href="http://courses.csail.mit.edu/iap/interview/Hacking_a_Google_Interview_Handout_3.pdf">Beating the Stock Market</a>&#8220;.</p><p>At first glance, you might think that finding the minimum and maximum value would do, but it does have a hidden restriction, that is: You must buy before you can sell.</p><p>The question is equivalent to the following:</p><p class="hiblock">Find <i>i</i> and <i>j</i> that maximizes A<i><sub>j</sub></i> &#8211; A<i><sub>i</sub></i>, where <i>i</i> j.</p><p>There is an obvious <i>O</i>(<i>N</i><sup>2</sup>) solution, but in fact we can do better in just <i>O</i>(<i>N</i>).</p><p>To solve this problem efficiently, you would need to track the minimum value&#8217;s index. As you traverse, update the minimum value&#8217;s index when a new minimum is met. Then, compare the difference of the current element with the minimum value. Save the buy and sell time when the difference exceeds our maximum difference (also update the maximum difference).</p><p></p><div id="crayon-54ecdba5a9c97" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void getBestTime(int stocks[], int sz, int &amp;buy, int &amp;sell) {
  int min = 0;
  int maxDiff = 0;
  buy = sell = 0;
  for (int i = 0; i &lt; sz; i++) {
    if (stocks[i] &lt; stocks[min])
      min = i;
    int diff = stocks[i] - stocks[min];
    if (diff &gt; maxDiff) {
      buy = min;
      sell = i;
      maxDiff = diff;
    }
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecdba5a9c97-1"><span class="t">void</span><span class="h"> </span><span class="e">getBestTime</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">stocks</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">sz</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">buy</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">sell</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdba5a9c97-2"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">min</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdba5a9c97-3"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">maxDiff</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdba5a9c97-4"><span class="h">&#160;&#160;</span><span class="v">buy</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">sell</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdba5a9c97-5"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">sz</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdba5a9c97-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">stocks</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="v">stocks</span><span class="sy">[</span><span class="i">min</span><span class="sy">]</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ecdba5a9c97-7"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">min</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">i</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdba5a9c97-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">diff</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">stocks</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="v">stocks</span><span class="sy">[</span><span class="i">min</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdba5a9c97-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">diff</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">maxDiff</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdba5a9c97-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">buy</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">min</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdba5a9c97-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">sell</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">i</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdba5a9c97-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">maxDiff</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">diff</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdba5a9c97-13"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdba5a9c97-14"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecdba5a9c97-15"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a55">Rating: 4.4/<strong>5</strong> (41 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Best Time to Buy and Sell Stock</span></span>, <span class="rating"><span class="average">4.4</span> out of <span class="best">5</span> based on <span class="votes">41</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/11/best-time-to-buy-and-sell-stock.html" rel="tag">http://leetcode.com/2010/11/best-time-to-buy-and-sell-stock.html</a></p></div></div></div></body><body><div><div class="entry"><blockquote><p>Given a binary search tree, print the elements in-order iteratively without using recursion.</p></blockquote><p><span id="more-18"></span><br><b><span>Note:</span></b><br>Before you attempt this problem, you might want to try coding a pre-order traversal iterative solution first, because it is easier. On the other hand, coding a post-order iterative version is a challenge. See my post: <a href="http://www.leetcode.com/2010/10/binary-tree-post-order-traversal.html">Binary Tree Post-Order Traversal Iterative Solution</a> for more details and an in-depth analysis of the problem.</p><p>We know the elements can be printed in-order easily using recursion, as follow:</p><p></p><div id="crayon-54ecc399cf771" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void in_order_traversal(BinaryTree *p) {
  if (!p) return;
  in_order_traversal(p-&gt;left);
  cout &lt;&lt; p-&gt;data;
  in_order_traversal(p-&gt;right);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecc399cf771-1"><span class="t">void</span><span class="h"> </span><span class="e">in_order_traversal</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf771-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc399cf771-3"><span class="h">&#160;&#160;</span><span class="e">in_order_traversal</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf771-4"><span class="h">&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc399cf771-5"><span class="h">&#160;&#160;</span><span class="e">in_order_traversal</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf771-6"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>Excessive recursive function calls may cause memory to run out of stack space and extra overhead. Since the depth of a <span>balanced</span> binary search tree is about lg(<i>n</i>), you might not worry about running out of stack space, even when you have a million of elements. But what if the tree is not balanced? Then you are asking for trouble, because in the worst case the height of the tree may go up to <i>n</i>. If that is the case, stack space will eventually run out and your program will crash.</p><p>To solve this issue, we need to develop an iterative solution. The idea is easy, we need a stack to store previous nodes, and a visited flag for each node is needed to record if the node has been visited before. When a node is traversed for the second time, its value will be printed. After its value is printed, we push its right child and continue from there.</p><p></p><div id="crayon-54ecc399cf81f" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void in_order_traversal_iterative(BinaryTree *root) {
  stack&lt;BinaryTree*&gt; s;
  s.push(root);
  while (!s.empty()) {
    BinaryTree *top = s.top();
    if (top != NULL) {
      if (!top-&gt;visited) {
        s.push(top-&gt;left);
      } else {
        cout &lt;&lt; top-&gt;data &lt;&lt; " ";
        s.pop();
        s.push(top-&gt;right);
      }
    } else {
      s.pop();
      if (!s.empty())
        s.top()-&gt;visited = true;
    }
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ecc399cf81f-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf81f-2">2</p><p class="crayon-num" data-line="crayon-54ecc399cf81f-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf81f-4">4</p><p class="crayon-num" data-line="crayon-54ecc399cf81f-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf81f-6">6</p><p class="crayon-num" data-line="crayon-54ecc399cf81f-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf81f-8">8</p><p class="crayon-num" data-line="crayon-54ecc399cf81f-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf81f-10">10</p><p class="crayon-num" data-line="crayon-54ecc399cf81f-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf81f-12">12</p><p class="crayon-num" data-line="crayon-54ecc399cf81f-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf81f-14">14</p><p class="crayon-num" data-line="crayon-54ecc399cf81f-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf81f-16">16</p><p class="crayon-num" data-line="crayon-54ecc399cf81f-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf81f-18">18</p><p class="crayon-num" data-line="crayon-54ecc399cf81f-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf81f-20">20</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecc399cf81f-1"><span class="t">void</span><span class="h"> </span><span class="e">in_order_traversal_iterative</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf81f-2"><span class="h">&#160;&#160;</span><span class="i">stack</span><span class="o">&lt;</span><span class="e ">BinaryTree*</span><span class="o">&gt;</span><span class="h"> </span><span class="i">s</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc399cf81f-3"><span class="h">&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">root</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf81f-4"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">s</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecc399cf81f-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">top</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">s</span><span class="sy">.</span><span class="e">top</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf81f-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">top</span><span class="h"> </span><span class="o">!=</span><span class="h"> </span><span class="t">NULL</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecc399cf81f-7"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">top</span><span class="o">-&gt;</span><span class="i">visited</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf81f-8"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">top</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc399cf81f-9"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf81f-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">top</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc399cf81f-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf81f-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">top</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc399cf81f-13"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf81f-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecc399cf81f-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf81f-16"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">s</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ecc399cf81f-17"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">top</span><span class="sy">(</span><span class="sy">)</span><span class="o">-&gt;</span><span class="v">visited</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf81f-18"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecc399cf81f-19"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf81f-20"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b><span>Alternative Solution:</span></b><br>The above solution requires modification to the original BST data structure (ie, adding a visited flag). The other solution which doesn&#8217;t modify the original structure is with the help of a current pointer in addition of a stack.</p><p>First, the current pointer is initialized to the root. Keep traversing to its left child while pushing visited nodes onto the stack. When you reach a NULL node (ie, you&#8217;ve reached a leaf node), you would pop off an element from the stack and set it to current. Now is the time to print current&#8217;s value. Then, current is set to its right child and repeat the process again. When the stack is empty, this means you&#8217;re done printing.</p><p></p><div id="crayon-54ecc399cf8cc" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void in_order_traversal_iterative(BinaryTree *root) {
  stack&lt;BinaryTree*&gt; s;
  BinaryTree *current = root;
  bool done = false;
  while (!done) {
    if (current) {
      s.push(current);
      current = current-&gt;left;
    } else {
      if (s.empty()) {
        done = true;
      } else {
        current = s.top();
        s.pop();
        cout &lt;&lt; current-&gt;data &lt;&lt; " ";
        current = current-&gt;right;
      }
    }
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ecc399cf8cc-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf8cc-2">2</p><p class="crayon-num" data-line="crayon-54ecc399cf8cc-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf8cc-4">4</p><p class="crayon-num" data-line="crayon-54ecc399cf8cc-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf8cc-6">6</p><p class="crayon-num" data-line="crayon-54ecc399cf8cc-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf8cc-8">8</p><p class="crayon-num" data-line="crayon-54ecc399cf8cc-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf8cc-10">10</p><p class="crayon-num" data-line="crayon-54ecc399cf8cc-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf8cc-12">12</p><p class="crayon-num" data-line="crayon-54ecc399cf8cc-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf8cc-14">14</p><p class="crayon-num" data-line="crayon-54ecc399cf8cc-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf8cc-16">16</p><p class="crayon-num" data-line="crayon-54ecc399cf8cc-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf8cc-18">18</p><p class="crayon-num" data-line="crayon-54ecc399cf8cc-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc399cf8cc-20">20</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecc399cf8cc-1"><span class="t">void</span><span class="h"> </span><span class="e">in_order_traversal_iterative</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf8cc-2"><span class="h">&#160;&#160;</span><span class="i">stack</span><span class="o">&lt;</span><span class="e ">BinaryTree*</span><span class="o">&gt;</span><span class="h"> </span><span class="i">s</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc399cf8cc-3"><span class="h">&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">current</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">root</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf8cc-4"><span class="h">&#160;&#160;</span><span class="t">bool</span><span class="h"> </span><span class="v">done</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc399cf8cc-5"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">done</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf8cc-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">current</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecc399cf8cc-7"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">current</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf8cc-8"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">current</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">current</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc399cf8cc-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf8cc-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">s</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecc399cf8cc-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">done</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf8cc-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecc399cf8cc-13"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">current</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">s</span><span class="sy">.</span><span class="e">top</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf8cc-14"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc399cf8cc-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">current</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf8cc-16"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">current</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">current</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc399cf8cc-17"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf8cc-18"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecc399cf8cc-19"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf8cc-20"><span class="sy">}</span></p></div></td></tr></table></div></div><p>We can even do better by refactoring the above code. The refactoring relies on one important observation:</p><p class="hiblock">The last traversed node must not have a right child.</p><p>Why this is true? To prove this, we assume the opposite, that is: the last traversed node has a right child. This is certainly incorrect, as in-order traversal would have to traverse its right child next before the traversal is done. Since this is incorrect, the last traversed node must not have a right child by contradiction.</p><p>Below is the refactored code:</p><div id="crayon-54ecc399cf976" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void in_order_traversal_iterative(BinaryTree *root) {
  stack&lt;BinaryTree*&gt; s;
  BinaryTree *current = root;
  while (!s.empty() || current) {
    if (current) {
      s.push(current);
      current = current-&gt;left;
    } else {
      current = s.top();
      s.pop();
      cout &lt;&lt; current-&gt;data &lt;&lt; " ";
      current = current-&gt;right;
    }
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecc399cf976-1"><span class="t">void</span><span class="h"> </span><span class="e">in_order_traversal_iterative</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf976-2"><span class="h">&#160;&#160;</span><span class="i">stack</span><span class="o">&lt;</span><span class="e ">BinaryTree*</span><span class="o">&gt;</span><span class="h"> </span><span class="i">s</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc399cf976-3"><span class="h">&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">current</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">root</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf976-4"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">s</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">current</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecc399cf976-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">current</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf976-6"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">current</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc399cf976-7"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">current</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">current</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf976-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecc399cf976-9"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">current</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">s</span><span class="sy">.</span><span class="e">top</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf976-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc399cf976-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">current</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf976-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">current</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">current</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc399cf976-13"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc399cf976-14"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecc399cf976-15"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p></p><center> <a href="http://1.bp.blogspot.com/_UElib2WLeDE/TKkMHa8GoNI/AAAAAAAACWE/9_gC5U7nd94/s1600/threaded_binary_tree.png"><img border="0" height="270" src="http://1.bp.blogspot.com/_UElib2WLeDE/TKkMHa8GoNI/AAAAAAAACWE/9_gC5U7nd94/s320/threaded_binary_tree.png" width="320"><br></a> <small>A <b>threaded tree</b>, with the special threading links shown by dashed arrows. A threaded binary tree makes it possible to traverse the values in the binary tree via a linear traversal that is more rapid than a recursive in-order traversal.</small></center><p><b><span>Further Thoughts:</span></b><br>The above solutions require the help of a stack to do in-order traversal. Is it possible to do in-order traversal without a stack?</p><p>The answer is yes, it&#8217;s possible. There&#8217;s 2 possible ways that I know of:</p><ol><li>By adding a parent pointer to the data structure, this allows us to return to a node&#8217;s parent  (Credits to my friend who provided this solution to me). To determine when to print a node&#8217;s value, we would have to determine when it&#8217;s returned from. If it&#8217;s returned from its left child, then you would print its value then traverse to its right child, on the other hand if it&#8217;s returned from its right child, you would traverse up one level to its parent.</li><li>By using a Threaded Binary Tree. Read the article: <a href="http://en.wikipedia.org/wiki/Threaded_binary_tree">Threaded Binary Tree</a> on Wikipedia for more information.</li></ol><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a18">Rating: 4.7/<strong>5</strong> (58 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Binary Search Tree In-Order Traversal Iterative Solution</span></span>, <span class="rating"><span class="average">4.7</span> out of <span class="best">5</span> based on <span class="votes">58</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Given a binary tree, print out the tree in level order (ie, from left to right, level by level). Output a newline after the end of each level. <b>Breadth First Search (BFS) is not allowed</b>.<span id="more-39"></span></p><pre><span>     3</span>
   /  \
  <span>9</span>   <span>20</span>    
     /  \
    <span>15</span>    <span>7</span>
</pre><p>For example, the level order output of the tree above is:</p><pre><span>3 
9 20 
15 7</span></pre></blockquote><p>In my last post: <a href="http://www.leetcode.com/2010/09/printing-binary-tree-in-level-order.html">Printing Binary Tree in Level Order</a>, we discuss how to print a tree using <a href="http://en.wikipedia.org/wiki/Breadth-first_search">Breadth First Search</a> (BFS). The challenge now is, can you do it using <a href="http://en.wikipedia.org/wiki/Depth-first_search">Depth First Search</a> (DFS) this time?</p><p><b>Hint:</b><br>Write a function call <i>printLevel(BinaryTree *p, int level)</i> which will print all nodes of a given level. Assume you know the height of the tree, then you can print the entire tree level by level utilizing <i>printLevel</i>.</p><p><b>Solution:</b><br><i>printLevel</i> function can be solved using DFS. Decrement level by <i>one</i> as you advance to the next level. When level equals <i>1</i>, you&#8217;ve reached the given level. To find the maximum height (or the max depth) of a tree, you can read my post: <a href="http://www.leetcode.com/2010/04/maximum-height-of-binary-tree.html">Maximum Height of a Binary Tree</a>.</p><p></p><div id="crayon-54ec1b5833d14" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void printLevel(BinaryTree *p, int level) {
  if (!p) return;
  if (level == 1) {
    cout &lt;&lt; p-&gt;data &lt;&lt; " ";
  } else {
    printLevel(p-&gt;left, level-1);
    printLevel(p-&gt;right, level-1);
  }
}

void printLevelOrder(BinaryTree *root) {
  int height = maxHeight(root);
  for (int level = 1; level &lt;= height; level++) {
    printLevel(root, level);
    cout &lt;&lt; endl;
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ec1b5833d14-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1b5833d14-2">2</p><p class="crayon-num" data-line="crayon-54ec1b5833d14-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1b5833d14-4">4</p><p class="crayon-num" data-line="crayon-54ec1b5833d14-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1b5833d14-6">6</p><p class="crayon-num" data-line="crayon-54ec1b5833d14-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1b5833d14-8">8</p><p class="crayon-num" data-line="crayon-54ec1b5833d14-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1b5833d14-10">10</p><p class="crayon-num" data-line="crayon-54ec1b5833d14-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1b5833d14-12">12</p><p class="crayon-num" data-line="crayon-54ec1b5833d14-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1b5833d14-14">14</p><p class="crayon-num" data-line="crayon-54ec1b5833d14-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1b5833d14-16">16</p><p class="crayon-num" data-line="crayon-54ec1b5833d14-17">17</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec1b5833d14-1"><span class="t">void</span><span class="h"> </span><span class="e">printLevel</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">level</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1b5833d14-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1b5833d14-3"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">level</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1b5833d14-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1b5833d14-5"><span class="h">&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1b5833d14-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">printLevel</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">level</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1b5833d14-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">printLevel</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="i">level</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1b5833d14-8"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ec1b5833d14-9"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1b5833d14-10">&#160;</p><p class="crayon-line" id="crayon-54ec1b5833d14-11"><span class="t">void</span><span class="h"> </span><span class="e">printLevelOrder</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1b5833d14-12"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">height</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">maxHeight</span><span class="sy">(</span><span class="i">root</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1b5833d14-13"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">level</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">level</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">height</span><span class="sy">;</span><span class="h"> </span><span class="i">level</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1b5833d14-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">printLevel</span><span class="sy">(</span><span class="i">root</span><span class="sy">,</span><span class="h"> </span><span class="i">level</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1b5833d14-15"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">endl</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1b5833d14-16"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ec1b5833d14-17"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b>Further Thoughts:</b> <br>If you look carefully, you will notice that the DFS solution traverses the same node multiple times. Since BFS traverses each node exactly one time, BFS is much more efficient than DFS.</p><p>Could you find the run time complexity for the DFS level-order traversal solution? Try to estimate as best as you can, and then find the correct answer by proving it using Math. Does your estimate fares well with the correct answer? Why?</p><p><b>Answer:</b><br>Although the DFS solution traverse the same node multiple times, it is not another order slower than the BFS solution. Here is the proof that the DFS solution above runs in <i>O</i>(<i>N</i>) time, where <i>N</i> is the number of nodes in the binary tree and we assume that the binary tree is balanced.</p><p>We first compute the complexity of <i>printLevel</i> for the <i>kth</i> level:</p><pre>T(<i>k</i>) = 2T(<i>k</i>-1) + <i>c</i>
     = 2<sup><i>k</i>-1</sup> T(1) + <i>c</i>
     = 2<sup><i>k</i>-1</sup> + <i>c</i>
</pre><p>Assuming it&#8217;s a balanced binary tree, then it would have a total of lg <i>N</i> levels.</p><p>Therefore, the complexity of printing all levels is:</p><pre>T(1) + T(2) + ... + T(lg <i>N</i>)
= 1 + 2 + 2<sup>2</sup> + ... + 2<sup>lg <i>N-1</i></sup> + c
= <i>O</i>(<i>N</i>)
</pre><p>Finding the maximum height of the tree also takes <i>O</i>(<i>N</i>) time, therefore the overall complexity is still <i>O</i>(<i>N</i>).</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a39">Rating: 4.4/<strong>5</strong> (25 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Binary Tree Level-Order Traversal Using Depth First Search (DFS)</span></span>, <span class="rating"><span class="average">4.4</span> out of <span class="best">5</span> based on <span class="votes">25</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Given a binary tree, print the elements in post-order iteratively without using recursion.</p></blockquote><p><span id="more-51"></span><br></p><p>We know the elements can be printed post-order easily using recursion, as follow:</p><p></p><div id="crayon-54ebc0e385da8" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void postOrderTraversal(BinaryTree *p) {
  if (!p) return;
  postOrderTraversal(p-&gt;left);
  postOrderTraversal(p-&gt;right);
  cout &lt;&lt; p-&gt;data;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ebc0e385da8-1"><span class="t">void</span><span class="h"> </span><span class="e">postOrderTraversal</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385da8-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebc0e385da8-3"><span class="h">&#160;&#160;</span><span class="e">postOrderTraversal</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385da8-4"><span class="h">&#160;&#160;</span><span class="e">postOrderTraversal</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebc0e385da8-5"><span class="h">&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385da8-6"><span class="sy">}</span></p></div></td></tr></table></div></div><p>This is the most difficult of all types of iterative tree traversals. You should attempt this problem: <a href="http://www.leetcode.com/2010/04/binary-search-tree-in-order-traversal.html">Binary Search Tree In-Order Traversal Iterative Solution</a> before this as it is an easier problem. The easiest of all iterative tree traversals is <a href="http://www.google.com/search?q=preorder+traversal+without+recursion">Pre-Order Traversal</a>.</p><p>Post-order traversal is useful in some types of tree operations:</p><div class="hiblock"><ol><li>Tree deletion. In order to free up allocated memory of all nodes in a tree, the nodes must be deleted in the order where the current node can only be deleted when both of its left and right subtrees are deleted.</li><li>Evaluating <a href="http://en.wikipedia.org/wiki/Post_fix_notation">post-fix notation</a>.</li></ol></div><p>If you keep visited flags in the binary tree while traversing, the problem could be solved in a more direct manner. But we will not discuss this solution here, as it has already been discussed in Wikipedia&#8217;s article on <a href="http://en.wikipedia.org/wiki/Post-order_traversal#Iterative_Traversal">Tree Traversal</a>. Here, we discuss a solution without using any visited flags, which seems challenging to solve.</p><p><b>Hint:</b><br>As usual, a stack-based solution is necessary when there is no parent pointer available in the tree. Try to follow the post-order traversal of a sample binary tree. When should you print a node&#8217;s value? Note under what condition it traverses up/down the tree. Try to use a variable to store the previously-traversed node. How would it help when it traverses up/down the tree?</p><div class="separator"><a href="http://3.bp.blogspot.com/_UElib2WLeDE/TMjYkP1_FtI/AAAAAAAACXQ/DvvKhb8LF5M/s1600/Sorted_binary_tree.png" imageanchor="1"><img border="0" height="254" src="http://3.bp.blogspot.com/_UElib2WLeDE/TMjYkP1_FtI/AAAAAAAACXQ/DvvKhb8LF5M/s320/Sorted_binary_tree.png" width="320"></a></div><p><small>Post-order traversal sequence: A, C, E, D, B, H, I, G, F</small></p><p><b>Solution:</b><br>We use a <i>prev</i> variable to keep track of the previously-traversed node. Let&#8217;s assume <i>curr</i> is the current node that&#8217;s on top of the stack. When <i>prev</i> is <i>curr</i>&#8216;s parent, we are traversing down the tree. In this case, we try to traverse to <i>curr</i>&#8216;s left child if available (ie, push left child to the stack). If it is not available, we look at <i>curr</i>&#8216;s right child. If both left and right child do not exist (ie, <i>curr</i> is a leaf node), we print <i>curr</i>&#8216;s value and pop it off the stack.</p><p>If <i>prev </i>is <i>curr</i>&#8216;s left child, we are traversing up the tree from the left. We look at <i>curr</i>&#8216;s right child. If it is available, then traverse down the right child (ie, push right child to the stack), otherwise print <i>curr</i>&#8216;s value and pop it off the stack.</p><p>If <i>prev </i>is <i>curr</i>&#8216;s right child, we are traversing up the tree from the right. In this case, we print <i>curr</i>&#8216;s value and pop it off the stack.</p><p></p><div id="crayon-54ebc0e385e5b" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void postOrderTraversalIterative(BinaryTree *root) {
  if (!root) return;
  stack&lt;BinaryTree*&gt; s;
  s.push(root);
  BinaryTree *prev = NULL;
  while (!s.empty()) {
    BinaryTree *curr = s.top();
    // we are traversing down the tree
    if (!prev || prev-&gt;left == curr || prev-&gt;right == curr) {
      if (curr-&gt;left) {
        s.push(curr-&gt;left);
      } else if (curr-&gt;right) {
        s.push(curr-&gt;right);
      } else {
        cout &lt;&lt; curr-&gt;data &lt;&lt; " ";
        s.pop();
      }
    } 
    // we are traversing up the tree from the left
    else if (curr-&gt;left == prev) {
      if (curr-&gt;right) {
        s.push(curr-&gt;right);
      } else {
        cout &lt;&lt; curr-&gt;data &lt;&lt; " ";
        s.pop();
      }
    }
    // we are traversing up the tree from the right
    else if (curr-&gt;right == prev) {
      cout &lt;&lt; curr-&gt;data &lt;&lt; " ";
      s.pop();
    }
    prev = curr;  // record previously traversed node
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ebc0e385e5b-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385e5b-2">2</p><p class="crayon-num" data-line="crayon-54ebc0e385e5b-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385e5b-4">4</p><p class="crayon-num" data-line="crayon-54ebc0e385e5b-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385e5b-6">6</p><p class="crayon-num" data-line="crayon-54ebc0e385e5b-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385e5b-8">8</p><p class="crayon-num" data-line="crayon-54ebc0e385e5b-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385e5b-10">10</p><p class="crayon-num" data-line="crayon-54ebc0e385e5b-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385e5b-12">12</p><p class="crayon-num" data-line="crayon-54ebc0e385e5b-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385e5b-14">14</p><p class="crayon-num" data-line="crayon-54ebc0e385e5b-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385e5b-16">16</p><p class="crayon-num" data-line="crayon-54ebc0e385e5b-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385e5b-18">18</p><p class="crayon-num" data-line="crayon-54ebc0e385e5b-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385e5b-20">20</p><p class="crayon-num" data-line="crayon-54ebc0e385e5b-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385e5b-22">22</p><p class="crayon-num" data-line="crayon-54ebc0e385e5b-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385e5b-24">24</p><p class="crayon-num" data-line="crayon-54ebc0e385e5b-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385e5b-26">26</p><p class="crayon-num" data-line="crayon-54ebc0e385e5b-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385e5b-28">28</p><p class="crayon-num" data-line="crayon-54ebc0e385e5b-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385e5b-30">30</p><p class="crayon-num" data-line="crayon-54ebc0e385e5b-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385e5b-32">32</p><p class="crayon-num" data-line="crayon-54ebc0e385e5b-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385e5b-34">34</p><p class="crayon-num" data-line="crayon-54ebc0e385e5b-35">35</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ebc0e385e5b-1"><span class="t">void</span><span class="h"> </span><span class="e">postOrderTraversalIterative</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385e5b-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebc0e385e5b-3"><span class="h">&#160;&#160;</span><span class="i">stack</span><span class="o">&lt;</span><span class="e ">BinaryTree*</span><span class="o">&gt;</span><span class="h"> </span><span class="i">s</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385e5b-4"><span class="h">&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">root</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebc0e385e5b-5"><span class="h">&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">prev</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385e5b-6"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">s</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebc0e385e5b-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">curr</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">s</span><span class="sy">.</span><span class="e">top</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385e5b-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// we are traversing down the tree</span></p><p class="crayon-line" id="crayon-54ebc0e385e5b-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">prev</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">prev</span><span class="o">-&gt;</span><span class="v">left</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">curr</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">prev</span><span class="o">-&gt;</span><span class="v">right</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">curr</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385e5b-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebc0e385e5b-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385e5b-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebc0e385e5b-13"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385e5b-14"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebc0e385e5b-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385e5b-16"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebc0e385e5b-17"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385e5b-18"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span></p><p class="crayon-line" id="crayon-54ebc0e385e5b-19"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// we are traversing up the tree from the left</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385e5b-20"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="v">left</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">prev</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebc0e385e5b-21"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385e5b-22"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebc0e385e5b-23"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385e5b-24"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebc0e385e5b-25"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385e5b-26"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ebc0e385e5b-27"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385e5b-28"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// we are traversing up the tree from the right</span></p><p class="crayon-line" id="crayon-54ebc0e385e5b-29"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="v">right</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">prev</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385e5b-30"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebc0e385e5b-31"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385e5b-32"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ebc0e385e5b-33"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">prev</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">curr</span><span class="sy">;</span><span class="h">&#160;&#160;</span><span class="c">// record previously traversed node</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385e5b-34"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ebc0e385e5b-35"><span class="sy">}</span></p></div></td></tr></table></div></div><p>The above method is easy to follow, but has some redundant code. We could refactor out the redundant code, and now it appears to be more concise. Note how the code section for printing <i>curr</i>&#8216;s value get refactored into one single else block. Don&#8217;t worry about in an iteration where its value won&#8217;t get printed, as it is guaranteed to enter the else section in the next iteration.</p><div id="crayon-54ebc0e385efc" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void postOrderTraversalIterative(BinaryTree *root) {
  if (!root) return;
  stack&lt;BinaryTree*&gt; s;
  s.push(root);
  BinaryTree *prev = NULL;
  while (!s.empty()) {
    BinaryTree *curr = s.top();
    if (!prev || prev-&gt;left == curr || prev-&gt;right == curr) {
      if (curr-&gt;left)
        s.push(curr-&gt;left);
      else if (curr-&gt;right)
        s.push(curr-&gt;right);
    } else if (curr-&gt;left == prev) {
      if (curr-&gt;right)
        s.push(curr-&gt;right);
    } else {
      cout &lt;&lt; curr-&gt;data &lt;&lt; " ";
      s.pop();
    }
    prev = curr;
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ebc0e385efc-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385efc-2">2</p><p class="crayon-num" data-line="crayon-54ebc0e385efc-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385efc-4">4</p><p class="crayon-num" data-line="crayon-54ebc0e385efc-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385efc-6">6</p><p class="crayon-num" data-line="crayon-54ebc0e385efc-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385efc-8">8</p><p class="crayon-num" data-line="crayon-54ebc0e385efc-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385efc-10">10</p><p class="crayon-num" data-line="crayon-54ebc0e385efc-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385efc-12">12</p><p class="crayon-num" data-line="crayon-54ebc0e385efc-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385efc-14">14</p><p class="crayon-num" data-line="crayon-54ebc0e385efc-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385efc-16">16</p><p class="crayon-num" data-line="crayon-54ebc0e385efc-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385efc-18">18</p><p class="crayon-num" data-line="crayon-54ebc0e385efc-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385efc-20">20</p><p class="crayon-num" data-line="crayon-54ebc0e385efc-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385efc-22">22</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ebc0e385efc-1"><span class="t">void</span><span class="h"> </span><span class="e">postOrderTraversalIterative</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385efc-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebc0e385efc-3"><span class="h">&#160;&#160;</span><span class="i">stack</span><span class="o">&lt;</span><span class="e ">BinaryTree*</span><span class="o">&gt;</span><span class="h"> </span><span class="i">s</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385efc-4"><span class="h">&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">root</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebc0e385efc-5"><span class="h">&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">prev</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385efc-6"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">s</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebc0e385efc-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">curr</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">s</span><span class="sy">.</span><span class="e">top</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385efc-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">prev</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">prev</span><span class="o">-&gt;</span><span class="v">left</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">curr</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">prev</span><span class="o">-&gt;</span><span class="v">right</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">curr</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebc0e385efc-9"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385efc-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebc0e385efc-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385efc-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebc0e385efc-13"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="v">left</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">prev</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385efc-14"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ebc0e385efc-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385efc-16"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebc0e385efc-17"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385efc-18"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebc0e385efc-19"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385efc-20"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">prev</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">curr</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebc0e385efc-21"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385efc-22"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b><span>Alternative Solution:</span></b><br>An alternative solution is to use two stacks. Try to work it out on a piece of paper. I think it is quite magical and beautiful. You will think that it works magically, but in fact it is doing a reversed pre-order traversal. That is, the order of traversal is a node, then its right child followed by its left child. This yields post-order traversal in reversed order. Using a second stack, we could reverse it back to the correct order.</p><p>Here is how it works:</p><div class="hiblock"><ol><li>Push the root node to the first stack.</li><li>Pop a node from the first stack, and push it to the second stack.</li><li>Then push its left child followed by its right child to the first stack.</li><li>Repeat step <b>2)</b> and <b>3)</b> until the first stack is empty.</li><li>Once done, the second stack would have all the nodes ready to be traversed in post-order. Pop off the nodes from the second stack one by one and you&#8217;re done.</li></ol></div><p></p><div id="crayon-54ebc0e385fb1" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void postOrderTraversalIterativeTwoStacks(BinaryTree *root) {
  if (!root) return;
  stack&lt;BinaryTree*&gt; s;
  stack&lt;BinaryTree*&gt; output;
  s.push(root);
  while (!s.empty()) {
    BinaryTree *curr = s.top();
    output.push(curr);
    s.pop();
    if (curr-&gt;left)
      s.push(curr-&gt;left);
    if (curr-&gt;right)
      s.push(curr-&gt;right);
  }
  while (!output.empty()) {
    cout &lt;&lt; output.top()-&gt;data &lt;&lt; " ";
    output.pop();
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ebc0e385fb1-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385fb1-2">2</p><p class="crayon-num" data-line="crayon-54ebc0e385fb1-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385fb1-4">4</p><p class="crayon-num" data-line="crayon-54ebc0e385fb1-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385fb1-6">6</p><p class="crayon-num" data-line="crayon-54ebc0e385fb1-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385fb1-8">8</p><p class="crayon-num" data-line="crayon-54ebc0e385fb1-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385fb1-10">10</p><p class="crayon-num" data-line="crayon-54ebc0e385fb1-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385fb1-12">12</p><p class="crayon-num" data-line="crayon-54ebc0e385fb1-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385fb1-14">14</p><p class="crayon-num" data-line="crayon-54ebc0e385fb1-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385fb1-16">16</p><p class="crayon-num" data-line="crayon-54ebc0e385fb1-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebc0e385fb1-18">18</p><p class="crayon-num" data-line="crayon-54ebc0e385fb1-19">19</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ebc0e385fb1-1"><span class="t">void</span><span class="h"> </span><span class="e">postOrderTraversalIterativeTwoStacks</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385fb1-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebc0e385fb1-3"><span class="h">&#160;&#160;</span><span class="i">stack</span><span class="o">&lt;</span><span class="e ">BinaryTree*</span><span class="o">&gt;</span><span class="h"> </span><span class="i">s</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385fb1-4"><span class="h">&#160;&#160;</span><span class="i">stack</span><span class="o">&lt;</span><span class="e ">BinaryTree*</span><span class="o">&gt;</span><span class="h"> </span><span class="i">output</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebc0e385fb1-5"><span class="h">&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">root</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385fb1-6"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">s</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebc0e385fb1-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">curr</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">s</span><span class="sy">.</span><span class="e">top</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385fb1-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">output</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">curr</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebc0e385fb1-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385fb1-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ebc0e385fb1-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385fb1-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ebc0e385fb1-13"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385fb1-14"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ebc0e385fb1-15"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">output</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385fb1-16"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="v">output</span><span class="sy">.</span><span class="e">top</span><span class="sy">(</span><span class="sy">)</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebc0e385fb1-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">output</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebc0e385fb1-18"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ebc0e385fb1-19"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b>Complexity Analysis:</b> <br>The two-stack solution takes up more space compared to the first solution using one stack. In fact, the first solution has a space complexity of <i>O</i>(<i>h</i>), where <i>h</i> is the maximum height of the tree. The two-stack solution however, has a space complexity of <i>O</i>(<i>n</i>), where <i>n</i> is the total number of nodes.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a51">Rating: 4.8/<strong>5</strong> (73 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Binary Tree Post-Order Traversal Iterative Solution</span></span>, <span class="rating"><span class="average">4.8</span> out of <span class="best">5</span> based on <span class="votes">73</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div id="post-6" class="post-6 post type-post status-publish format-standard hentry category-uncategorized"><div class="post-content"><h1 class="posttitle">C code to count the number of words in a string</h1><p class="date"> February 13, 2010 <span>in <a href="http://leetcode.com/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Count the number of words in a string, where a word is defined to be a contiguous sequence of non-space characters.</p><p><span id="more-6"></span>eg, &#8220;Hello, my name is John.&#8221; -&gt; 5</p></blockquote><p>Hint: Take account for extra spaces at the start and end of the string, and there might be more than multiple spaces between words.</p><p>Below is a possible solution in C. The key is to note when it is in a word and when it is not; When it changes from not-in-word to in-word, increment wordCount by one.</p><p></p><div id="crayon-54e4cc598ae1b" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int countNumWords(const char *str) {
  bool inWord = false;
  int wordCount = 0;
  while (*str) {
    if (!inWord &amp;&amp; isalpha(*str)) {
      inWord = true;
      wordCount++;
    }
    else if (inWord &amp;&amp; *str == ' ') {
      inWord = false;
    }
    str++;
  }
  return wordCount;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e4cc598ae1b-1"><span class="t">int</span><span class="h"> </span><span class="e">countNumWords</span><span class="sy">(</span><span class="m">const</span><span class="h"> </span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="i">str</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e4cc598ae1b-2"><span class="h">&#160;&#160;</span><span class="t">bool</span><span class="h"> </span><span class="v">inWord</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e4cc598ae1b-3"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">wordCount</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e4cc598ae1b-4"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">*</span><span class="i">str</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e4cc598ae1b-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">inWord</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="e">isalpha</span><span class="sy">(</span><span class="o">*</span><span class="i">str</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e4cc598ae1b-6"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">inWord</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e4cc598ae1b-7"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">wordCount</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e4cc598ae1b-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e4cc598ae1b-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">inWord</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="o">*</span><span class="v">str</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="s">' '</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e4cc598ae1b-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">inWord</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e4cc598ae1b-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e4cc598ae1b-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">str</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e4cc598ae1b-13"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e4cc598ae1b-14"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">wordCount</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e4cc598ae1b-15"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a6">Rating: 4.8/<strong>5</strong> (15 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">C code to count the number of words in a string</span></span>, <span class="rating"><span class="average">4.8</span> out of <span class="best">5</span> based on <span class="votes">15</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/02/c-code-to-count-number-of-words-in.html" rel="tag">http://leetcode.com/2010/02/c-code-to-count-number-of-words-in.html</a></p></div></div></div></body><body><div><div id="post-5" class="post-5 post type-post status-publish format-standard hentry category-uncategorized"><div class="post-content"><h1 class="posttitle">C code to remove spaces from a string</h1><p class="date"> February 13, 2010 <span>in <a href="http://leetcode.com/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Write a C function to remove spaces from a string. The function header should be <br>void removeSpaces(char *str)<span id="more-5"></span></p><p>ie, &#8220;abc de&#8221; -&gt; &#8220;abcde&#8221;</p></blockquote><p>Here might be a common interview question testing your C skills:</p><p>It can be implemented in just 5 lines of code, shown below:</p><p></p><div id="crayon-54eccef7bdf49" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void removeSpace(char *str) {
  char *p1 = str, *p2 = str;
  do 
    while (*p2 == ' ')
      p2++;
  while (*p1++ = *p2++);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eccef7bdf49-1"><span class="t">void</span><span class="h"> </span><span class="e">removeSpace</span><span class="sy">(</span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="i">str</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eccef7bdf49-2"><span class="h">&#160;&#160;</span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="v">p1</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">str</span><span class="sy">,</span><span class="h"> </span><span class="o">*</span><span class="v">p2</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">str</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eccef7bdf49-3"><span class="h">&#160;&#160;</span><span class="st">do</span><span class="h"> </span></p><p class="crayon-line crayon-striped-line" id="crayon-54eccef7bdf49-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">*</span><span class="v">p2</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="s">' '</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54eccef7bdf49-5"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">p2</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eccef7bdf49-6"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">*</span><span class="i">p1</span><span class="o">++</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="o">*</span><span class="i">p2</span><span class="o">++</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eccef7bdf49-7"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>Of course, this is for illustration purpose and to show how elegant C code can be.</p><p>I probably wouldn&#8217;t program like this in the industry just for clarity sake. There are no parenthesis indicating clear scope and it&#8217;s not obvious what *p1++ means to some programmers (*p1++ is the same as *(p1++) due to ++ having higher precedence).</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a5">Rating: 3.9/<strong>5</strong> (16 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">C code to remove spaces from a string</span></span>, <span class="rating"><span class="average">3.9</span> out of <span class="best">5</span> based on <span class="votes">16</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/02/c-code-to-remove-spaces-from-string.html" rel="tag">http://leetcode.com/2010/02/c-code-to-remove-spaces-from-string.html</a></p></div></div></div></body><body><div><div class="page" id="blog-single" role="main"><div id="post-1354" class="post-1354 post type-post status-publish format-standard hentry category-uncategorized"><div class="post-content"><h1 class="posttitle">Clone Graph Part I</h1><p class="date"> May 30, 2012 <span>in <a href="http://leetcode.com/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Clone a graph. Input is a Node pointer. Return the Node pointer of the cloned graph.<br> <span id="more-1354"></span></p><p>A graph is defined below:<br> struct Node {<br> vector<node> neighbors;<br> }</node></p></blockquote><p><strong>Hint:</strong><br> There are two main ways to traverse a graph. Do you still remember them? Could you tell if the graph is directed or undirected?</p><p><strong>Solution:</strong><br> There are two main ways to traverse a graph: <em>Breadth-first</em> or <em>Depth-first</em>. Let&#8217;s try the Breadth-first approach first, which requires a queue. For the Depth-first approach, please see Clone Graph Part II.</p><p>How does the breadth-first traversal works? Easy, as we pop a node off the queue, we copy each of its neighbors, and push them to the queue.</p><p>A straight forward breadth-first traversal seemed to work. But some details are still missing. For example, how do we connect the nodes of the cloned graph?</p><p>Before we continue, we first need to make sure if the graph is directed or not. If you notice how Node is defined above, it is quite obvious that the graph is a directed graph. Why?</p><p>For example, A can have a neighbor called B. Therefore, we may traverse from A to B. An undirected graph implies that B can always traverse back to A. Is it true here? No, because whether B could traverse back to A depends if one of B&#8217;s neighbor is A.</p><p>The fact that B can traverse back to A implies that the graph may contain a cycle. You must take extra care to handle this case. Imagine that you finished implementing without considering this case, and later being pointed out by your interviewer that your code has an infinite loop, yuck!</p><p>Let&#8217;s analyze this further by using the below example:</p><div> <a href="http://www.leetcode.com/wp-content/uploads/2012/05/graph.png"><img src="http://www.leetcode.com/wp-content/uploads/2012/05/graph.png" alt="" title="graph" width="211" height="84" class="aligncenter size-full wp-image-1365"></a><span>A simple graph</span></div><p>Assume that the starting point of the graph is A. First, you make a copy of node A (A2), and found that A has only one neighbor B. You make a copy of B (B2) and connects A2-&gt;B2 by pushing B2 as A2&#8242;s neighbor. Next, you find that B has A as neighbor, which you have already made a copy of. Here, we have to be careful not to make a copy of A again, but to connect B2-&gt;A2 by pushing A2 as B2&#8242;s neighbor. But, how do we know if a node has already been copied?</p><p>Easy, we could use a hash table! As we copy a node, we insert it into the table. If we later find that one of a node&#8217;s neighbor is already in the table, we do not make a copy of that neighbor, but to push its neighbor&#8217;s copy to its copy instead. Therefore, the hash table would need to store a mapping of key-value pairs, where the key is a node in the original graph and its value is the node&#8217;s copy.</p><p>Let&#8217;s implement the code!</p><p></p><div id="crayon-54e8b15e2561b" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
typedef unordered_map&lt;Node *, Node *&gt; Map;

Node *clone(Node *graph) {
    if (!graph) return NULL;

    Map map;
    queue&lt;Node *&gt; q;
    q.push(graph);

    Node *graphCopy = new Node();
    map[graph] = graphCopy;

    while (!q.empty()) {
        Node *node = q.front();
        q.pop();
        int n = node-&gt;neighbors.size();
        for (int i = 0; i &lt; n; i++) {
            Node *neighbor = node-&gt;neighbors[i];
            // no copy exists
            if (map.find(neighbor) == map.end()) {
                Node *p = new Node();
                map[node]-&gt;neighbors.push_back(p);
                map[neighbor] = p;
                q.push(neighbor);
            } else {     // a copy already exists
                map[node]-&gt;neighbors.push_back(map[neighbor]);
            }
        }
    }

    return graphCopy;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54e8b15e2561b-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8b15e2561b-2">2</p><p class="crayon-num" data-line="crayon-54e8b15e2561b-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8b15e2561b-4">4</p><p class="crayon-num" data-line="crayon-54e8b15e2561b-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8b15e2561b-6">6</p><p class="crayon-num" data-line="crayon-54e8b15e2561b-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8b15e2561b-8">8</p><p class="crayon-num" data-line="crayon-54e8b15e2561b-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8b15e2561b-10">10</p><p class="crayon-num" data-line="crayon-54e8b15e2561b-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8b15e2561b-12">12</p><p class="crayon-num" data-line="crayon-54e8b15e2561b-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8b15e2561b-14">14</p><p class="crayon-num" data-line="crayon-54e8b15e2561b-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8b15e2561b-16">16</p><p class="crayon-num" data-line="crayon-54e8b15e2561b-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8b15e2561b-18">18</p><p class="crayon-num" data-line="crayon-54e8b15e2561b-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8b15e2561b-20">20</p><p class="crayon-num" data-line="crayon-54e8b15e2561b-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8b15e2561b-22">22</p><p class="crayon-num" data-line="crayon-54e8b15e2561b-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8b15e2561b-24">24</p><p class="crayon-num" data-line="crayon-54e8b15e2561b-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8b15e2561b-26">26</p><p class="crayon-num" data-line="crayon-54e8b15e2561b-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8b15e2561b-28">28</p><p class="crayon-num" data-line="crayon-54e8b15e2561b-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8b15e2561b-30">30</p><p class="crayon-num" data-line="crayon-54e8b15e2561b-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8b15e2561b-32">32</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e8b15e2561b-1"><span class="r">typedef</span><span class="h"> </span><span class="i">unordered_map</span><span class="o">&lt;</span><span class="e ">Node *</span><span class="sy">,</span><span class="h"> </span><span class="e ">Node *</span><span class="o">&gt;</span><span class="h"> </span><span class="i">Map</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8b15e2561b-2">&#160;</p><p class="crayon-line" id="crayon-54e8b15e2561b-3"><span class="e ">Node *</span><span class="r">clone</span><span class="sy">(</span><span class="e ">Node *</span><span class="i">graph</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8b15e2561b-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">graph</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8b15e2561b-5">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54e8b15e2561b-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">Map </span><span class="i">map</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8b15e2561b-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">queue</span><span class="o">&lt;</span><span class="e ">Node *</span><span class="o">&gt;</span><span class="h"> </span><span class="i">q</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8b15e2561b-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">q</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">graph</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8b15e2561b-9">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54e8b15e2561b-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e ">Node *</span><span class="v">graphCopy</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="r">new</span><span class="h"> </span><span class="e">Node</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8b15e2561b-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">map</span><span class="sy">[</span><span class="i">graph</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">graphCopy</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8b15e2561b-12">&#160;</p><p class="crayon-line" id="crayon-54e8b15e2561b-13"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">q</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8b15e2561b-14"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="e ">Node *</span><span class="v">node</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">q</span><span class="sy">.</span><span class="e">front</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8b15e2561b-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">q</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8b15e2561b-16"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">n</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">node</span><span class="o">-&gt;</span><span class="v">neighbors</span><span class="sy">.</span><span class="e">size</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8b15e2561b-17"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8b15e2561b-18"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="e ">Node *</span><span class="v">neighbor</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">node</span><span class="o">-&gt;</span><span class="v">neighbors</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8b15e2561b-19"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="c">// no copy exists</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8b15e2561b-20"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">map</span><span class="sy">.</span><span class="e">find</span><span class="sy">(</span><span class="i">neighbor</span><span class="sy">)</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="v">map</span><span class="sy">.</span><span class="st">end</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e8b15e2561b-21"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="e ">Node *</span><span class="v">p</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="r">new</span><span class="h"> </span><span class="e">Node</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8b15e2561b-22"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">map</span><span class="sy">[</span><span class="i">node</span><span class="sy">]</span><span class="o">-&gt;</span><span class="v">neighbors</span><span class="sy">.</span><span class="e">push_back</span><span class="sy">(</span><span class="i">p</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8b15e2561b-23"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">map</span><span class="sy">[</span><span class="i">neighbor</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8b15e2561b-24"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">q</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">neighbor</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8b15e2561b-25"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span><span class="h">&#160;&#160;&#160;&#160; </span><span class="c">// a copy already exists</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8b15e2561b-26"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">map</span><span class="sy">[</span><span class="i">node</span><span class="sy">]</span><span class="o">-&gt;</span><span class="v">neighbors</span><span class="sy">.</span><span class="e">push_back</span><span class="sy">(</span><span class="v">map</span><span class="sy">[</span><span class="i">neighbor</span><span class="sy">]</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8b15e2561b-27"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8b15e2561b-28"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e8b15e2561b-29"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8b15e2561b-30">&#160;</p><p class="crayon-line" id="crayon-54e8b15e2561b-31"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">graphCopy</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8b15e2561b-32"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a1354">Rating: 4.5/<strong>5</strong> (111 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Clone Graph Part I</span></span>, <span class="rating"><span class="average">4.5</span> out of <span class="best">5</span> based on <span class="votes">111</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><p class="alignright"></p><h3>Source</h3><p><a href="http://leetcode.com/2012/05/clone-graph-part-i.html" rel="tag">http://leetcode.com/2012/05/clone-graph-part-i.html</a></p></div></div><p id="respond"></p><h3 id="reply-title">Leave a reply <small></small></h3><div id="trackbacks"><h3>3 trackbacks</h3><ul id="trackbacklist"><li> <em>on August 8, 2014</em></li><li> <em>on October 8, 2014</em></li><li> <em>on February 12, 2015</em></li></ul></div></div></div></body><body><div><div class="post-content"><h1 class="posttitle">Coins in a Line</h1><p class="date"> February 9, 2011 <span>in <a href="http://leetcode.com/category/dynamic-programming" title="View all posts in dynamic programming" rel="category tag">dynamic programming</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>There are <em>n</em> coins in a line. (Assume <em>n</em> is even). Two players take turns to take a coin from one of the ends of the line until there are no more coins left. The player with the larger amount of money wins.</p><ol><li>Would you rather go first or second? Does it matter?</li><li>Assume that you go first, describe an algorithm to compute the maximum amount of money you can win.</li></ol></blockquote><p><span id="more-83"></span><br> This is an interesting problem itself, and different solutions from multiple perspectives are provided in this post.</p><div class="separator"><a href="http://1.bp.blogspot.com/_UElib2WLeDE/TVJ1kloofTI/AAAAAAAACdQ/SMgDB3scuFE/s1600/american_coins.jpg"><img src="http://1.bp.blogspot.com/_UElib2WLeDE/TVJ1kloofTI/AAAAAAAACdQ/SMgDB3scuFE/s1600/american_coins.jpg" border="0" alt=""></a></div><div><span><a href="http://en.wikipedia.org/wiki/Coins_of_the_United_States_dollar">U.S. coins</a> in various denominations in a line. Two players take turn to pick a coin from one of the ends until no more coins are left. Whoever with the larger amount of money wins.</span></div><p><strong>Hints:</strong><br> If you go first, is there a strategy you can follow which prevents you from losing? Try to consider how it matters when the number of coins are odd vs. even.</p><p><strong>Solution for (1):</strong><br> Going first will guarantee that you will not lose. By following the strategy below, you will always win the game (or get a possible tie).</p><div class="hiblock"><ul><li>Count the sum of all coins that are odd-numbered. (Call this <strong>X</strong>)</li><li>Count the sum of all coins that are even-numbered. (Call this <strong>Y</strong>)</li><li>If <strong>X</strong> &gt; <strong>Y</strong>, take the left-most coin first. Choose all odd-numbered coins in subsequent moves.</li><li>If <strong>X</strong> Y, take the right-most coin first. Choose all even-numbered coins in subsequent moves.</li><li>If <strong>X</strong> == <strong>Y</strong>, you will guarantee to get a tie if you stick with taking only even-numbered/odd-numbered coins.</li></ul></div><p>You might be wondering how you can always choose odd-numbered/even-numbered coins. Let me illustrate this using an example where you have 10 coins:</p><p>If you take the coin numbered 1 (the left-most coin), your opponent can only have the choice of taking coin numbered 2 or 10 (which are both even-numbered coins). On the other hand, if you choose to take the coin numbered 10 (the right-most coin), your opponent can only take coin numbered 1 or 9 (which are odd-numbered coins).</p><p>Notice that the total number of coins change from even to odd and vice-versa when player takes turn each time. Therefore, by going first and depending on the coin you choose, you are essentially forcing your opponent to take either only even-numbered or odd-numbered coins.</p><p>Now that you have found a non-losing strategy, could you compute the maximum amount of money you can win?</p><p><strong>Hints:</strong><br> One misconception is to think that the above non-losing strategy would generate the maximum amount of money as well. This is probably incorrect. Could you find a counter example? (You might need at least 6 coins to find a counter example).</p><p>Assume that you are finding the maximum amount of money in a certain range (ie, from coins numbered i to j, inclusive). Could you express it as a recursive formula? Find ways to make it as efficient as possible.</p><p><strong>Solution for (2):</strong><br> Although the simple strategy illustrated in <strong>Solution (1)</strong> guarantees you not to lose, it does not guarantee that it is optimal in any way.</p><p>Here, we use a good counter example to better see why this is so. Assume the coins are laid out as below:</p><pre><strong>{ 3, 2, 2, 3, 1, 2 }</strong></pre><p>Following our previous non-losing strategy, we would count the sum of odd-numbered coins, <strong>X</strong> = 3 + 2 + 1 = <strong>6</strong>, and the sum of even-numbered coins, <strong>Y</strong> = 2 + 3 + 2 = <strong>7</strong>. As <strong>Y</strong> &gt; <strong>X</strong>, we would take the last coin first and end up winning with the total amount of <strong>7</strong> by taking only even-numbered coins.</p><p>However, let us try another way by taking the first coin (valued at 3, denote by <strong>(3)</strong>) instead. The opponent is left with two possible choices, the left coin <strong>(2)</strong> and the right coin <strong>(2)</strong>, both valued at 2. No matter which coin the opponent chose, you can always take the other coin <strong>(2)</strong> next and the configuration of the coins becomes: <strong>{ 2, 3, 1 }</strong>. Now, the coin in the middle <strong>(3)</strong> would be yours to keep for sure. Therefore, you win the game by a total amount of 3 + 2 + 3 = <strong>8</strong>, which proves that the previous non-losing strategy is not necessarily optimal.</p><p>To solve this problem in an optimal way, we need to find efficient means in enumerating all possibilities. This is when <a href="http://www.leetcode.com/search/label/dynamic%20programming">Dynamic Programming</a> (DP) kicks in and become so powerful that you start to feel magical.</p><p>First, we would need some observations to establish a recurrence relation, which is essential as our first step in solving DP problems.</p><div class="separator"><a href="http://4.bp.blogspot.com/_UElib2WLeDE/TVJNJgjHawI/AAAAAAAACdI/phIGr-4o_JM/s1600/coins.png"><img src="http://4.bp.blogspot.com/_UElib2WLeDE/TVJNJgjHawI/AAAAAAAACdI/phIGr-4o_JM/s400/coins.png" border="0" alt="" width="400" height="66"></a></div><p><span>The remaining coins are { A<sub>i</sub> &#8230; A<sub>j</sub> } and it is your turn. Let P(i, j) denotes the maximum amount of money you can get. Should you choose A<sub>i</sub> or A<sub>j</sub>?</span></p><p>Assume that P(i, j) denotes the maximum amount of money you can win when the remaining coins are { A<sub>i</sub>, &#8230;, A<sub>j</sub> }, and it is your turn now. You have two choices, either take A<sub>i</sub> or A<sub>j</sub>. First, let us focus on the case where you take A<sub>i</sub>, so that the remaining coins become { A<sub>i+1</sub> &#8230; A<sub>j</sub> }. Since the opponent is as smart as you, he must choose the best way that yields the maximum for him, where the maximum amount he can get is denoted by P(i+1, j).</p><p>Therefore, if you choose A<sub>i</sub>, the maximum amount you can get is:</p><pre>P<sub>1</sub> = Sum{A<sub>i</sub> ... A<sub>j</sub>} - P(i+1, j)</pre><p>Similarly, if you choose A<sub>j</sub>, the maximum amount you can get is:</p><pre>P<sub>2</sub> = Sum{A<sub>i</sub> ... A<sub>j</sub>} - P(i, j-1)</pre><p>Therefore,</p><pre>P(<em>i</em>, <em>j</em>) = max { P<sub>1</sub>, P<sub>2</sub> }
        = max { Sum{A<sub>i</sub> ... A<sub>j</sub>} - P(i+1, j),
                Sum{A<sub>i</sub> ... A<sub>j</sub>} - P(i, j-1) }</pre><p>In fact, we are able to simplify the above relation further to (Why?):</p><pre>P(i, j) = Sum{A<sub>i</sub> ... A<sub>j</sub>} - min { P(i+1, j), P(i, j-1) }</pre><p>Although the above recurrence relation is easy to understand, we need to compute the value of Sum{A<sub>i</sub> &#8230; A<sub>j</sub>} in each step, which is not very efficient. To avoid this problem, we can store values of Sum{A<sub>i</sub> &#8230; A<sub>j</sub>} in a table and avoid re-computations by computing in a certain order. Try to figure this out by yourself. (Hint: You would first compute P(1,1), P(2,2), &#8230; P(<em>n</em>, <em>n</em>) and work your way up).</p><p><strong>A Better Solution:</strong><br> There is another solution which does not rely on computing and storing results of Sum{A<sub>i</sub> &#8230; A<sub>j</sub>}, therefore is more efficient in terms of time and space. Let us rewind back to the case where you take A<sub>i</sub>, and the remaining coins become { A<sub>i+1</sub> &#8230; A<sub>j</sub> }.</p><div class="separator"><a href="http://4.bp.blogspot.com/_UElib2WLeDE/TVJUaw3myeI/AAAAAAAACdM/-zYRDclcIlI/s1600/coins2.png"><img src="http://4.bp.blogspot.com/_UElib2WLeDE/TVJUaw3myeI/AAAAAAAACdM/-zYRDclcIlI/s400/coins2.png" border="0" alt="" width="400" height="67"></a></div><p><span>You took </span><span>A<sub>i</sub></span><span> from the coins { </span><span>A<sub>i</sub></span><span> &#8230; </span><span>A<sub>j</sub></span><span> }. The opponent will choose either </span><span>A<sub>i+1</sub></span><span> or </span><span>A<sub>j</sub></span><span>. Which one would he choose?</span></p><p>Let us look one extra step ahead this time by considering the two coins the opponent will possibly take, A<sub>i+1</sub> and A<sub>j</sub>. If the opponent takes A<sub>i+1</sub>, the remaining coins are { A<sub>i+2</sub> &#8230; A<sub>j</sub> }, which our maximum is denoted by P(i+2, j). On the other hand, if the opponent takes A<sub>j</sub>, our maximum is P(i+1, j-1). Since the opponent is as smart as you, he would have chosen the choice that yields the minimum amount to you.</p><p>Therefore, the maximum amount you can get when you choose A<sub>i</sub> is:</p><pre>P<sub>1</sub> = A<sub>i</sub> + min { P(i+2, j), P(i+1, j-1) }</pre><p>Similarly, the maximum amount you can get when you choose A<sub>j</sub> is:</p><pre>P<sub>2</sub> = A<sub>j</sub> + min { P(i+1, j-1), P(i, j-2) }</pre><p>Therefore,</p><pre>P(i, j) = max { P<sub>1</sub>, P<sub>2</sub> }
        = max { A<sub>i</sub> + min { P(i+2, j),   P(i+1, j-1) },
                A<sub>j</sub> + min { P(i+1, j-1), P(i,   j-2) } }</pre><p>Although the above recurrence relation could be implemented in few lines of code, its complexity is exponential. The reason is that each recursive call branches into a total of four separate recursive calls, and it could be <em>n</em> levels deep from the very first call). Memoization provides an efficient way by avoiding re-computations using intermediate results stored in a table. Below is the code which runs in <em>O</em>(<em>n</em><sup>2</sup>) time and takes <em>O</em>(<em>n</em><sup>2</sup>) space.</p><p><span><strong>Edit:</strong></span><br> Updated code with a new function <em>printMoves </em>which prints out all the moves you and the opponent make (assuming both of you are taking the coins in an optimal way).</p><div id="crayon-54ebf1625a5bc" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
const int MAX_N = 100;

void printMoves(int P[][MAX_N], int A[], int N) {
  int sum1 = 0, sum2 = 0;
  int m = 0, n = N-1;
  bool myTurn = true;
  while (m &lt;= n) {
    int P1 = P[m+1][n]; // If take A[m], opponent can get...
    int P2 = P[m][n-1]; // If take A[n]
    cout &lt;&lt; (myTurn ? "I" : "You") &lt;&lt; " take coin no. ";
    if (P1 &lt;= P2) {
      cout &lt;&lt; m+1 &lt;&lt; " (" &lt;&lt; A[m] &lt;&lt; ")";
      m++;
    } else {
      cout &lt;&lt; n+1 &lt;&lt; " (" &lt;&lt; A[n] &lt;&lt; ")";
      n--;
    }
    cout &lt;&lt; (myTurn ? ", " : ".\n");
    myTurn = !myTurn;
  }
  cout &lt;&lt; "\nThe total amount of money (maximum) I get is " &lt;&lt; P[0][N-1] &lt;&lt; ".\n";
}

int maxMoney(int A[], int N) {
  int P[MAX_N][MAX_N] = {0};
  int a, b, c;
  for (int i = 0; i &lt; N; i++) {
    for (int m = 0, n = i; n &lt; N; m++, n++) {
      assert(m &lt; N); assert(n &lt; N);
      a = ((m+2 &lt;= N-1)             ? P[m+2][n] : 0);
      b = ((m+1 &lt;= N-1 &amp;&amp; n-1 &gt;= 0) ? P[m+1][n-1] : 0);
      c = ((n-2 &gt;= 0)               ? P[m][n-2] : 0);
      P[m][n] = max(A[m] + min(a,b),
                    A[n] + min(b,c));
    }
  }
  printMoves(P, A, N);
  return P[0][N-1];
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ebf1625a5bc-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-2">2</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-4">4</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-6">6</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-8">8</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-10">10</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-12">12</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-14">14</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-16">16</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-18">18</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-20">20</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-22">22</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-24">24</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-26">26</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-28">28</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-30">30</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-32">32</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-34">34</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-36">36</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1625a5bc-38">38</p><p class="crayon-num" data-line="crayon-54ebf1625a5bc-39">39</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ebf1625a5bc-1"><span class="m">const</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">MAX_N</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">100</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-2">&#160;</p><p class="crayon-line" id="crayon-54ebf1625a5bc-3"><span class="t">void</span><span class="h"> </span><span class="e">printMoves</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">P</span><span class="sy">[</span><span class="sy">]</span><span class="sy">[</span><span class="i">MAX_N</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">N</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-4"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">sum1</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="v">sum2</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1625a5bc-5"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">m</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="v">n</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">N</span><span class="o">-</span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-6"><span class="h">&#160;&#160;</span><span class="t">bool</span><span class="h"> </span><span class="v">myTurn</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1625a5bc-7"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">m</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">P1</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">P</span><span class="sy">[</span><span class="i">m</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="i">n</span><span class="sy">]</span><span class="sy">;</span><span class="h"> </span><span class="c">// If take A[m], opponent can get...</span></p><p class="crayon-line" id="crayon-54ebf1625a5bc-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">P2</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">P</span><span class="sy">[</span><span class="i">m</span><span class="sy">]</span><span class="sy">[</span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">;</span><span class="h"> </span><span class="c">// If take A[n]</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="sy">(</span><span class="i">myTurn</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="s">"I"</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="s">"You"</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" take coin no. "</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1625a5bc-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">P1</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">P2</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">m</span><span class="o">+</span><span class="cn">1</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" ("</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">m</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">")"</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1625a5bc-13"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">m</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebf1625a5bc-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">n</span><span class="o">+</span><span class="cn">1</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" ("</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">n</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">")"</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-16"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">n</span><span class="o">--</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1625a5bc-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-18"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="sy">(</span><span class="i">myTurn</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="s">", "</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="s">".\n"</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1625a5bc-19"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">myTurn</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="o">!</span><span class="i">myTurn</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-20"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ebf1625a5bc-21"><span class="h">&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">"\nThe total amount of money (maximum) I get is "</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="v">P</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="sy">[</span><span class="i">N</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">".\n"</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-22"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ebf1625a5bc-23">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-24"><span class="t">int</span><span class="h"> </span><span class="e">maxMoney</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">N</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebf1625a5bc-25"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">P</span><span class="sy">[</span><span class="i">MAX_N</span><span class="sy">]</span><span class="sy">[</span><span class="i">MAX_N</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">{</span><span class="cn">0</span><span class="sy">}</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-26"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="i">a</span><span class="sy">,</span><span class="h"> </span><span class="i">b</span><span class="sy">,</span><span class="h"> </span><span class="i">c</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1625a5bc-27"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">N</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-28"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">m</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="v">n</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">i</span><span class="sy">;</span><span class="h"> </span><span class="i">n</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">N</span><span class="sy">;</span><span class="h"> </span><span class="i">m</span><span class="o">++</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebf1625a5bc-29"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">assert</span><span class="sy">(</span><span class="i">m</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">N</span><span class="sy">)</span><span class="sy">;</span><span class="h"> </span><span class="st">assert</span><span class="sy">(</span><span class="i">n</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">N</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-30"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">a</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">m</span><span class="o">+</span><span class="cn">2</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">N</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="sy">?</span><span class="h"> </span><span class="v">P</span><span class="sy">[</span><span class="i">m</span><span class="o">+</span><span class="cn">2</span><span class="sy">]</span><span class="sy">[</span><span class="i">n</span><span class="sy">]</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1625a5bc-31"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">b</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">m</span><span class="o">+</span><span class="cn">1</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">N</span><span class="o">-</span><span class="cn">1</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="v">P</span><span class="sy">[</span><span class="i">m</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-32"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">c</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">n</span><span class="o">-</span><span class="cn">2</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="sy">?</span><span class="h"> </span><span class="v">P</span><span class="sy">[</span><span class="i">m</span><span class="sy">]</span><span class="sy">[</span><span class="i">n</span><span class="o">-</span><span class="cn">2</span><span class="sy">]</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1625a5bc-33"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">P</span><span class="sy">[</span><span class="i">m</span><span class="sy">]</span><span class="sy">[</span><span class="i">n</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">max</span><span class="sy">(</span><span class="v">A</span><span class="sy">[</span><span class="i">m</span><span class="sy">]</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="e">min</span><span class="sy">(</span><span class="i">a</span><span class="sy">,</span><span class="i">b</span><span class="sy">)</span><span class="sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-34"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">A</span><span class="sy">[</span><span class="i">n</span><span class="sy">]</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="e">min</span><span class="sy">(</span><span class="i">b</span><span class="sy">,</span><span class="i">c</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1625a5bc-35"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-36"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ebf1625a5bc-37"><span class="h">&#160;&#160;</span><span class="e">printMoves</span><span class="sy">(</span><span class="i">P</span><span class="sy">,</span><span class="h"> </span><span class="i">A</span><span class="sy">,</span><span class="h"> </span><span class="i">N</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1625a5bc-38"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="v">P</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="sy">[</span><span class="i">N</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1625a5bc-39"><span class="sy">}</span></p></div></td></tr></table></div></div><p><span><strong>Further Thoughts:</strong></span><br> Assume that your opponent is so dumb that you are able to manipulate him into choosing the coins you want him to choose. Now, what is the maximum possible amount of money you can win?</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a83">Rating: 4.8/<strong>5</strong> (32 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Coins in a Line</span></span>, <span class="rating"><span class="average">4.8</span> out of <span class="best">5</span> based on <span class="votes">32</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2011/02/coins-in-line.html" rel="tag">http://leetcode.com/2011/02/coins-in-line.html</a></p></div></div></body><body><div><div id="post-612" class="post-612 post type-post status-publish format-standard hentry category-binary-tree"><div class="post-content"><h1 class="posttitle">Construct Binary Tree From Inorder and Preorder/Postorder Traversal</h1><p class="date"> April 20, 2011 <span>in <a href="http://leetcode.com/category/binary-tree" title="View all posts in binary tree" rel="category tag">binary tree</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Given preorder and inorder traversal of a tree, construct the binary tree.</p></blockquote><p><span id="more-612"></span><br> <strong>Hint:</strong><br> A good way to attempt this question is to work backwards. Approach this question by drawing a binary tree, then list down its preorder and inorder traversal. As most binary tree problems, you want to solve this recursively.</p><p><strong>About Duplicates:</strong><br> In this solution, we will assume that duplicates are not allowed in the binary tree. Why?</p><p>Consider the following case:</p><pre>preorder = {<span>7</span>, <span>7</span>}
inorder = {<span>7</span>, <span>7</span>}</pre><p>We can construct the following trees which are both perfectly valid solutions.</p><pre>  <span>7</span>                     <span>7</span>
 /           <strong>or</strong>          \
<span>7</span>                         <span>7</span></pre><p>Clearly, there would be ambiguity in constructing the tree if duplicates were allowed.</p><p><strong>Solution:</strong><br> Let us look at this example tree.</p><pre>        _______<span>7</span>______
       /              \
    __<span>10</span>__          ___<span>2</span>
   /      \        /
   <span>4</span>       <span>3</span>      _<span>8</span>
            \    /
             <span>1</span>  <span>11</span></pre><p>The preorder and inorder traversals for the binary tree above is:</p><pre>preorder = {<span>7</span>,<span>10</span>,<span>4</span>,<span>3</span>,<span>1</span>,<span>2</span>,<span>8</span>,<span>11</span>}
inorder = {<span>4</span>,<span>10</span>,<span>3</span>,<span>1</span>,<span>7</span>,<span>11</span>,<span>8</span>,<span>2</span>}</pre><p>The crucial observation to this problem is <em>the tree&#8217;s root always coincides with the first element in preorder traversal</em>. This must be true because in preorder traversal you always traverse the root node before its children. The root node&#8217;s value appear to be <strong><span>7</span></strong> from the binary tree above.</p><p>We easily find that <strong><span>7</span></strong> appears as the 4<sup>th</sup> index in the inorder sequence. (Notice that earlier we assumed that duplicates are not allowed in the tree, so there would be no ambiguity). For inorder traversal, we visit the left subtree first, then root node, and followed by the right subtree. Therefore, all elements left of <strong><span>7</span></strong> must be in the left subtree and all elements to the right must be in the right subtree.</p><p>We see a clear recursive pattern from the above observation. After creating the root node (<strong><span>7</span></strong>), we construct its left and right subtree from inorder traversal of {<span>4</span>, <span>10</span>, <span>3</span>, <span>1</span>} and {<span>11</span>, <span>8</span>, <span>2</span>} respectively. We also need its corresponding preorder traversal which could be found in a similar fashion. If you remember, preorder traversal follows the sequence of root node, left subtree and followed by right subtree. Therefore, the left and right subtree&#8217;s postorder traversal must be {<span>10</span>, <span>4</span>, <span>3</span>, <span>1</span>} and {<span>2</span>, <span>8</span>, <span>11</span>} respectively. Since the left and right subtree are binary trees in their own right, we can solve recursively!</p><p>We left out some details on how we search the root value&#8217;s index in the inorder sequence. How about a simple <em>linear search</em>? If we assume that the constructed binary tree is always balanced, then we can guarantee the run time complexity to be O(<em>N</em> log <em>N</em>), where <em>N</em> is the number of nodes. However, this is not necessarily the case and the constructed binary tree can be skewed to the left/right, which has the worst complexity of O(<em>N</em><sup>2</sup>).</p><p>A more efficient way is to eliminate the search by using an efficient look-up mechanism such as <em>hash table</em>. By hashing an element&#8217;s value to its corresponding index in the inorder sequence, we can do look-ups in constant time. Now, we need only O(<em>N</em>) time to construct the tree, which theoretically is the most efficient way.</p><p>For illustration purpose, the below code uses a simple array for table look-up, which is restricted to elements of 0 to 255 only. You should be able to extend it easily to use a hash table.</p><div id="crayon-54ecce6bde594" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
const int MAX = 256;
// a fast lookup for inorder's element -&gt; index
// binary tree's element must be in the range of [0, MAX-1]
int mapIndex[MAX];
void mapToIndices(int inorder[], int n) {
  for (int i = 0; i &lt; n; i++) {
    assert(0 &lt;= inorder[i] &amp;&amp; inorder[i] &lt;= MAX-1);
    mapIndex[inorder[i]] = i;
  }
}

// precondition: mapToIndices must be called before entry
Node *buildInorderPreorder(int in[], int pre[], int n, int offset) {
  assert(n &gt;= 0);
  if (n == 0) return NULL;
  int rootVal = pre[0];
  int i = mapIndex[rootVal]-offset;  // the divider's index
  Node *root = new Node(rootVal);
  root-&gt;left = buildInorderPreorder(in, pre+1, i, offset);
  root-&gt;right = buildInorderPreorder(in+i+1, pre+i+1, n-i-1, offset+i+1);
  return root;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ecce6bde594-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecce6bde594-2">2</p><p class="crayon-num" data-line="crayon-54ecce6bde594-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecce6bde594-4">4</p><p class="crayon-num" data-line="crayon-54ecce6bde594-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecce6bde594-6">6</p><p class="crayon-num" data-line="crayon-54ecce6bde594-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecce6bde594-8">8</p><p class="crayon-num" data-line="crayon-54ecce6bde594-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecce6bde594-10">10</p><p class="crayon-num" data-line="crayon-54ecce6bde594-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecce6bde594-12">12</p><p class="crayon-num" data-line="crayon-54ecce6bde594-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecce6bde594-14">14</p><p class="crayon-num" data-line="crayon-54ecce6bde594-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecce6bde594-16">16</p><p class="crayon-num" data-line="crayon-54ecce6bde594-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecce6bde594-18">18</p><p class="crayon-num" data-line="crayon-54ecce6bde594-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecce6bde594-20">20</p><p class="crayon-num" data-line="crayon-54ecce6bde594-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecce6bde594-22">22</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecce6bde594-1"><span class="m">const</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">MAX</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">256</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecce6bde594-2"><span class="c">// a fast lookup for inorder's element -&gt; index</span></p><p class="crayon-line" id="crayon-54ecce6bde594-3"><span class="c">// binary tree's element must be in the range of [0, MAX-1]</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecce6bde594-4"><span class="t">int</span><span class="h"> </span><span class="v">mapIndex</span><span class="sy">[</span><span class="i">MAX</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecce6bde594-5"><span class="t">void</span><span class="h"> </span><span class="e">mapToIndices</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">inorder</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecce6bde594-6"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecce6bde594-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">assert</span><span class="sy">(</span><span class="cn">0</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="v">inorder</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="v">inorder</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">MAX</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecce6bde594-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">mapIndex</span><span class="sy">[</span><span class="v">inorder</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">i</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecce6bde594-9"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecce6bde594-10"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecce6bde594-11">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ecce6bde594-12"><span class="c">// precondition: mapToIndices must be called before entry</span></p><p class="crayon-line" id="crayon-54ecce6bde594-13"><span class="e ">Node *</span><span class="e">buildInorderPreorder</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="st">in</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">pre</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">offset</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecce6bde594-14"><span class="h">&#160;&#160;</span><span class="st">assert</span><span class="sy">(</span><span class="i">n</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecce6bde594-15"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">n</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecce6bde594-16"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">rootVal</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">pre</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecce6bde594-17"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">mapIndex</span><span class="sy">[</span><span class="i">rootVal</span><span class="sy">]</span><span class="o">-</span><span class="i">offset</span><span class="sy">;</span><span class="h">&#160;&#160;</span><span class="c">// the divider's index</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecce6bde594-18"><span class="h">&#160;&#160;</span><span class="e ">Node *</span><span class="v">root</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="r">new</span><span class="h"> </span><span class="e">Node</span><span class="sy">(</span><span class="i">rootVal</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecce6bde594-19"><span class="h">&#160;&#160;</span><span class="i">root</span><span class="o">-&gt;</span><span class="v">left</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">buildInorderPreorder</span><span class="sy">(</span><span class="st">in</span><span class="sy">,</span><span class="h"> </span><span class="i">pre</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">i</span><span class="sy">,</span><span class="h"> </span><span class="i">offset</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecce6bde594-20"><span class="h">&#160;&#160;</span><span class="i">root</span><span class="o">-&gt;</span><span class="v">right</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">buildInorderPreorder</span><span class="sy">(</span><span class="st">in</span><span class="o">+</span><span class="i">i</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">pre</span><span class="o">+</span><span class="i">i</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="i">i</span><span class="o">-</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">offset</span><span class="o">+</span><span class="i">i</span><span class="o">+</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecce6bde594-21"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">root</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecce6bde594-22"><span class="sy">}</span></p></div></td></tr></table></div></div><p>Now, if we are given<em> inorder and postorder</em> traversal, can we construct the binary tree?</p><p>The answer is yes, using very similar approach as above. Below is the code:</p><div id="crayon-54ecce6bde650" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
// precondition: mapToIndices must be called before entry
Node *buildInorderPostorder(int in[], int post[], int n, int offset) {
  assert(n &gt;= 0);
  if (n == 0) return NULL;
  int rootVal = post[n-1];
  int i = mapIndex[rootVal]-offset;  // the divider's index
  Node *root = new Node(rootVal);
  root-&gt;left = buildInorderPostorder(in, post, i, offset);
  root-&gt;right = buildInorderPostorder(in+i+1, post+i, n-i-1, offset+i+1);
  return root;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecce6bde650-1"><span class="c">// precondition: mapToIndices must be called before entry</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecce6bde650-2"><span class="e ">Node *</span><span class="e">buildInorderPostorder</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="st">in</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">post</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">offset</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecce6bde650-3"><span class="h">&#160;&#160;</span><span class="st">assert</span><span class="sy">(</span><span class="i">n</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecce6bde650-4"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">n</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecce6bde650-5"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">rootVal</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">post</span><span class="sy">[</span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecce6bde650-6"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">mapIndex</span><span class="sy">[</span><span class="i">rootVal</span><span class="sy">]</span><span class="o">-</span><span class="i">offset</span><span class="sy">;</span><span class="h">&#160;&#160;</span><span class="c">// the divider's index</span></p><p class="crayon-line" id="crayon-54ecce6bde650-7"><span class="h">&#160;&#160;</span><span class="e ">Node *</span><span class="v">root</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="r">new</span><span class="h"> </span><span class="e">Node</span><span class="sy">(</span><span class="i">rootVal</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecce6bde650-8"><span class="h">&#160;&#160;</span><span class="i">root</span><span class="o">-&gt;</span><span class="v">left</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">buildInorderPostorder</span><span class="sy">(</span><span class="st">in</span><span class="sy">,</span><span class="h"> </span><span class="i">post</span><span class="sy">,</span><span class="h"> </span><span class="i">i</span><span class="sy">,</span><span class="h"> </span><span class="i">offset</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecce6bde650-9"><span class="h">&#160;&#160;</span><span class="i">root</span><span class="o">-&gt;</span><span class="v">right</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">buildInorderPostorder</span><span class="sy">(</span><span class="st">in</span><span class="o">+</span><span class="i">i</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">post</span><span class="o">+</span><span class="i">i</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="i">i</span><span class="o">-</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">offset</span><span class="o">+</span><span class="i">i</span><span class="o">+</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecce6bde650-10"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">root</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecce6bde650-11"><span class="sy">}</span></p></div></td></tr></table></div></div><p><strong><span>Further Thoughts:</span></strong></p><ol><li>If we are given <em>preorder and postorder</em> traversal, can we construct the binary tree? Why or why not?</li><li>Given<em> preorder, inorder, and postorder</em> traversal, how can you verify if these traversals are referring to the <em>exact same</em> binary tree?</li><li>Remember from my earlier post: <a href="http://www.leetcode.com/2010/09/serializationdeserialization-of-binary.html">Serialization/Deserialization of a Binary Tree</a>? It is trivial to see this as an alternative method to serialize/deserialize a binary tree. <img src="http://leetcode.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley"></li></ol><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a612">Rating: 4.6/<strong>5</strong> (61 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Construct Binary Tree From Inorder and Preorder/Postorder Traversal</span></span>, <span class="rating"><span class="average">4.6</span> out of <span class="best">5</span> based on <span class="votes">61</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2011/04/construct-binary-tree-from-inorder-and-preorder-postorder-traversal.html" rel="tag">http://leetcode.com/2011/04/construct-binary-tree-from-inorder-and-preorder-postorder-traversal.html</a></p></div></div></div></body><body><div><div class="entry"><blockquote><p>Convert a BST to a sorted circular doubly-linked list in-place. Think of the left and right pointers as synonymous to the previous and next pointers in a doubly-linked list.</p></blockquote><p><span id="more-63"></span><br>If the problem statement is still not clear to you, below is a pictorial representation of what you need to do:</p><p></p><div class="separator"><a href="http://4.bp.blogspot.com/_UElib2WLeDE/TPRo1mUmf2I/AAAAAAAACZM/BzwriSAGybw/s1600/tree.png" imageanchor="1"><img border="0" src="http://4.bp.blogspot.com/_UElib2WLeDE/TPRo1mUmf2I/AAAAAAAACZM/BzwriSAGybw/s1600/tree.png"></a></div><p><span>i) an ordered binary tree (BST) storing numbers from 1 &#8211; 5.</span></p><div class="separator"><a href="http://4.bp.blogspot.com/_UElib2WLeDE/TPRo9cJLq_I/AAAAAAAACZQ/aiBIfOyQFX0/s1600/treelist2.gif" imageanchor="1"><img border="0" src="http://4.bp.blogspot.com/_UElib2WLeDE/TPRo9cJLq_I/AAAAAAAACZQ/aiBIfOyQFX0/s1600/treelist2.gif"></a></div><p><span>ii) original tree converted to a sorted circular doubly-linked list. Its <span>left </span>and <span>right </span>pointers were modified to point to its previous and next node.</span></p><p> I originally read this interesting problem here: <a href="http://cslibrary.stanford.edu/109/TreeListRecursion.html">The Great Tree-List Recursion Problem</a>.</p><p><b>Hint:</b><br>Think of in-order traversal. How do you ensure that the last element&#8217;s right pointer points back to the first element?</p><div class="separator"><a href="http://1.bp.blogspot.com/_UElib2WLeDE/TPR8ILKoieI/AAAAAAAACZY/BoU90YXHePc/s1600/doublylist.gif" imageanchor="1"><img border="0" src="http://1.bp.blogspot.com/_UElib2WLeDE/TPR8ILKoieI/AAAAAAAACZY/BoU90YXHePc/s1600/doublylist.gif"></a></div><p><span>A circular doubly-linked list. Think of the left and right pointers in a tree as synonymous to the previous and next pointers in a list.</span></p><p><b>Solution: </b><br>When I first see this problem, my first thought was in-order traversal. Couldn&#8217;t we modify the nodes&#8217; left and right pointers as we do an in-order traversal of the tree? However, we have to beware not to modify the pointers and accessing it at a later time.</p><p>As we traverse the tree in-order, we could safely modify a node&#8217;s left pointer to point to the previously traversed node as we never use it once we reach a node. We would also need to modify the previously traversed node&#8217;s right pointer to point to the current node. Note: The previously traversed node meant here is <b>not</b> its parent node. It is the node&#8217;s previous smaller element.</p><p>Easy approach, right? But wait, we are still missing two more steps. First, we did not assign the list&#8217;s head pointer. Second, the last element&#8217;s right pointer does not point to the first element (similar to the first element&#8217;s left pointer).</p><p>How do we solve this? My approach is pretty easy: Just update the current node&#8217;s right pointer to point back to the head and the head&#8217;s left pointer to point to current node in each recursive call. As the recursion ends, the list&#8217;s head and tail would be automagically updated with the correct pointers. Don&#8217;t forget to check for this special case: A list with only one element should have its left and right pointers both pointing back to itself.</p><div class="separator"><a href="http://3.bp.blogspot.com/_UElib2WLeDE/TPR6fN00nnI/AAAAAAAACZU/xzaMlH9f4VI/s1600/single.gif" imageanchor="1"><img border="0" src="http://3.bp.blogspot.com/_UElib2WLeDE/TPR6fN00nnI/AAAAAAAACZU/xzaMlH9f4VI/s1600/single.gif"></a></div><p><span>A double-linked list with a length of one.</span></p><p>Do you think this approach works? I bet it did! The run time complexity for this solution is <i>O</i>(<i>N</i>) since we are essentially doing a modified in-order traversal. It does have some extra assignments in each recursive call though. But overall I am quite satisfied with this approach because it is intuitive and easy to follow. Besides, we are adapting an existing algorithm (in-order traversal) to solve this problem, isn&#8217;t this just neat?</p><p></p><div id="crayon-54ec84e62379c" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
// This is a modified in-order traversal adapted to this problem.
// prev (init to NULL) is used to keep track of previously traversed node.
// head pointer is updated with the list's head as recursion ends.
void treeToDoublyList(Node *p, Node *&amp; prev, Node *&amp; head) {
  if (!p) return;
  treeToDoublyList(p-&gt;left, prev, head);
  // current node's left points to previous node
  p-&gt;left = prev;
  if (prev)
    prev-&gt;right = p;  // previous node's right points to current node
  else
    head = p; // current node (smallest element) is head of
              // the list if previous node is not available
  // as soon as the recursion ends, the head's left pointer 
  // points to the last node, and the last node's right pointer
  // points to the head pointer.
  Node *right = p-&gt;right;
  head-&gt;left = p;
  p-&gt;right = head;
  // updates previous node
  prev = p;
  treeToDoublyList(right, prev, head);
}

// Given an ordered binary tree, returns a sorted circular
// doubly-linked list. The conversion is done in-place.
Node* treeToDoublyList(Node *root) {
  Node *prev = NULL;
  Node *head = NULL;
  treeToDoublyList(root, prev, head);
  return head;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ec84e62379c-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec84e62379c-2">2</p><p class="crayon-num" data-line="crayon-54ec84e62379c-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec84e62379c-4">4</p><p class="crayon-num" data-line="crayon-54ec84e62379c-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec84e62379c-6">6</p><p class="crayon-num" data-line="crayon-54ec84e62379c-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec84e62379c-8">8</p><p class="crayon-num" data-line="crayon-54ec84e62379c-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec84e62379c-10">10</p><p class="crayon-num" data-line="crayon-54ec84e62379c-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec84e62379c-12">12</p><p class="crayon-num" data-line="crayon-54ec84e62379c-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec84e62379c-14">14</p><p class="crayon-num" data-line="crayon-54ec84e62379c-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec84e62379c-16">16</p><p class="crayon-num" data-line="crayon-54ec84e62379c-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec84e62379c-18">18</p><p class="crayon-num" data-line="crayon-54ec84e62379c-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec84e62379c-20">20</p><p class="crayon-num" data-line="crayon-54ec84e62379c-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec84e62379c-22">22</p><p class="crayon-num" data-line="crayon-54ec84e62379c-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec84e62379c-24">24</p><p class="crayon-num" data-line="crayon-54ec84e62379c-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec84e62379c-26">26</p><p class="crayon-num" data-line="crayon-54ec84e62379c-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec84e62379c-28">28</p><p class="crayon-num" data-line="crayon-54ec84e62379c-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec84e62379c-30">30</p><p class="crayon-num" data-line="crayon-54ec84e62379c-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec84e62379c-32">32</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec84e62379c-1"><span class="c">// This is a modified in-order traversal adapted to this problem.</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec84e62379c-2"><span class="c">// prev (init to NULL) is used to keep track of previously traversed node.</span></p><p class="crayon-line" id="crayon-54ec84e62379c-3"><span class="c">// head pointer is updated with the list's head as recursion ends.</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec84e62379c-4"><span class="t">void</span><span class="h"> </span><span class="e">treeToDoublyList</span><span class="sy">(</span><span class="e ">Node *</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="e ">Node *</span><span class="o">&amp;</span><span class="h"> </span><span class="i">prev</span><span class="sy">,</span><span class="h"> </span><span class="e ">Node *</span><span class="o">&amp;</span><span class="h"> </span><span class="i">head</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec84e62379c-5"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec84e62379c-6"><span class="h">&#160;&#160;</span><span class="e">treeToDoublyList</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">prev</span><span class="sy">,</span><span class="h"> </span><span class="i">head</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec84e62379c-7"><span class="h">&#160;&#160;</span><span class="c">// current node's left points to previous node</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec84e62379c-8"><span class="h">&#160;&#160;</span><span class="i">p</span><span class="o">-&gt;</span><span class="v">left</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">prev</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec84e62379c-9"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">prev</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec84e62379c-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">prev</span><span class="o">-&gt;</span><span class="v">right</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="sy">;</span><span class="h">&#160;&#160;</span><span class="c">// previous node's right points to current node</span></p><p class="crayon-line" id="crayon-54ec84e62379c-11"><span class="h">&#160;&#160;</span><span class="st">else</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec84e62379c-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">head</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="sy">;</span><span class="h"> </span><span class="c">// current node (smallest element) is head of</span></p><p class="crayon-line" id="crayon-54ec84e62379c-13"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="c">// the list if previous node is not available</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec84e62379c-14"><span class="h">&#160;&#160;</span><span class="c">// as soon as the recursion ends, the head's left pointer </span></p><p class="crayon-line" id="crayon-54ec84e62379c-15"><span class="h">&#160;&#160;</span><span class="c">// points to the last node, and the last node's right pointer</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec84e62379c-16"><span class="h">&#160;&#160;</span><span class="c">// points to the head pointer.</span></p><p class="crayon-line" id="crayon-54ec84e62379c-17"><span class="h">&#160;&#160;</span><span class="e ">Node *</span><span class="v">right</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec84e62379c-18"><span class="h">&#160;&#160;</span><span class="i">head</span><span class="o">-&gt;</span><span class="v">left</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec84e62379c-19"><span class="h">&#160;&#160;</span><span class="i">p</span><span class="o">-&gt;</span><span class="v">right</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">head</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec84e62379c-20"><span class="h">&#160;&#160;</span><span class="c">// updates previous node</span></p><p class="crayon-line" id="crayon-54ec84e62379c-21"><span class="h">&#160;&#160;</span><span class="v">prev</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec84e62379c-22"><span class="h">&#160;&#160;</span><span class="e">treeToDoublyList</span><span class="sy">(</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="i">prev</span><span class="sy">,</span><span class="h"> </span><span class="i">head</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec84e62379c-23"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec84e62379c-24">&#160;</p><p class="crayon-line" id="crayon-54ec84e62379c-25"><span class="c">// Given an ordered binary tree, returns a sorted circular</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec84e62379c-26"><span class="c">// doubly-linked list. The conversion is done in-place.</span></p><p class="crayon-line" id="crayon-54ec84e62379c-27"><span class="e ">Node*</span><span class="h"> </span><span class="e">treeToDoublyList</span><span class="sy">(</span><span class="e ">Node *</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec84e62379c-28"><span class="h">&#160;&#160;</span><span class="e ">Node *</span><span class="v">prev</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec84e62379c-29"><span class="h">&#160;&#160;</span><span class="e ">Node *</span><span class="v">head</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec84e62379c-30"><span class="h">&#160;&#160;</span><span class="e">treeToDoublyList</span><span class="sy">(</span><span class="i">root</span><span class="sy">,</span><span class="h"> </span><span class="i">prev</span><span class="sy">,</span><span class="h"> </span><span class="i">head</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec84e62379c-31"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">head</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec84e62379c-32"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b>Alternative Solution:</b><br>There is an alternative solution  which doesn&#8217;t use in-order traversal. Instead, it uses a divide and  conquer method which is quite neat. I highly recommend you to read the  solution (code provided) <a href="http://cslibrary.stanford.edu/109/TreeListRecursion.html">here</a>.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a63">Rating: 4.5/<strong>5</strong> (52 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Convert Binary Search Tree (BST) to Sorted Doubly-Linked List</span></span>, <span class="rating"><span class="average">4.5</span> out of <span class="best">5</span> based on <span class="votes">52</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Given an array where elements are sorted in ascending order, convert it to a height balanced BST.</p></blockquote><p><span id="more-61"></span><br>If you are having hard time in understanding my previous post: <a href="http://www.leetcode.com/2010/11/largest-binary-search-tree-bst-in_22.html">Largest Binary Search Tree (BST) in a binary tree</a>, do not fret as that problem is a comparably trickier tree problem for an interview session. But that should not be an excuse for you to not improve your ability to think recursively (without your brain stack being overflowed of course <img border="0" src="http://4.bp.blogspot.com/_UElib2WLeDE/TK7aJSBFXSI/AAAAAAAACW8/5f8CRD5dJ8o/s1600/smiley.jpg">).</p><p>Recursion is a very powerful problem-solving mechanism, and you would not go very far without it during an interview session. Here might be an easier tree problem for you to start before you hop on those challenging ones.</p><p><b>Hint:</b><br>This question is highly recursive in nature. Think of how binary search works.</p><div class="separator"><a href="http://1.bp.blogspot.com/_UElib2WLeDE/TO7ejbeZT6I/AAAAAAAACY8/ObPohELAfV4/s1600/height_balanced_tree.png" imageanchor="1"><img border="0" height="177" src="http://1.bp.blogspot.com/_UElib2WLeDE/TO7ejbeZT6I/AAAAAAAACY8/ObPohELAfV4/s400/height_balanced_tree.png" width="400"></a></div><p><span>An example of a height-balanced tree. A height-balanced tree is a tree whose subtrees differ in height by no more than one and the subtrees are height-balanced, too. </span></p><p><b>Solution:</b><br>If you would have to choose an array element to be the root of a balanced BST, which element would you pick? The root of a balanced BST should be the middle element from the sorted array.</p><p>You would pick the middle element from the sorted array in each iteration. You then create a node in the tree initialized with this element. After the element is chosen, what is left? Could you identify the sub-problems within the problem?</p><p>There are two arrays left &#8212; The one on its left and the one on its right. These two arrays are the sub-problems of the original problem, since both of them are sorted. Furthermore, they are subtrees of the current node&#8217;s left and right child.</p><p>The code below creates a balanced BST from the sorted array in <i>O</i>(<i>N</i>) time  (<i>N</i> is the number of elements in the array). Compare how similar the  code is to a binary search algorithm. Both are using the divide and  conquer methodology.</p><p></p><div id="crayon-54ecc83889a61" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
BinaryTree* sortedArrayToBST(int arr[], int start, int end) {
  if (start &gt; end) return NULL;
  // same as (start+end)/2, avoids overflow.
  int mid = start + (end - start) / 2;
  BinaryTree *node = new BinaryTree(arr[mid]);
  node-&gt;left = sortedArrayToBST(arr, start, mid-1);
  node-&gt;right = sortedArrayToBST(arr, mid+1, end);
  return node;
}

BinaryTree* sortedArrayToBST(int arr[], int n) {
  return sortedArrayToBST(arr, 0, n-1);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecc83889a61-1"><span class="e ">BinaryTree*</span><span class="h"> </span><span class="e">sortedArrayToBST</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">arr</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">start</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="st">end</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc83889a61-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">start</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="st">end</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc83889a61-3"><span class="h">&#160;&#160;</span><span class="c">// same as (start+end)/2, avoids overflow.</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc83889a61-4"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">mid</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">start</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="st">end</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="i">start</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc83889a61-5"><span class="h">&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">node</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="r">new</span><span class="h"> </span><span class="e">BinaryTree</span><span class="sy">(</span><span class="v">arr</span><span class="sy">[</span><span class="i">mid</span><span class="sy">]</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc83889a61-6"><span class="h">&#160;&#160;</span><span class="i">node</span><span class="o">-&gt;</span><span class="v">left</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">sortedArrayToBST</span><span class="sy">(</span><span class="i">arr</span><span class="sy">,</span><span class="h"> </span><span class="i">start</span><span class="sy">,</span><span class="h"> </span><span class="i">mid</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc83889a61-7"><span class="h">&#160;&#160;</span><span class="i">node</span><span class="o">-&gt;</span><span class="v">right</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">sortedArrayToBST</span><span class="sy">(</span><span class="i">arr</span><span class="sy">,</span><span class="h"> </span><span class="i">mid</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="st">end</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc83889a61-8"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">node</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc83889a61-9"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc83889a61-10">&#160;</p><p class="crayon-line" id="crayon-54ecc83889a61-11"><span class="e ">BinaryTree*</span><span class="h"> </span><span class="e">sortedArrayToBST</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">arr</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc83889a61-12"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">sortedArrayToBST</span><span class="sy">(</span><span class="i">arr</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc83889a61-13"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p><b>Further Thoughts:</b></p><p>Consider changing the problem statement to &#8220;Converting a singly linked list to a balanced BST&#8221;. How would your implementation change from the above?</p><p>Check out my next post: <a href="http://www.leetcode.com/2010/11/convert-sorted-list-to-balanced-binary.html">Convert Sorted List to Balanced Binary Search Tree (BST)</a> for the best solution.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a61">Rating: 4.4/<strong>5</strong> (53 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Convert Sorted Array to Balanced Binary Search Tree (BST)</span></span>, <span class="rating"><span class="average">4.4</span> out of <span class="best">5</span> based on <span class="votes">53</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Given a singly linked list where elements are sorted in ascending order, convert it to a height balanced BST.</p></blockquote><p><span id="more-62"></span><br>If you have not checked out my previous post: <a href="http://www.leetcode.com/2010/11/convert-sorted-array-into-balanced.html">Convert Sorted Array to Balanced Binary Search Tree (BST)</a>, you should check it out now as this solution is built upon the previous solution.</p><p>Things get a little more complicated when you have a singly linked list instead of an array. Please note that in linked list, you no longer have random access to an element in <i>O</i>(1) time.</p><div class="separator"><a href="http://1.bp.blogspot.com/_UElib2WLeDE/TPIbm4Fw2dI/AAAAAAAACZE/5HheaBU1RrM/s1600/Singly-linked-list.png" imageanchor="1"><img border="0" src="http://1.bp.blogspot.com/_UElib2WLeDE/TPIbm4Fw2dI/AAAAAAAACZE/5HheaBU1RrM/s1600/Singly-linked-list.png"></a></div><p><span>Singly-linked lists contain nodes which have a data field as well as a <i>next</i> field, which points to the next node in the linked list.</span></p><p><b>Naive Solution:</b><br>A naive way is to apply the previous solution directly. In each recursive call, you would have to traverse half of the list&#8217;s length to find the middle element. The run time complexity is clearly <i>O</i>(<i>N</i> lg <i>N</i>), where <i>N</i> is the total number of elements in the list. This is because each level of recursive call requires a total of <i>N</i>/2 traversal steps in the list, and there are a total of lg <i>N</i> number of levels (ie, the height of the balanced tree).</p><p><b>Hint:</b><br>How about inserting nodes following the list&#8217;s order? If we can achieve this, we no longer need to find the middle element, as we are able to traverse the list while inserting nodes to the tree.</p><p><b>Best Solution:</b><br>As usual, the best solution requires you to think from another perspective. In other words, we no longer create nodes in the tree using the top-down approach. We create nodes bottom-up, and assign them to its parents. The bottom-up approach enables us to access the list in its order while creating nodes.</p><p>Isn&#8217;t the bottom-up approach neat? Each time you are stucked with the top-down approach, give bottom-up a try. Although bottom-up approach is not the most natural way we think, it is extremely helpful in some cases. However, you should prefer top-down instead of bottom-up in general, since the latter is more difficult to verify in correctness.</p><p>Below is the code for converting a singly linked list to a balanced BST. Please note that the algorithm requires the list&#8217;s length to be passed in as the function&#8217;s parameters. The list&#8217;s length could be found in <i>O</i>(<i>N</i>) time by traversing the entire list&#8217;s once. The recursive calls traverse the list and create tree&#8217;s nodes by the list&#8217;s order, which also takes <i>O</i>(<i>N</i>) time. Therefore, the overall run time complexity is still <i>O</i>(<i>N</i>).</p><p></p><div id="crayon-54eabb5830f37" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
BinaryTree* sortedListToBST(ListNode *&amp; list, int start, int end) {
  if (start &gt; end) return NULL;
  // same as (start+end)/2, avoids overflow
  int mid = start + (end - start) / 2;
  BinaryTree *leftChild = sortedListToBST(list, start, mid-1);
  BinaryTree *parent = new BinaryTree(list-&gt;data);
  parent-&gt;left = leftChild;
  list = list-&gt;next;
  parent-&gt;right = sortedListToBST(list, mid+1, end);
  return parent;
}

BinaryTree* sortedListToBST(ListNode *head, int n) {
  return sortedListToBST(head, 0, n-1);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eabb5830f37-1"><span class="e ">BinaryTree*</span><span class="h"> </span><span class="e">sortedListToBST</span><span class="sy">(</span><span class="e ">ListNode *</span><span class="o">&amp;</span><span class="h"> </span><span class="i">list</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">start</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="st">end</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eabb5830f37-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">start</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="st">end</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eabb5830f37-3"><span class="h">&#160;&#160;</span><span class="c">// same as (start+end)/2, avoids overflow</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eabb5830f37-4"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">mid</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">start</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="st">end</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="i">start</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eabb5830f37-5"><span class="h">&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">leftChild</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">sortedListToBST</span><span class="sy">(</span><span class="i">list</span><span class="sy">,</span><span class="h"> </span><span class="i">start</span><span class="sy">,</span><span class="h"> </span><span class="i">mid</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eabb5830f37-6"><span class="h">&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="r">parent</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="r">new</span><span class="h"> </span><span class="e">BinaryTree</span><span class="sy">(</span><span class="i">list</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eabb5830f37-7"><span class="h">&#160;&#160;</span><span class="r">parent</span><span class="o">-&gt;</span><span class="v">left</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">leftChild</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eabb5830f37-8"><span class="h">&#160;&#160;</span><span class="v">list</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">list</span><span class="o">-&gt;</span><span class="i">next</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eabb5830f37-9"><span class="h">&#160;&#160;</span><span class="r">parent</span><span class="o">-&gt;</span><span class="v">right</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">sortedListToBST</span><span class="sy">(</span><span class="i">list</span><span class="sy">,</span><span class="h"> </span><span class="i">mid</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="st">end</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eabb5830f37-10"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="r">parent</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eabb5830f37-11"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eabb5830f37-12">&#160;</p><p class="crayon-line" id="crayon-54eabb5830f37-13"><span class="e ">BinaryTree*</span><span class="h"> </span><span class="e">sortedListToBST</span><span class="sy">(</span><span class="e ">ListNode *</span><span class="i">head</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eabb5830f37-14"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">sortedListToBST</span><span class="sy">(</span><span class="i">head</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eabb5830f37-15"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a62">Rating: 4.7/<strong>5</strong> (107 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Convert Sorted List to Balanced Binary Search Tree (BST)</span></span>, <span class="rating"><span class="average">4.7</span> out of <span class="best">5</span> based on <span class="votes">107</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="post-content"><h1 class="posttitle">CTRL+A, CTRL+C, CTRL+V</h1><p class="date"> January 4, 2011 <span>in <a href="http://leetcode.com/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Imagine you have a special keyboard with the following keys:</p><ol><li>A</li><li>Ctrl+A</li><li>Ctrl+C</li><li>Ctrl+V</li></ol><p>where CTRL+A, CTRL+C, CTRL+V each acts as one function key for &#8220;Select All&#8221;, &#8220;Copy&#8221;, and &#8220;Paste&#8221; operations respectively.</p><p>If you can only press the keyboard for <i>N</i> times (with the above four keys), please write a program to produce maximum numbers of A. If possible, please also print out the sequence of keys.<span id="more-69"></span></p><p>That is to say, the input parameter is <i>N</i> (No. of keys that you can press), the output is <i>M</i> (No. of As that you can produce).</p></blockquote><p></p><p>This question seemed like a brand new interview question from Google. Someone posted this problem on a <a href="http://www.careercup.com/question?id=7184083">discussion board</a>, and it generated a lot of discussions, which unfortunately none of them is really helpful in solving this problem. Here, I discuss my approach and solution to this problem, and just like those other tricky questions from a typical Google interview &#8212; the common pitfalls you might fall into.</p><p>One common strategy in problem solving is to always begin with small examples.</p><p>It is trivial to notice that for <i>N </i>M = <i>N</i>. But how about the case where <i>N </i>= 7?  Here is where the most common pitfall that most people would fall into (myself included).</p><p>Most people reason that for <i>N </i>= 7, the answer is <i>M </i>= 8, because the sequence <i>S</i> = { A, A, A, A, CTRL+A, CTRL+C, CTRL+V } produces a total of 8 A&#8217;s.</p><p>Wait, the copied text is still in the buffer after a paste operation. We could have applied CTRL+V twice to double the previous text, sweet! <img border="0" src="http://4.bp.blogspot.com/_UElib2WLeDE/TK7aJSBFXSI/AAAAAAAACW8/5f8CRD5dJ8o/s1600/smiley.jpg"></p><p>How about <i>S</i> = { A, A, A, CTRL+A, CTRL+C, CTRL+V, CTRL+V } which produces a total of 9 A&#8217;s?</p><p>Unfortunately, both of the above answers are incorrect, as the correct answer for <i>N</i> = 7 is <i>M</i> = 7. This is simply because the sequence of { CTRL+A, CTRL+C, CTRL+V } does not double the previous text. Why? Take a moment to let this to sink into your brain.</p><p>Answers for <i>N</i> up to 7 is easy, which is <i>M</i> = <i>N</i>. But how about <i>N</i> = 8?</p><p>For <i>N</i> = 8 the answer is <i>M</i> = 9, where <i>S</i> = { A, A, A, CTRL+A, CTRL+C, CTRL+V, CTRL+V, CTRL+V }.</p><p>For <i>N</i> = 9 the answer is <i>M</i> = 12, where <i>S</i> = { A, A, A, CTRL+A, CTRL+C, CTRL+V, CTRL+V, CTRL+V, CTRL+V }.</p><p>You might ask why all A&#8217;s are typed before the sequence of { CTRL+A, CTRL+C, CTRL+V } operations.</p><p>Assume that we could insert A&#8217;s at the back of some sequence of { CTRL+A, CTRL+C, CTRL+V } and yield a maximum sequence. If we take all the A&#8217;s from the back and insert it at the front, this modified sequence must yield a larger number of A&#8217;s, since the number of A&#8217;s is multipled from the beginning. Therefore, by contradiction, all A&#8217;s must always be inserted at the front to yield the maximum number of A&#8217;s. Similar for the case where A&#8217;s are inserted in the middle of the sequence.</p><p>Before we proceed further, we introduce the following notation:</p><div class="hiblock"><ul><li>Define <b>4A</b> as a sequence of { A, A, A, A }. Therefore, <b>5A</b> would then mean { A, A, A, A, A }.</li><li>Define <b>2D</b> as a sequence of CTRL+A, CTRL+C, CTRL+V, CTRL+V, which simply means <i>double the previous text</i>. Note that <b>3D</b> does not double the previous text, it actually triples the previous text.</li></ul></div><p>With this notation in place, it is much easier to work with this problem. Using the above notation, we rewrite our answer for <i>N </i>= 8 and <i>N </i>= 9.</p><p><i>N </i>= 8, <i>S</i> = { <b>3A3D</b> }, <i>M </i>= 9.</p><p><i>N </i>= 9,<i> S</i> = { <b>3A4D</b> }, <i>M </i>= 12.</p><p>The value of M could be obtained simply by multiplying the numbers, isn&#8217;t that neat?</p><p>Working our way up:<br><i>N </i>= 10, <i>S</i> = { <b>4A4D</b> }, <i>M </i>= 16.</p><p><i>N</i> = 11, <i>S</i> = { <b>5A4D</b> }, <i>M </i>= 20.</p><p>As you can see, the pattern here is pretty obvious, let&#8217;s summarize as follow:</p><div class="hiblock"><ul><li>The solution so far for <i>N </i>&gt; 7 is to find integers <i>a</i> and <i>b</i> such that <i>ab</i> yields the largest product, subjected to the condition where <i>a</i>+<i>b</i> = <i>N</i>-2.</li><li>Both <i>a </i>and <i>b </i>are easy to find, as the largest product is found when the difference of <i>a </i>and <i>b </i>is less than or equal to one.</li></ul></div><p>Similarly,<br><i>N </i>= 12, <i>S</i> = { <b>5A5D</b> }, <i>M </i>= 25.<br><i>N </i>= 13, <i>S</i> = { <b>5A6D</b> }, <i>M </i>= 30.<br><i>N </i>= 14, <i>S</i> = { <b>6A6D</b> }, <i>M </i>= 36.</p><p>Be extra cautious for <i>N </i>= 15.<br>When <i>N </i>= 15, does the sequence { <b>6A7D</b> } yields the maximum where <i>M </i>= 42?</p><p>Imagine if you have a very large number of keystrokes to enter, does pressing CTRL+V forever gives you the maximum sequence? Remember, you can redo the entire { CTRL+A, CTRL+C, CTRL+V } operations again and potentially maximizes the sequence.</p><p>For <i>N </i>= 15, the maximum sequence should be:<br>{ <b>3A4D4D</b> }, which yields <i>M </i>= 48.</p><p>Similarly,<br><i>N</i> = 16, <i>S </i>= { <b>4A4D4D</b> }, <i>M </i>= 64.<br>&#8230;<br><i>N</i> = 21, <i>S </i>= { <b>3A4D4D4D</b> }, <i>M </i>= 192.<br>&#8230;<br><i>N </i>= 25, <i>S </i>= { <b>4A5D5D5D</b> }, <i>M </i>= 500.<br><i>N </i>= 26, <i>S </i>= { <b>5A5D5D5D</b> }, <i>M </i>= 625.<br><i>N </i>= 27, <i>S </i>= { <b>3A4D4D4D4D</b> }, <i>M </i>= 768.</p><p>Let&#8217;s generalize the above:</p><div class="hiblock"><i>M</i> = MAX (<i>a</i><sub>1</sub> . <i>a</i><sub>2</sub> &#8230; <i>a<sub>k</sub></i>),<p>where <i><br>a</i><sub>1</sub> + <i>a</i><sub>2</sub> + &#8230; + <i>a</i><sub>k</sub> = <i>n</i> &#8211; 2(<i>k</i>-1)</p></div><p>To obtain <i>M</i> = MAX (<i>a</i><sub>1</sub> . <i>a</i><sub>2</sub> &#8230; <i>a</i><sub>k</sub>),<br>it is necessary that the below condition must be met:</p><p class="hiblock">&#8704; <i>i</i>, <i>j</i> &#8712;{ 1, 2, &#8230; , <i>k </i>} :   MAX ( | <i>a<sub>i</sub></i> &#8211; <i>a<sub>j</sub></i> | ) = 1.</p><p>To obtain <i>M</i>, we can first divide <i>a</i><sub>1</sub> + <i>a</i><sub>2</sub> + &#8230; + <i>a<sub>k</sub></i> by <i>k</i> to obtain the average as a reference, and the rest should be straightforward.</p><p>Now the final problem lies in how to obtain the value of <i>k</i> efficiently. I am pretty sure this could be solved easily using <a href="http://en.wikipedia.org/wiki/Number_theory">Number Theory</a>, but so far, my best solution is to use a brute force method to obtain <i>k</i>.</p><p>Below is the C++ code for my solution. It is pretty straightforward to output the sequence <i>S</i>. Given <i>N</i>, the function <i>f</i>() returns the maximum value of <i>M</i>.</p><p></p><div id="crayon-54eb9fff8a22f" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;cassert&gt;
using namespace std;

int findMaxK(int n) {
    int power = 2;
    double max = 0.0;
    int maxK = 0;
    while (n &gt; 0) {
        n -= 2;
        double t = (double)n/power;
        double r = pow(t, (double)power);
        if (r &gt; max) {
            maxK = power;
            max = r;
        }
        power++;
    }
    return maxK;
}

unsigned int f(int n) {
    if (n &lt;= 7) return n;
    int k = findMaxK(n);

    int sum = n - 2*(k-1);
    unsigned int mul = 1;
    while (k &gt; 0) {
        int avg = sum/k;
        mul *= avg;
        k--;
        sum -= avg;
    }

    assert(sum == 0);

    return mul;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54eb9fff8a22f-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-2">2</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-4">4</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-6">6</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-8">8</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-10">10</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-12">12</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-14">14</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-16">16</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-18">18</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-20">20</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-22">22</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-24">24</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-26">26</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-28">28</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-30">30</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-32">32</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-34">34</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-36">36</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb9fff8a22f-38">38</p><p class="crayon-num" data-line="crayon-54eb9fff8a22f-39">39</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eb9fff8a22f-1"><span class="p">#include &lt;iostream&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-2"><span class="p">#include &lt;cmath&gt;</span></p><p class="crayon-line" id="crayon-54eb9fff8a22f-3"><span class="p">#include &lt;cassert&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-4"><span class="e">using </span><span class="t">namespace</span><span class="h"> </span><span class="i">std</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb9fff8a22f-5">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-6"><span class="t">int</span><span class="h"> </span><span class="e">findMaxK</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eb9fff8a22f-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">power</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">double</span><span class="h"> </span><span class="v">max</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0.0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb9fff8a22f-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">maxK</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">n</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eb9fff8a22f-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">n</span><span class="h"> </span><span class="o">-</span><span class="o">=</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="t">double</span><span class="h"> </span><span class="v">t</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="t">double</span><span class="sy">)</span><span class="i">n</span><span class="o">/</span><span class="i">power</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb9fff8a22f-13"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="t">double</span><span class="h"> </span><span class="v">r</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">pow</span><span class="sy">(</span><span class="i">t</span><span class="sy">,</span><span class="h"> </span><span class="sy">(</span><span class="t">double</span><span class="sy">)</span><span class="i">power</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-14"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">r</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">max</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eb9fff8a22f-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">maxK</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">power</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-16"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">max</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">r</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb9fff8a22f-17"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-18"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">power</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb9fff8a22f-19"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-20"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">maxK</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb9fff8a22f-21"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-22">&#160;</p><p class="crayon-line" id="crayon-54eb9fff8a22f-23"><span class="t">unsigned</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="e">f</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-24"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">n</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="cn">7</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb9fff8a22f-25"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">k</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">findMaxK</span><span class="sy">(</span><span class="i">n</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-26">&#160;</p><p class="crayon-line" id="crayon-54eb9fff8a22f-27"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">sum</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">n</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">2</span><span class="o">*</span><span class="sy">(</span><span class="i">k</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-28"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">unsigned</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">mul</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb9fff8a22f-29"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">k</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-30"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">avg</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">sum</span><span class="o">/</span><span class="i">k</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb9fff8a22f-31"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="e ">mul *</span><span class="o">=</span><span class="h"> </span><span class="i">avg</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-32"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">k</span><span class="o">--</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb9fff8a22f-33"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">sum</span><span class="h"> </span><span class="o">-</span><span class="o">=</span><span class="h"> </span><span class="i">avg</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-34"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54eb9fff8a22f-35">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-36"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">assert</span><span class="sy">(</span><span class="v">sum</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb9fff8a22f-37">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54eb9fff8a22f-38"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">mul</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb9fff8a22f-39"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a69">Rating: 4.8/<strong>5</strong> (25 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">CTRL+A, CTRL+C, CTRL+V</span></span>, <span class="rating"><span class="average">4.8</span> out of <span class="best">5</span> based on <span class="votes">25</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2011/01/ctrla-ctrlc-ctrlv.html" rel="tag">http://leetcode.com/2011/01/ctrla-ctrlc-ctrlv.html</a></p></div></div></body><body><div><div class="entry"><blockquote><p>Given a singly linked list, find if there exist a loop.</p></blockquote><p><span id="more-34"></span>This is one of the most common interview questions asked during a technical interview. I call it the classic linked list question.</p><p>The naive approach requires O(N^2) time and O(N) space. Basically you store all visited nodes, and compare each of them while traversing each node.</p><p>Hint: The best approach uses only O(N) time and O(1) space. Remember my <a href="http://www.leetcode.com/2010/09/splitting-linked-list.html">previous post</a>? Try to use two pointers to traverse the list.</p><p>Solution: <br>The best solution runs in O(N) time and uses O(1) space. It uses two pointers (one slow pointer and one fast pointer). The slow pointer advances one node at a time, while the fast pointer traverses twice as fast. If the list has loop in it, eventually the fast and slow pointer will meet at the same node. On the other hand, if the loop has no loop, the fast pointer will reach the end of list before the slow pointer does.</p><div id="crayon-54ecd3866083b" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
bool hasLoop(Node *head) {
  Node *slow = head, *fast = head;
  while (slow &amp;&amp; fast &amp;&amp; fast-&gt;next) {
    slow = slow-&gt;next;
    fast = fast-&gt;next-&gt;next;
    if (slow == fast)
      return true;
  }
  return false;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecd3866083b-1"><span class="t">bool</span><span class="h"> </span><span class="e">hasLoop</span><span class="sy">(</span><span class="e ">Node *</span><span class="i">head</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd3866083b-2"><span class="h">&#160;&#160;</span><span class="e ">Node *</span><span class="v">slow</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">head</span><span class="sy">,</span><span class="h"> </span><span class="o">*</span><span class="v">fast</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">head</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd3866083b-3"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">slow</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">fast</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">fast</span><span class="o">-&gt;</span><span class="i">next</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd3866083b-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">slow</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">slow</span><span class="o">-&gt;</span><span class="i">next</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd3866083b-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">fast</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">fast</span><span class="o">-&gt;</span><span class="i">next</span><span class="o">-&gt;</span><span class="i">next</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd3866083b-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">slow</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">fast</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ecd3866083b-7"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd3866083b-8"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecd3866083b-9"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd3866083b-10"><span class="sy">}</span></p></div></td></tr></table></div></div><p>This elegant algorithm is known as <a href="http://en.wikipedia.org/wiki/Floyd%27s_cycle-finding_algorithm#Tortoise_and_hare">Floyd&#8217;s cycle finding algorithm</a>, also called the Tortoise and hare algorithm.</p><p><strong>Alternative solutions:</strong><br>There is another alternative solution that also runs in O(N) time and O(1) space, but the catch is it requires modification to the list. Try reversing the list if it has a loop in it. What do you see? Yes, eventually you will arrive back at the beginning (the head node). Read my post <a href="http://www.leetcode.com/2010/04/reversing-linked-list-iteratively-and.html">here</a> on how to reverse a linked list iteratively and recursively.</p><p><strong>More linked list practice:</strong><br> If you are kind of rusty on pointers, solving all kinds of linked list problems are good exercises.</p><p>Here are some very common questions on linked list from easy to difficult, all available for download in a <a href="http://cslibrary.stanford.edu/105/LinkedListProblems.pdf">single pdf file</a>. Highly recommended!</p><p>&#187; <a href="http://cslibrary.stanford.edu/105/LinkedListProblems.pdf">Linked List Problems</a></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a34">Rating: 4.8/<strong>5</strong> (13 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Detecting a Loop in a Singly Linked List</span></span>, <span class="rating"><span class="average">4.8</span> out of <span class="best">5</span> based on <span class="votes">13</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Write a function isBST(BinaryTree *node) to verify if a given binary tree is a Binary Search Tree (BST) or not.</p></blockquote><p><span id="more-37"></span></p><p>First, you must understand the difference between <i>Binary Tree</i> and <i>Binary Search Tree (BST)</i>. Binary tree is a tree data structure in which each node has at most two child nodes. A binary search tree (BST) is based on binary tree, but with the following additional properties:<br></p><p></p><ul><li>The left subtree of a node contains only nodes with keys less than the node&#8217;s key.</li><li>The right subtree of a node contains only nodes with keys greater than the node&#8217;s key.</li><li>Both the left and right subtrees must also be binary search trees.</li></ul><p>This question is a very good interview question, because it <i>really</i> tests your understanding of the definition of BST. Most people will fall to this first trap, and gives the following algorithm:</p><p class="hiblock ">Assume that the current node&#8217;s value is <i>k</i>. Then for each node, check if the left node&#8217;s value is less than <i>k</i> and the right node&#8217;s value is greater than <i>k</i>. If all of the nodes satisfy this property, then it is a BST.</p><p>It sounds correct and convincing, but look at this counter example below: A sample tree which we name it as <span>binary tree (1)</span>.</p><pre><span>    10</span>
   /  \
  <span>5</span>   <span>15</span>     <span>-------- binary tree (1)</span>
     /  \
    <span>6</span>    <span>20</span>
</pre><p>It&#8217;s obvious that this is not a valid BST, since <span>(6)</span> could never be on the right of <span>(10)</span>.</p><p>Based on BST&#8217;s definition, we can then easily devise a brute-force solution:</p><p class="hiblock">Assume that the current node&#8217;s value is <i>k</i>. Then for each node, check if all nodes of left subtree contain values that are less than <i>k</i>. Also check if all nodes of right subtree contain values that are greater than <i>k</i>. If all of the nodes satisfy this property, then it must be a BST.</p><p>Below is the brute force code (though inefficient, but works):</p><p></p><div id="crayon-54eca0200f44c" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
bool isSubTreeLessThan(BinaryTree *p, int val) {
  if (!p) return true;
  return (p-&gt;data &lt; val &amp;&amp; 
          isSubTreeLessThan(p-&gt;left, val) &amp;&amp; 
          isSubTreeLessThan(p-&gt;right, val));
}

bool isSubTreeGreaterThan(BinaryTree *p, int val) {
  if (!p) return true;
  return (p-&gt;data &gt; val &amp;&amp; 
          isSubTreeGreaterThan(p-&gt;left, val) &amp;&amp; 
          isSubTreeGreaterThan(p-&gt;right, val));
}

bool isBSTBruteForce(BinaryTree *p) {
  if (!p) return true;
  return isSubTreeLessThan(p-&gt;left, p-&gt;data) &amp;&amp; 
         isSubTreeGreaterThan(p-&gt;right, p-&gt;data) &amp;&amp; 
         isBSTBruteForce(p-&gt;left) &amp;&amp; 
         isBSTBruteForce(p-&gt;right);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54eca0200f44c-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca0200f44c-2">2</p><p class="crayon-num" data-line="crayon-54eca0200f44c-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca0200f44c-4">4</p><p class="crayon-num" data-line="crayon-54eca0200f44c-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca0200f44c-6">6</p><p class="crayon-num" data-line="crayon-54eca0200f44c-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca0200f44c-8">8</p><p class="crayon-num" data-line="crayon-54eca0200f44c-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca0200f44c-10">10</p><p class="crayon-num" data-line="crayon-54eca0200f44c-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca0200f44c-12">12</p><p class="crayon-num" data-line="crayon-54eca0200f44c-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca0200f44c-14">14</p><p class="crayon-num" data-line="crayon-54eca0200f44c-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca0200f44c-16">16</p><p class="crayon-num" data-line="crayon-54eca0200f44c-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca0200f44c-18">18</p><p class="crayon-num" data-line="crayon-54eca0200f44c-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca0200f44c-20">20</p><p class="crayon-num" data-line="crayon-54eca0200f44c-21">21</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eca0200f44c-1"><span class="t">bool</span><span class="h"> </span><span class="e">isSubTreeLessThan</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">val</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f44c-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eca0200f44c-3"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">val</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f44c-4"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="e">isSubTreeLessThan</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">val</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span></p><p class="crayon-line" id="crayon-54eca0200f44c-5"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="e">isSubTreeLessThan</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="i">val</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f44c-6"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54eca0200f44c-7">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f44c-8"><span class="t">bool</span><span class="h"> </span><span class="e">isSubTreeGreaterThan</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">val</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eca0200f44c-9"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f44c-10"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">val</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span></p><p class="crayon-line" id="crayon-54eca0200f44c-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="e">isSubTreeGreaterThan</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">val</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f44c-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="e">isSubTreeGreaterThan</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="i">val</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eca0200f44c-13"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f44c-14">&#160;</p><p class="crayon-line" id="crayon-54eca0200f44c-15"><span class="t">bool</span><span class="h"> </span><span class="e">isBSTBruteForce</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f44c-16"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eca0200f44c-17"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">isSubTreeLessThan</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f44c-18"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="e">isSubTreeGreaterThan</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span></p><p class="crayon-line" id="crayon-54eca0200f44c-19"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="e">isBSTBruteForce</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f44c-20"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="e">isBSTBruteForce</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eca0200f44c-21"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b>Solution:</b><br>Here is the much better solution. Instead of examining all nodes of both subtrees in each pass, we only need to examine two nodes in each pass.</p><p>Refer back to the <span>binary tree (1)</span> above. As we traverse down the tree from node <span>(10)</span> to right node <span>(15)</span>, we know for sure that the right node&#8217;s value fall between <b>10</b> and <b>+INFINITY</b>. Then, as we traverse further down from node <span>(15)</span> to left node <span>(6)</span>, we know for sure that the left node&#8217;s value fall between <b>10</b> and <b>15</b>. And since <span>(6)</span> does not satisfy the above requirement, we can quickly determine it is not a valid BST. All we need to do is to pass down the low and high limits from node to node! Once we figure out this algorithm, it is easy to code.</p><p></p><div id="crayon-54eca0200f501" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
bool isBSTHelper(BinaryTree *p, int low, int high) {
  if (!p) return true;
  if (low &lt; p-&gt;data &amp;&amp; p-&gt;data &lt; high)
    return isBSTHelper(p-&gt;left, low, p-&gt;data) &amp;&amp; 
           isBSTHelper(p-&gt;right, p-&gt;data, high);
  else
    return false;
}

bool isBST(BinaryTree *root) {
  // INT_MIN and INT_MAX are defined in C++'s &lt;climits&gt; library
  return isBSTHelper(root, INT_MIN, INT_MAX);  
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eca0200f501-1"><span class="t">bool</span><span class="h"> </span><span class="e">isBSTHelper</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">low</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">high</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f501-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eca0200f501-3"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">low</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">high</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f501-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">isBSTHelper</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">low</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span></p><p class="crayon-line" id="crayon-54eca0200f501-5"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="e">isBSTHelper</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">,</span><span class="h"> </span><span class="i">high</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f501-6"><span class="h">&#160;&#160;</span><span class="st">else</span></p><p class="crayon-line" id="crayon-54eca0200f501-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f501-8"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54eca0200f501-9">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f501-10"><span class="t">bool</span><span class="h"> </span><span class="e">isBST</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eca0200f501-11"><span class="h">&#160;&#160;</span><span class="c">// INT_MIN and INT_MAX are defined in C++'s &lt;climits&gt; library</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f501-12"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">isBSTHelper</span><span class="sy">(</span><span class="i">root</span><span class="sy">,</span><span class="h"> </span><span class="i">INT_MIN</span><span class="sy">,</span><span class="h"> </span><span class="i">INT_MAX</span><span class="sy">)</span><span class="sy">;</span><span class="h">&#160;&#160;</span></p><p class="crayon-line" id="crayon-54eca0200f501-13"><span class="sy">}</span></p></div></td></tr></table></div></div><p>This algorithm runs in O(N) time, where N is the number of nodes of the binary tree. It also uses O(1) space (neglecting the stack space used by calling function recursively).</p><p><b>Alternative Solution:</b><br>Another solution is to do an in-order traversal of the binary tree, and verify that the previous value (can be passed into the recursive function as reference) is less than the current value. This works because when you do an in-order traversal on a BST, the elements must be strictly in increasing order. This method also runs in O(N) time and O(1) space.</p><p></p><div id="crayon-54eca0200f5b2" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
bool isBSTInOrderHelper(BinaryTree *p, int&amp; prev) {
  if (!p) return true;
  return (isBSTInOrderHelper(p-&gt;left, prev) &amp;&amp; 
          (p-&gt;data &gt; prev) &amp;&amp; (prev = p-&gt;data) &amp;&amp; 
          isBSTInOrderHelper(p-&gt;right, prev));
}

bool isBSTInOrder(BinaryTree *root) {
  int prev = INT_MIN;
  return isBSTInOrderHelper(root, prev);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eca0200f5b2-1"><span class="t">bool</span><span class="h"> </span><span class="e">isBSTInOrderHelper</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="o">&amp;</span><span class="h"> </span><span class="i">prev</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f5b2-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eca0200f5b2-3"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="e">isBSTInOrderHelper</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">prev</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f5b2-4"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">prev</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="sy">(</span><span class="v">prev</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span></p><p class="crayon-line" id="crayon-54eca0200f5b2-5"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="e">isBSTInOrderHelper</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="i">prev</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f5b2-6"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54eca0200f5b2-7">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f5b2-8"><span class="t">bool</span><span class="h"> </span><span class="e">isBSTInOrder</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eca0200f5b2-9"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">prev</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">INT_MIN</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f5b2-10"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">isBSTInOrderHelper</span><span class="sy">(</span><span class="i">root</span><span class="sy">,</span><span class="h"> </span><span class="i">prev</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eca0200f5b2-11"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b><span>EDIT: (Bug fix)</span></b><br>An id <span>han6</span> from the MITBBS forum pointed that the above code has a bug. When one of the node&#8217;s value is 0, the function would return false straight away, even though it is a valid BST. Why?</p><p>Below is the corrected code:</p><div id="crayon-54eca0200f65e" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
bool isBSTInOrderHelper(BinaryTree *p, int&amp; prev) {
  if (!p) return true;
  if (isBSTInOrderHelper(p-&gt;left, prev)) {
    if (p-&gt;data &gt; prev) {
      prev = p-&gt;data;
      return isBSTInOrderHelper(p-&gt;right, prev);
    } else {
      return false;
    }
  }
  else {
    return false;
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eca0200f65e-1"><span class="t">bool</span><span class="h"> </span><span class="e">isBSTInOrderHelper</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="o">&amp;</span><span class="h"> </span><span class="i">prev</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f65e-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eca0200f65e-3"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="e">isBSTInOrderHelper</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">prev</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f65e-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">prev</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eca0200f65e-5"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">prev</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f65e-6"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">isBSTInOrderHelper</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="i">prev</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eca0200f65e-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f65e-8"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eca0200f65e-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f65e-10"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54eca0200f65e-11"><span class="h">&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f65e-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eca0200f65e-13"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca0200f65e-14"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b>Additional Exercise:</b><br>We know that the brute force solution is inefficient. But how does it compare to the better solutions? In other words, what is the run time complexity of the brute force solution? Try to estimate as best as you can, and then find the correct answer by proving it using Math. Does your estimate fares well with the correct answer? Why?</p><p>(Hint: The run time complexity for the brute force approach is NOT exponential.)</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a37">Rating: 4.7/<strong>5</strong> (31 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Determine if a Binary Tree is a Binary Search Tree (BST)</span></span>, <span class="rating"><span class="average">4.7</span> out of <span class="best">5</span> based on <span class="votes">31</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="page" id="blog-single" role="main"><div id="post-729" class="post-729 post type-post status-publish format-standard hentry category-uncategorized"><div class="post-content"><h1 class="posttitle">Determine If Two Rectangles Overlap</h1><p class="date"> May 12, 2011 <span>in <a href="http://leetcode.com/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Given two axis-aligned rectangles A and B. Write a function to determine if the two rectangles overlap.</p></blockquote><p><span id="more-729"></span><br> <strong>Hint:</strong><br> If you are coming up with a complicated set of conditionals, you might think too hard. There is an easier way. Try to think in the opposite direction.</p><p><a href="http://www.leetcode.com/wp-content/uploads/2011/05/overlap_rect1.gif"><img class="aligncenter size-full wp-image-746" title="overlap_rect1" src="http://www.leetcode.com/wp-content/uploads/2011/05/overlap_rect1.gif" alt="" width="309" height="217"></a></p><p><small>Two overlapping rectangles. A rectangle can be defined by its upper left and lower right corner.</small></p><p><strong>Solution:</strong><br> Assume that the two rectangles are given as point (P1, P2) and (P3, P4) respectively. One direct way to attempt this problem is when two rectangles overlap, one rectangle&#8217;s corner point(s) must contain in the other rectangle. Do keep in mind of the following cases:</p><p><a href="http://www.leetcode.com/wp-content/uploads/2011/05/overlap_rect2.gif"><img title="overlap_rect2" src="http://www.leetcode.com/wp-content/uploads/2011/05/overlap_rect2.gif" alt="" width="269" height="237"></a> <a href="http://www.leetcode.com/wp-content/uploads/2011/05/overlap_rect3.gif"></a> <a href="http://www.leetcode.com/wp-content/uploads/2011/05/overlap_rect3.gif"><img title="overlap_rect3" src="http://www.leetcode.com/wp-content/uploads/2011/05/overlap_rect3.gif" alt="" width="227" height="144"></a></p><p><small>More overlapping rectangles cases to consider.</small></p><p>As you can see, the conditionals can be pretty complicated as there are a total eight of them. Can we simplify it further?</p><p>A much easier and better approach would be to think from the opposite. How about asking yourself how the two rectangles <em>cannot</em> overlap each other? Two rectangles do not overlap when one is above/below, or to the left/right of the other rectangle.</p><p>The condition&#8217;s expression is:</p><pre class="hiblock">! ( P2.y  P4.y || P2.x  P4.x )</pre><p>Using <a href="http://en.wikipedia.org/wiki/De_Morgan%27s_laws#Negation_of_a_disjunction">De Morgan&#8217;s law</a>, we can further simplify the above expression to:</p><pre class="hiblock">( P2.y = P3.y &amp;&amp; P1.y = P4.y &amp;&amp; P2.x = P3.x &amp;&amp; P1.x = P4.x )</pre><p><strong><font color="red">Further Thoughts:</font></strong></p><ul><li>What if the two rectangles are not necessarily axis-aligned? (That is, the rectangles can be rotated around its center at a certain angle.) Solving this problem requires more Math and understanding of linear algebra, so if you&#8217;re interested see my post on: <a href="http://www.leetcode.com/2010/04/how-to-determine-if-point-is-inside.html">How to determine if a point is inside a rectangle</a>.</li><li>Given a list of rectangles, how would you determine the set of overlapping rectangles efficiently? Why would this be useful? Imagine you have a number of windows opened on your desktop. The operating system would need to know the overlapped windows in order to repaint the dirty region as windows are being moved around.</li></ul><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a729">Rating: 4.7/<strong>5</strong> (31 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Determine If Two Rectangles Overlap</span></span>, <span class="rating"><span class="average">4.7</span> out of <span class="best">5</span> based on <span class="votes">31</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2011/05/determine-if-two-rectangles-overlap.html" rel="tag">http://leetcode.com/2011/05/determine-if-two-rectangles-overlap.html</a></p></div></div><p id="respond"></p><h3 id="reply-title">Leave a reply <small></small></h3><div id="trackbacks"><h3>3 trackbacks</h3><ul id="trackbacklist"><li> <em>on October 10, 2011</em></li><li> <em>on October 20, 2012</em></li><li> <em>on September 30, 2014</em></li></ul></div></div></div></body><body><div><div class="entry"><blockquote><p>A double-square number is an integer <b>X </b>which can be expressed as the sum of two perfect squares. For example, 10 is a double-square because 10 = 3<sup>2</sup> + 1<sup>2</sup>. Your task in this problem is, given X, determine the number of ways in which it can be written as the sum of two squares. <span id="more-71"></span>For example, 10 can only be written as 32 + 12 (we don&#8217;t count 1<sup>2</sup> + 3<sup>2</sup> as being different). On the other hand, 25 can be written as 5<sup>2</sup> + 0<sup>2</sup> or as 4<sup>2</sup> + 3<sup>2</sup>.</p><p><b>Input</b><br>You should first read an integer <b>N</b>, the number of test cases. The next <b>N </b>lines will contain <b>N</b> values of <b>X</b>.</p><p><b>Constraints</b><br>0 = <b>X </b>= 2147483647<br>1 = <b>N </b>= 100</p><p><b>Output</b><br>For each value of <b>X</b>, you should output the number of ways to write <b>X </b>as the sum of two squares.</p></blockquote><p>Here is my problem analysis for Facebook Hacker Cup Qualification Round: Double Square. While you are reading the problems, you would notice a little subtitle under the main title &#8220;Facebook Hacker Cup&#8221; that says &#8220;<i>Too hard for brute force, switching to dp</i>&#8220;. It&#8217;s there for a purpose. <img border="0" src="http://4.bp.blogspot.com/_UElib2WLeDE/TK7aJSBFXSI/AAAAAAAACW8/5f8CRD5dJ8o/s1600/smiley.jpg"></p><p><u><b>Double Square Problem Analysis:</b></u><br>This problem can be brute-forced (Read below for an efficient <i>O</i>(<span>v</span><i>M</i>) solution). At first I thought of an approach using DP, but it would require an array of size 2147483647, which requires at least 2GB of memory (assuming each element of the array is of type unsigned char).</p><div class="separator"><a href="http://3.bp.blogspot.com/_UElib2WLeDE/TSvs-LSU_pI/AAAAAAAACcU/WYL5gcT0Mjc/s1600/double_squares.JPG" imageanchor="1"><img border="0" src="http://3.bp.blogspot.com/_UElib2WLeDE/TSvs-LSU_pI/AAAAAAAACcU/WYL5gcT0Mjc/s1600/double_squares.JPG"></a></div><p><span>Some interesting double squares. Isn&#8217;t Math beautiful?</span></p><p>Unfortunately, my C++ program failed to allocate such huge amount of memory. I quickly thought of another approach using bit manipulation to store two values in each array element (ie, each occupying 4 bits, half of the size of unsigned char). Although this halved the memory usage requirement, this also means the maximum value of each element could not exceed 2<sup>4</sup> = 16, which is not true, since the largest value could go up to 64. (ie, total number of double squares for the number <b>1215306625 </b>is <b>64</b>.)</p><p>The brute-force method is easy to implement and its complexity is <i>O</i>(<i>M</i>), where <i>M</i> is the input number. Since the input specified that <i>N</i> (total number of inputs) is at most 100, the brute force approach still holds, even though it might take about 30 seconds to few minutes to run.</p><p></p><div id="crayon-54e6a3702cce8" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int doubleSquare(unsigned int m) {
  int total = 0;
  int iUpper = sqrt((double)m / 2.0);
  for (int i = 0; i &lt;= iUpper; i++) {
    unsigned int ii = i*i;
    for (int j = i; ; j++) {
      unsigned int sum = ii + j*j;
      if (sum == m)
        total++;
      else if (sum &gt; m)
        break;
    }
  }
  return total;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e6a3702cce8-1"><span class="t">int</span><span class="h"> </span><span class="e">doubleSquare</span><span class="sy">(</span><span class="t">unsigned</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">m</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e6a3702cce8-2"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">total</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e6a3702cce8-3"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">iUpper</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">sqrt</span><span class="sy">(</span><span class="sy">(</span><span class="t">double</span><span class="sy">)</span><span class="i">m</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2.0</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e6a3702cce8-4"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">iUpper</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e6a3702cce8-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">unsigned</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">ii</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e ">i*</span><span class="i">i</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e6a3702cce8-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">i</span><span class="sy">;</span><span class="h"> </span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e6a3702cce8-7"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="t">unsigned</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">sum</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">ii</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="e ">j*</span><span class="i">j</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e6a3702cce8-8"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">sum</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">m</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54e6a3702cce8-9"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">total</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e6a3702cce8-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">sum</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">m</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54e6a3702cce8-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">break</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e6a3702cce8-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e6a3702cce8-13"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e6a3702cce8-14"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">total</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e6a3702cce8-15"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p><u><b>Update:</b></u></p><p>Thanks to a reader <a href="http://www.leetcode.com/2011/01/double-square-problem-analysis.html?showComment=1294708117368#c8866954883098506071"><b>Pingvin</b></a>, who suggested an efficient <i>O</i>(<span>v</span><i>M</i>) solution!</p><p>Consider that:<br><i>M</i> = <i>x</i><sup>2</sup> + <i>y</i><sup>2</sup>,</p><p>and we have <i>y</i><sup>2</sup> = <i>M</i> &#8211; <i>x</i><sup>2</sup>.</p><p>We can easily tell if (<i>M</i> -<i> x</i><sup>2</sup>) is a perfect square by taking the square root of it and compare it to its truncated value (deleting its fractional part). If both are equal, then it must be a perfect square, or else it is not. This observation is so subtle that many will miss it, yet it just clicks in your head right when you see it! Wow!</p><div id="crayon-54e6a3702ce88" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int doubleSquare(unsigned int m) {
  int p = sqrt((double)m / 2.0);
  int total = 0;
  for (int i = 0; i &lt;= p; i++) {
    double j = sqrt((double)m - i*i);
    if (j - (int)j == 0.0)   // might have precision issue, 
      total++;  // can be resolved using |j-(int)j| == delta
  }
  return total;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e6a3702ce88-1"><span class="t">int</span><span class="h"> </span><span class="e">doubleSquare</span><span class="sy">(</span><span class="t">unsigned</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">m</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e6a3702ce88-2"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">p</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">sqrt</span><span class="sy">(</span><span class="sy">(</span><span class="t">double</span><span class="sy">)</span><span class="i">m</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2.0</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e6a3702ce88-3"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">total</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e6a3702ce88-4"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">p</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e6a3702ce88-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">double</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">sqrt</span><span class="sy">(</span><span class="sy">(</span><span class="t">double</span><span class="sy">)</span><span class="i">m</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="e ">i*</span><span class="i">i</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e6a3702ce88-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">j</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="sy">)</span><span class="v">j</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0.0</span><span class="sy">)</span><span class="h">&#160;&#160; </span><span class="c">// might have precision issue, </span></p><p class="crayon-line" id="crayon-54e6a3702ce88-7"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">total</span><span class="o">++</span><span class="sy">;</span><span class="h">&#160;&#160;</span><span class="c">// can be resolved using |j-(int)j| == delta</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e6a3702ce88-8"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e6a3702ce88-9"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">total</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e6a3702ce88-10"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a71">Rating: 3.7/<strong>5</strong> (12 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Double Square Problem Analysis</span></span>, <span class="rating"><span class="average">3.7</span> out of <span class="best">5</span> based on <span class="votes">12</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Facebook decided to launch <a href="http://www.facebook.com/hackercup">Hacker Cup</a>, a programming contest to attract the world&#8217;s best talents to their HQ. The qualification round started on Friday 4pm (US&#8217;s PST timezone) and continues for 72 hours, so <a href="http://www.facebook.com/hackercup">go ahead and join now</a>.</p></blockquote><p></p><div class="separator"><a href="http://3.bp.blogspot.com/_UElib2WLeDE/TSgq0nxMx3I/AAAAAAAACcI/hDq_N_sTlMY/s1600/hacker_cup_logo.jpg"><img border="0" height="300" src="http://3.bp.blogspot.com/_UElib2WLeDE/TSgq0nxMx3I/AAAAAAAACcI/hDq_N_sTlMY/s400/hacker_cup_logo.jpg" width="400"></a></div><p><span>Facebook&#8217;s Hacker Cup, equivalent to Google&#8217;s Code Jam. The cheapest way to attract the best talents from all over the world.</span></p><p>Just finished <a href="http://www.facebook.com/hackercup/problems.php?round=4">Facebook Hacker Cup Online Qualification Round</a> and thought that I might share some of my thoughts about it.</p><p>Just like <a href="http://code.google.com/codejam/">Google&#8217;s CodeJam</a>, this round consisted a total of three problems, and you would need to solve just one of the problem correctly to qualify for the next round.</p><p>I admit, I had a lot of fun in this round (which had a lot of hidden surprise in the problems), but the contest&#8217;s interface totally suck the hell out of a rhino&#8217;s @$$. And seemed like <a href="http://www.quora.com/Andrew-Brown-2/Facebook-Hacker-Cup-Resounding-Failure">I am not the only one who agrees on this</a>.</p><p><b>The first glitch that really got on my nerves &#8211;</b><br>As you download the input file, the timer starts to countdown, without you knowing about it. Then, I found a little notice on the corner saying that you would have to refresh the browser after downloading the input file to see the timer. I don&#8217;t know why, but this seemed stupid and unacceptable to me.</p><div class="separator"><a href="http://4.bp.blogspot.com/_UElib2WLeDE/TSgpqW-oTEI/AAAAAAAACcA/5KU_r2PTkcc/s1600/notice.JPG" imageanchor="1"><img border="0" src="http://4.bp.blogspot.com/_UElib2WLeDE/TSgpqW-oTEI/AAAAAAAACcA/5KU_r2PTkcc/s1600/notice.JPG"></a></div><p><span>I totally missed this notice box. Guess they don&#8217;t want many people to know that there is actually a little timer.</span></p><p>Second, when you want to submit the answer, it opens up a small text box (by small I mean something like 10&#215;100 pixels), and you are suppose to paste your program&#8217;s output to that little text box. What a FAIL &#8212; They could have done much better.</p><div class="separator"><a href="http://1.bp.blogspot.com/_UElib2WLeDE/TSgpEbcgtyI/AAAAAAAACb8/LAnXgkdsvIs/s1600/submit_textbox.JPG" imageanchor="1"><img border="0" src="http://1.bp.blogspot.com/_UElib2WLeDE/TSgpEbcgtyI/AAAAAAAACb8/LAnXgkdsvIs/s1600/submit_textbox.JPG"></a></div><p><span>No kidding. This is the <i>original size</i> of the text box where you are suppose to paste your answer into.</span></p><p>Third, after you submitted the answer, there is a message box that mentioned that you would need to wait until the contest is over to find out if your answer is correct. Oh well&#8230; On the other hand, the timer just continue on ticking until it says &#8220;Time expired&#8221;. You get multiple chances to submit your answer, but ONLY within the limited time. I learned the hard way. My advice to you is test your code carefully for edge cases before downloading the input. During the limited time you won&#8217;t be able to do much about it if you find that your code has a bug.</p><div class="separator"><a href="http://3.bp.blogspot.com/_UElib2WLeDE/TSgqVDGUG8I/AAAAAAAACcE/bDebAd4I3fc/s1600/hacker_cup.JPG" imageanchor="1"><img border="0" height="229" src="http://3.bp.blogspot.com/_UElib2WLeDE/TSgqVDGUG8I/AAAAAAAACcE/bDebAd4I3fc/s400/hacker_cup.JPG" width="400"></a></div><p><span> Time expired&#8230; Grrr&#8230;</span></p><p>Anyway, enough ranting and let&#8217;s move on to the fun part, which are the problems itself.</p><p><u><b>Double Squares:</b></u><br>This is a really fun problem with a little surprise behind it. While you are reading the problem, you would notice a little subtitle under the main title &#8220;Facebook Hacker Cup&#8221; that says &#8220;<i>Too hard for brute force, switching to dp</i>&#8220;. It&#8217;s there for a purpose. <img border="0" src="http://4.bp.blogspot.com/_UElib2WLeDE/TK7aJSBFXSI/AAAAAAAACW8/5f8CRD5dJ8o/s1600/smiley.jpg"> I knew I did not get this correct because of their timer display requires a browser reload&#8230;</p><p><u><b>Peg Game:</b></u><br>You need to read this problem carefully. Don&#8217;t worry, you won&#8217;t need much from theory of probability. Reminds me of the binomial theorem. If there are no missing pegs, then the probability of each column could be calculated easily using binomial coefficients. This problem is pretty straight forward, but you need to be some what careful.</p><p><u><b>Studious Student:</b></u><br>This is a fun problem. It is easy to understand the problem statement and it is also easy to fall into a trap. This problem is not as straight forward as you think it might be.</p><p>I will post my analysis and solution after the contest is over. Till then have fun solving the problems!</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a70">Rating: 4.0/<strong>5</strong> (1 vote cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Facebook Hacker Cup Online Qualification Round Begins Now!</span></span>, <span class="rating"><span class="average">4.0</span> out of <span class="best">5</span> based on <span class="votes">1</span> rating <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Given two sorted arrays A, B of size <i>m</i> and <i>n</i> respectively. Find the k-th smallest element in the union of A and B. You can assume that there are no duplicate elements.</p></blockquote><p><span id="more-76"></span><br> Thanks to an <a href="http://www.leetcode.com/2011/01/sliding-window-maximum.html?showComment=1296084234466#c2660564749129817681">anonymous reader</a> who posted this question.</p><p>I would have to admit that this problem is pretty tricky to solve. Like most difficult problems, it requires some pretty clever observations to solve in a neat way.</p><p><b>The trivial way, <i>O</i>(<i>m</i>+<i>n</i>):</b><br>Merge both arrays and the k-th smallest element could be accessed directly. Merging would require extra space of <i>O</i>(<i>m</i>+<i>n</i>). The linear run time is pretty good, but could we improve it even further?</p><p><b>A better way, <i>O</i>(<i>k</i>):</b><br>There is an improvement from the above method, thanks to readers who suggested this. (See comments below by <a href="http://www.leetcode.com/2011/01/find-k-th-smallest-element-in-union-of.html?showComment=1296141596487#c7400073356635703229">Martin</a> for an implementation). Using two pointers, you can traverse both arrays without actually merging them, thus without the extra space. Both pointers are initialized to point to head of A and B respectively, and the pointer that has the <del datetime="2012-07-09T21:25:07+00:00">larger</del> <ins datetime="2012-07-09T21:25:07+00:00">smaller (thanks to a reader for this correction)</ins> of the two is incremented one step. The k-th smallest is obtained by traversing a total of <i>k</i> steps. This algorithm is very similar to <a href="http://www.leetcode.com/2010/03/here-is-phone-screening-question-from.html">finding intersection of two sorted arrays</a>.</p><p><b>The best solution, but non-trivial, <i>O</i>(lg <i>m</i> + lg <i>n</i>):</b><br>Although the above solution is an improvement both in run time and space complexity, it only works well for small values of <i>k</i>, and thus is still in linear run time. Could we improve the run time further?</p><p>The above logarithmic complexity gives us one important hint. Binary search is a great example of achieving logarithmic complexity by halving its search space in each iteration. Therefore, to achieve the complexity of <i>O</i>(lg<i> m</i> + lg <i>n</i>), we must halved the search space of A and B in each iteration.</p><p>We try to approach this tricky problem by comparing middle elements of A and B, which we identify as A<sub>i</sub> and B<sub>j</sub>. If A<sub>i</sub> is between B<sub>j</sub> and B<sub>j-1</sub>, we have just found the <i>i</i>+<i>j</i>+1 smallest element. Why? Therefore, if we choose <i>i</i> and <i>j</i> such that<i> i</i>+<i>j</i> = <i>k</i>-1, we are able to find the k-th smallest element. This is an important invariant that we must maintain for the correctness of this algorithm.</p><p>Summarizing the above,</p><div class="hiblock">Maintaining the invariant<br><i> i </i>+ <i>j</i> = <i>k</i> &#8211; 1,<p>If B<sub>j-1</sub> i j, then A<sub>i</sub> must be the k-th smallest,<br>or else if A<sub>i-1</sub> j i, then B<sub>j</sub> must be the k-th smallest.</p></div><p>If one of the above conditions are satisfied, we are done. If not, we will use <i>i</i> and <i>j</i> as the pivot index to subdivide the arrays. But how? Which portion should we discard? How about A<sub>i</sub> and B<sub>j</sub> itself?</p><p>We make an observation that when A<sub>i</sub> j, then it must be true that A<sub>i</sub> j-1. On the other hand, if B<sub>j</sub> i, then B<sub>j</sub> i-1. Why?</p><p>Using the above relationship, it becomes clear that when A<sub>i</sub> j, A<sub>i</sub> and its lower portion could never be the k-th smallest element. So do B<sub>j</sub> and its upper portion. Therefore, we could conveniently discard A<sub>i</sub> with its lower portion and B<sub>j</sub> with its upper portion.</p><p>If you are still not convince why the above argument is true, try drawing blocks representing elements in A and B. Try visualize inserting blocks of A up to A<sub>i</sub> in front of B<sub>j-1</sub>. You could easily see that no elements in the inserted blocks would ever be the k-th smallest. For the latter, you might want to keep the invariant <i>i</i> + <i>j</i> = <i>k</i> &#8211; 1 in mind to reason why B<sub>j</sub> and its upper portion could never be the k-th smallest.</p><p>On the other hand, the case for A<sub>i</sub> &gt; B<sub>j</sub> is just the other way around. Easy.</p><p>Below is the code and I have inserted lots of assertion (highly recommended programming style by the way) to help you understand the code. Note that the below code is an example of <a href="http://en.wikipedia.org/wiki/Tail_recursion">tail recursion</a>, so you could technically convert it to an iterative method in a straightforward manner. However, I would leave it as it is, since this is how I derive the solution and it seemed more natural to be expressed in a recursive manner.</p><p>Another side note is regarding the choices of <i>i</i> and <i>j</i>. The below code would subdivide both arrays using its array sizes as weights. The reason is it might be able to guess the k-th element quicker (as long as the A and B is not differed in an extreme way; ie, all elements in A are smaller than B). If you are wondering, yes, you could choose <i>i</i> to be A&#8217;s middle. In theory, you could choose any values for <i>i</i> and <i>j</i> as long as the invariant <i>i</i>+<i>j</i> = <i>k</i>-1 is satisfied.</p><p></p><div id="crayon-54e8dd4331f99" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int findKthSmallest(int A[], int m, int B[], int n, int k) {
  assert(m &gt;= 0); assert(n &gt;= 0); assert(k &gt; 0); assert(k &lt;= m+n);
  
  int i = (int)((double)m / (m+n) * (k-1));
  int j = (k-1) - i;

  assert(i &gt;= 0); assert(j &gt;= 0); assert(i &lt;= m); assert(j &lt;= n);
  // invariant: i + j = k-1
  // Note: A[-1] = -INF and A[m] = +INF to maintain invariant
  int Ai_1 = ((i == 0) ? INT_MIN : A[i-1]);
  int Bj_1 = ((j == 0) ? INT_MIN : B[j-1]);
  int Ai   = ((i == m) ? INT_MAX : A[i]);
  int Bj   = ((j == n) ? INT_MAX : B[j]);

  if (Bj_1 &lt; Ai &amp;&amp; Ai &lt; Bj)
    return Ai;
  else if (Ai_1 &lt; Bj &amp;&amp; Bj &lt; Ai)
    return Bj;

  assert((Ai &gt; Bj &amp;&amp; Ai_1 &gt; Bj) || 
         (Ai &lt; Bj &amp;&amp; Ai &lt; Bj_1));

  // if none of the cases above, then it is either:
  if (Ai &lt; Bj)
    // exclude Ai and below portion
    // exclude Bj and above portion
    return findKthSmallest(A+i+1, m-i-1, B, j, k-i-1);
  else /* Bj &lt; Ai */
    // exclude Ai and above portion
    // exclude Bj and below portion
    return findKthSmallest(A, i, B+j+1, n-j-1, k-j-1);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54e8dd4331f99-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8dd4331f99-2">2</p><p class="crayon-num" data-line="crayon-54e8dd4331f99-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8dd4331f99-4">4</p><p class="crayon-num" data-line="crayon-54e8dd4331f99-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8dd4331f99-6">6</p><p class="crayon-num" data-line="crayon-54e8dd4331f99-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8dd4331f99-8">8</p><p class="crayon-num" data-line="crayon-54e8dd4331f99-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8dd4331f99-10">10</p><p class="crayon-num" data-line="crayon-54e8dd4331f99-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8dd4331f99-12">12</p><p class="crayon-num" data-line="crayon-54e8dd4331f99-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8dd4331f99-14">14</p><p class="crayon-num" data-line="crayon-54e8dd4331f99-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8dd4331f99-16">16</p><p class="crayon-num" data-line="crayon-54e8dd4331f99-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8dd4331f99-18">18</p><p class="crayon-num" data-line="crayon-54e8dd4331f99-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8dd4331f99-20">20</p><p class="crayon-num" data-line="crayon-54e8dd4331f99-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8dd4331f99-22">22</p><p class="crayon-num" data-line="crayon-54e8dd4331f99-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8dd4331f99-24">24</p><p class="crayon-num" data-line="crayon-54e8dd4331f99-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8dd4331f99-26">26</p><p class="crayon-num" data-line="crayon-54e8dd4331f99-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8dd4331f99-28">28</p><p class="crayon-num" data-line="crayon-54e8dd4331f99-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8dd4331f99-30">30</p><p class="crayon-num" data-line="crayon-54e8dd4331f99-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e8dd4331f99-32">32</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e8dd4331f99-1"><span class="t">int</span><span class="h"> </span><span class="e">findKthSmallest</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">m</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">B</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">k</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8dd4331f99-2"><span class="h">&#160;&#160;</span><span class="st">assert</span><span class="sy">(</span><span class="i">m</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="sy">;</span><span class="h"> </span><span class="st">assert</span><span class="sy">(</span><span class="i">n</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="sy">;</span><span class="h"> </span><span class="st">assert</span><span class="sy">(</span><span class="i">k</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="sy">;</span><span class="h"> </span><span class="st">assert</span><span class="sy">(</span><span class="i">k</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">m</span><span class="o">+</span><span class="i">n</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8dd4331f99-3"><span class="h">&#160;&#160;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8dd4331f99-4"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="sy">)</span><span class="sy">(</span><span class="sy">(</span><span class="t">double</span><span class="sy">)</span><span class="i">m</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="sy">(</span><span class="i">m</span><span class="o">+</span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="o">*</span><span class="h"> </span><span class="sy">(</span><span class="i">k</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8dd4331f99-5"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="i">k</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="i">i</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8dd4331f99-6">&#160;</p><p class="crayon-line" id="crayon-54e8dd4331f99-7"><span class="h">&#160;&#160;</span><span class="st">assert</span><span class="sy">(</span><span class="i">i</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="sy">;</span><span class="h"> </span><span class="st">assert</span><span class="sy">(</span><span class="i">j</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="sy">;</span><span class="h"> </span><span class="st">assert</span><span class="sy">(</span><span class="i">i</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">m</span><span class="sy">)</span><span class="sy">;</span><span class="h"> </span><span class="st">assert</span><span class="sy">(</span><span class="i">j</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8dd4331f99-8"><span class="h">&#160;&#160;</span><span class="c">// invariant: i + j = k-1</span></p><p class="crayon-line" id="crayon-54e8dd4331f99-9"><span class="h">&#160;&#160;</span><span class="c">// Note: A[-1] = -INF and A[m] = +INF to maintain invariant</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8dd4331f99-10"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">Ai_1</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="v">i</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="i">INT_MIN</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">i</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8dd4331f99-11"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">Bj_1</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="v">j</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="i">INT_MIN</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="v">B</span><span class="sy">[</span><span class="i">j</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8dd4331f99-12"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">Ai</span><span class="h">&#160;&#160; </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="v">i</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">m</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="i">INT_MAX</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8dd4331f99-13"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">Bj</span><span class="h">&#160;&#160; </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="v">j</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="i">INT_MAX</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="v">B</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8dd4331f99-14">&#160;</p><p class="crayon-line" id="crayon-54e8dd4331f99-15"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">Bj_1</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">Ai</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">Ai</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">Bj</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8dd4331f99-16"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">Ai</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8dd4331f99-17"><span class="h">&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">Ai_1</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">Bj</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">Bj</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">Ai</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8dd4331f99-18"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">Bj</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8dd4331f99-19">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54e8dd4331f99-20"><span class="h">&#160;&#160;</span><span class="st">assert</span><span class="sy">(</span><span class="sy">(</span><span class="i">Ai</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">Bj</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">Ai_1</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">Bj</span><span class="sy">)</span><span class="h"> </span><span class="o">||</span><span class="h"> </span></p><p class="crayon-line" id="crayon-54e8dd4331f99-21"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="sy">(</span><span class="i">Ai</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">Bj</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">Ai</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">Bj_1</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8dd4331f99-22">&#160;</p><p class="crayon-line" id="crayon-54e8dd4331f99-23"><span class="h">&#160;&#160;</span><span class="c">// if none of the cases above, then it is either:</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8dd4331f99-24"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">Ai</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">Bj</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54e8dd4331f99-25"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// exclude Ai and below portion</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8dd4331f99-26"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// exclude Bj and above portion</span></p><p class="crayon-line" id="crayon-54e8dd4331f99-27"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">findKthSmallest</span><span class="sy">(</span><span class="i">A</span><span class="o">+</span><span class="i">i</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">m</span><span class="o">-</span><span class="i">i</span><span class="o">-</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">B</span><span class="sy">,</span><span class="h"> </span><span class="i">j</span><span class="sy">,</span><span class="h"> </span><span class="i">k</span><span class="o">-</span><span class="i">i</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8dd4331f99-28"><span class="h">&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="c">/* Bj &lt; Ai */</span></p><p class="crayon-line" id="crayon-54e8dd4331f99-29"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// exclude Ai and above portion</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8dd4331f99-30"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// exclude Bj and below portion</span></p><p class="crayon-line" id="crayon-54e8dd4331f99-31"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">findKthSmallest</span><span class="sy">(</span><span class="i">A</span><span class="sy">,</span><span class="h"> </span><span class="i">i</span><span class="sy">,</span><span class="h"> </span><span class="i">B</span><span class="o">+</span><span class="i">j</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="i">j</span><span class="o">-</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">k</span><span class="o">-</span><span class="i">j</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8dd4331f99-32"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a76">Rating: 4.7/<strong>5</strong> (145 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Find the k-th Smallest Element in the Union of Two Sorted Arrays</span></span>, <span class="rating"><span class="average">4.7</span> out of <span class="best">5</span> based on <span class="votes">145</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div id="post-12" class="post-12 post type-post status-publish format-standard hentry category-uncategorized"><div class="post-content"><h1 class="posttitle">Finding all unique triplets that sums to zero</h1><p class="date"> April 12, 2010 <span>in <a href="http://leetcode.com/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Given a set S of n integers, are there elements a, b, c in S such that a + b + c = 0? Find all unique triplets in the set which gives the sum of zero.<span id="more-12"></span></p><p>For example, given set S = {-1 0 1 2 -1 -4},</p><p>One possible solution set is:<br>(-1, 0, 1)<br>(-1, 2, -1)</p><p>Note that (0, 1, -1) is not part of the solution above, because (0, 1, -1) is the duplicate of (-1, 0, 1). Same with (-1, -1, 2).</p><p>For a set S, there is probably no &#8220;the&#8221; solution, another solution could be:<br>(0, 1, -1)<br>(2, -1, -1)</p></blockquote><p><strong><span>Online Judge</span></strong><br> This problem is available at <a href="http://www.leetcode.com/onlinejudge">Online Judge</a>. <a href="http://www.leetcode.com/onlinejudge">Head over there</a> and it will judge your solution. Currently only able to compile C++/Java code. If you are using other languages, you can still verify your solution by looking at the judge&#8217;s test cases and its expected output.</p><p>This is also known as <a href="http://en.wikipedia.org/wiki/3SUM">the 3sum problem</a>. The 3sum problem is the extension of the problem below:</p><blockquote><p>Given a set S of n integers, find all pairs of integers of a and b in S such that a + b = k?</p></blockquote><p>The above problem can be solved in O(n) time, assuming that the set S is already sorted. By using two index first and last, each pointing to the first and last element, we look at the element pointed by first, which we call A. We know that we need to find B = k &#8211; A, the complement of A. If the element pointed by last is less than B, we know that the choice is to increment pointer first by one step. Similarly, if the element pointed by last is greater than B, we decrement pointer last by one step. We are progressively refining the sum step by step. Since each step we move a pointer one step, there are at most n steps, which gives the complexity of O(n).</p><p>By incorporating the solution above, we can solve the 3sum problem in O(n^2) time, which is a straight forward extension.</p><p></p><div id="crayon-54ecbda6c933b" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
set&lt;vector&lt;int&gt; &gt; find_triplets(vector&lt;int&gt; arr) {
  sort(arr.begin(), arr.end());
  set&lt;vector&lt;int&gt; &gt; triplets;
  vector&lt;int&gt; triplet(3);
  int n = arr.size();
  for (int i = 0;i &lt; n; i++) {
    int j = i + 1;
    int k = n - 1;
    while (j &lt; k) {
      int sum_two = arr[i] + arr[j];
      if (sum_two + arr[k] &lt; 0) {
        j++;
      } else if (sum_two + arr[k] &gt; 0) {
        k--;
      } else {
        triplet[0] = arr[i];
        triplet[1] = arr[j];
        triplet[2] = arr[k];
        triplets.insert(triplet);
        j++;
        k--;
      }
    }
  }
  return triplets;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ecbda6c933b-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecbda6c933b-2">2</p><p class="crayon-num" data-line="crayon-54ecbda6c933b-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecbda6c933b-4">4</p><p class="crayon-num" data-line="crayon-54ecbda6c933b-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecbda6c933b-6">6</p><p class="crayon-num" data-line="crayon-54ecbda6c933b-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecbda6c933b-8">8</p><p class="crayon-num" data-line="crayon-54ecbda6c933b-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecbda6c933b-10">10</p><p class="crayon-num" data-line="crayon-54ecbda6c933b-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecbda6c933b-12">12</p><p class="crayon-num" data-line="crayon-54ecbda6c933b-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecbda6c933b-14">14</p><p class="crayon-num" data-line="crayon-54ecbda6c933b-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecbda6c933b-16">16</p><p class="crayon-num" data-line="crayon-54ecbda6c933b-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecbda6c933b-18">18</p><p class="crayon-num" data-line="crayon-54ecbda6c933b-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecbda6c933b-20">20</p><p class="crayon-num" data-line="crayon-54ecbda6c933b-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecbda6c933b-22">22</p><p class="crayon-num" data-line="crayon-54ecbda6c933b-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecbda6c933b-24">24</p><p class="crayon-num" data-line="crayon-54ecbda6c933b-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecbda6c933b-26">26</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecbda6c933b-1"><span class="i">set</span><span class="o">&lt;</span><span class="i">vector</span><span class="o">&lt;</span><span class="t">int</span><span class="o">&gt;</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="e">find_triplets</span><span class="sy">(</span><span class="i">vector</span><span class="o">&lt;</span><span class="t">int</span><span class="o">&gt;</span><span class="h"> </span><span class="i">arr</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecbda6c933b-2"><span class="h">&#160;&#160;</span><span class="e">sort</span><span class="sy">(</span><span class="v">arr</span><span class="sy">.</span><span class="e">begin</span><span class="sy">(</span><span class="sy">)</span><span class="sy">,</span><span class="h"> </span><span class="v">arr</span><span class="sy">.</span><span class="st">end</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecbda6c933b-3"><span class="h">&#160;&#160;</span><span class="i">set</span><span class="o">&lt;</span><span class="i">vector</span><span class="o">&lt;</span><span class="t">int</span><span class="o">&gt;</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">triplets</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecbda6c933b-4"><span class="h">&#160;&#160;</span><span class="i">vector</span><span class="o">&lt;</span><span class="t">int</span><span class="o">&gt;</span><span class="h"> </span><span class="e">triplet</span><span class="sy">(</span><span class="cn">3</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecbda6c933b-5"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">n</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">arr</span><span class="sy">.</span><span class="e">size</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecbda6c933b-6"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecbda6c933b-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecbda6c933b-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">k</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">n</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecbda6c933b-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">j</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">k</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecbda6c933b-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">sum_two</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">arr</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="v">arr</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecbda6c933b-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">sum_two</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="v">arr</span><span class="sy">[</span><span class="i">k</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecbda6c933b-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">j</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecbda6c933b-13"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">sum_two</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="v">arr</span><span class="sy">[</span><span class="i">k</span><span class="sy">]</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecbda6c933b-14"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">k</span><span class="o">--</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecbda6c933b-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecbda6c933b-16"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">triplet</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">arr</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecbda6c933b-17"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">triplet</span><span class="sy">[</span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">arr</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecbda6c933b-18"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">triplet</span><span class="sy">[</span><span class="cn">2</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">arr</span><span class="sy">[</span><span class="i">k</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecbda6c933b-19"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">triplets</span><span class="sy">.</span><span class="e">insert</span><span class="sy">(</span><span class="i">triplet</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecbda6c933b-20"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">j</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecbda6c933b-21"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">k</span><span class="o">--</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecbda6c933b-22"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecbda6c933b-23"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecbda6c933b-24"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecbda6c933b-25"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">triplets</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecbda6c933b-26"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>Note that a set is chosen to store the triplets, because we are only interested in unique triplets. Since the set S is already sorted, and we don&#8217;t look back as it progresses forward, we can guarantee there will be no duplicate triplets (Even though the set might have duplicate elements.)</p><p><b><font color="red">Further Thoughts:</font></b><br> Now, a challenge for you. Could you figure out a way to compute your solution set with only unique triplets without the help of a build-in data structure (such as set)?</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a12">Rating: 4.3/<strong>5</strong> (22 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Finding all unique triplets that sums to zero</span></span>, <span class="rating"><span class="average">4.3</span> out of <span class="best">5</span> based on <span class="votes">22</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/04/finding-all-unique-triplets-that-sums.html" rel="tag">http://leetcode.com/2010/04/finding-all-unique-triplets-that-sums.html</a></p></div></div></div></body><body><div><div class="entry"><blockquote><p>Given a set T of characters and a string S, find the minimum window in S which will contain all the characters in T in complexity <i>O</i>(<i>n</i>).<span id="more-56"></span></p><p>eg,<br>S = &#8220;ADOBECODEBANC&#8221;<br>T = &#8220;ABC&#8221;</p><p>Minimum window is &#8220;BANC&#8221;.</p></blockquote><p>This is an interesting problem and interesting problems have multiple approaches and the best approach is usually simple and beautiful.</p><p>In this post, I illustrate my approach when I first attempt this problem. My first approach is more complicated and is not the best solution (runs in O(<i>N</i> lg <i>M</i>) time). Later in this post, I explain the best approach which runs in <i>O</i>(<i>N</i>) time with the help of images.</p><p><b>Hint:</b><br>Using the above example <b>S </b>= &#8220;<b>ADOBECODEBANC</b>&#8221; and <b>T</b> = &#8220;<b>ABC</b>&#8220;, we can easily find the first window which contains <b>T</b> is &#8220;<b>ADOBEC</b>&#8220;. Another possible candidate is &#8220;<b>ADOBECODEBA</b>&#8220;. In fact, we should skip this, because within it exists a sub-window &#8220;<b>CODEBA</b>&#8221; that is both shorter and satisfy the constraint. The final window to consider is &#8220;<b>BANC</b>&#8220;, which is also the minimum window.</p><p>To solve this problem efficiently, below are the two key points we need to consider:</p><div class="hiblock"><ul><li>How do we determine if a particular window contains <b>T</b>? (ideally in <i>O</i>(1) time)</li><li>How do we select all windows efficiently? (ideally do not include other windows that wrap about a sub-window)</li></ul></div><p>We definitely need the help from a hash table here. Hash table is able to tell us if a letter exist in <b>T</b> in <i>O</i>(1) time.</p><p><b>An <i>O</i>(<i>N</i> lg <i>M</i>) solution:</b><br>When I first approach this problem, I thought of having another table which records the position of last-met character in <b>T</b>. That is, when I first see &#8216;<b>A</b>&#8216;, I record its position being <b>0</b>. Each time I see &#8216;<b>A</b>&#8216; again, I replace its position with the new position. This approach is simple but flawed. Notice that <b>T</b> does not include duplicate characters? If <b>T</b> includes duplicate characters, such as &#8220;<b>AABC</b>&#8220;, this approach does not work.</p><p>In this case, the remedy is to maintain queues (instead of table) that correspond to each unique character in <b>T</b>. For example, assume that <b>T</b> = &#8220;<b>AABC</b>&#8220;, when you first see &#8216;<b>A</b>&#8216;, push its position into the &#8216;<b>A</b>&#8216; queue (which originally is empty). When you see &#8216;<b>A</b>&#8216; again, push its position to the back of &#8216;<b>A</b>&#8216; queue. The third time you see &#8216;<b>A</b>&#8216;, you would pop the front element, and push its position to the back of &#8216;<b>A</b>&#8216; queue. By popping the element, we do not include window that wrap around a sub-window. This approach works but the difficulty is two-fold:</p><div class="hiblock"><ul><li>There is no way we could determine the starting and ending position of a window directly from the queue itself. A naive way is to scan the entire queue for minimum and maximum value.</li><li>How do we determine if the window satisfies the constraint? We would have to scan all queues to check if the sum of all queues&#8217; sizes is equal to <b>T</b>&#8216;s length.</li></ul></div><p>The way I solve the above problem is to maintain a sorted map that maps indices to character so that we can grab the minimum and maximum position in <i>O</i>(1) time. But there is an extra cost for doing this. Each time you pop an element from the queue, you would also need to update the map by deleting the corresponding element and inserting a new element. To check if the window satisfies the constraint, we check the map&#8217;s size; a valid window is found if the map&#8217;s size is equal to <b>T&#8217;</b>s length.</p><p>The complexity of the method is <i>O</i>(<i>N</i> lg <i>M</i>), where <i>N</i> is the length of <b>S</b>, and <i>M</i> is the length of <b>T</b>. The extra lg <i>M</i> term is due to the extra cost of deleting and inserting an element in the map, where each costs O(lg <i>M</i>) time in the worst case (Note that <i>M</i> is the map&#8217;s maximum size. Why?)</p><p></p><div id="crayon-54ebfa5ee1529" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" touchscreen minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick">
// Returns false if no valid window is found. Else returns 
// true and updates minWindowBegin and minWindowEnd with the 
// starting and ending position of the minimum window.
bool findMinWindow(const char *str, const char *pattern, 
                   int &amp;minWindowBegin, int &amp;minWindowEnd) {
  int N = strlen(str);
  int M = strlen(pattern);
  int minWindowLen = INT_MAX;
   
  // hash table init all to 0s
  // used to check how many letters left in T to be filled
  int needToFill[256] = {0};

  for (int i = 0; i &lt; M; i++)
    needToFill[pattern[i]]++;

  // set the rest to -1 so we know that letter is not in T
  for (int i = 0; i &lt; 256; i++)
    if (needToFill[i] == 0)
      needToFill[i] = -1;

  // array of queues, each corresponds to a unique char in T
  queue&lt;int&gt; q[256];

  // maintains a sorted map (maps indices to char), 
  // the first and last element tells us the 
  // starting and ending position of the window
  map&lt;int,char&gt; m;

  for (int i = 0; i &lt; N; i++) {
    // skips characters not in T
    if (needToFill[str[i]] == -1) continue;
    
    // push character to queue
    if (q[str[i]].size() &lt; needToFill[str[i]]) {
      q[str[i]].push(i);
      m[i] = str[i];
    }
    // replace the character in the queue 
    // and updates the corresponding element in the map
    else {
      int idxToErase = q[str[i]].front();
      map&lt;int,char&gt;::iterator it = m.find(idxToErase);
      m.erase(it);
      m[i] = str[i];
      q[str[i]].pop();
      q[str[i]].push(i);
    }

    // found a window, check for minimum
    if (m.size() == M) {
      int end = m.rbegin()-&gt;first;
      int begin = m.begin()-&gt;first;
      int windowLen = end - begin + 1;
      if (windowLen &lt; minWindowLen) {
        minWindowLen = windowLen;
        minWindowBegin = begin;
        minWindowEnd = end;
      }
    } // end if
  } // end for
   
  return (m.size() == M) ? true : false;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ebfa5ee1529-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-2">2</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-4">4</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-6">6</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-8">8</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-10">10</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-12">12</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-14">14</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-16">16</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-18">18</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-20">20</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-22">22</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-24">24</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-26">26</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-28">28</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-30">30</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-32">32</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-34">34</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-36">36</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-38">38</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-40">40</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-41">41</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-42">42</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-43">43</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-44">44</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-45">45</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-46">46</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-47">47</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-48">48</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-49">49</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-50">50</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-51">51</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-52">52</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-53">53</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-54">54</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-55">55</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-56">56</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-57">57</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-58">58</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-59">59</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-60">60</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-61">61</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-62">62</p><p class="crayon-num" data-line="crayon-54ebfa5ee1529-63">63</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee1529-64">64</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ebfa5ee1529-1"><span class="c">// Returns false if no valid window is found. Else returns </span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-2"><span class="c">// true and updates minWindowBegin and minWindowEnd with the </span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-3"><span class="c">// starting and ending position of the minimum window.</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-4"><span class="t">bool</span><span class="h"> </span><span class="e">findMinWindow</span><span class="sy">(</span><span class="m">const</span><span class="h"> </span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="i">str</span><span class="sy">,</span><span class="h"> </span><span class="m">const</span><span class="h"> </span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="i">pattern</span><span class="sy">,</span><span class="h"> </span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-5"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">minWindowBegin</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">minWindowEnd</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-6"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">N</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">strlen</span><span class="sy">(</span><span class="i">str</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-7"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">M</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">strlen</span><span class="sy">(</span><span class="i">pattern</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-8"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">minWindowLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">INT_MAX</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-9"><span class="h">&#160;&#160; </span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-10"><span class="h">&#160;&#160;</span><span class="c">// hash table init all to 0s</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-11"><span class="h">&#160;&#160;</span><span class="c">// used to check how many letters left in T to be filled</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-12"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">needToFill</span><span class="sy">[</span><span class="cn">256</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">{</span><span class="cn">0</span><span class="sy">}</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-13">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-14"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">M</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-15"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">needToFill</span><span class="sy">[</span><span class="v">pattern</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">]</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-16">&#160;</p><p class="crayon-line" id="crayon-54ebfa5ee1529-17"><span class="h">&#160;&#160;</span><span class="c">// set the rest to -1 so we know that letter is not in T</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-18"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="cn">256</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-19"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">needToFill</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-20"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">needToFill</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="o">-</span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-21">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-22"><span class="h">&#160;&#160;</span><span class="c">// array of queues, each corresponds to a unique char in T</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-23"><span class="h">&#160;&#160;</span><span class="i">queue</span><span class="o">&lt;</span><span class="t">int</span><span class="o">&gt;</span><span class="h"> </span><span class="v">q</span><span class="sy">[</span><span class="cn">256</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-24">&#160;</p><p class="crayon-line" id="crayon-54ebfa5ee1529-25"><span class="h">&#160;&#160;</span><span class="c">// maintains a sorted map (maps indices to char), </span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-26"><span class="h">&#160;&#160;</span><span class="c">// the first and last element tells us the </span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-27"><span class="h">&#160;&#160;</span><span class="c">// starting and ending position of the window</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-28"><span class="h">&#160;&#160;</span><span class="i">map</span><span class="o">&lt;</span><span class="t">int</span><span class="sy">,</span><span class="t">char</span><span class="o">&gt;</span><span class="h"> </span><span class="i">m</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-29">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-30"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">N</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-31"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// skips characters not in T</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-32"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">needToFill</span><span class="sy">[</span><span class="v">str</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">]</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="h"> </span><span class="st">continue</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-33"><span class="h">&#160;&#160;&#160;&#160;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-34"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// push character to queue</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-35"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">q</span><span class="sy">[</span><span class="v">str</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">]</span><span class="sy">.</span><span class="e">size</span><span class="sy">(</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="v">needToFill</span><span class="sy">[</span><span class="v">str</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-36"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">q</span><span class="sy">[</span><span class="v">str</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">]</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">i</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-37"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">m</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">str</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-38"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-39"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// replace the character in the queue </span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-40"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// and updates the corresponding element in the map</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-41"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-42"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">idxToErase</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">q</span><span class="sy">[</span><span class="v">str</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">]</span><span class="sy">.</span><span class="e">front</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-43"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">map</span><span class="o">&lt;</span><span class="t">int</span><span class="sy">,</span><span class="t">char</span><span class="o">&gt;</span><span class="o">::</span><span class="e">iterator </span><span class="v">it</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">m</span><span class="sy">.</span><span class="e">find</span><span class="sy">(</span><span class="i">idxToErase</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-44"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">m</span><span class="sy">.</span><span class="e">erase</span><span class="sy">(</span><span class="i">it</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-45"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">m</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">str</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-46"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">q</span><span class="sy">[</span><span class="v">str</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">]</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-47"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">q</span><span class="sy">[</span><span class="v">str</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">]</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">i</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-48"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-49">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-50"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// found a window, check for minimum</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-51"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">m</span><span class="sy">.</span><span class="e">size</span><span class="sy">(</span><span class="sy">)</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">M</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-52"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="st">end</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">m</span><span class="sy">.</span><span class="e">rbegin</span><span class="sy">(</span><span class="sy">)</span><span class="o">-&gt;</span><span class="i">first</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-53"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">begin</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">m</span><span class="sy">.</span><span class="e">begin</span><span class="sy">(</span><span class="sy">)</span><span class="o">-&gt;</span><span class="i">first</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-54"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">windowLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="st">end</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="i">begin</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-55"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">windowLen</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">minWindowLen</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-56"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">minWindowLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">windowLen</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-57"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">minWindowBegin</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">begin</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-58"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">minWindowEnd</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="st">end</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-59"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-60"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="c">// end if</span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-61"><span class="h">&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="c">// end for</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-62"><span class="h">&#160;&#160; </span></p><p class="crayon-line" id="crayon-54ebfa5ee1529-63"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="v">m</span><span class="sy">.</span><span class="e">size</span><span class="sy">(</span><span class="sy">)</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">M</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="t">true</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee1529-64"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b>Best solution:</b><br>The best solution, is in fact simpler. This best approach is suggested by someone who called <span> stormrage </span>.</p><p>Notice how complicated the above solution is. It uses a hash table, a queue, and a sorted map. During an interview, the problems tend to be short and the solution usually can be coded in about 50 lines of code. So be sure that you say out loud what you are thinking and keep communication opened with the interviewer. Check if your approach is unnecessary complex, he/she might be able to give you guidance. The last thing you want to do is to get stuck in a corner and keep silent.</p><p>To help illustrate this approach, I use a different example: <b>S</b> = &#8220;<b>acbbaca</b>&#8221; and <b>T</b> = &#8220;<b>aba</b>&#8220;. The idea is mainly based on the help of two pointers (begin and end position of the window) and two tables (<i>needToFind </i>and <i>hasFound</i>) while traversing <b>S</b>. <i>needToFind</i> stores the total count of a character in <b>T</b> and <i>hasFound</i> stores the total count of a character met so far. We also use a <i>count</i> variable to store the total characters in <b>T</b> that&#8217;s met so far (not counting characters where hasFound[<i>x</i>]<i> </i>exceeds needToFind[<i>x</i>]). When count equals <b>T</b>&#8216;s length, we know a valid window is found.</p><p>Each time we advance the end pointer (pointing to an element <i>x</i>), we increment hasFound[<i>x</i>] by one. We also increment <i>count </i>by one if hasFound[<i>x</i>] is less than or equal to needToFind[<i>x</i>]. Why? When the constraint is met (that is, <i>count</i> equals to <b>T</b>&#8216;s size), we immediately advance begin pointer as far right as possible while maintaining the constraint.</p><p>How do we check if it is maintaining the constraint? Assume that begin points to an element <i>x</i>, we check if hasFound[<i>x</i>] is greater than needToFind[<i>x</i>]. If it is, we can decrement hasFound[<i>x</i>] by one and advancing begin pointer without breaking the constraint. On the other hand, if it is not, we stop immediately as advancing begin pointer breaks the window constraint.</p><p>Finally, we check if the minimum window length is less than the current minimum. Update the current minimum if a new minimum is found.</p><p>Essentially, the algorithm finds the first window that satisfies the constraint, then continue maintaining the constraint throughout.</p><p></p><div class="separator"><a href="http://2.bp.blogspot.com/_UElib2WLeDE/TOBuvjG6exI/AAAAAAAACYE/uludVXtJ8OY/s1600/sliding.gif" imageanchor="1"><img border="0" height="83" src="http://2.bp.blogspot.com/_UElib2WLeDE/TOBuvjG6exI/AAAAAAAACYE/uludVXtJ8OY/s400/sliding.gif" width="400"></a></div><p><span>i) <b>S</b> = &#8220;<b>acbbaca</b>&#8221; and <b>T</b> = &#8220;<b>aba</b>&#8220;.<br></span></p><p></p><div class="separator"><a href="http://4.bp.blogspot.com/_UElib2WLeDE/TOBvHRLbOAI/AAAAAAAACYI/38QLgUIMePU/s1600/sliding_2.gif" imageanchor="1"><img border="0" height="79" src="http://4.bp.blogspot.com/_UElib2WLeDE/TOBvHRLbOAI/AAAAAAAACYI/38QLgUIMePU/s400/sliding_2.gif" width="400"></a></div><p><span>ii) The first minimum window is found. Notice that we cannot advance begin pointer as hasFound['a'] == needToFind['a'] == 2. Advancing would mean breaking the constraint.<br></span></p><p></p><div class="separator"><a href="http://3.bp.blogspot.com/_UElib2WLeDE/TOBvLH1aLcI/AAAAAAAACYM/pbJLl7qoduo/s1600/sliding_3.gif" imageanchor="1"><img border="0" height="79" src="http://3.bp.blogspot.com/_UElib2WLeDE/TOBvLH1aLcI/AAAAAAAACYM/pbJLl7qoduo/s400/sliding_3.gif" width="400"></a></div><p><span>iii) The second window is found. begin pointer still points to the first element &#8216;a&#8217;. hasFound['a'] (<b>3</b>) is greater than needToFind['a'] (<b>2</b>). We decrement hasFound['a'] by one and advance begin pointer to the right.<br></span></p><p></p><div class="separator"><a href="http://2.bp.blogspot.com/_UElib2WLeDE/TOBvOljpz0I/AAAAAAAACYQ/TxuWgWGTOF4/s1600/sliding_4.gif" imageanchor="1"><img border="0" height="79" src="http://2.bp.blogspot.com/_UElib2WLeDE/TOBvOljpz0I/AAAAAAAACYQ/TxuWgWGTOF4/s400/sliding_4.gif" width="400"></a></div><p><span>iv) We skip &#8216;c&#8217; since it is not found in <b>T</b>. Begin pointer now points to &#8216;b&#8217;. hasFound['b'] (<b>2</b>) is greater than needToFind['b'] (<b>1</b>). We decrement hasFound['b'] by one and advance begin pointer to the right.<br></span></p><p></p><div class="separator"><a href="http://2.bp.blogspot.com/_UElib2WLeDE/TOBvSOl6RdI/AAAAAAAACYU/R4O1dPXVvBQ/s1600/sliding_5.gif" imageanchor="1"><img border="0" height="79" src="http://2.bp.blogspot.com/_UElib2WLeDE/TOBvSOl6RdI/AAAAAAAACYU/R4O1dPXVvBQ/s400/sliding_5.gif" width="400"></a></div><p><span>v) Begin pointer now points to the next &#8216;b&#8217;. hasFound['b'] (1) is equal to needToFind['b'] (1). We stop immediately and this is our newly found minimum window.<br></span></p><p>Both the begin and end pointers can advance at most <i>N</i> steps (where <i>N</i> is <b>S</b>&#8216;s size) in the worst case, adding to a total of 2<i>N</i> times. Therefore, the run time complexity must be in <i>O</i>(<i>N</i>).</p><p></p><div id="crayon-54ebfa5ee15e2" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" touchscreen minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick">
// Returns false if no valid window is found. Else returns 
// true and updates minWindowBegin and minWindowEnd with the 
// starting and ending position of the minimum window.
bool minWindow(const char* S, const char *T, 
               int &amp;minWindowBegin, int &amp;minWindowEnd) {
  int sLen = strlen(S);
  int tLen = strlen(T);
  int needToFind[256] = {0};

  for (int i = 0; i &lt; tLen; i++)
    needToFind[T[i]]++;

  int hasFound[256] = {0};
  int minWindowLen = INT_MAX;
  int count = 0;
  for (int begin = 0, end = 0; end &lt; sLen; end++) {
    // skip characters not in T
    if (needToFind[S[end]] == 0) continue;
    hasFound[S[end]]++;
    if (hasFound[S[end]] &lt;= needToFind[S[end]])
      count++;

    // if window constraint is satisfied
    if (count == tLen) {
      // advance begin index as far right as possible,
      // stop when advancing breaks window constraint.
      while (needToFind[S[begin]] == 0 ||
            hasFound[S[begin]] &gt; needToFind[S[begin]]) {
        if (hasFound[S[begin]] &gt; needToFind[S[begin]])
          hasFound[S[begin]]--;
        begin++;
      }

      // update minWindow if a minimum length is met
      int windowLen = end - begin + 1;
      if (windowLen &lt; minWindowLen) {
        minWindowBegin = begin;
        minWindowEnd = end;
        minWindowLen = windowLen;
      } // end if
    } // end if
  } // end for

  return (count == tLen) ? true : false;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-2">2</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-4">4</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-6">6</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-8">8</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-10">10</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-12">12</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-14">14</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-16">16</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-18">18</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-20">20</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-22">22</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-24">24</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-26">26</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-28">28</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-30">30</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-32">32</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-34">34</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-36">36</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-38">38</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-40">40</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-41">41</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-42">42</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-43">43</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebfa5ee15e2-44">44</p><p class="crayon-num" data-line="crayon-54ebfa5ee15e2-45">45</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ebfa5ee15e2-1"><span class="c">// Returns false if no valid window is found. Else returns </span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-2"><span class="c">// true and updates minWindowBegin and minWindowEnd with the </span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-3"><span class="c">// starting and ending position of the minimum window.</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-4"><span class="t">bool</span><span class="h"> </span><span class="e">minWindow</span><span class="sy">(</span><span class="m">const</span><span class="h"> </span><span class="t">char</span><span class="o">*</span><span class="h"> </span><span class="i">S</span><span class="sy">,</span><span class="h"> </span><span class="m">const</span><span class="h"> </span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="i">T</span><span class="sy">,</span><span class="h"> </span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-5"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">minWindowBegin</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">minWindowEnd</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-6"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">sLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">strlen</span><span class="sy">(</span><span class="i">S</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-7"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">tLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">strlen</span><span class="sy">(</span><span class="i">T</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-8"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">needToFind</span><span class="sy">[</span><span class="cn">256</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">{</span><span class="cn">0</span><span class="sy">}</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-9">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-10"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">tLen</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">needToFind</span><span class="sy">[</span><span class="v">T</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">]</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-12">&#160;</p><p class="crayon-line" id="crayon-54ebfa5ee15e2-13"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">hasFound</span><span class="sy">[</span><span class="cn">256</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">{</span><span class="cn">0</span><span class="sy">}</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-14"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">minWindowLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">INT_MAX</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-15"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">count</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-16"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">begin</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="st">end</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="st">end</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">sLen</span><span class="sy">;</span><span class="h"> </span><span class="st">end</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// skip characters not in T</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-18"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">needToFind</span><span class="sy">[</span><span class="v">S</span><span class="sy">[</span><span class="st">end</span><span class="sy">]</span><span class="sy">]</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="st">continue</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-19"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">hasFound</span><span class="sy">[</span><span class="v">S</span><span class="sy">[</span><span class="st">end</span><span class="sy">]</span><span class="sy">]</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-20"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">hasFound</span><span class="sy">[</span><span class="v">S</span><span class="sy">[</span><span class="st">end</span><span class="sy">]</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="v">needToFind</span><span class="sy">[</span><span class="v">S</span><span class="sy">[</span><span class="st">end</span><span class="sy">]</span><span class="sy">]</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-21"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">count</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-22">&#160;</p><p class="crayon-line" id="crayon-54ebfa5ee15e2-23"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// if window constraint is satisfied</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-24"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">count</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">tLen</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-25"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="c">// advance begin index as far right as possible,</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-26"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="c">// stop when advancing breaks window constraint.</span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-27"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="v">needToFind</span><span class="sy">[</span><span class="v">S</span><span class="sy">[</span><span class="i">begin</span><span class="sy">]</span><span class="sy">]</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="h"> </span><span class="o">||</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-28"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">hasFound</span><span class="sy">[</span><span class="v">S</span><span class="sy">[</span><span class="i">begin</span><span class="sy">]</span><span class="sy">]</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="v">needToFind</span><span class="sy">[</span><span class="v">S</span><span class="sy">[</span><span class="i">begin</span><span class="sy">]</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-29"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">hasFound</span><span class="sy">[</span><span class="v">S</span><span class="sy">[</span><span class="i">begin</span><span class="sy">]</span><span class="sy">]</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="v">needToFind</span><span class="sy">[</span><span class="v">S</span><span class="sy">[</span><span class="i">begin</span><span class="sy">]</span><span class="sy">]</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-30"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">hasFound</span><span class="sy">[</span><span class="v">S</span><span class="sy">[</span><span class="i">begin</span><span class="sy">]</span><span class="sy">]</span><span class="o">--</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-31"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">begin</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-32"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-33">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-34"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="c">// update minWindow if a minimum length is met</span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-35"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">windowLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="st">end</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="i">begin</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-36"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">windowLen</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">minWindowLen</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-37"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">minWindowBegin</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">begin</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-38"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">minWindowEnd</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="st">end</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-39"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">minWindowLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">windowLen</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-40"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="c">// end if</span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-41"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="c">// end if</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-42"><span class="h">&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="c">// end for</span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-43">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ebfa5ee15e2-44"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="v">count</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">tLen</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="t">true</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebfa5ee15e2-45"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b>Test Cases:</b><br>&#187; <a href="https://sites.google.com/site/ihas1337code/minwindow.txt"><span>Download sample test cases with answers</span></a></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a56">Rating: 4.8/<strong>5</strong> (70 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Finding the Minimum Window in S which Contains All Elements from T</span></span>, <span class="rating"><span class="average">4.8</span> out of <span class="best">5</span> based on <span class="votes">70</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="page" id="blog-single" role="main"><div id="post-20" class="post-20 post type-post status-publish format-standard hentry category-uncategorized"><div class="post-content"><h1 class="posttitle">Finding prime numbers</h1><p class="date"> April 23, 2010 <span>in <a href="http://leetcode.com/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Output all prime numbers up to a specified integer n.</p></blockquote><p><span id="more-20"></span></p><p>This is a phone screen question from one of my interviews. An efficient way to generate prime numbers is using <a href="http://en.wikipedia.org/wiki/Sieve_of_eratosthenes">Sieve of Eratosthenes</a>. We store the primes in a table of true false values, so we are able to determine if a number is a prime number efficiently using this table.</p><p>Below is one possible implementation, you can read more in-depth analysis about generating prime numbers in <a href="http://www.cs.bell-labs.com/cm/cs/pearls/">Programming Pearls</a>.</p><p></p><div id="crayon-54ecc12946bea" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
/* Generate a prime list from 0 up to n, using The Sieve of Erantosthenes
param n The upper bound of the prime list (including n)
param prime[] An array of truth value whether a number is prime
*/
void prime_sieve(int n, bool prime[]) {
  prime[0] = false;
  prime[1] = false;
  int i;
  for (i = 2; i &lt;= n; i++)
    prime[i] = true;

  int limit = sqrt(n);
  for (i = 2; i &lt;= limit; i++) {
    if (prime[i]) {
      for (int j = i * i; j &lt;= n; j += i)
        prime[j] = false;
    }
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ecc12946bea-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc12946bea-2">2</p><p class="crayon-num" data-line="crayon-54ecc12946bea-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc12946bea-4">4</p><p class="crayon-num" data-line="crayon-54ecc12946bea-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc12946bea-6">6</p><p class="crayon-num" data-line="crayon-54ecc12946bea-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc12946bea-8">8</p><p class="crayon-num" data-line="crayon-54ecc12946bea-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc12946bea-10">10</p><p class="crayon-num" data-line="crayon-54ecc12946bea-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc12946bea-12">12</p><p class="crayon-num" data-line="crayon-54ecc12946bea-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc12946bea-14">14</p><p class="crayon-num" data-line="crayon-54ecc12946bea-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc12946bea-16">16</p><p class="crayon-num" data-line="crayon-54ecc12946bea-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecc12946bea-18">18</p><p class="crayon-num" data-line="crayon-54ecc12946bea-19">19</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecc12946bea-1"><span class="c">/* Generate a prime list from 0 up to n, using The Sieve of Erantosthenes</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc12946bea-2"><span class="c">param n The upper bound of the prime list (including n)</span></p><p class="crayon-line" id="crayon-54ecc12946bea-3"><span class="c">param prime[] An array of truth value whether a number is prime</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc12946bea-4"><span class="c">*/</span></p><p class="crayon-line" id="crayon-54ecc12946bea-5"><span class="t">void</span><span class="h"> </span><span class="e">prime_sieve</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="t">bool</span><span class="h"> </span><span class="v">prime</span><span class="sy">[</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc12946bea-6"><span class="h">&#160;&#160;</span><span class="v">prime</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc12946bea-7"><span class="h">&#160;&#160;</span><span class="v">prime</span><span class="sy">[</span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc12946bea-8"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="i">i</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc12946bea-9"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc12946bea-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">prime</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc12946bea-11">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ecc12946bea-12"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">limit</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">sqrt</span><span class="sy">(</span><span class="i">n</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc12946bea-13"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">limit</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc12946bea-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">prime</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecc12946bea-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e ">i *</span><span class="h"> </span><span class="i">i</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="h"> </span><span class="o">+</span><span class="o">=</span><span class="h"> </span><span class="i">i</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc12946bea-16"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">prime</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecc12946bea-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecc12946bea-18"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecc12946bea-19"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a20">Rating: 4.7/<strong>5</strong> (16 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Finding prime numbers</span></span>, <span class="rating"><span class="average">4.7</span> out of <span class="best">5</span> based on <span class="votes">16</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/04/finding-prime-numbers.html" rel="tag">http://leetcode.com/2010/04/finding-prime-numbers.html</a></p></div></div><p id="respond"></p><h3 id="reply-title">Leave a reply <small></small></h3></div></div></body><body><div><div class="entry"><blockquote><p>Given a binary tree</p><p></p><div id="crayon-54eb1526256dc" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
struct Node {
  Node* leftChild;
  Node* rightChild;
  Node* nextRight;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eb1526256dc-1"><span class="t">struct</span><span class="h"> </span><span class="e">Node</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb1526256dc-2"><span class="h">&#160;&#160;</span><span class="e ">Node*</span><span class="h"> </span><span class="i">leftChild</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb1526256dc-3"><span class="h">&#160;&#160;</span><span class="e ">Node*</span><span class="h"> </span><span class="i">rightChild</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb1526256dc-4"><span class="h">&#160;&#160;</span><span class="e ">Node*</span><span class="h"> </span><span class="i">nextRight</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb1526256dc-5"><span class="sy">}</span></p></div></td></tr></table></div></div><p>Populate the nextRight pointers in each node.</p><p><span id="more-8"></span>You may assume that it is a full binary tree (ie, each node other than the leaves has two children.)</p></blockquote><p>The solution is not immediately obvious to me at first. However, with some help of diagrams, there are some observations can be made.</p><div class="hiblock"><ol><li> Most likely this can be implemented recursively, because you can identify the linking of nodes as sub-problems.</li><li> The main difficulty of this problem is linking rightChild with the nextSibling of rightChild.</li><li> Each node has no parent pointer. Therefore, there is no way linking the rightChild with its nextSibling at a level.</li></ol></div><p>My first thought is to use Breadth-First Search (BFS). After all, we are connecting the nextRight node level-by-level, it is only natural to apply BFS to this problem. I mentioned this approach to the interviewer, but he was not too satisfied with it.</p><p>BFS requires memory space to store Nodes into a queue. Can we do better without extra space?</p><p>To do that, we need to first solve the 3 problems mentioned above. We know this problem requires a recursive solution, and most people will start with something like: &#8220;Connect the current node to its sibling, then pass the leftChild to itself, and then the rightChild to itself. Stop recursion when node is NULL.&#8221; This will not work. You are only connecting the leftChild with the rightChild. How about the rightChild? The next pointer of rightChild still do not point to anywhere! <span>(EDIT: This method will work with one small modification, see below)</span></p><p>The first key to solving this problem is we have the nextRight pointer. Assume that the nextRight pointers are already populated for this level. How can we populate the next level? Easy&#8230; just populate by iterating all nodes on this level. Another key to this problem is you have to populate the next level before you go down to the next level, because once you go down, you have no parent pointer, and you would have hard time populating, as I mentioned in the observation I made earlier.</p><p>With the problem sorted out, we can implement this in code in a pretty straight-forward manner. (But beware of checking for NULL de-referencing pointers!)</p><p></p><div id="crayon-54eb15262578a" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void connect(Node* p) {
  if (p == NULL)
    return;
  if (p-&gt;leftChild == NULL || p-&gt;rightChild == NULL)
    return;
  Node* rightSibling;
  Node* p1 = p;
  while (p1) {
    if (p1-&gt;nextRight)
      rightSibling = p1-&gt;nextRight-&gt;leftChild;
    else
      rightSibling = NULL;
    p1-&gt;leftChild-&gt;nextRight = p1-&gt;rightChild;
    p1-&gt;rightChild-&gt;nextRight = rightSibling;
    p1 = p1-&gt;nextRight;
  }
  connect(p-&gt;leftChild);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54eb15262578a-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb15262578a-2">2</p><p class="crayon-num" data-line="crayon-54eb15262578a-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb15262578a-4">4</p><p class="crayon-num" data-line="crayon-54eb15262578a-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb15262578a-6">6</p><p class="crayon-num" data-line="crayon-54eb15262578a-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb15262578a-8">8</p><p class="crayon-num" data-line="crayon-54eb15262578a-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb15262578a-10">10</p><p class="crayon-num" data-line="crayon-54eb15262578a-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb15262578a-12">12</p><p class="crayon-num" data-line="crayon-54eb15262578a-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb15262578a-14">14</p><p class="crayon-num" data-line="crayon-54eb15262578a-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb15262578a-16">16</p><p class="crayon-num" data-line="crayon-54eb15262578a-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb15262578a-18">18</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eb15262578a-1"><span class="t">void</span><span class="h"> </span><span class="e">connect</span><span class="sy">(</span><span class="e ">Node*</span><span class="h"> </span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb15262578a-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">p</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="t">NULL</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54eb15262578a-3"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb15262578a-4"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="v">leftChild</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="t">NULL</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="v">rightChild</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="t">NULL</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54eb15262578a-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb15262578a-6"><span class="h">&#160;&#160;</span><span class="e ">Node*</span><span class="h"> </span><span class="i">rightSibling</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb15262578a-7"><span class="h">&#160;&#160;</span><span class="e ">Node*</span><span class="h"> </span><span class="v">p1</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb15262578a-8"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">p1</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eb15262578a-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">p1</span><span class="o">-&gt;</span><span class="i">nextRight</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb15262578a-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">rightSibling</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p1</span><span class="o">-&gt;</span><span class="i">nextRight</span><span class="o">-&gt;</span><span class="i">leftChild</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb15262578a-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb15262578a-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">rightSibling</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb15262578a-13"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">p1</span><span class="o">-&gt;</span><span class="i">leftChild</span><span class="o">-&gt;</span><span class="v">nextRight</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p1</span><span class="o">-&gt;</span><span class="i">rightChild</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb15262578a-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">p1</span><span class="o">-&gt;</span><span class="i">rightChild</span><span class="o">-&gt;</span><span class="v">nextRight</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">rightSibling</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb15262578a-15"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">p1</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p1</span><span class="o">-&gt;</span><span class="i">nextRight</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb15262578a-16"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54eb15262578a-17"><span class="h">&#160;&#160;</span><span class="e">connect</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">leftChild</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb15262578a-18"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p><span>EDIT: (Added alternative solution)</span><br>Here is a more elegant solution. The trick is to re-use the populated nextRight pointers. As mentioned earlier, we just need one more step for it to work. Before we passed the leftChild and rightChild to the recursion function itself, we connect the rightChild&#8217;s nextRight to the current node&#8217;s nextRight&#8217;s leftChild. In order for this to work, the current node&#8217;s nextRight pointer must be populated, which is true in this case. Why? Try to draw a series of diagram how the recursion deepens, you will immediately see that it is doing DFS (Depth first search).</p><p></p><div id="crayon-54eb152625835" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void connect(Node* p) {
  if (!p) return;
  if (p-&gt;leftChild)
  p-&gt;leftChild-&gt;nextRight = p-&gt;rightChild;
  if (p-&gt;rightChild)
    p-&gt;rightChild-&gt;nextRight = (p-&gt;nextRight) ?
                               p-&gt;nextRight-&gt;leftChild :
                               NULL;
  connect(p-&gt;leftChild);
  connect(p-&gt;rightChild);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eb152625835-1"><span class="t">void</span><span class="h"> </span><span class="e">connect</span><span class="sy">(</span><span class="e ">Node*</span><span class="h"> </span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb152625835-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb152625835-3"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">leftChild</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb152625835-4"><span class="h">&#160;&#160;</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">leftChild</span><span class="o">-&gt;</span><span class="v">nextRight</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">rightChild</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb152625835-5"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">rightChild</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb152625835-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">rightChild</span><span class="o">-&gt;</span><span class="v">nextRight</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">nextRight</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span></p><p class="crayon-line" id="crayon-54eb152625835-7"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">nextRight</span><span class="o">-&gt;</span><span class="i">leftChild</span><span class="h"> </span><span class="o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb152625835-8"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb152625835-9"><span class="h">&#160;&#160;</span><span class="e">connect</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">leftChild</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb152625835-10"><span class="h">&#160;&#160;</span><span class="e">connect</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">rightChild</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb152625835-11"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a8">Rating: 4.6/<strong>5</strong> (32 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">A binary tree problem - Populating next right pointers in each node</span></span>, <span class="rating"><span class="average">4.6</span> out of <span class="best">5</span> based on <span class="votes">32</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="page" id="blog-single" role="main"><div id="post-29" class="post-29 post type-post status-publish format-standard hentry category-bit-operations"><div class="post-content"><h1 class="posttitle">Fun with Bit Operations</h1><p class="date"> September 8, 2010 <span>in <a href="http://leetcode.com/category/bit-operations" title="View all posts in bit operations" rel="category tag">bit operations</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>What does the following function mystery() do?</p></blockquote><p></p><div id="crayon-54979b2d2cb8b" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
bool mystery(unsigned int x) {
  return !(x &amp; (x-1));
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54979b2d2cb8b-1"><span class="t">bool</span><span class="h"> </span><span class="e">mystery</span><span class="sy">(</span><span class="t">unsigned</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">x</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54979b2d2cb8b-2"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="o">!</span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">&amp;</span><span class="h"> </span><span class="sy">(</span><span class="i">x</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54979b2d2cb8b-3"><span class="sy">}</span></p></div></td></tr></table></div></div><p><span id="more-29"></span>Interviewer loves to ask bit operations questions, because it can be tricky and highly deceptive.</p><p>Here is the hint: Assume the bits of <span>x</span> is <span>&#8220;101000&#8243;</span>, then <span>x-1</span> is <span>&#8220;100111&#8243;</span>. The transformation from <span>x &#187; x-1</span> is easy, the rightmost bit that is &#8217;1&#8242; will be changed to &#8217;0&#8242;, and all the &#8217;0&#8242; bits to the right will be changed to &#8217;1&#8242;. Therefore, when you do an &amp; operation between them, the rightmost &#8217;1&#8242; bit will turn to &#8217;0&#8242;.</p><p>An integer that is a power of two has exactly one bit that is &#8217;1&#8242;. Therefore, this function returns whether an integer is a power of two.</p><p>The fun does not stop here. Look out for my next post to discover more fun with bit operations!</p><p><span>EDIT: (A small bug fix)</span><br>Sharp readers might find that passing 0 into the function returns true (while 0 is not a power of two). In order to remedy this, use:</p><div id="crayon-54979b2d2cc6b" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
return x &amp;&amp; !(x &amp; (x-1));</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54979b2d2cc6b-1"><span class="st">return</span><span class="h"> </span><span class="i">x</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="o">!</span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">&amp;</span><span class="h"> </span><span class="sy">(</span><span class="i">x</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></p></div></td></tr></table></div></div><p>If you are able to point this out during the interview, I&#8217;m sure the interviewer will be very impressed.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a29">Rating: 4.5/<strong>5</strong> (11 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Fun with Bit Operations</span></span>, <span class="rating"><span class="average">4.5</span> out of <span class="best">5</span> based on <span class="votes">11</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/09/fun-with-bit-operations.html" rel="tag">http://leetcode.com/2010/09/fun-with-bit-operations.html</a></p></div></div><p id="respond"></p><h3 id="reply-title">Leave a reply <small></small></h3><div id="trackbacks"><h3>2 trackbacks</h3><ul id="trackbacklist"><li> <em>on October 21, 2012</em></li><li> <em>on October 8, 2014</em></li></ul></div></div></div></body><body><div><div class="entry"><blockquote><p>Google Code Jam has begun and there is still time to compete, so register and start coding now if you have not!</p><p>&#187; <a href="http://code.google.com/codejam">Participate in Google Code Jam Now!</a></p></blockquote><p><span id="more-24"></span></p><p>For now, I would like to give some overview on the qualification round.</p><p><span>Problem A: Snapper Chain</span> is solved by most people (<span>3597</span> people so far), with the number of correct being <span>79%</span> so far. <span>Problem B: Fair Warning</span> is the most difficult, being solved by only <span>847</span> people so far, correct rate being <span>76%</span>. <span>Problem C: Theme Park</span> is solved by a total of <span>2370</span> people so far, with correct rate being <span>92%</span>.</p><p>I would say Problem C is the easiest problem among the three, but only for the small input. The large input is quite tricky and you have to be careful of some traps. (Hint: Do your big(O) analysis before you attempt the large input!). I predict that Problem C: large input is gonna have the lowest correct rate among all.</p><p>Although Problem A is the most solved problem, it is a bit tricky as well, as you can see from the correct rate being only <span>79%</span> (Compared to Problem C: small input &#8211; <span>92%</span>). The problem description is also unnecessary complicated. This problem is easy after you discovered the pattern. Then generalizing it is straight forward from there.</p><p>Problem B is the hardest among all. So far I am still stucked on this problem. First of all, the question does take some time to digest. It seems like a Math problem to me, but so far I do not have any idea how to approach this problem. The large input for this problem contains integer up to <span>10^50</span>, which is quite intimidating.</p><p>I would update this blog with tips and solutions to the problems once the qualification round has ended, so stay tune!</p><p><b><font color="red">Update:</font></b><br>Qualification round has just ended! I hope everybody has a great time solving the problems!</p><p>If you scored at least <b>33</b> points, congratulations because you are qualified to the next round! The next round starts on <b>May 22</b>, and you&#8217;ve got 3 chances to qualify (called <b>Round1A</b>, <b>1B</b> and <b>1C</b>). Each round is limited to 2 and a half hours and your rank need to be within the top <b>1000</b> in order to qualify for <b>Round 2</b>.</p><p>Google is also nice to provide a detailed <a href="http://code.google.com/codejam/contest/dashboard?c=433101#s=a">contest analysis</a>, and solutions for each problems. According to them, this year&#8217;s questions are tougher than usual. <b>Problem B: Fair Warning</b> is indeed the toughest question. Besides, it is the first question in Code Jam that uses Big Integer, so be prepared for a good Big Integer library (some language provides it) in the future!</p><p>As predicted, <b>Problem C</b>: large input has the lowest correct rate of all (only <b>40%</b> of the attempts passed the large input). This is why complexity analysis is very important in this situation.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a24">Rating: 0.0/<strong>5</strong> (0 votes cast)</p></div></div></div></div></body><body><div><div id="post-15" class="post-15 post type-post status-publish format-standard hentry category-uncategorized"><div class="post-content"><h1 class="posttitle">Hacking a Google interview (From MIT)</h1><p class="date"> April 14, 2010 <span>in <a href="http://leetcode.com/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span> <span class="post-utility alignright"></span></p><div class="entry"><p>Google interview is so popular that even MIT dedicates a course to it!</p><p>&#187; <a href="http://courses.csail.mit.edu/iap/interview/materials.php">Hacking a Google Interview Course Website</a><span id="more-15"></span></p><p>Directly from MIT&#8217;s course website,<br></p><blockquote>Learn the tricks. Beat the system.<p>Ever wanted to work at a company like Google, Apple, or Facebook? There&#8217;s just one thing standing in your way: the interview. But there&#8217;s no need to fear. We&#8217;ve mastered the interview questions and topics, and we want to show you how you can nail every programming question. Whether you&#8217;re a beginning programmer or a seasoned expert, this class is for you.</p></blockquote><p>There are a total 5 handouts available for download, with the first few handouts discussing basic data structures and common interview questions with complete solutions. 5 stars and highly recommended!</p><p>Below are direct links for the handouts:<br>&#187; <a href="http://courses.csail.mit.edu/iap/interview/Hacking_a_Google_Interview_Handout_1.pdf">Handout 1</a><br>&#187; <a href="http://courses.csail.mit.edu/iap/interview/Hacking_a_Google_Interview_Handout_2.pdf">Handout 2</a><br>&#187; <a href="http://courses.csail.mit.edu/iap/interview/Hacking_a_Google_Interview_Handout_3.pdf">Handout 3</a><br>&#187; <a href="http://courses.csail.mit.edu/iap/interview/Hacking_a_Google_Interview_Practice_Questions_Person_A.pdf">Common Questions Part 1</a><br>&#187; <a href="http://courses.csail.mit.edu/iap/interview/Hacking_a_Google_Interview_Practice_Questions_Person_B.pdf">Common Questions Part 2</a></p><p><strong>Additional Resources:</strong><br> TopCoder is a very good resource to get started in solving programming problems.</p><p>&#187; <a href="http://www.topcoder.com/tc?module=Static&amp;d1=tutorials&amp;d2=findSolution">How to find a solution</a><br>&#187; <a href="http://www.topcoder.com/tc?module=Static&amp;d1=tutorials&amp;d2=dynProg">Dynamic Programming: From novice to advanced</a><br>&#187; <a href="http://www.topcoder.com/tc?d1=tutorials&amp;d2=alg_index&amp;module=Static">More algorithm tutorials at TopCoder</a></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a15">Rating: 4.5/<strong>5</strong> (31 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Hacking a Google interview (From MIT)</span></span>, <span class="rating"><span class="average">4.5</span> out of <span class="best">5</span> based on <span class="votes">31</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/04/hacking-google-interview-from-mit.html" rel="tag">http://leetcode.com/2010/04/hacking-google-interview-from-mit.html</a></p></div></div></div></body><body><div><div id="post-22" class="post-22 post type-post status-publish format-standard hentry category-uncategorized"><div class="post-content"><h1 class="posttitle">String Reorder Distance Apart</h1><p class="date"> May 1, 2010 <span>in <a href="http://leetcode.com/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Given a string of lowercase characters, reorder them such that the same characters are at least distance <span>d</span> from each other.<span id="more-22"></span></p><p>Input: { a, b, b }, distance = 2<br>Output: { b, a, b }</p></blockquote><p>I think it&#8217;s quite an interesting question. So if you want to do some brainstorming and do not wish to spoil the fun, please feel free to do so and beware of the spoilers ahead.</p><p></p><center><span>*** Spoilers alert! ***</span><br><span>*** Spoilers alert! ***</span><br><span>*** Spoilers alert! ***</span><br></center><p>The solution below involves a greedy strategy, that is: The character that has the most duplicates has the highest priority of being chosen to put in the new list. If that character cannot be chosen (due to the distance constraint), we go for the character that has the next highest priority. We also use some tables to improve the efficiency. (i.e., keeping track of # of duplicates of each character.)</p><p></p><div id="crayon-54dc00a9a54ab" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int find_max(int freq[], bool excep[]) {
  int max_i = -1;
  int max = -1;
  for (char c = 'a'; c &lt;= 'z'; c++) {
    if (!excep[c] &amp;&amp; freq[c] &gt; 0 &amp;&amp; freq[c] &gt; max) {
      max = freq[c];
      max_i = c;
    }
  }
  return max_i;
}

void create(char* str, int d, char ans[]) {
  int n = strlen(str);
  int freq[256] = {0};
  for (int i = 0; i &lt; n; i++)
  freq[str[i]]++;

  int used[256] = {0};
  for (int i = 0; i &lt; n; i++) {
  bool excep[256] = {false};
  bool done = false;
  while (!done) {
    int j = find_max(freq, excep);
    if (j == -1) {
      cout &lt;&lt; "Error!\n";
      return;
    }
    excep[j] = true;
    if (used[j] &lt;= 0) {
      ans[i] = j;
      freq[j]--;
      used[j] = d;
      done = true;
    } 
  }
  for (int i = 0; i &lt; 256; i++)
    used[i]--;
  }
  ans[n] = '\0';
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54dc00a9a54ab-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-2">2</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-4">4</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-6">6</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-8">8</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-10">10</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-12">12</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-14">14</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-16">16</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-18">18</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-20">20</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-22">22</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-24">24</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-26">26</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-28">28</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-30">30</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-32">32</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-34">34</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-36">36</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-38">38</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc00a9a54ab-40">40</p><p class="crayon-num" data-line="crayon-54dc00a9a54ab-41">41</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54dc00a9a54ab-1"><span class="t">int</span><span class="h"> </span><span class="e">find_max</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">freq</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">bool</span><span class="h"> </span><span class="v">excep</span><span class="sy">[</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-2"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">max_i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="o">-</span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc00a9a54ab-3"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">max</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="o">-</span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-4"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">char</span><span class="h"> </span><span class="v">c</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="s">'a'</span><span class="sy">;</span><span class="h"> </span><span class="i">c</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="s">'z'</span><span class="sy">;</span><span class="h"> </span><span class="i">c</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54dc00a9a54ab-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">excep</span><span class="sy">[</span><span class="i">c</span><span class="sy">]</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="v">freq</span><span class="sy">[</span><span class="i">c</span><span class="sy">]</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="cn">0</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="v">freq</span><span class="sy">[</span><span class="i">c</span><span class="sy">]</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">max</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-6"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">max</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">freq</span><span class="sy">[</span><span class="i">c</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc00a9a54ab-7"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">max_i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">c</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54dc00a9a54ab-9"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-10"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">max_i</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc00a9a54ab-11"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-12">&#160;</p><p class="crayon-line" id="crayon-54dc00a9a54ab-13"><span class="t">void</span><span class="h"> </span><span class="e">create</span><span class="sy">(</span><span class="t">char</span><span class="o">*</span><span class="h"> </span><span class="i">str</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">d</span><span class="sy">,</span><span class="h"> </span><span class="t">char</span><span class="h"> </span><span class="v">ans</span><span class="sy">[</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-14"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">n</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">strlen</span><span class="sy">(</span><span class="i">str</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc00a9a54ab-15"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">freq</span><span class="sy">[</span><span class="cn">256</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">{</span><span class="cn">0</span><span class="sy">}</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-16"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54dc00a9a54ab-17"><span class="h">&#160;&#160;</span><span class="v">freq</span><span class="sy">[</span><span class="v">str</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">]</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-18">&#160;</p><p class="crayon-line" id="crayon-54dc00a9a54ab-19"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">used</span><span class="sy">[</span><span class="cn">256</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">{</span><span class="cn">0</span><span class="sy">}</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-20"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54dc00a9a54ab-21"><span class="h">&#160;&#160;</span><span class="t">bool</span><span class="h"> </span><span class="v">excep</span><span class="sy">[</span><span class="cn">256</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">{</span><span class="t">false</span><span class="sy">}</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-22"><span class="h">&#160;&#160;</span><span class="t">bool</span><span class="h"> </span><span class="v">done</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc00a9a54ab-23"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">done</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-24"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">find_max</span><span class="sy">(</span><span class="i">freq</span><span class="sy">,</span><span class="h"> </span><span class="i">excep</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc00a9a54ab-25"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">j</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-26"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">"Error!\n"</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc00a9a54ab-27"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-28"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54dc00a9a54ab-29"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">excep</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-30"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">used</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54dc00a9a54ab-31"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">ans</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">j</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-32"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">freq</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="o">--</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc00a9a54ab-33"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">used</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">d</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-34"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">done</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc00a9a54ab-35"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-36"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54dc00a9a54ab-37"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="cn">256</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-38"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">used</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="o">--</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc00a9a54ab-39"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc00a9a54ab-40"><span class="h">&#160;&#160;</span><span class="v">ans</span><span class="sy">[</span><span class="i">n</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="s">'\0'</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc00a9a54ab-41"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a22">Rating: 2.5/<strong>5</strong> (22 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">String Reorder Distance Apart</span></span>, <span class="rating"><span class="average">2.5</span> out of <span class="best">5</span> based on <span class="votes">22</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/05/here-is-another-google-phone-interview.html" rel="tag">http://leetcode.com/2010/05/here-is-another-google-phone-interview.html</a></p></div></div></div></body><body><div><div class="entry"><blockquote><p>Given only putchar (no sprintf, itoa, etc.) write a routine putlong that prints out an unsigned long in decimal.</p></blockquote><p><span id="more-7"></span></p><p>Here is one of the questions from Microsoft interview.</p><p>It&#8217;s obvious that you can use the modulus operator (%10) and loop thru the digits one-by-one. Since n%10 gives you only the last digit, you need to somehow store it in a temporary array. I am sure the interviewer will not be too pleased with this and ask you to rethink again without using temporary storage.</p><p>The key is to think recursively. Recursion is very powerful and is able to solve this question easily. In fact, it is often used in conjunction with pointers to weed out candidates. Read <a href="http://www.joelonsoftware.com/articles/GuerrillaInterviewing3.html">this article on how Microsoft conduct interviews</a> to get what I mean. Think of recursion as the allocation of a stack&#8230; Push the last digit onto the stack, then continue with the 2nd last, &#8230;, up until the first digit. Then when the function pops off the stack, you get the digit in the correct order. Voila!</p><p>You will probably attempt something like this at first try:</p><div id="crayon-54e66b62b8c4c" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void putlong(unsigned long n) {
  if (n == 0)
    return;
  putlong(n / 10);
  putchar(n % 10 + '0');
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e66b62b8c4c-1"><span class="t">void</span><span class="h"> </span><span class="e">putlong</span><span class="sy">(</span><span class="t">unsigned</span><span class="h"> </span><span class="t">long</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e66b62b8c4c-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">n</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54e66b62b8c4c-3"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e66b62b8c4c-4"><span class="h">&#160;&#160;</span><span class="e">putlong</span><span class="sy">(</span><span class="i">n</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">10</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e66b62b8c4c-5"><span class="h">&#160;&#160;</span><span class="e">putchar</span><span class="sy">(</span><span class="i">n</span><span class="h"> </span><span class="o">%</span><span class="h"> </span><span class="cn">10</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="s">'0'</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e66b62b8c4c-6"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>Guess what&#8217;s wrong?</p><p>You forgot to consider the special case when n == 0!</p><p>The above code can be modified to handle the special case of n == 0:</p><div id="crayon-54e66b62b8d04" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void putlong(unsigned long n) {
  if (n &lt; 10) {
    putchar(n + '0');
    return;
  }
  putlong(n / 10);
  putchar(n % 10 + '0');
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e66b62b8d04-1"><span class="t">void</span><span class="h"> </span><span class="e">putlong</span><span class="sy">(</span><span class="t">unsigned</span><span class="h"> </span><span class="t">long</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e66b62b8d04-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">n</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="cn">10</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e66b62b8d04-3"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">putchar</span><span class="sy">(</span><span class="i">n</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="s">'0'</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e66b62b8d04-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e66b62b8d04-5"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e66b62b8d04-6"><span class="h">&#160;&#160;</span><span class="e">putlong</span><span class="sy">(</span><span class="i">n</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">10</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e66b62b8d04-7"><span class="h">&#160;&#160;</span><span class="e">putchar</span><span class="sy">(</span><span class="i">n</span><span class="h"> </span><span class="o">%</span><span class="h"> </span><span class="cn">10</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="s">'0'</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e66b62b8d04-8"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>Great! Now you are able to think recursively <img src="http://leetcode.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley"> Here is another similar question that often pops up in a job interview:</p><blockquote><p>Print a string in reverse order.</p></blockquote><p></p><div id="crayon-54e66b62b8db5" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void printReverse(const char *str) {
  if (!*str)
    return;
  printReverse(str + 1);
  putchar(*str);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e66b62b8db5-1"><span class="t">void</span><span class="h"> </span><span class="e">printReverse</span><span class="sy">(</span><span class="m">const</span><span class="h"> </span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="i">str</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e66b62b8db5-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="o">*</span><span class="i">str</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54e66b62b8db5-3"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e66b62b8db5-4"><span class="h">&#160;&#160;</span><span class="e">printReverse</span><span class="sy">(</span><span class="i">str</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e66b62b8db5-5"><span class="h">&#160;&#160;</span><span class="e">putchar</span><span class="sy">(</span><span class="o">*</span><span class="i">str</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e66b62b8db5-6"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>Reversing linked-list can be done recursively too. Can you figure out how to do it? Find out how in my next post.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a7">Rating: 5.0/<strong>5</strong> (10 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Recursion to the rescue!</span></span>, <span class="rating"><span class="average">5.0</span> out of <span class="best">5</span> based on <span class="votes">10</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Find the intersection of two sorted arrays.</p></blockquote><p><span id="more-9"></span></p><p>Let&#8217;s called array1 as A and array2 as B, each with size m and n.</p><p>The obvious brute-force solution is to scan through each element in A, and for each element in A, scan if that element exist in B. The running time complexity is O(m*n). Not good! Can we do better? Absolutely!</p><p>First, we know that both arrays are sorted. Can we somehow use this information to our advantage?</p><p>We can apply binary search to search if an element of A exist in B. So, the only modification from the brute-force approach is modifying linear search to binary search. This seems like a good improvement, we manage to reduce the complexity to O(m*lg(n)).</p><p>Of course, you know you can trade space for running time by using a hash table. Is it really useful? We can definitely hash each element in B to an array index (takes O(n) time). Therefore, to find if an element of A exist in B, it would require just O(1) time. The complexity improves to O(m+n).</p><p>But there is a problem, what if n is very big? (ie, n is one billion!). We have a problem here. The hash table will either requires a large amount of memory space, or there will be lots of collision in the table, which makes access time no longer O(1) time. Therefore, using a hash table is not a good general solution to this problem. Besides, using hash table DO NOT require that the array being sorted in the first place.</p><p>Here is the most important observation in order to solve this problem. Both arrays ARE sorted. This provides a very important clue. We must make full use of this information that they ARE in fact sorted.</p><p>We can have two index, which both starts at zero. Compare the two first elements of A and B. If A[0] is greater than B[0], we increase index of B by one. If B[0] is greater than A[0], we increase index of A by one. If they are equal, we know an intersection has occurred, so add it to the list and increment index of A and B by one. Once either index reaches the end of A or B, we have found all the intersections of A and B.</p><p>The complexity of this approach is still O(m+n), but it does not requires any extra space that a hash table requires. The complexity is O(m+n) because in the worse case, there would be no intersection between the two arrays, and we need to increment first index a total of m times and increment second index a total of n times, which is a total of m+n times.</p><p>Below is the C++ code for this approach:</p><p></p><div id="crayon-54de752a81cfb" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
vector&lt;int&gt; findIntersection(vector&lt;int&gt; A, vector&lt;int&gt; B) {
  vector&lt;int&gt; intersection;
  int n1 = A.size();
  int n2 = B.size();
  int i = 0, j = 0;
  while (i &lt; n1 &amp;&amp; j &lt; n2) {
    if (A[i] &gt; B[j]) {
      j++;
    } else if (B[j] &gt; A[i]) {
      i++;
    } else {
      intersection.push_back(A[i]);
      i++;
      j++;
    }
  }
  return intersection;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54de752a81cfb-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54de752a81cfb-2">2</p><p class="crayon-num" data-line="crayon-54de752a81cfb-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54de752a81cfb-4">4</p><p class="crayon-num" data-line="crayon-54de752a81cfb-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54de752a81cfb-6">6</p><p class="crayon-num" data-line="crayon-54de752a81cfb-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54de752a81cfb-8">8</p><p class="crayon-num" data-line="crayon-54de752a81cfb-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54de752a81cfb-10">10</p><p class="crayon-num" data-line="crayon-54de752a81cfb-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54de752a81cfb-12">12</p><p class="crayon-num" data-line="crayon-54de752a81cfb-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54de752a81cfb-14">14</p><p class="crayon-num" data-line="crayon-54de752a81cfb-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54de752a81cfb-16">16</p><p class="crayon-num" data-line="crayon-54de752a81cfb-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54de752a81cfb-18">18</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54de752a81cfb-1"><span class="i">vector</span><span class="o">&lt;</span><span class="t">int</span><span class="o">&gt;</span><span class="h"> </span><span class="e">findIntersection</span><span class="sy">(</span><span class="i">vector</span><span class="o">&lt;</span><span class="t">int</span><span class="o">&gt;</span><span class="h"> </span><span class="i">A</span><span class="sy">,</span><span class="h"> </span><span class="i">vector</span><span class="o">&lt;</span><span class="t">int</span><span class="o">&gt;</span><span class="h"> </span><span class="i">B</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54de752a81cfb-2"><span class="h">&#160;&#160;</span><span class="i">vector</span><span class="o">&lt;</span><span class="t">int</span><span class="o">&gt;</span><span class="h"> </span><span class="i">intersection</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54de752a81cfb-3"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">n1</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">A</span><span class="sy">.</span><span class="e">size</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54de752a81cfb-4"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">n2</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">B</span><span class="sy">.</span><span class="e">size</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54de752a81cfb-5"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54de752a81cfb-6"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n1</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">j</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n2</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54de752a81cfb-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">A</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="v">B</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54de752a81cfb-8"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">j</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54de752a81cfb-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">B</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54de752a81cfb-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">i</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54de752a81cfb-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54de752a81cfb-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">intersection</span><span class="sy">.</span><span class="e">push_back</span><span class="sy">(</span><span class="v">A</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54de752a81cfb-13"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">i</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54de752a81cfb-14"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">j</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54de752a81cfb-15"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54de752a81cfb-16"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54de752a81cfb-17"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">intersection</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54de752a81cfb-18"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>Do you think that this approach always work better? Not necessarily&#8230; Think what happens when n is very large, say one billion&#8230;</p><p>Compare this approach with the binary search approach.<br>O(m+n) and O(m*lg(n))</p><p>lg(n) is much smaller than n when n is very big. However, this does not necessarily means binary search is better in this case. In fact, binary search approach is only better when m </p><p>All of our above approaches assume that we have enough space to load both arrays to the memory. Here are some interesting questions to ponder about:</p><p>i) What if elements of array B is stored on disk, and the memory is limited such that you cannot load all elements into the memory at once?<br>ii) How will the complexity change in this case? Are there any factors you need to consider? <br>iii) How do you change your solution to adapt to this situation?</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a9">Rating: 5.0/<strong>5</strong> (26 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Finding intersection of two sorted arrays</span></span>, <span class="rating"><span class="average">5.0</span> out of <span class="best">5</span> based on <span class="votes">26</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="page" id="blog-single" role="main"><div id="post-11" class="post-11 post type-post status-publish format-standard hentry category-uncategorized"><div class="post-content"><h1 class="posttitle">How to determine if a point is inside a rectangle?</h1><p class="date"> April 12, 2010 <span>in <a href="http://leetcode.com/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Given a 2D point and a rectangle, determine if the point is inside the rectangle.</p></blockquote><p><span id="more-11"></span></p><p>This is a problem that is related to Computer Graphics.</p><p>This question is trivial if the rectangle is not aligned to the x and y-axis:</p><p>Assume point P&#8217;s coordinate is (x<sub>p</sub>,y<sub>p</sub>), and the rectangle&#8217;s upper left point is (x<sub>1</sub>,y<sub>1</sub>) and lower right point is (x<sub>2</sub>,y<sub>2</sub>):</p><p>if (x<sub>p</sub> is between x<sub>1</sub> and x<sub>2</sub>) AND (y<sub>p</sub> is between y<sub>1</sub> and y<sub>2</sub>)<br> then the point(x<sub>p</sub>,y<sub>p</sub>) is inside the rectangle.</p><p>But what if the rectangle is rotated?</p><p>Although the question becomes much harder now, it is not too difficult to think of another solution that utilizes the previous solution. If we could transform the point and the rectangle such that the rectangle become axis-aligned, we could solve the problem in the direct way mentioned above. In other words, we are transforming the rectangle&#8217;s coordinate space to the x-y coordinate space.</p><p>First, the rectangle&#8217;s center is translated to the origin, then the rectangle is rotated such that it is axis-aligned with the major axes. The rotation equation can be written as x&#8217; = ux*x + uy*y and y&#8217; = vx*x + vy*y, where (x,y) is the original point, (x&#8217;,y&#8217;) is the rotated point, (ux,uy) and (vx,vy) are both the normalized orthogonal vector of the axes of the rectangle (see figure above). To understand why this is so, you need to understand the <a href="http://en.wikipedia.org/wiki/Change_of_basis">change of basis</a> in linear algebra.</p><p>Translating and rotating points involve lots of multiplications. Can we do better than this?</p><p>The answer is yes, we can utilize dot product. The trick is to use dot product to find the projected line from point P onto the rectangle sides, and if its length is shorter than the sides, then the point must be inside the rectangle.</p><p>Assume that we have a pre-written Vector2d class <img src="http://leetcode.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley"></p><div id="crayon-54e98b9f5070e" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
bool is_point_in_rectangle(const Rect&amp; rect, const Point&amp; p) {
  Vector2d P1(rect.p1.x, rect.p1.y);
  Vector2d P2(rect.p2.x, rect.p2.y);
  Vector2d P3(rect.p3.x, rect.p3.y);
  Vector2d P4(rect.p4.x, rect.p4.y);
  Vector2d P(p.x, p.y);

  Vector2d P1_P4 = P1 - P4;
  Vector2d P3_P4 = P3 - P4;
  Vector2d TWO_P_C = 2.0*P - P1 - P3;    // TWO_P_C=2P-C, C=Center of rectangle

  return (P3_P4.Dot(TWO_P_C - P3_P4) &lt;= 0 &amp;&amp; P3_P4.Dot(TWO_P_C + P3_P4) &gt;= 0) &amp;&amp;
         (P1_P4.Dot(TWO_P_C - P1_P4) &lt;= 0 &amp;&amp; P1_P4.Dot(TWO_P_C + P1_P4) &gt;= 0);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e98b9f5070e-1"><span class="t">bool</span><span class="h"> </span><span class="e">is_point_in_rectangle</span><span class="sy">(</span><span class="m">const</span><span class="h"> </span><span class="i">Rect</span><span class="o">&amp;</span><span class="h"> </span><span class="i">rect</span><span class="sy">,</span><span class="h"> </span><span class="m">const</span><span class="h"> </span><span class="i">Point</span><span class="o">&amp;</span><span class="h"> </span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e98b9f5070e-2"><span class="h">&#160;&#160;</span><span class="e">Vector2d </span><span class="e">P1</span><span class="sy">(</span><span class="v">rect</span><span class="sy">.</span><span class="v">p1</span><span class="sy">.</span><span class="i">x</span><span class="sy">,</span><span class="h"> </span><span class="v">rect</span><span class="sy">.</span><span class="v">p1</span><span class="sy">.</span><span class="i">y</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e98b9f5070e-3"><span class="h">&#160;&#160;</span><span class="e">Vector2d </span><span class="e">P2</span><span class="sy">(</span><span class="v">rect</span><span class="sy">.</span><span class="v">p2</span><span class="sy">.</span><span class="i">x</span><span class="sy">,</span><span class="h"> </span><span class="v">rect</span><span class="sy">.</span><span class="v">p2</span><span class="sy">.</span><span class="i">y</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e98b9f5070e-4"><span class="h">&#160;&#160;</span><span class="e">Vector2d </span><span class="e">P3</span><span class="sy">(</span><span class="v">rect</span><span class="sy">.</span><span class="v">p3</span><span class="sy">.</span><span class="i">x</span><span class="sy">,</span><span class="h"> </span><span class="v">rect</span><span class="sy">.</span><span class="v">p3</span><span class="sy">.</span><span class="i">y</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e98b9f5070e-5"><span class="h">&#160;&#160;</span><span class="e">Vector2d </span><span class="e">P4</span><span class="sy">(</span><span class="v">rect</span><span class="sy">.</span><span class="v">p4</span><span class="sy">.</span><span class="i">x</span><span class="sy">,</span><span class="h"> </span><span class="v">rect</span><span class="sy">.</span><span class="v">p4</span><span class="sy">.</span><span class="i">y</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e98b9f5070e-6"><span class="h">&#160;&#160;</span><span class="i">Vector2d</span><span class="h"> </span><span class="e">P</span><span class="sy">(</span><span class="v">p</span><span class="sy">.</span><span class="i">x</span><span class="sy">,</span><span class="h"> </span><span class="v">p</span><span class="sy">.</span><span class="i">y</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e98b9f5070e-7">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54e98b9f5070e-8"><span class="h">&#160;&#160;</span><span class="e">Vector2d </span><span class="v">P1_P4</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">P1</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="i">P4</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e98b9f5070e-9"><span class="h">&#160;&#160;</span><span class="e">Vector2d </span><span class="v">P3_P4</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">P3</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="i">P4</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e98b9f5070e-10"><span class="h">&#160;&#160;</span><span class="e">Vector2d </span><span class="v">TWO_P_C</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">2.0</span><span class="o">*</span><span class="i">P</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="i">P1</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="i">P3</span><span class="sy">;</span><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// TWO_P_C=2P-C, C=Center of rectangle</span></p><p class="crayon-line" id="crayon-54e98b9f5070e-11">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54e98b9f5070e-12"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="v">P3_P4</span><span class="sy">.</span><span class="e">Dot</span><span class="sy">(</span><span class="i">TWO_P_C</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="i">P3_P4</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="cn">0</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="v">P3_P4</span><span class="sy">.</span><span class="e">Dot</span><span class="sy">(</span><span class="i">TWO_P_C</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="i">P3_P4</span><span class="sy">)</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;&amp;</span></p><p class="crayon-line" id="crayon-54e98b9f5070e-13"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="sy">(</span><span class="v">P1_P4</span><span class="sy">.</span><span class="e">Dot</span><span class="sy">(</span><span class="i">TWO_P_C</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="i">P1_P4</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="cn">0</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="v">P1_P4</span><span class="sy">.</span><span class="e">Dot</span><span class="sy">(</span><span class="i">TWO_P_C</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="i">P1_P4</span><span class="sy">)</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e98b9f5070e-14"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a11">Rating: 2.4/<strong>5</strong> (18 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">How to determine if a point is inside a rectangle?</span></span>, <span class="rating"><span class="average">2.4</span> out of <span class="best">5</span> based on <span class="votes">18</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/04/how-to-determine-if-point-is-inside.html" rel="tag">http://leetcode.com/2010/04/how-to-determine-if-point-is-inside.html</a></p></div></div><p id="respond"></p><h3 id="reply-title">Leave a reply <small></small></h3></div></div></body><body><div><div class="entry"><blockquote><p>Have you ever thought of pretty-printing a binary tree?<br><span id="more-41"></span></p></blockquote><p>Wouldn&#8217;t it be cool to output your binary tree like this?</p><pre><span class="bch">              ______________</span><span class="nod">30</span><span class="bch">______________
             /                              \
      ______</span><span class="nod">20</span><span class="bch">______                  ______</span><span class="nod">40</span><span class="bch">______
     /              \                /              \
  __</span><span class="nod">10</span><span class="bch">__            </span><span class="nod">25</span><span class="bch">__            </span><span class="nod">35</span>            <span class="bch">__</span><span class="nod">50</span><span class="bch">
 /      \               \                        /       
 </span><span class="nod">5      15              28                      41</span>
</pre><p>Or, if you prefer, output the tree like this instead? (to save some horizontal space)</p><pre><span class="bch">        ______</span><span class="nod">30</span><span class="bch">______
       /              \
    __</span><span class="nod">20</span><span class="bch">__          __</span><span class="nod">40</span><span class="bch">__
   /      \        /      \</span>
  <span class="nod">10      25      35      50</span>
 <span class="bch">/  \       \            /   </span>
 <span class="nod">5  15      28          41</span>
</pre><p>I thought it would be really useful to you while you are cracking on binary tree interview questions. Checking if your binary tree is read in correctly into the program takes a lot of effort while you are testing your algorithm.</p><p>That&#8217;s why I wrote the following C++ code myself. Check out the <i>60+</i> lines of code below. Please note that the displayed code below did not include some functions, such as <i>maxHeight()</i> and <i>intToString()</i>. For the full source code which includes a sample driver demo program, please download the source file below.</p><p><b>Implementation:</b><br>This implementation is based on my previous post: <a href="http://www.leetcode.com/2010/09/printing-binary-tree-in-level-order.html">Printing a Binary Tree in Level Order</a>. I use a deque (double-ended queue) instead of a queue because I want to use std::iterator (in C++, deque supports it but not queue).</p><p>For a level, each node is spaced equally with neighboring nodes. This allows a Math equation to be derived easily to calculate the exact location a node will appear in a level.</p><p>Last time, when we see an &#8220;empty&#8221; node, we do not push anything onto the queue. However, this time we need to push two &#8220;empty&#8221; nodes when we see an &#8220;empty&#8221; node, since we need to print out the &#8220;empty&#8221; node as spaces in order to produce a pretty output. Besides, it eases the programming a lot since we do not need to keep track of the number of empty nodes that appear before a valid node.</p><p>In the next post, I will talk about the methods I used to read/write a binary tree from/to a file, so that you can run test cases easily.</p><p><b><font color="red">Huge Update Planned:</font></b></p><div class="hiblock">I am planning to update <b>all</b> (most, if not all) of my previous posts with sample input/output data sets, as requested by one of my fellow readers, thanks <img src="http://leetcode.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley"> . In the future, you should be able to test your algorithms easily!</div><p><b>Download Sample Demo Program:</b></p><p></p><div id="crayon-54ebf1b582de7" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
// Print the arm branches (eg, /    \ ) on a line
void printBranches(int branchLen, int nodeSpaceLen, int startLen, int nodesInThisLevel, const deque&lt;BinaryTree*&gt;&amp; nodesQueue, ostream&amp; out) {
  deque&lt;BinaryTree*&gt;::const_iterator iter = nodesQueue.begin();
  for (int i = 0; i &lt; nodesInThisLevel / 2; i++) {  
    out &lt;&lt; ((i == 0) ? setw(startLen-1) : setw(nodeSpaceLen-2)) &lt;&lt; "" &lt;&lt; ((*iter++) ? "/" : " ");
    out &lt;&lt; setw(2*branchLen+2) &lt;&lt; "" &lt;&lt; ((*iter++) ? "\\" : " ");
  }
  out &lt;&lt; endl;
}

// Print the branches and node (eg, ___10___ )
void printNodes(int branchLen, int nodeSpaceLen, int startLen, int nodesInThisLevel, const deque&lt;BinaryTree*&gt;&amp; nodesQueue, ostream&amp; out) {
  deque&lt;BinaryTree*&gt;::const_iterator iter = nodesQueue.begin();
  for (int i = 0; i &lt; nodesInThisLevel; i++, iter++) {
    out &lt;&lt; ((i == 0) ? setw(startLen) : setw(nodeSpaceLen)) &lt;&lt; "" &lt;&lt; ((*iter &amp;&amp; (*iter)-&gt;left) ? setfill('_') : setfill(' '));
    out &lt;&lt; setw(branchLen+2) &lt;&lt; ((*iter) ? intToString((*iter)-&gt;data) : "");
    out &lt;&lt; ((*iter &amp;&amp; (*iter)-&gt;right) ? setfill('_') : setfill(' ')) &lt;&lt; setw(branchLen) &lt;&lt; "" &lt;&lt; setfill(' ');
  }
  out &lt;&lt; endl;
}

// Print the leaves only (just for the bottom row)
void printLeaves(int indentSpace, int level, int nodesInThisLevel, const deque&lt;BinaryTree*&gt;&amp; nodesQueue, ostream&amp; out) {
  deque&lt;BinaryTree*&gt;::const_iterator iter = nodesQueue.begin();
  for (int i = 0; i &lt; nodesInThisLevel; i++, iter++) {
    out &lt;&lt; ((i == 0) ? setw(indentSpace+2) : setw(2*level+2)) &lt;&lt; ((*iter) ? intToString((*iter)-&gt;data) : "");
  }
  out &lt;&lt; endl;
}

// Pretty formatting of a binary tree to the output stream
// @ param
// level  Control how wide you want the tree to sparse (eg, level 1 has the minimum space between nodes, while level 2 has a larger space between nodes)
// indentSpace  Change this to add some indent space to the left (eg, indentSpace of 0 means the lowest level of the left node will stick to the left margin)
void printPretty(BinaryTree *root, int level, int indentSpace, ostream&amp; out) {
  int h = maxHeight(root);
  int nodesInThisLevel = 1;

  int branchLen = 2*((int)pow(2.0,h)-1) - (3-level)*(int)pow(2.0,h-1);  // eq of the length of branch for each node of each level
  int nodeSpaceLen = 2 + (level+1)*(int)pow(2.0,h);  // distance between left neighbor node's right arm and right neighbor node's left arm
  int startLen = branchLen + (3-level) + indentSpace;  // starting space to the first node to print of each level (for the left most node of each level only)
    
  deque&lt;BinaryTree*&gt; nodesQueue;
  nodesQueue.push_back(root);
  for (int r = 1; r &lt; h; r++) {
    printBranches(branchLen, nodeSpaceLen, startLen, nodesInThisLevel, nodesQueue, out);
    branchLen = branchLen/2 - 1;
    nodeSpaceLen = nodeSpaceLen/2 + 1;
    startLen = branchLen + (3-level) + indentSpace;
    printNodes(branchLen, nodeSpaceLen, startLen, nodesInThisLevel, nodesQueue, out);

    for (int i = 0; i &lt; nodesInThisLevel; i++) {
      BinaryTree *currNode = nodesQueue.front();
      nodesQueue.pop_front();
      if (currNode) {
       nodesQueue.push_back(currNode-&gt;left);
       nodesQueue.push_back(currNode-&gt;right);
      } else {
        nodesQueue.push_back(NULL);
        nodesQueue.push_back(NULL);
      }
    }
    nodesInThisLevel *= 2;
  }
  printBranches(branchLen, nodeSpaceLen, startLen, nodesInThisLevel, nodesQueue, out);
  printLeaves(indentSpace, level, nodesInThisLevel, nodesQueue, out);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ebf1b582de7-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-2">2</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-4">4</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-6">6</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-8">8</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-10">10</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-12">12</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-14">14</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-16">16</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-18">18</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-20">20</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-22">22</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-24">24</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-26">26</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-28">28</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-30">30</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-32">32</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-34">34</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-36">36</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-38">38</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-40">40</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-41">41</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-42">42</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-43">43</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-44">44</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-45">45</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-46">46</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-47">47</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-48">48</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-49">49</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-50">50</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-51">51</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-52">52</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-53">53</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-54">54</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-55">55</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-56">56</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-57">57</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-58">58</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-59">59</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-60">60</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-61">61</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-62">62</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-63">63</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-64">64</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-65">65</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ebf1b582de7-66">66</p><p class="crayon-num" data-line="crayon-54ebf1b582de7-67">67</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ebf1b582de7-1"><span class="c">// Print the arm branches (eg, /&#160;&#160;&#160;&#160;\ ) on a line</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-2"><span class="t">void</span><span class="h"> </span><span class="e">printBranches</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">branchLen</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">nodeSpaceLen</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">startLen</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">nodesInThisLevel</span><span class="sy">,</span><span class="h"> </span><span class="m">const</span><span class="h"> </span><span class="i">deque</span><span class="o">&lt;</span><span class="e ">BinaryTree*</span><span class="o">&gt;</span><span class="o">&amp;</span><span class="h"> </span><span class="i">nodesQueue</span><span class="sy">,</span><span class="h"> </span><span class="i">ostream</span><span class="o">&amp;</span><span class="h"> </span><span class="i">out</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-3"><span class="h">&#160;&#160;</span><span class="i">deque</span><span class="o">&lt;</span><span class="e ">BinaryTree*</span><span class="o">&gt;</span><span class="o">::</span><span class="e">const_iterator </span><span class="v">iter</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">nodesQueue</span><span class="sy">.</span><span class="e">begin</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-4"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">nodesInThisLevel</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span><span class="h">&#160;&#160;</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">out</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="v">i</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="e">setw</span><span class="sy">(</span><span class="i">startLen</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="e">setw</span><span class="sy">(</span><span class="i">nodeSpaceLen</span><span class="o">-</span><span class="cn">2</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">""</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="o">*</span><span class="i">iter</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="s">"/"</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="s">" "</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">out</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="e">setw</span><span class="sy">(</span><span class="cn">2</span><span class="o">*</span><span class="i">branchLen</span><span class="o">+</span><span class="cn">2</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">""</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="o">*</span><span class="i">iter</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="s">"\\"</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="s">" "</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-7"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-8"><span class="h">&#160;&#160;</span><span class="i">out</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">endl</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-9"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-10">&#160;</p><p class="crayon-line" id="crayon-54ebf1b582de7-11"><span class="c">// Print the branches and node (eg, ___10___ )</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-12"><span class="t">void</span><span class="h"> </span><span class="e">printNodes</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">branchLen</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">nodeSpaceLen</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">startLen</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">nodesInThisLevel</span><span class="sy">,</span><span class="h"> </span><span class="m">const</span><span class="h"> </span><span class="i">deque</span><span class="o">&lt;</span><span class="e ">BinaryTree*</span><span class="o">&gt;</span><span class="o">&amp;</span><span class="h"> </span><span class="i">nodesQueue</span><span class="sy">,</span><span class="h"> </span><span class="i">ostream</span><span class="o">&amp;</span><span class="h"> </span><span class="i">out</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-13"><span class="h">&#160;&#160;</span><span class="i">deque</span><span class="o">&lt;</span><span class="e ">BinaryTree*</span><span class="o">&gt;</span><span class="o">::</span><span class="e">const_iterator </span><span class="v">iter</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">nodesQueue</span><span class="sy">.</span><span class="e">begin</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-14"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">nodesInThisLevel</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">,</span><span class="h"> </span><span class="i">iter</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-15"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">out</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="v">i</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="e">setw</span><span class="sy">(</span><span class="i">startLen</span><span class="sy">)</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="e">setw</span><span class="sy">(</span><span class="i">nodeSpaceLen</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">""</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="o">*</span><span class="i">iter</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="sy">(</span><span class="o">*</span><span class="i">iter</span><span class="sy">)</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="e">setfill</span><span class="sy">(</span><span class="s">'_'</span><span class="sy">)</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="e">setfill</span><span class="sy">(</span><span class="s">' '</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-16"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">out</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="e">setw</span><span class="sy">(</span><span class="i">branchLen</span><span class="o">+</span><span class="cn">2</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="o">*</span><span class="i">iter</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="e">intToString</span><span class="sy">(</span><span class="sy">(</span><span class="o">*</span><span class="i">iter</span><span class="sy">)</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">)</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="s">""</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">out</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="o">*</span><span class="i">iter</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="sy">(</span><span class="o">*</span><span class="i">iter</span><span class="sy">)</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="e">setfill</span><span class="sy">(</span><span class="s">'_'</span><span class="sy">)</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="e">setfill</span><span class="sy">(</span><span class="s">' '</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="e">setw</span><span class="sy">(</span><span class="i">branchLen</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">""</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="e">setfill</span><span class="sy">(</span><span class="s">' '</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-18"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-19"><span class="h">&#160;&#160;</span><span class="i">out</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">endl</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-20"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-21">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-22"><span class="c">// Print the leaves only (just for the bottom row)</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-23"><span class="t">void</span><span class="h"> </span><span class="e">printLeaves</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">indentSpace</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">level</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">nodesInThisLevel</span><span class="sy">,</span><span class="h"> </span><span class="m">const</span><span class="h"> </span><span class="i">deque</span><span class="o">&lt;</span><span class="e ">BinaryTree*</span><span class="o">&gt;</span><span class="o">&amp;</span><span class="h"> </span><span class="i">nodesQueue</span><span class="sy">,</span><span class="h"> </span><span class="i">ostream</span><span class="o">&amp;</span><span class="h"> </span><span class="i">out</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-24"><span class="h">&#160;&#160;</span><span class="i">deque</span><span class="o">&lt;</span><span class="e ">BinaryTree*</span><span class="o">&gt;</span><span class="o">::</span><span class="e">const_iterator </span><span class="v">iter</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">nodesQueue</span><span class="sy">.</span><span class="e">begin</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-25"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">nodesInThisLevel</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">,</span><span class="h"> </span><span class="i">iter</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-26"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">out</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="v">i</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="e">setw</span><span class="sy">(</span><span class="i">indentSpace</span><span class="o">+</span><span class="cn">2</span><span class="sy">)</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="e">setw</span><span class="sy">(</span><span class="cn">2</span><span class="o">*</span><span class="i">level</span><span class="o">+</span><span class="cn">2</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="o">*</span><span class="i">iter</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="e">intToString</span><span class="sy">(</span><span class="sy">(</span><span class="o">*</span><span class="i">iter</span><span class="sy">)</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">)</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="s">""</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-27"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-28"><span class="h">&#160;&#160;</span><span class="i">out</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">endl</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-29"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-30">&#160;</p><p class="crayon-line" id="crayon-54ebf1b582de7-31"><span class="c">// Pretty formatting of a binary tree to the output stream</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-32"><span class="c">// @ param</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-33"><span class="c">// level&#160;&#160;Control how wide you want the tree to sparse (eg, level 1 has the minimum space between nodes, while level 2 has a larger space between nodes)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-34"><span class="c">// indentSpace&#160;&#160;Change this to add some indent space to the left (eg, indentSpace of 0 means the lowest level of the left node will stick to the left margin)</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-35"><span class="t">void</span><span class="h"> </span><span class="e">printPretty</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">root</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">level</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">indentSpace</span><span class="sy">,</span><span class="h"> </span><span class="i">ostream</span><span class="o">&amp;</span><span class="h"> </span><span class="i">out</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-36"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">h</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">maxHeight</span><span class="sy">(</span><span class="i">root</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-37"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">nodesInThisLevel</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-38">&#160;</p><p class="crayon-line" id="crayon-54ebf1b582de7-39"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">branchLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">2</span><span class="o">*</span><span class="sy">(</span><span class="sy">(</span><span class="t">int</span><span class="sy">)</span><span class="e">pow</span><span class="sy">(</span><span class="cn">2.0</span><span class="sy">,</span><span class="i">h</span><span class="sy">)</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="sy">(</span><span class="cn">3</span><span class="o">-</span><span class="i">level</span><span class="sy">)</span><span class="o">*</span><span class="sy">(</span><span class="t">int</span><span class="sy">)</span><span class="e">pow</span><span class="sy">(</span><span class="cn">2.0</span><span class="sy">,</span><span class="i">h</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span><span class="h">&#160;&#160;</span><span class="c">// eq of the length of branch for each node of each level</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-40"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">nodeSpaceLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">2</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="i">level</span><span class="o">+</span><span class="cn">1</span><span class="sy">)</span><span class="o">*</span><span class="sy">(</span><span class="t">int</span><span class="sy">)</span><span class="e">pow</span><span class="sy">(</span><span class="cn">2.0</span><span class="sy">,</span><span class="i">h</span><span class="sy">)</span><span class="sy">;</span><span class="h">&#160;&#160;</span><span class="c">// distance between left neighbor node's right arm and right neighbor node's left arm</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-41"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">startLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">branchLen</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="cn">3</span><span class="o">-</span><span class="i">level</span><span class="sy">)</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="i">indentSpace</span><span class="sy">;</span><span class="h">&#160;&#160;</span><span class="c">// starting space to the first node to print of each level (for the left most node of each level only)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-42"><span class="h">&#160;&#160;&#160;&#160;</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-43"><span class="h">&#160;&#160;</span><span class="i">deque</span><span class="o">&lt;</span><span class="e ">BinaryTree*</span><span class="o">&gt;</span><span class="h"> </span><span class="i">nodesQueue</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-44"><span class="h">&#160;&#160;</span><span class="v">nodesQueue</span><span class="sy">.</span><span class="e">push_back</span><span class="sy">(</span><span class="i">root</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-45"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">r</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">r</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">h</span><span class="sy">;</span><span class="h"> </span><span class="i">r</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-46"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">printBranches</span><span class="sy">(</span><span class="i">branchLen</span><span class="sy">,</span><span class="h"> </span><span class="i">nodeSpaceLen</span><span class="sy">,</span><span class="h"> </span><span class="i">startLen</span><span class="sy">,</span><span class="h"> </span><span class="i">nodesInThisLevel</span><span class="sy">,</span><span class="h"> </span><span class="i">nodesQueue</span><span class="sy">,</span><span class="h"> </span><span class="i">out</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-47"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">branchLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">branchLen</span><span class="o">/</span><span class="cn">2</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-48"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">nodeSpaceLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">nodeSpaceLen</span><span class="o">/</span><span class="cn">2</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-49"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">startLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">branchLen</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="cn">3</span><span class="o">-</span><span class="i">level</span><span class="sy">)</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="i">indentSpace</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-50"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">printNodes</span><span class="sy">(</span><span class="i">branchLen</span><span class="sy">,</span><span class="h"> </span><span class="i">nodeSpaceLen</span><span class="sy">,</span><span class="h"> </span><span class="i">startLen</span><span class="sy">,</span><span class="h"> </span><span class="i">nodesInThisLevel</span><span class="sy">,</span><span class="h"> </span><span class="i">nodesQueue</span><span class="sy">,</span><span class="h"> </span><span class="i">out</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-51">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-52"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">nodesInThisLevel</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-53"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">currNode</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">nodesQueue</span><span class="sy">.</span><span class="e">front</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-54"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">nodesQueue</span><span class="sy">.</span><span class="e">pop_front</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-55"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">currNode</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-56"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="v">nodesQueue</span><span class="sy">.</span><span class="e">push_back</span><span class="sy">(</span><span class="i">currNode</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-57"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="v">nodesQueue</span><span class="sy">.</span><span class="e">push_back</span><span class="sy">(</span><span class="i">currNode</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-58"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-59"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">nodesQueue</span><span class="sy">.</span><span class="e">push_back</span><span class="sy">(</span><span class="t">NULL</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-60"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">nodesQueue</span><span class="sy">.</span><span class="e">push_back</span><span class="sy">(</span><span class="t">NULL</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-61"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-62"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-63"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e ">nodesInThisLevel *</span><span class="o">=</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-64"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-65"><span class="h">&#160;&#160;</span><span class="e">printBranches</span><span class="sy">(</span><span class="i">branchLen</span><span class="sy">,</span><span class="h"> </span><span class="i">nodeSpaceLen</span><span class="sy">,</span><span class="h"> </span><span class="i">startLen</span><span class="sy">,</span><span class="h"> </span><span class="i">nodesInThisLevel</span><span class="sy">,</span><span class="h"> </span><span class="i">nodesQueue</span><span class="sy">,</span><span class="h"> </span><span class="i">out</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ebf1b582de7-66"><span class="h">&#160;&#160;</span><span class="e">printLeaves</span><span class="sy">(</span><span class="i">indentSpace</span><span class="sy">,</span><span class="h"> </span><span class="i">level</span><span class="sy">,</span><span class="h"> </span><span class="i">nodesInThisLevel</span><span class="sy">,</span><span class="h"> </span><span class="i">nodesQueue</span><span class="sy">,</span><span class="h"> </span><span class="i">out</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ebf1b582de7-67"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a41">Rating: 4.9/<strong>5</strong> (14 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">How to Pretty Print a Binary Tree</span></span>, <span class="rating"><span class="average">4.9</span> out of <span class="best">5</span> based on <span class="votes">14</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Write C code to implement the <i>strstr</i> (Search for a substring) function. Do not use any system library such as<i> strlen</i>.</p></blockquote><p><span id="more-49"></span><br>The <i>strstr </i>function locates a specified substring within a source string. <i>Strstr </i>returns a pointer to the first occurrence of the substring in the source. If the substring is not found, <i>strstr </i>returns a null pointer.</p><p>As expected, this question is very popular among technical interviews. This question tests your ability in manipulating strings using pointers, as well as your coding ability.</p><p>Of course, you can demonstrate to your interviewer that this problem can be solved using known efficient algorithms such as <a href="http://en.wikipedia.org/wiki/Rabin-Karp_algorithm">Rabin-Karp algorithm</a>, <a href="http://en.wikipedia.org/wiki/Knuth-morris-pratt_algorithm">KMP algorithm</a>, and the <a href="http://en.wikipedia.org/wiki/Boyer_moore_algorithm">Boyer-Moore algorithm</a>. Since these algorithms are usually studied in advanced algorithms class, for an interview it is sufficient to solve it using the most direct method &#8212; The <i>brute force method</i>.</p><p>For non-C programmers who are not familiar with C-style strings, your first reaction is to obtain the length of the string. But remember, use of system library is not allowed. If you are not familiar with pointer manipulation, it&#8217;s time to brush up your pointer skills.</p><p>The brute force method is straightforward to implement. We scan the substring (the target) with the string from its first position and start matching all subsequent letters one by one. If one of the letter doesn&#8217;t match, we start over again with the next position in the string. Assume that <b><i>N</i></b> = length of string, <b><i>M</i></b> = length of substring, then the complexity is <i>O</i>(<b><i>N</i>*</b><b><i>M</i></b>).</p><p>Think you&#8217;ve got it all in your head? Try writing the code down on a piece of paper. Remember to test for special cases.</p><p></p><div id="crayon-54ec81babf469" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" touchscreen minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick">
char* StrStr(const char *str, const char *target) {
  if (!*target) return str;
  char *p1 = (char*)str;
  while (*p1) {
    char *p1Begin = p1, *p2 = (char*)target;
    while (*p1 &amp;&amp; *p2 &amp;&amp; *p1 == *p2) {
      p1++;
      p2++;
    }
    if (!*p2)
      return p1Begin;
    p1 = p1Begin + 1;
  }
  return NULL;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec81babf469-1"><span class="t">char</span><span class="o">*</span><span class="h"> </span><span class="e">StrStr</span><span class="sy">(</span><span class="m">const</span><span class="h"> </span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="i">str</span><span class="sy">,</span><span class="h"> </span><span class="m">const</span><span class="h"> </span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="i">target</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec81babf469-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="o">*</span><span class="i">target</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="i">str</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec81babf469-3"><span class="h">&#160;&#160;</span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="v">p1</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="t">char</span><span class="o">*</span><span class="sy">)</span><span class="i">str</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec81babf469-4"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">*</span><span class="i">p1</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec81babf469-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="v">p1Begin</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p1</span><span class="sy">,</span><span class="h"> </span><span class="o">*</span><span class="v">p2</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="t">char</span><span class="o">*</span><span class="sy">)</span><span class="i">target</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec81babf469-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">*</span><span class="i">p1</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="o">*</span><span class="i">p2</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="o">*</span><span class="v">p1</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="o">*</span><span class="i">p2</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec81babf469-7"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">p1</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec81babf469-8"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">p2</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec81babf469-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec81babf469-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="o">*</span><span class="i">p2</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ec81babf469-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">p1Begin</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec81babf469-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">p1</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p1Begin</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec81babf469-13"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec81babf469-14"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec81babf469-15"><span class="sy">}</span></p></div></td></tr></table></div></div><p>Did you handle the special case correctly? That is, when the target substring is an empty string. What should you return in this case? The correct implementation of <i>strstr </i>should return the full string in this case.</p><p>The above solution is usually good enough for an interview. But it turns out we are able to improve the code a little further. Note that the above code iterates at most <b><i>N</i></b> times in the outer loop.</p><p>The improvement is based on one observation: We only need to iterate at most <b><i>N</i>-</b><b><i>M</i>+</b><b>1</b> times in the outer loop. Why? Because after looping more than <b><i>N</i>-</b><b><i>M</i>+</b><b>1</b> times, the string has less than <b><i>M</i></b> characters to be matched with the substring. In this case, we know no more substring will be found in the string, and therefore saving us from additional comparisons (which might be substantial especially when <b><i>M</i></b> is large compared to <b><i>N</i></b>.)</p><p>How do we loop for only <b><i>N</i>-</b><b><i>M</i>+</b><b>1</b> times? We are able to calculate the size of the string and substring by iterating a total of <b><i>N</i>+</b><b><i>M</i></b> times. In fact, finding just the length of the substring, <b><i>M</i></b> is sufficient. We use an additional pointer, <i>p1Adv</i> and advance it <b><i>M</i>-</b><b>1</b> times ahead of the string pointer. Therefore, when <i>p1Adv</i> points to &#8216;\0&#8242;, we know that it has iterated <b><i>N</i>-</b><b><i>M</i>+</b><b>1 </b>times.</p><p></p><div id="crayon-54ec81babf520" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" touchscreen minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick">
char* StrStr(const char *str, const char *target) {
  if (!*target) return str;
  char *p1 = (char*)str, *p2 = (char*)target;
  char *p1Adv = (char*)str;
  while (*++p2)
    p1Adv++;
  while (*p1Adv) {
    char *p1Begin = p1;
    p2 = (char*)target;
    while (*p1 &amp;&amp; *p2 &amp;&amp; *p1 == *p2) {
      p1++;
      p2++;
    }
    if (!*p2)
      return p1Begin;
    p1 = p1Begin + 1;
    p1Adv++;
  }
  return NULL;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ec81babf520-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec81babf520-2">2</p><p class="crayon-num" data-line="crayon-54ec81babf520-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec81babf520-4">4</p><p class="crayon-num" data-line="crayon-54ec81babf520-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec81babf520-6">6</p><p class="crayon-num" data-line="crayon-54ec81babf520-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec81babf520-8">8</p><p class="crayon-num" data-line="crayon-54ec81babf520-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec81babf520-10">10</p><p class="crayon-num" data-line="crayon-54ec81babf520-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec81babf520-12">12</p><p class="crayon-num" data-line="crayon-54ec81babf520-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec81babf520-14">14</p><p class="crayon-num" data-line="crayon-54ec81babf520-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec81babf520-16">16</p><p class="crayon-num" data-line="crayon-54ec81babf520-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec81babf520-18">18</p><p class="crayon-num" data-line="crayon-54ec81babf520-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec81babf520-20">20</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec81babf520-1"><span class="t">char</span><span class="o">*</span><span class="h"> </span><span class="e">StrStr</span><span class="sy">(</span><span class="m">const</span><span class="h"> </span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="i">str</span><span class="sy">,</span><span class="h"> </span><span class="m">const</span><span class="h"> </span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="i">target</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec81babf520-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="o">*</span><span class="i">target</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="i">str</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec81babf520-3"><span class="h">&#160;&#160;</span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="v">p1</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="t">char</span><span class="o">*</span><span class="sy">)</span><span class="i">str</span><span class="sy">,</span><span class="h"> </span><span class="o">*</span><span class="v">p2</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="t">char</span><span class="o">*</span><span class="sy">)</span><span class="i">target</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec81babf520-4"><span class="h">&#160;&#160;</span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="v">p1Adv</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="t">char</span><span class="o">*</span><span class="sy">)</span><span class="i">str</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec81babf520-5"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">*</span><span class="o">++</span><span class="i">p2</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec81babf520-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">p1Adv</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec81babf520-7"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">*</span><span class="i">p1Adv</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec81babf520-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="v">p1Begin</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec81babf520-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">p2</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="t">char</span><span class="o">*</span><span class="sy">)</span><span class="i">target</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec81babf520-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">*</span><span class="i">p1</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="o">*</span><span class="i">p2</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="o">*</span><span class="v">p1</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="o">*</span><span class="i">p2</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec81babf520-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">p1</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec81babf520-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">p2</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec81babf520-13"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec81babf520-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="o">*</span><span class="i">p2</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ec81babf520-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">p1Begin</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec81babf520-16"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">p1</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p1Begin</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec81babf520-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">p1Adv</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec81babf520-18"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ec81babf520-19"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec81babf520-20"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a49">Rating: 4.5/<strong>5</strong> (40 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Implement strstr() to Find a Substring in a String</span></span>, <span class="rating"><span class="average">4.5</span> out of <span class="best">5</span> based on <span class="votes">40</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Given a node from a cyclic linked list which has been sorted, write a function to insert a value into the list such that it remains a cyclic sorted list. The given node can be any single node in the list.</p></blockquote><p><span id="more-846"></span><br> <b><font color="red"><u>EDIT:</u></font></b><br> Thanks to dear readers <b><a href="http://www.leetcode.com/2011/08/insert-into-a-cyclic-sorted-list.html#comment-2190"><font color="red">Saurabh</font></a></b> and <b><a href="http://www.leetcode.com/2011/08/insert-into-a-cyclic-sorted-list.html#comment-10447"><font color="red">reader</font></a></b> who pointed out my mistake. When the list has only one value, inserting a different value would be handled by case 3), <strong><u>not</u></strong> case 1). Besides, I believe I did not explain &#8220;What is a cyclic sorted list&#8221; nicely, as this had caused some confusion. Imagine you have a sorted list, but its tail points back to its head. In other words, the list must have a minimum node, continue in a non-descending order, and eventually points back to this minimum node itself. And the only way to access the list is via aNode, which can point to any node in the list and <strong>does not</strong> necessarily point to the minimum node.</p><p>First, it is important that you understand what a cyclic linked list is. A cyclic linked list differs from a normal linked list in that its tail node points back to its head node instead of NULL.</p><p>This problem seems a little tricky because the given node is not necessarily the list&#8217;s head (ie, the node that has the smallest element). It shouldn&#8217;t take you too long to come up with an idea, but beware. There are hidden traps around the corner and you are bound to make some mistakes if you are not careful in your thoughts.</p><p><a href="http://www.leetcode.com/wp-content/uploads/2011/08/cyclic_list1.png"><img class="aligncenter size-full wp-image-862" title="cyclic_list1" src="http://www.leetcode.com/wp-content/uploads/2011/08/cyclic_list1.png" alt="" width="316" height="68"></a><small>A cyclic sorted linked list. Note that the tail is pointing back to its head. The only reference to the list is a given node which can be any node in the list. Let&#8217;s say that you need to insert 4 into the list.</small></p><p></p><p><a href="http://www.leetcode.com/wp-content/uploads/2011/08/cyclic_list2.png"><img class="aligncenter size-full wp-image-863" title="cyclic_list2" src="http://www.leetcode.com/wp-content/uploads/2011/08/cyclic_list2.png" alt="" width="425" height="68"></a><small>This is how the cyclic list becomes after inserting 4. Note that the cyclic linked list remained in sorted order.</small></p><p></p><p><strong>Hints:</strong><br> It is best to list all kinds of cases first before you jump into coding. Then, it is much easier to reduce the number of cases your code need to handle by combining some of them into a more generic case. Try to also list down all possible edge cases if you have time. You might discover a bug before you even start coding!</p><p><strong>Solution:</strong><br> Basically, you would have a loop that traverse the cyclic sorted list and find the point where you insert the value (Let&#8217;s assume the value being inserted called <em>x</em>). You would only need to consider the following three cases:</p><div class="hiblock"><ol><li><strong>prev&#8594;val &#8804; <em>x</em> &#8804; current&#8594;val:</strong></li><dl><dd>Insert between prev and current.</dd></dl><li><strong><em>x</em> is the maximum or minimum value in the list: </strong><dl><dd>Insert before the head. (ie, the head has the smallest value and its prev&#8594;val &gt; head&#8594;val.</dd></dl></li><li><strong>Traverses back to the starting point:</strong><dl><dd>Insert before the starting point.</dd></dl></li></ol></div><p>Most people have no problem getting case 1) working, while case 2) is easy to miss or being handled incorrectly. Case 3), on the other hand is more subtle and is not immediately clear what kind of test cases would hit this condition. It seemed that case 1) and 2) should take care of all kinds of cases and case 3) is not needed. Think again&#8230; How can you be sure of that? Could you come up with one case where it hits case 3)?</p><dl><dt>Q: What if the list has only one value?</dt><dd>A: <del datetime="2011-12-28T10:03:26+00:00">Handled by case 1)</del>. Handled by case 3).</dd><dt>Q: What if the list is passed in as NULL?</dt><dd>A: Then handle this special case by creating a new node pointing back to itself and return.</dd><dt>Q: What if the list contains all duplicates?</dt><dd>A: Then it has been handled by case 3).</dd></dl><p>Below is the code. You could combine both negation of case 1) and case 2) in the while loop&#8217;s condition, but I prefer to use break statements here to illustrate the above idea clearer.</p><div id="crayon-54ecdd8472eea" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void insert(Node *&amp; aNode, int x) {
  if (!aNode) {
    aNode = new Node(x);
    aNode-&gt;next = aNode;
    return;
  }

  Node *p = aNode;
  Node *prev = NULL;
  do {
    prev = p;
    p = p-&gt;next;
    if (x &lt;= p-&gt;data &amp;&amp; x &gt;= prev-&gt;data) break;   // For case 1)
    if ((prev-&gt;data &gt; p-&gt;data) &amp;&amp; (x &lt; p-&gt;data || x &gt; prev-&gt;data)) break; // For case 2)
  } while (p != aNode);   // when back to starting point, then stop. For case 3)

  Node *newNode = new Node(x);
  newNode-&gt;next = p;
  prev-&gt;next = newNode;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ecdd8472eea-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdd8472eea-2">2</p><p class="crayon-num" data-line="crayon-54ecdd8472eea-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdd8472eea-4">4</p><p class="crayon-num" data-line="crayon-54ecdd8472eea-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdd8472eea-6">6</p><p class="crayon-num" data-line="crayon-54ecdd8472eea-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdd8472eea-8">8</p><p class="crayon-num" data-line="crayon-54ecdd8472eea-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdd8472eea-10">10</p><p class="crayon-num" data-line="crayon-54ecdd8472eea-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdd8472eea-12">12</p><p class="crayon-num" data-line="crayon-54ecdd8472eea-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdd8472eea-14">14</p><p class="crayon-num" data-line="crayon-54ecdd8472eea-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdd8472eea-16">16</p><p class="crayon-num" data-line="crayon-54ecdd8472eea-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdd8472eea-18">18</p><p class="crayon-num" data-line="crayon-54ecdd8472eea-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdd8472eea-20">20</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecdd8472eea-1"><span class="t">void</span><span class="h"> </span><span class="e">insert</span><span class="sy">(</span><span class="e ">Node *</span><span class="o">&amp;</span><span class="h"> </span><span class="i">aNode</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">x</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdd8472eea-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">aNode</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecdd8472eea-3"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">aNode</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="r">new</span><span class="h"> </span><span class="e">Node</span><span class="sy">(</span><span class="i">x</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdd8472eea-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">aNode</span><span class="o">-&gt;</span><span class="v">next</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">aNode</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdd8472eea-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdd8472eea-6"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecdd8472eea-7">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ecdd8472eea-8"><span class="h">&#160;&#160;</span><span class="e ">Node *</span><span class="v">p</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">aNode</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdd8472eea-9"><span class="h">&#160;&#160;</span><span class="e ">Node *</span><span class="v">prev</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdd8472eea-10"><span class="h">&#160;&#160;</span><span class="st">do</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecdd8472eea-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">prev</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdd8472eea-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">p</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">next</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdd8472eea-13"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">x</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="i">prev</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">)</span><span class="h"> </span><span class="st">break</span><span class="sy">;</span><span class="h">&#160;&#160; </span><span class="c">// For case 1)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdd8472eea-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">prev</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">x</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">prev</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="st">break</span><span class="sy">;</span><span class="h"> </span><span class="c">// For case 2)</span></p><p class="crayon-line" id="crayon-54ecdd8472eea-15"><span class="h">&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">p</span><span class="h"> </span><span class="o">!=</span><span class="h"> </span><span class="i">aNode</span><span class="sy">)</span><span class="sy">;</span><span class="h">&#160;&#160; </span><span class="c">// when back to starting point, then stop. For case 3)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdd8472eea-16">&#160;</p><p class="crayon-line" id="crayon-54ecdd8472eea-17"><span class="h">&#160;&#160;</span><span class="e ">Node *</span><span class="v">newNode</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="r">new</span><span class="h"> </span><span class="e">Node</span><span class="sy">(</span><span class="i">x</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdd8472eea-18"><span class="h">&#160;&#160;</span><span class="i">newNode</span><span class="o">-&gt;</span><span class="v">next</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdd8472eea-19"><span class="h">&#160;&#160;</span><span class="i">prev</span><span class="o">-&gt;</span><span class="v">next</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">newNode</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdd8472eea-20"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a846">Rating: 4.6/<strong>5</strong> (61 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Insert into a Cyclic Sorted List</span></span>, <span class="rating"><span class="average">4.6</span> out of <span class="best">5</span> based on <span class="votes">61</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><p>If you are majoring in Computer Science, chances are you&#8217;ll be working with jobs that require some degree of programming. When you&#8217;re looking for a job in the market, you&#8217;ll be having a lot of interviews. Interviewer loves to challenge you by asking some technical interview questions. <span id="more-4"></span>There are 3 types of technical questions in general:</p><p>1) Algorithms/Data structure<br>2) Programming language-specific / General CS knowledge<br>3) Brain teaser</p><p>I&#8217;ll go over with more details on each of them:<br>1) Algorithms/Data structure<br>You should understand these topics deeply from a typical data structure course: Array, Linked-list, Binary tree, Hash table&#8230; You should be able to tell when to use an array vs. linked-list, implementation details of linked list such as reversing a list&#8230;</p><p>Interviewer typically test your problem-solving ability by asking algorithmic questions. Some examples are:<br>- Reversing the words in a sentence.<br>- Reversing the letters in a word. (Try both iteration and recursion solutions)<br>- How to find duplicate data in a list.<br>- Generating permutations of n digits. (hint: recursion)<br>- Find the median of combination of two sorted arrays of numbers. (hint: divide and conquer)<br>- How to spell-check and correct a word (hint: edit distance)</p><p>2) Programming language-specific / General CS knowledge<br>If you&#8217;re applying a C++ programmer position, be prepared for lots of C++ questions. Same with other languages. If the position you applying does not have a language-specific role, you may be asked general CS knowledge, such as difference between allocating on a stack and heap, &#8230;</p><p>Some C++ related questions I encounter often:<br>- What are virtual functions? How is it implemented? What are the trade-offs using virtual functions?<br>- What is a virtual destructor? When do you need them? What if you don&#8217;t implement a destructor as virtual?<br>- What is copy constructor and when is it being called?<br>- What&#8217;s the difference between malloc and new?</p><p>3) Brain teaser<br>Some interviewers like to ask a brain teaser question to end the interview <img src="http://leetcode.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley"> You&#8217;ll know it when they ask: Do you like puzzles? Prepare for some creative thinking <img src="http://leetcode.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley"></p><p>Some sample questions:<br>- Two eggs problem:<br>You have two identical eggs and you are given access to a 100 story building. You would like to know the highest floor for the egg not to break when dropped. The problem is the egg might break on the 1st floor, or even the 100th floor, you just don&#8217;t know. Find the maximum number of trials you need to conduct in order to find the answer.</p><p>- Reverse the bits in one byte data as fast as possible.</p><p>- You have 5 identical jars. 4 of the jars contain balls with identical size weighing 10g each, while 1 of the jar contains balls weighing 9g each. You are given a digital scale, find out the 1 jar that has the 9g balls with only 1 weighing.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a4">Rating: 4.5/<strong>5</strong> (21 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Interview tips for programmers</span></span>, <span class="rating"><span class="average">4.5</span> out of <span class="best">5</span> based on <span class="votes">21</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Given a binary tree, find the largest Binary Search Tree (BST), where largest means BST with largest number of nodes in it. The largest BST may or may not include all of its descendants.</p></blockquote><p><span id="more-60"></span><br></p><p></p><p><b>Note:</b></p><p>In this post, we  develop a  solution to find the largest BST in a binary tree.  Please note that the largest BST may or may not include all of its descendants. If you  are  interested in the solution for finding the largest BST subtree where it must include all of its descendants, read my previous post: <a href="http://www.leetcode.com/2010/11/largest-binary-search-tree-bst-in.html">Largest Subtree Which is a Binary Search Tree (BST)</a>.</p><p>An<span> </span><a href="http://www.leetcode.com/2010/11/largest-binary-search-tree-bst-in.html#comments">anonymous reader</a> left an interesting comment in my <a href="http://www.leetcode.com/2010/11/largest-binary-search-tree-bst-in.html">previous post</a> where the interviewer was asking what if the largest BST may or may not include all of its descendants.</p><p>From now onwards, we use the term<b> <i>largest BST</i></b> for <i>largest BST which may or may not include all of  its descendants</i>, while <b><i>largest BST subtree</i></b> is for <i>largest  BST subtree which must include all of its descendants</i>.</p><p>The example I showed in my last post was too trivial, so here I show a slightly more complicated example.</p><pre>               ___________________<span>15</span>___________________
              /                                        \ 
  ___________<span>10</span>___________                             <span>20</span>
 /                        \ 
 <span>5</span>                   _____<span>7</span>____
                    /          \
                  __<span>2</span>__       __<span>5</span>
                 /     \     / 
                 <span>0</span>      <span>8</span>    <span>3</span> </pre><p>The <b><i>largest BST</i></b> (may or may not include all of its descendants) from the above example should be:</p><pre>         ____<span>15</span>____
        /          \
      _<span>10</span>          <span>20</span> 
     /                 
     <span>5</span>
</pre><p>while the <i><b>largest BST subtree</b> </i>(must include all of its descendants) should be:</p><pre>      __<span>2</span>_
     /    \
     <span>0     8 </span>              
</pre><p><b>An Incorrect Solution:</b></p><p>One might try to do an in-order traversal of the binary tree and find the longest increasing contiguous sequence or the <a href="http://en.wikipedia.org/wiki/Longest_increasing_subsequence">longest increasing subsequence</a>. Although these two approaches seemed to work for many cases, they are flawed and cannot handle the above case.</p><p>Let&#8217;s do an in-order traversal for the above binary tree:</p><pre><b>5 10 0 2 8 7 3 5 15 20</b></pre><p>The longest increasing contiguous sequence is:</p><pre><b>3 5 15 20</b></pre><p>The longest increasing subsequence is:</p><pre><b>0 2 3 5 15 20</b></pre><p>As you can see, neither one of them is correct.</p><p><b>A Top-down Approach:</b><br>The largest BST subtree solution requires a bottom-up approach where the min and max values are passed bottom-up. The main reason of doing this is when one of the nodes does not satisfy the BST properties, all subtrees above (which includes this node as well) must also <b>not </b>satisfy the BST requirements.</p><p>However, finding the largest BST requires a slightly different approach. We want the largest BST by including as many nodes as possible while we traverse down the tree, as long the current BST constraint is maintained. What happens when we see a node that breaks the current BST constraint? The answer is we can simply exclude it. However, we must treat it as an entirely new tree (ie, find in that tree if there is another larger BST). As you can see, we are passing the min and max values top-down, while the nodes count are passed bottom-up (Read my <a href="http://www.leetcode.com/2010/11/largest-binary-search-tree-bst-in.html">previous post</a> to know how).</p><p>As a tree is defined recursively using its left and right subtrees, you could not simply return root node of the largest BST as this would include all of its subtrees. You would need to create copies of the subtrees or delete nodes from the original binary tree. My code below create copies of the subtrees. As it does not handle the deletion of trees, some of the subtrees that are created dynamically will eventually be memory-leaked. Handling this problem would require more complicated code. I will not demonstrate how to do it here since this post is to illustrate the algorithm.</p><p></p><div id="crayon-54ecafd969a58" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
// Find the largest BST in a binary tree.
// This code does not delete dynamically-allocated nodes,
// so memory will be leaked upon exit.
// The min and max values are passed top-down to check if
// including a node satisfies the current BST constraint.
// The child nodes are passed bottom-up to be assigned 
// to its parent.
// Returns the total number of nodes the child holds.
int findLargestBST(BinaryTree *p, int min, int max, int &amp;maxNodes, 
                   BinaryTree *&amp; largestBST, BinaryTree *&amp; child) {
  if (!p) return 0;
  if (min &lt; p-&gt;data &amp;&amp; p-&gt;data &lt; max) {
    int leftNodes = findLargestBST(p-&gt;left, min, p-&gt;data, maxNodes, largestBST, child);
    BinaryTree *leftChild = (leftNodes == 0) ? NULL : child;
    int rightNodes = findLargestBST(p-&gt;right, p-&gt;data, max, maxNodes, largestBST, child);
    BinaryTree *rightChild = (rightNodes == 0) ? NULL : child;
    // create a copy of the current node and 
    // assign its left and right child.
    BinaryTree *parent = new BinaryTree(p-&gt;data);
    parent-&gt;left = leftChild;
    parent-&gt;right = rightChild;
    // pass the parent as the child to the above tree.
    child = parent;
    int totalNodes = leftNodes + rightNodes + 1;
    if (totalNodes &gt; maxNodes) {
      maxNodes = totalNodes;
      largestBST = parent;
    }
    return totalNodes;
  } else {
    // include this node breaks the BST constraint,
    // so treat this node as an entirely new tree and 
    // check if a larger BST exist in this tree
    findLargestBST(p, INT_MIN, INT_MAX, maxNodes, largestBST, child);
    // must return 0 to exclude this node
    return 0;
  }
}

BinaryTree* findLargestBST(BinaryTree *root) {
  BinaryTree *largestBST = NULL;
  BinaryTree *child;
  int maxNodes = INT_MIN;
  findLargestBST(root, INT_MIN, INT_MAX, maxNodes, largestBST, child);
  return largestBST;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ecafd969a58-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-2">2</p><p class="crayon-num" data-line="crayon-54ecafd969a58-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-4">4</p><p class="crayon-num" data-line="crayon-54ecafd969a58-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-6">6</p><p class="crayon-num" data-line="crayon-54ecafd969a58-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-8">8</p><p class="crayon-num" data-line="crayon-54ecafd969a58-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-10">10</p><p class="crayon-num" data-line="crayon-54ecafd969a58-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-12">12</p><p class="crayon-num" data-line="crayon-54ecafd969a58-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-14">14</p><p class="crayon-num" data-line="crayon-54ecafd969a58-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-16">16</p><p class="crayon-num" data-line="crayon-54ecafd969a58-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-18">18</p><p class="crayon-num" data-line="crayon-54ecafd969a58-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-20">20</p><p class="crayon-num" data-line="crayon-54ecafd969a58-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-22">22</p><p class="crayon-num" data-line="crayon-54ecafd969a58-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-24">24</p><p class="crayon-num" data-line="crayon-54ecafd969a58-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-26">26</p><p class="crayon-num" data-line="crayon-54ecafd969a58-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-28">28</p><p class="crayon-num" data-line="crayon-54ecafd969a58-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-30">30</p><p class="crayon-num" data-line="crayon-54ecafd969a58-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-32">32</p><p class="crayon-num" data-line="crayon-54ecafd969a58-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-34">34</p><p class="crayon-num" data-line="crayon-54ecafd969a58-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-36">36</p><p class="crayon-num" data-line="crayon-54ecafd969a58-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-38">38</p><p class="crayon-num" data-line="crayon-54ecafd969a58-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-40">40</p><p class="crayon-num" data-line="crayon-54ecafd969a58-41">41</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-42">42</p><p class="crayon-num" data-line="crayon-54ecafd969a58-43">43</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-44">44</p><p class="crayon-num" data-line="crayon-54ecafd969a58-45">45</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecafd969a58-46">46</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecafd969a58-1"><span class="c">// Find the largest BST in a binary tree.</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-2"><span class="c">// This code does not delete dynamically-allocated nodes,</span></p><p class="crayon-line" id="crayon-54ecafd969a58-3"><span class="c">// so memory will be leaked upon exit.</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-4"><span class="c">// The min and max values are passed top-down to check if</span></p><p class="crayon-line" id="crayon-54ecafd969a58-5"><span class="c">// including a node satisfies the current BST constraint.</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-6"><span class="c">// The child nodes are passed bottom-up to be assigned </span></p><p class="crayon-line" id="crayon-54ecafd969a58-7"><span class="c">// to its parent.</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-8"><span class="c">// Returns the total number of nodes the child holds.</span></p><p class="crayon-line" id="crayon-54ecafd969a58-9"><span class="t">int</span><span class="h"> </span><span class="e">findLargestBST</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">min</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">max</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">maxNodes</span><span class="sy">,</span><span class="h"> </span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="e ">BinaryTree *</span><span class="o">&amp;</span><span class="h"> </span><span class="i">largestBST</span><span class="sy">,</span><span class="h"> </span><span class="e ">BinaryTree *</span><span class="o">&amp;</span><span class="h"> </span><span class="r">child</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecafd969a58-11"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-12"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">min</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">max</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecafd969a58-13"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">leftNodes</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">findLargestBST</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">min</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">,</span><span class="h"> </span><span class="i">maxNodes</span><span class="sy">,</span><span class="h"> </span><span class="i">largestBST</span><span class="sy">,</span><span class="h"> </span><span class="r">child</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">leftChild</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="v">leftNodes</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="t">NULL</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="r">child</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecafd969a58-15"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">rightNodes</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">findLargestBST</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">,</span><span class="h"> </span><span class="i">max</span><span class="sy">,</span><span class="h"> </span><span class="i">maxNodes</span><span class="sy">,</span><span class="h"> </span><span class="i">largestBST</span><span class="sy">,</span><span class="h"> </span><span class="r">child</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-16"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">rightChild</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="v">rightNodes</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="t">NULL</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="r">child</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecafd969a58-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// create a copy of the current node and </span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-18"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// assign its left and right child.</span></p><p class="crayon-line" id="crayon-54ecafd969a58-19"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="r">parent</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="r">new</span><span class="h"> </span><span class="e">BinaryTree</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-20"><span class="h">&#160;&#160;&#160;&#160;</span><span class="r">parent</span><span class="o">-&gt;</span><span class="v">left</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">leftChild</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecafd969a58-21"><span class="h">&#160;&#160;&#160;&#160;</span><span class="r">parent</span><span class="o">-&gt;</span><span class="v">right</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">rightChild</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-22"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// pass the parent as the child to the above tree.</span></p><p class="crayon-line" id="crayon-54ecafd969a58-23"><span class="h">&#160;&#160;&#160;&#160;</span><span class="r">child</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="r">parent</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-24"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">totalNodes</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">leftNodes</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="i">rightNodes</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecafd969a58-25"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">totalNodes</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">maxNodes</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-26"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">maxNodes</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">totalNodes</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecafd969a58-27"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">largestBST</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="r">parent</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-28"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecafd969a58-29"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">totalNodes</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-30"><span class="h">&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecafd969a58-31"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// include this node breaks the BST constraint,</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-32"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// so treat this node as an entirely new tree and </span></p><p class="crayon-line" id="crayon-54ecafd969a58-33"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// check if a larger BST exist in this tree</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-34"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">findLargestBST</span><span class="sy">(</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="i">INT_MIN</span><span class="sy">,</span><span class="h"> </span><span class="i">INT_MAX</span><span class="sy">,</span><span class="h"> </span><span class="i">maxNodes</span><span class="sy">,</span><span class="h"> </span><span class="i">largestBST</span><span class="sy">,</span><span class="h"> </span><span class="r">child</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecafd969a58-35"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// must return 0 to exclude this node</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-36"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecafd969a58-37"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-38"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecafd969a58-39">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-40"><span class="e ">BinaryTree*</span><span class="h"> </span><span class="e">findLargestBST</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecafd969a58-41"><span class="h">&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">largestBST</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-42"><span class="h">&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="r">child</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecafd969a58-43"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">maxNodes</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">INT_MIN</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-44"><span class="h">&#160;&#160;</span><span class="e">findLargestBST</span><span class="sy">(</span><span class="i">root</span><span class="sy">,</span><span class="h"> </span><span class="i">INT_MIN</span><span class="sy">,</span><span class="h"> </span><span class="i">INT_MAX</span><span class="sy">,</span><span class="h"> </span><span class="i">maxNodes</span><span class="sy">,</span><span class="h"> </span><span class="i">largestBST</span><span class="sy">,</span><span class="h"> </span><span class="r">child</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecafd969a58-45"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">largestBST</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecafd969a58-46"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a60">Rating: 4.6/<strong>5</strong> (33 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Largest Binary Search Tree (BST) in a Binary Tree</span></span>, <span class="rating"><span class="average">4.6</span> out of <span class="best">5</span> based on <span class="votes">33</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Given a binary tree, find the largest subtree which is a Binary Search Tree (BST), where largest means subtree with largest number of nodes in it.</p></blockquote><p><span id="more-58"></span><br></p><p></p><p><b>Note:</b></p><p>In this post, we  develop a solution to find the largest BST subtree in a binary tree.  Please note that a subtree must include all of its descendants. If you  are only interested in the solution of finding the largest BST where it may  or may not include all of its descendants, read my next post: <a href="http://www.leetcode.com/2010/11/largest-binary-search-tree-bst-in_22.html">Largest Binary Search Tree (BST) in a Binary Tree</a>.</p><p>An <a href="http://www.leetcode.com/2010/11/finding-minimum-window-in-s-which.html?showComment=1289930318245#comment-c8804992155578793351"><span>anonymous reader</span></a> asked this interesting question, so here you are. <a href="http://www.leetcode.com/search/label/amazon%20interview">Amazon</a> had asked this in technical interviews and it seemed to me that this is not a popular tree question. It is one of the trickier ones, since you are required to combine the idea from this problem: <a href="http://www.leetcode.com/2010/09/determine-if-binary-tree-is-binary.html">Determine if a Binary Tree is a Binary Search Tree</a>, and also the idea of doing a Depth-first search (DFS).</p><p>It&#8217;s important that you understand the question correctly. Let&#8217;s try an example below. Which is the largest BST subtree?</p><pre>         ____<span>10</span>____
        /          \
      __<span>5</span>_         <span>15</span>_
     /    \           \
     <span>1</span>     <span>8</span>           <span>7
</span></pre><p>For most people, there would be two possible interpretations for the term &#8220;subtree&#8221;.</p><p>Is this <span>( subtree (1) )</span> the largest BST subtree?</p><pre>         ____<span>10</span>____
        /          \
      __<span>5</span>_         <span>15</span>     <span>-------- subtree (1)</span>
     /    \ 
     <span>1</span>     <span>8</span> <span>
</span></pre><p>How about this one<span> ( subtree (2) ) </span>?</p><pre>      __<span>5</span>_
     /    \               <span>-------- subtree (2)</span>
     <span>1</span>     <span>8</span> <span>
</span></pre><p>According to <a href="http://en.wikipedia.org/wiki/Subtree">Wikipedia</a>, a subtree of a tree T is a tree consisting of a node in T and all of its descendants in T. Therefore, there is no doubt that <span>subtree (2)</span> is the correct answer, as <span>subtree (1)</span> does not include all of its descendants. It is important that you understand the term subtree correctly. If you are not sure, ask the interviewer and you should not make any assumptions.</p><p><b>Naive Approach:</b><br>A naive approach is to reuse the solution from <a href="http://www.leetcode.com/2010/09/determine-if-binary-tree-is-binary.html">Determine if a Binary Tree is a Binary Search Tree</a>. Starting from the root, we process in the order of current node, left child, then right child. For each node, you would call <i>isBST()</i> to check if the current subtree is a BST. If it is, then we have found the largest BST subtree. If it is not, then we have to continue examining its left and right child. If only one of the subtrees is BST, then we can return that subtree. However, if both left and right subtrees are BSTs, then we have to compare which subtree is larger (has more descendant nodes), then return the larger one.</p><p>Assume that we have a complete tree (ie, all leaves are at the same depth) with <i>n</i> nodes, the naive approach&#8217;s run time complexity  is <i>O</i>(<i>n</i> lg <i>n</i>). The proof is left as an exercise to the reader. <img border="0" src="http://4.bp.blogspot.com/_UElib2WLeDE/TK7aJSBFXSI/AAAAAAAACW8/5f8CRD5dJ8o/s1600/smiley.jpg"></p><p><b>A Flawed Approach:</b></p><p>How about doing an in-order traversal for the binary tree? The longest increasing contiguous sequence must be the largest BST subtree. Try to do an in-order traversal for the example tree above. This approach simply does not work. Period.</p><p><b>A Bottom-up Approach:</b><br>The naive approach is using a top-down approach. It is hardly efficient, simply because we are calling <i>isBST()</i> over and over again. Each time <i>isBST()</i> is called, it traverses down to the leaves to verify if the subtree is a BST.</p><p>Let&#8217;s think from another perspective. Instead of traversing down the tree, why not traverse up the tree using a bottom-up approach? In other words, we verify the deeper nodes before we verify if the above nodes satisfy the BST requirements.</p><p>The main reason of doing this is when one of the nodes does not satisfy  the BST properties, all subtrees above (which includes this node as  well) must also <b>not</b> satisfy the BST requirements.</p><p>First, let&#8217;s review our definition of a BST. A tree is a BST if the following properties are satisfied:</p><div class="hiblock"><ul><li>Both left and right subtrees of a node are BSTs.</li><li>The node&#8217;s value is greater than its left subtree&#8217;s maximum.</li><li>The node&#8217;s value is less than its right subtree&#8217;s minimum.</li></ul></div><p>Using a bottom-up approach, we need to pass some information up the tree. Obviously, we need to pass minimum and maximum values of the subtree as we traverse up the tree, so the above subtrees could be verified for BST&#8217;s properties.</p><p>As compared to the top-down approach, the bottom-up approach is such an awesome choice because the results for total number of nodes could be passed up the tree. This saves us from recalculating over and over again. The total number of nodes for a subtree is simply the total number of nodes of its left and right subtrees plus one.</p><p>Isn&#8217;t the bottom-up approach neat? It acts like magic until you understand it, and solves all the problems that the top-down approach has. The run-time complexity for the bottom-up approach is <i>O</i>(<i>n</i>). Beware of this gotcha when you implement the algorithm. Even though a node&#8217;s left subtree is not a BST, you must still continue traverse its right subtree as the largest BST subtree might be contained in its right subtree.</p><p></p><div id="crayon-54b0cfe518dbd" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
// Find the largest BST subtree in a binary tree.
// If the subtree is a BST, return total number of nodes.
// If the subtree is not a BST, -1 is returned.
int findLargestBSTSubtree(BinaryTree *p, int &amp;min, int &amp;max, 
                   int &amp;maxNodes, BinaryTree *&amp; largestBST) {
  if (!p) return 0;
  bool isBST = true;
  int leftNodes = findLargestBSTSubtree(p-&gt;left, min, max, maxNodes, largestBST);
  int currMin = (leftNodes == 0) ? p-&gt;data : min;
  if (leftNodes == -1 || 
     (leftNodes != 0 &amp;&amp; p-&gt;data &lt;= max))
    isBST = false;
  int rightNodes = findLargestBSTSubtree(p-&gt;right, min, max, maxNodes, largestBST);
  int currMax = (rightNodes == 0) ? p-&gt;data : max;
  if (rightNodes == -1 || 
     (rightNodes != 0 &amp;&amp; p-&gt;data &gt;= min))
    isBST = false;
  if (isBST) {
    min = currMin;
    max = currMax;
    int totalNodes = leftNodes + rightNodes + 1;
    if (totalNodes &gt; maxNodes) {
      maxNodes = totalNodes;
      largestBST = p;
    }
    return totalNodes;
  } else {
    return -1;   // This subtree is not a BST
  }
}

BinaryTree* findLargestBSTSubtree(BinaryTree *root) {
  BinaryTree *largestBST = NULL;
  int min, max;
  int maxNodes = INT_MIN;
  findLargestBSTSubtree(root, min, max, maxNodes, largestBST);
  return largestBST;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54b0cfe518dbd-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-2">2</p><p class="crayon-num" data-line="crayon-54b0cfe518dbd-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-4">4</p><p class="crayon-num" data-line="crayon-54b0cfe518dbd-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-6">6</p><p class="crayon-num" data-line="crayon-54b0cfe518dbd-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-8">8</p><p class="crayon-num" data-line="crayon-54b0cfe518dbd-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-10">10</p><p class="crayon-num" data-line="crayon-54b0cfe518dbd-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-12">12</p><p class="crayon-num" data-line="crayon-54b0cfe518dbd-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-14">14</p><p class="crayon-num" data-line="crayon-54b0cfe518dbd-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-16">16</p><p class="crayon-num" data-line="crayon-54b0cfe518dbd-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-18">18</p><p class="crayon-num" data-line="crayon-54b0cfe518dbd-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-20">20</p><p class="crayon-num" data-line="crayon-54b0cfe518dbd-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-22">22</p><p class="crayon-num" data-line="crayon-54b0cfe518dbd-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-24">24</p><p class="crayon-num" data-line="crayon-54b0cfe518dbd-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-26">26</p><p class="crayon-num" data-line="crayon-54b0cfe518dbd-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-28">28</p><p class="crayon-num" data-line="crayon-54b0cfe518dbd-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-30">30</p><p class="crayon-num" data-line="crayon-54b0cfe518dbd-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-32">32</p><p class="crayon-num" data-line="crayon-54b0cfe518dbd-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-34">34</p><p class="crayon-num" data-line="crayon-54b0cfe518dbd-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-36">36</p><p class="crayon-num" data-line="crayon-54b0cfe518dbd-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-54b0cfe518dbd-38">38</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54b0cfe518dbd-1"><span class="c">// Find the largest BST subtree in a binary tree.</span></p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-2"><span class="c">// If the subtree is a BST, return total number of nodes.</span></p><p class="crayon-line" id="crayon-54b0cfe518dbd-3"><span class="c">// If the subtree is not a BST, -1 is returned.</span></p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-4"><span class="t">int</span><span class="h"> </span><span class="e">findLargestBSTSubtree</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">min</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">max</span><span class="sy">,</span><span class="h"> </span></p><p class="crayon-line" id="crayon-54b0cfe518dbd-5"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">maxNodes</span><span class="sy">,</span><span class="h"> </span><span class="e ">BinaryTree *</span><span class="o">&amp;</span><span class="h"> </span><span class="i">largestBST</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-6"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54b0cfe518dbd-7"><span class="h">&#160;&#160;</span><span class="t">bool</span><span class="h"> </span><span class="v">isBST</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-8"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">leftNodes</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">findLargestBSTSubtree</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">min</span><span class="sy">,</span><span class="h"> </span><span class="i">max</span><span class="sy">,</span><span class="h"> </span><span class="i">maxNodes</span><span class="sy">,</span><span class="h"> </span><span class="i">largestBST</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54b0cfe518dbd-9"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">currMin</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="v">leftNodes</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="i">min</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-10"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">leftNodes</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="o">-</span><span class="cn">1</span><span class="h"> </span><span class="o">||</span><span class="h"> </span></p><p class="crayon-line" id="crayon-54b0cfe518dbd-11"><span class="h">&#160;&#160;&#160;&#160; </span><span class="sy">(</span><span class="i">leftNodes</span><span class="h"> </span><span class="o">!=</span><span class="h"> </span><span class="cn">0</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">max</span><span class="sy">)</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">isBST</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54b0cfe518dbd-13"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">rightNodes</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">findLargestBSTSubtree</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="i">min</span><span class="sy">,</span><span class="h"> </span><span class="i">max</span><span class="sy">,</span><span class="h"> </span><span class="i">maxNodes</span><span class="sy">,</span><span class="h"> </span><span class="i">largestBST</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-14"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">currMax</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="v">rightNodes</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="i">max</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54b0cfe518dbd-15"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">rightNodes</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="o">-</span><span class="cn">1</span><span class="h"> </span><span class="o">||</span><span class="h"> </span></p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-16"><span class="h">&#160;&#160;&#160;&#160; </span><span class="sy">(</span><span class="i">rightNodes</span><span class="h"> </span><span class="o">!=</span><span class="h"> </span><span class="cn">0</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="i">min</span><span class="sy">)</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54b0cfe518dbd-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">isBST</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-18"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">isBST</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54b0cfe518dbd-19"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">min</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">currMin</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-20"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">max</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">currMax</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54b0cfe518dbd-21"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">totalNodes</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">leftNodes</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="i">rightNodes</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-22"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">totalNodes</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">maxNodes</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54b0cfe518dbd-23"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">maxNodes</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">totalNodes</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-24"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">largestBST</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54b0cfe518dbd-25"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-26"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">totalNodes</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54b0cfe518dbd-27"><span class="h">&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-28"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="o">-</span><span class="cn">1</span><span class="sy">;</span><span class="h">&#160;&#160; </span><span class="c">// This subtree is not a BST</span></p><p class="crayon-line" id="crayon-54b0cfe518dbd-29"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-30"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54b0cfe518dbd-31">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-32"><span class="e ">BinaryTree*</span><span class="h"> </span><span class="e">findLargestBSTSubtree</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54b0cfe518dbd-33"><span class="h">&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">largestBST</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-34"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="i">min</span><span class="sy">,</span><span class="h"> </span><span class="i">max</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54b0cfe518dbd-35"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">maxNodes</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">INT_MIN</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-36"><span class="h">&#160;&#160;</span><span class="e">findLargestBSTSubtree</span><span class="sy">(</span><span class="i">root</span><span class="sy">,</span><span class="h"> </span><span class="i">min</span><span class="sy">,</span><span class="h"> </span><span class="i">max</span><span class="sy">,</span><span class="h"> </span><span class="i">maxNodes</span><span class="sy">,</span><span class="h"> </span><span class="i">largestBST</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54b0cfe518dbd-37"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">largestBST</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54b0cfe518dbd-38"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p><b>Further Thoughts:</b></p><p>Here is a variant of the largest BST problem. What if we want to find the largest BST in a tree where it may or may not include all of its descendants? Read my next post: <a href="http://www.leetcode.com/2010/11/largest-binary-search-tree-bst-in_22.html">Largest Binary Search Tree (BST) in a Binary Tree</a> to find out.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a58">Rating: 4.6/<strong>5</strong> (19 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Largest Subtree Which is a Binary Search Tree (BST)</span></span>, <span class="rating"><span class="average">4.6</span> out of <span class="best">5</span> based on <span class="votes">19</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Given a string S, find the longest palindromic substring in S.</p></blockquote><p><span id="more-951"></span><br> This interesting problem has been featured in the famous <a href="http://challenge.greplin.com/">Greplin programming challenge</a>, and is asked quite often in the interviews. Why? Because this problem can be attacked in so many ways. There are five different solutions that I am aware of. Are you up to the challenge?</p><p>Head over to <strong><a href="http://www.leetcode.com/onlinejudge">Online Judge</a></strong> to solve it now! (you may submit either C++ or Java solution)</p><p><strong>Hint:</strong><br> First, make sure you understand what a palindrome means. A palindrome is a string which reads the same in both directions. For example, &#8220;aba&#8221; is a palindome, &#8220;abc&#8221; is not.</p><p><strong>A common mistake:</strong><br> Some people will be tempted to come up with a quick solution, which is unfortunately flawed (however can be corrected easily):</p><div class="hiblock"> Reverse S and become S&#8217;. Find the <a href="http://en.wikipedia.org/wiki/Longest_common_substring">longest common substring</a> between S and S&#8217;, which must also be the longest palindromic substring.</div><p>This seemed to work, let&#8217;s see some examples below.</p><p>For example,<br> S = &#8220;caba&#8221;, S&#8217; = &#8220;abac&#8221;.<br> The longest common substring between S and S&#8217; is &#8220;aba&#8221;, which is the answer.</p><p>Let&#8217;s try another example:<br> S = &#8220;abacdfgdcaba&#8221;, S&#8217; = &#8220;abacdgfdcaba&#8221;.<br> The longest common substring between S and S&#8217; is &#8220;abacd&#8221;. Clearly, this is not a valid palindrome.</p><p>We could see that the longest common substring method fails when there exists <em>a reversed copy of a non-palindromic substring in some other part of S</em>. To rectify this, each time we find a longest common substring candidate, we check if the substring&#8217;s indices are the same as the reversed substring&#8217;s original indices. If it is, then we attempt to update the longest palindrome found so far; if not, we skip this and find the next candidate.</p><p>This gives us a O(N<sup>2</sup>) DP solution which uses O(N<sup>2</sup>) space (could be improved to use O(N) space). Please read more about Longest Common Substring <a href="http://en.wikipedia.org/wiki/Longest_common_substring">here</a>.</p><p><strong>Brute force solution, O(N<sup>3</sup>):</strong><br> The obvious brute force solution is to pick all possible starting and ending positions for a substring, and verify if it is a palindrome. There are a total of C(N, 2) such substrings (excluding the trivial solution where a character itself is a palindrome).</p><p>Since verifying each substring takes O(N) time, the run time complexity is O(N<sup>3</sup>).</p><p><strong>Dynamic programming solution, O(N<sup>2</sup>) time and O(N<sup>2</sup>) space:</strong><br> To improve over the brute force solution from a DP approach, first think how we can avoid unnecessary re-computation in validating palindromes. Consider the case &#8220;ababa&#8221;. If we already knew that &#8220;bab&#8221; is a palindrome, it is obvious that &#8220;ababa&#8221; must be a palindrome since the two left and right end letters are the same.</p><p>Stated more formally below:</p><p class="hiblock">Define P[ i, j ] &#8592; true <strong>iff</strong> the substring S<sub>i</sub> &#8230; S<sub>j</sub> is a palindrome, otherwise false.</p><p>Therefore,</p><p class="hiblock">P[ i, j ] &#8592; ( P[ i+1, j-1 ] <strong>and</strong> S<sub>i</sub> = S<sub>j</sub> )</p><p>The base cases are:</p><p class="hiblock">P[ i, i ] &#8592; true<br> P[ i, i+1 ] &#8592; ( S<sub>i</sub> = S<sub>i+1</sub> )</p><p>This yields a straight forward DP solution, which we first initialize the one and two letters palindromes, and work our way up finding all three letters palindromes, and so on&#8230;&#160;</p><p>This gives us a run time complexity of O(N<sup>2</sup>) and uses O(N<sup>2</sup>) space to store the table.</p><div id="crayon-54ec711095b53" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
string longestPalindromeDP(string s) {
  int n = s.length();
  int longestBegin = 0;
  int maxLen = 1;
  bool table[1000][1000] = {false};
  for (int i = 0; i &lt; n; i++) {
    table[i][i] = true;
  }
  for (int i = 0; i &lt; n-1; i++) {
    if (s[i] == s[i+1]) {
      table[i][i+1] = true;
      longestBegin = i;
      maxLen = 2;
    }
  }
  for (int len = 3; len &lt;= n; len++) {
    for (int i = 0; i &lt; n-len+1; i++) {
      int j = i+len-1;
      if (s[i] == s[j] &amp;&amp; table[i+1][j-1]) {
        table[i][j] = true;
        longestBegin = i;
        maxLen = len;
      }
    }
  }
  return s.substr(longestBegin, maxLen);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ec711095b53-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095b53-2">2</p><p class="crayon-num" data-line="crayon-54ec711095b53-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095b53-4">4</p><p class="crayon-num" data-line="crayon-54ec711095b53-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095b53-6">6</p><p class="crayon-num" data-line="crayon-54ec711095b53-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095b53-8">8</p><p class="crayon-num" data-line="crayon-54ec711095b53-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095b53-10">10</p><p class="crayon-num" data-line="crayon-54ec711095b53-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095b53-12">12</p><p class="crayon-num" data-line="crayon-54ec711095b53-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095b53-14">14</p><p class="crayon-num" data-line="crayon-54ec711095b53-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095b53-16">16</p><p class="crayon-num" data-line="crayon-54ec711095b53-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095b53-18">18</p><p class="crayon-num" data-line="crayon-54ec711095b53-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095b53-20">20</p><p class="crayon-num" data-line="crayon-54ec711095b53-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095b53-22">22</p><p class="crayon-num" data-line="crayon-54ec711095b53-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095b53-24">24</p><p class="crayon-num" data-line="crayon-54ec711095b53-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095b53-26">26</p><p class="crayon-num" data-line="crayon-54ec711095b53-27">27</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec711095b53-1"><span class="t">string</span><span class="h"> </span><span class="e">longestPalindromeDP</span><span class="sy">(</span><span class="t">string</span><span class="h"> </span><span class="i">s</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095b53-2"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">n</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">s</span><span class="sy">.</span><span class="e">length</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec711095b53-3"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">longestBegin</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095b53-4"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">maxLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec711095b53-5"><span class="h">&#160;&#160;</span><span class="t">bool</span><span class="h"> </span><span class="v">table</span><span class="sy">[</span><span class="cn">1000</span><span class="sy">]</span><span class="sy">[</span><span class="cn">1000</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">{</span><span class="t">false</span><span class="sy">}</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095b53-6"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec711095b53-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">table</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095b53-8"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ec711095b53-9"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095b53-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">s</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="v">s</span><span class="sy">[</span><span class="i">i</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec711095b53-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">table</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">[</span><span class="i">i</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095b53-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">longestBegin</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">i</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec711095b53-13"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">maxLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095b53-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ec711095b53-15"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095b53-16"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">len</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">3</span><span class="sy">;</span><span class="h"> </span><span class="i">len</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">len</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec711095b53-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="i">len</span><span class="o">+</span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095b53-18"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">i</span><span class="o">+</span><span class="i">len</span><span class="o">-</span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec711095b53-19"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">s</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="v">s</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="v">table</span><span class="sy">[</span><span class="i">i</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="i">j</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095b53-20"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">table</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec711095b53-21"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">longestBegin</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">i</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095b53-22"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">maxLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">len</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec711095b53-23"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095b53-24"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ec711095b53-25"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095b53-26"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="v">s</span><span class="sy">.</span><span class="e">substr</span><span class="sy">(</span><span class="i">longestBegin</span><span class="sy">,</span><span class="h"> </span><span class="i">maxLen</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec711095b53-27"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p><strong>Additional exercise:</strong><br> Could you improve the above space complexity further and how?</p><p><strong>A simpler approach, O(N<sup>2</sup>) time and O(1) space:</strong><br> In fact, we could solve it in O(N<sup>2</sup>) time without any extra space.</p><p>We observe that a palindrome mirrors around its center. Therefore, a palindrome can be expanded from its center, and there are only 2N-1 such centers.</p><p>You might be asking why there are 2N-1 but not N centers? The reason is the center of a palindrome can be in between two letters. Such palindromes have even number of letters (such as &#8220;abba&#8221;) and its center are between the two &#8216;b&#8217;s.</p><p>Since expanding a palindrome around its center could take O(N) time, the overall complexity is O(N<sup>2</sup>).</p><p></p><div id="crayon-54ec711095c03" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
string expandAroundCenter(string s, int c1, int c2) {
  int l = c1, r = c2;
  int n = s.length();
  while (l &gt;= 0 &amp;&amp; r &lt;= n-1 &amp;&amp; s[l] == s[r]) {
    l--;
    r++;
  }
  return s.substr(l+1, r-l-1);
}

string longestPalindromeSimple(string s) {
  int n = s.length();
  if (n == 0) return "";
  string longest = s.substr(0, 1);  // a single char itself is a palindrome
  for (int i = 0; i &lt; n-1; i++) {
    string p1 = expandAroundCenter(s, i, i);
    if (p1.length() &gt; longest.length())
      longest = p1;

    string p2 = expandAroundCenter(s, i, i+1);
    if (p2.length() &gt; longest.length())
      longest = p2;
  }
  return longest;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ec711095c03-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095c03-2">2</p><p class="crayon-num" data-line="crayon-54ec711095c03-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095c03-4">4</p><p class="crayon-num" data-line="crayon-54ec711095c03-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095c03-6">6</p><p class="crayon-num" data-line="crayon-54ec711095c03-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095c03-8">8</p><p class="crayon-num" data-line="crayon-54ec711095c03-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095c03-10">10</p><p class="crayon-num" data-line="crayon-54ec711095c03-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095c03-12">12</p><p class="crayon-num" data-line="crayon-54ec711095c03-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095c03-14">14</p><p class="crayon-num" data-line="crayon-54ec711095c03-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095c03-16">16</p><p class="crayon-num" data-line="crayon-54ec711095c03-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095c03-18">18</p><p class="crayon-num" data-line="crayon-54ec711095c03-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095c03-20">20</p><p class="crayon-num" data-line="crayon-54ec711095c03-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095c03-22">22</p><p class="crayon-num" data-line="crayon-54ec711095c03-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec711095c03-24">24</p><p class="crayon-num" data-line="crayon-54ec711095c03-25">25</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec711095c03-1"><span class="t">string</span><span class="h"> </span><span class="e">expandAroundCenter</span><span class="sy">(</span><span class="t">string</span><span class="h"> </span><span class="i">s</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">c1</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">c2</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095c03-2"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">l</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">c1</span><span class="sy">,</span><span class="h"> </span><span class="v">r</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">c2</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec711095c03-3"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">n</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">s</span><span class="sy">.</span><span class="e">length</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095c03-4"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">l</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">0</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">r</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="v">s</span><span class="sy">[</span><span class="i">l</span><span class="sy">]</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="v">s</span><span class="sy">[</span><span class="i">r</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec711095c03-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">l</span><span class="o">--</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095c03-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">r</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec711095c03-7"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095c03-8"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="v">s</span><span class="sy">.</span><span class="e">substr</span><span class="sy">(</span><span class="i">l</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">r</span><span class="o">-</span><span class="i">l</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec711095c03-9"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095c03-10">&#160;</p><p class="crayon-line" id="crayon-54ec711095c03-11"><span class="t">string</span><span class="h"> </span><span class="e">longestPalindromeSimple</span><span class="sy">(</span><span class="t">string</span><span class="h"> </span><span class="i">s</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095c03-12"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">n</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">s</span><span class="sy">.</span><span class="e">length</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec711095c03-13"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">n</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="s">""</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095c03-14"><span class="h">&#160;&#160;</span><span class="t">string</span><span class="h"> </span><span class="v">longest</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">s</span><span class="sy">.</span><span class="e">substr</span><span class="sy">(</span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span><span class="h">&#160;&#160;</span><span class="c">// a single char itself is a palindrome</span></p><p class="crayon-line" id="crayon-54ec711095c03-15"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095c03-16"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">string</span><span class="h"> </span><span class="v">p1</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">expandAroundCenter</span><span class="sy">(</span><span class="i">s</span><span class="sy">,</span><span class="h"> </span><span class="i">i</span><span class="sy">,</span><span class="h"> </span><span class="i">i</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec711095c03-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">p1</span><span class="sy">.</span><span class="e">length</span><span class="sy">(</span><span class="sy">)</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="v">longest</span><span class="sy">.</span><span class="e">length</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095c03-18"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">longest</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec711095c03-19">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095c03-20"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">string</span><span class="h"> </span><span class="v">p2</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">expandAroundCenter</span><span class="sy">(</span><span class="i">s</span><span class="sy">,</span><span class="h"> </span><span class="i">i</span><span class="sy">,</span><span class="h"> </span><span class="i">i</span><span class="o">+</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec711095c03-21"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">p2</span><span class="sy">.</span><span class="e">length</span><span class="sy">(</span><span class="sy">)</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="v">longest</span><span class="sy">.</span><span class="e">length</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095c03-22"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">longest</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p2</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec711095c03-23"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec711095c03-24"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">longest</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec711095c03-25"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p><strong><span>Further Thoughts:</span></strong><br> Does an O(N) solution exist? You bet! However, it is not trivial and requires some very clever observation. The O(N) solution is explained in my <a href="http://www.leetcode.com/2011/11/longest-palindromic-substring-part-ii.html">next post</a>.</p><p><strong><span>&#187; Continue reading</span> <a href="http://www.leetcode.com/2011/11/longest-palindromic-substring-part-ii.html">Longest Palindromic Substring Part II.</a></strong></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a951">Rating: 4.9/<strong>5</strong> (103 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Longest Palindromic Substring Part I</span></span>, <span class="rating"><span class="average">4.9</span> out of <span class="best">5</span> based on <span class="votes">103</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div id="content" class="two_column"><div class="padder"><div class="page" id="blog-single" role="main"><div id="post-993" class="post-993 post type-post status-publish format-standard hentry category-string"><div class="post-content"><h1 class="posttitle">Longest Palindromic Substring Part II</h1><p class="date"> November 20, 2011 <span>in <a href="http://leetcode.com/category/string" title="View all posts in string" rel="category tag">string</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Given a string S, find the longest palindromic substring in S.</p></blockquote><p><strong><span>Note:</span></strong><br> This is Part II of the article: <a href="http://www.leetcode.com/2011/11/longest-palindromic-substring-part-i.html">Longest Palindromic Substring</a>. Here, we describe an algorithm (Manacher&#8217;s algorithm) which finds the longest palindromic substring in linear time. Please read <a href="http://www.leetcode.com/2011/11/longest-palindromic-substring-part-i.html">Part I</a> for more background information.<br> <span id="more-993"></span><br> In my <a href="http://www.leetcode.com/2011/11/longest-palindromic-substring-part-i.html">previous post</a> we discussed a total of four different methods, among them there&#8217;s a pretty simple algorithm with O(N<sup>2</sup>) run time and constant space complexity. Here, we discuss an algorithm that runs in O(N) time and O(N) space, also known as Manacher&#8217;s algorithm.</p><p><strong>Hint:</strong><br> Think how you would improve over the simpler O(N<sup>2</sup>) approach. Consider the worst case scenarios. The worst case scenarios are the inputs with multiple palindromes overlapping each other. For example, the inputs: &#8220;aaaaaaaaa&#8221; and &#8220;cabcbabcbabcba&#8221;. In fact, we could take advantage of the palindrome&#8217;s symmetric property and avoid some of the unnecessary computations.</p><p><strong>An O(N) Solution (Manacher&#8217;s Algorithm):</strong><br> First, we transform the input string, S, to another string T by inserting a special character &#8216;#&#8217; in between letters. The reason for doing so will be immediately clear to you soon.</p><p>For example: S = &#8220;abaaba&#8221;, T = &#8220;#a#b#a#a#b#a#&#8221;.</p><p>To find the longest palindromic substring, we need to expand around each T<sub>i</sub> such that T<sub>i-d</sub> &#8230; T<sub>i+d</sub> forms a palindrome. You should immediately see that <em>d</em> is the length of the palindrome itself centered at T<sub>i</sub>.</p><p>We store intermediate result in an array P, where P[ i ] equals to the length of the palindrome centers at T<sub>i</sub>. The longest palindromic substring would then be the maximum element in P.</p><p>Using the above example, we populate P as below (from left to right):</p><pre class="hiblock">T = # a # b # a # a # b # a #
P = 0 1 0 3 0 1 6 1 0 3 0 1 0</pre><p>Looking at P, we immediately see that the longest palindrome is &#8220;abaaba&#8221;, as indicated by P<sub>6</sub> = 6.</p><p>Did you notice by inserting special characters (#) in between letters, both palindromes of odd and even lengths are handled graciously? (Please note: This is to demonstrate the idea more easily and is not necessarily needed to code the algorithm.)</p><p>Now, imagine that you draw an imaginary vertical line at the center of the palindrome &#8220;abaaba&#8221;. Did you notice the numbers in P are symmetric around this center? That&#8217;s not only it, try another palindrome &#8220;aba&#8221;, the numbers also reflect similar symmetric property. Is this a coincidence? The answer is yes and no. This is only true subjected to a condition, but anyway, we have great progress, since we can eliminate recomputing part of P[ i ]&#8216;s.</p><p>Let us move on to a slightly more sophisticated example with more some overlapping palindromes, where S = &#8220;babcbabcbaccba&#8221;.</p><div><a href="http://www.leetcode.com/wp-content/uploads/2011/11/palindrome_table10.png"><img class="size-full wp-image-1014" title="palindrome_table10" src="http://www.leetcode.com/wp-content/uploads/2011/11/palindrome_table10.png" alt="" width="640" height="99"></a><br> <span>Above image shows T transformed from S = &#8220;babcbabcbaccba&#8221;. Assumed that you reached a state where table P is partially completed. The solid vertical line indicates the center (C) of the palindrome &#8220;abcbabcba&#8221;. The two dotted vertical line indicate its left (L) and right (R) edges respectively. You are at index i and its mirrored index around C is i&#8217;. How would you calculate P[ i ] efficiently? </span></div><p>Assume that we have arrived at index i = 13, and we need to calculate P[ 13 ] (indicated by the question mark ?). We first look at its mirrored index i&#8217; around the palindrome&#8217;s center C, which is index i&#8217; = 9.</p><div><a href="http://www.leetcode.com/wp-content/uploads/2011/11/palindrome_table11.png"><img class="size-full wp-image-1015" title="palindrome_table11" src="http://www.leetcode.com/wp-content/uploads/2011/11/palindrome_table11.png" alt="" width="640" height="99"></a><br> <span>The two green solid lines above indicate the covered region by the two palindromes centered at i and i&#8217;. We look at the mirrored index of i around C, which is index i&#8217;. P[ i' ] = P[ 9 ] = 1. It is clear that P[ i ] must also be 1, due to the symmetric property of a palindrome around its center. </span></div><p>As you can see above, it is very obvious that P[ i ] = P[ i' ] = 1, which must be true due to the symmetric property around a palindrome&#8217;s center. In fact, all three elements after C follow the symmetric property (that is, P[ 12 ] = P[ 10 ] = 0, P[ 13 ] = P[ 9 ] = 1, P[ 14 ] = P[ 8 ] = 0).</p><div><a href="http://www.leetcode.com/wp-content/uploads/2011/11/palindrome_table4.png"><img class="size-full wp-image-1004" title="palindrome_table4" src="http://www.leetcode.com/wp-content/uploads/2011/11/palindrome_table4.png" alt="" width="640" height="99"></a><br> <span>Now we are at index i = 15, and its mirrored index around C is i&#8217; = 7. Is P[ 15 ] = P[ 7 ] = 7? </span></div><p>Now we are at index i = 15. What&#8217;s the value of <nobr>P[ i ]</nobr>? If we follow the symmetric property, the value of <nobr>P[ i ]</nobr> should be the same as P[ i' ] = 7. But this is wrong. If we expand around the center at T<sub>15</sub>, it forms the palindrome &#8220;a#b#c#b#a&#8221;, which is actually shorter than what is indicated by its symmetric counterpart. Why?</p><div><a href="http://www.leetcode.com/wp-content/uploads/2011/11/palindrome_table5.png"><img class="size-full wp-image-1006" title="palindrome_table5" src="http://www.leetcode.com/wp-content/uploads/2011/11/palindrome_table5.png" alt="" width="640" height="99"></a><br> <span>Colored lines are overlaid around the center at index i and i&#8217;. Solid green lines show the region that must match for both sides due to symmetric property around C. Solid red lines show the region that might not match for both sides. Dotted green lines show the region that crosses over the center. </span></div><p>It is clear that the two substrings in the region indicated by the two solid green lines must match exactly. Areas across the center (indicated by dotted green lines) must also be symmetric. Notice carefully that P[ i ' ] is 7 and it expands all the way across the left edge (L) of the palindrome (indicated by the solid red lines), which does not fall under the symmetric property of the palindrome anymore. All we know is <nobr>P[ i ]</nobr> &#8805; 5, and to find the real value of P[ i ] we have to do character matching by expanding past the right edge (R). In this case, since P[ 21 ] &#8800; P[ 1 ], we conclude that P[ i ] = 5.</p><p>Let&#8217;s summarize the key part of this algorithm as below:</p><p class="hiblock"><strong>if</strong> P[ i' ] &#8804; R &#8211; i,<br> <strong>then </strong>P[ i ] &#8592; P[ i' ]<br> <strong>else </strong>P[ i ] &#8805; P[ i' ]. (Which we have to expand past the right edge (R) to find P[ i ].</p><p>See how elegant it is? If you are able to grasp the above summary fully, you already obtained the essence of this algorithm, which is also the hardest part.</p><p>The final part is to determine when should we move the position of C together with R to the right, which is easy:</p><p class="hiblock"> If the palindrome centered at i does expand past R, we update C to i, (the center of this new palindrome), and extend R to the new palindrome&#8217;s right edge.</p><p>In each step, there are two possibilities. If P[ i ] &#8804; R &#8211; i, we set P[ i ] to P[ i' ] which takes exactly one step. Otherwise we attempt to change the palindrome&#8217;s center to i by expanding it starting at the right edge, R. Extending R (the inner while loop) takes at most a total of N steps, and positioning and testing each centers take a total of N steps too. Therefore, this algorithm guarantees to finish in at most 2*N steps, giving a linear time solution.</p><p></p><div id="crayon-54ece0ae9f090" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
// Transform S into T.
// For example, S = "abba", T = "^#a#b#b#a#$".
// ^ and $ signs are sentinels appended to each end to avoid bounds checking
string preProcess(string s) {
  int n = s.length();
  if (n == 0) return "^$";
  string ret = "^";
  for (int i = 0; i &lt; n; i++)
    ret += "#" + s.substr(i, 1);

  ret += "#$";
  return ret;
}

string longestPalindrome(string s) {
  string T = preProcess(s);
  int n = T.length();
  int *P = new int[n];
  int C = 0, R = 0;
  for (int i = 1; i &lt; n-1; i++) {
    int i_mirror = 2*C-i; // equals to i' = C - (i-C)
    
    P[i] = (R &gt; i) ? min(R-i, P[i_mirror]) : 0;
    
    // Attempt to expand palindrome centered at i
    while (T[i + 1 + P[i]] == T[i - 1 - P[i]])
      P[i]++;

    // If palindrome centered at i expand past R,
    // adjust center based on expanded palindrome.
    if (i + P[i] &gt; R) {
      C = i;
      R = i + P[i];
    }
  }

  // Find the maximum element in P.
  int maxLen = 0;
  int centerIndex = 0;
  for (int i = 1; i &lt; n-1; i++) {
    if (P[i] &gt; maxLen) {
      maxLen = P[i];
      centerIndex = i;
    }
  }
  delete[] P;
  
  return s.substr((centerIndex - 1 - maxLen)/2, maxLen);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ece0ae9f090-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-2">2</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-4">4</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-6">6</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-8">8</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-10">10</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-12">12</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-14">14</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-16">16</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-18">18</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-20">20</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-22">22</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-24">24</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-26">26</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-28">28</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-30">30</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-32">32</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-34">34</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-36">36</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-38">38</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-40">40</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-41">41</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-42">42</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-43">43</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-44">44</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-45">45</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-46">46</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-47">47</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ece0ae9f090-48">48</p><p class="crayon-num" data-line="crayon-54ece0ae9f090-49">49</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ece0ae9f090-1"><span class="c">// Transform S into T.</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-2"><span class="c">// For example, S = "abba", T = "^#a#b#b#a#$".</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-3"><span class="c">// ^ and $ signs are sentinels appended to each end to avoid bounds checking</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-4"><span class="t">string</span><span class="h"> </span><span class="e">preProcess</span><span class="sy">(</span><span class="t">string</span><span class="h"> </span><span class="i">s</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-5"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">n</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">s</span><span class="sy">.</span><span class="e">length</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-6"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">n</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="s">"^$"</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-7"><span class="h">&#160;&#160;</span><span class="t">string</span><span class="h"> </span><span class="v">ret</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="s">"^"</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-8"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">ret</span><span class="h"> </span><span class="o">+</span><span class="o">=</span><span class="h"> </span><span class="s">"#"</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="v">s</span><span class="sy">.</span><span class="e">substr</span><span class="sy">(</span><span class="i">i</span><span class="sy">,</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-10">&#160;</p><p class="crayon-line" id="crayon-54ece0ae9f090-11"><span class="h">&#160;&#160;</span><span class="i">ret</span><span class="h"> </span><span class="o">+</span><span class="o">=</span><span class="h"> </span><span class="s">"#$"</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-12"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">ret</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-13"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-14">&#160;</p><p class="crayon-line" id="crayon-54ece0ae9f090-15"><span class="t">string</span><span class="h"> </span><span class="e">longestPalindrome</span><span class="sy">(</span><span class="t">string</span><span class="h"> </span><span class="i">s</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-16"><span class="h">&#160;&#160;</span><span class="t">string</span><span class="h"> </span><span class="v">T</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">preProcess</span><span class="sy">(</span><span class="i">s</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-17"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">n</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">T</span><span class="sy">.</span><span class="e">length</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-18"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="o">*</span><span class="v">P</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="r">new</span><span class="h"> </span><span class="t">int</span><span class="sy">[</span><span class="i">n</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-19"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">C</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="v">R</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-20"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-21"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">i_mirror</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">2</span><span class="o">*</span><span class="i">C</span><span class="o">-</span><span class="i">i</span><span class="sy">;</span><span class="h"> </span><span class="c">// equals to i' = C - (i-C)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-22"><span class="h">&#160;&#160;&#160;&#160;</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-23"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">P</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="i">R</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">i</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="e">min</span><span class="sy">(</span><span class="i">R</span><span class="o">-</span><span class="i">i</span><span class="sy">,</span><span class="h"> </span><span class="v">P</span><span class="sy">[</span><span class="i">i_mirror</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-24"><span class="h">&#160;&#160;&#160;&#160;</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-25"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// Attempt to expand palindrome centered at i</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-26"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="v">T</span><span class="sy">[</span><span class="i">i</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="v">P</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">]</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="v">T</span><span class="sy">[</span><span class="i">i</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="v">P</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">]</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-27"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">P</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-28">&#160;</p><p class="crayon-line" id="crayon-54ece0ae9f090-29"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// If palindrome centered at i expand past R,</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-30"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// adjust center based on expanded palindrome.</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-31"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">i</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="v">P</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">R</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-32"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">C</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">i</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-33"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">R</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="v">P</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-34"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-35"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-36">&#160;</p><p class="crayon-line" id="crayon-54ece0ae9f090-37"><span class="h">&#160;&#160;</span><span class="c">// Find the maximum element in P.</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-38"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">maxLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-39"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">centerIndex</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-40"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-41"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">P</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">maxLen</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-42"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">maxLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">P</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-43"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">centerIndex</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">i</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-44"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-45"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-46"><span class="h">&#160;&#160;</span><span class="v">delete</span><span class="sy">[</span><span class="sy">]</span><span class="h"> </span><span class="i">P</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-47"><span class="h">&#160;&#160;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ece0ae9f090-48"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="v">s</span><span class="sy">.</span><span class="e">substr</span><span class="sy">(</span><span class="sy">(</span><span class="i">centerIndex</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="i">maxLen</span><span class="sy">)</span><span class="o">/</span><span class="cn">2</span><span class="sy">,</span><span class="h"> </span><span class="i">maxLen</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ece0ae9f090-49"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p><strong><span>Note:</span></strong><br> This algorithm is definitely non-trivial and you won&#8217;t be expected to come up with such algorithm during an interview setting. However, I do hope that you enjoy reading this article and hopefully it helps you in understanding this interesting algorithm. You deserve a pat if you have gone this far! <img src="http://leetcode.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley"></p><p><strong><span>Further Thoughts:</span></strong></p><ul><li>In fact, there exists a sixth solution to this problem &#8212; Using suffix trees. However, it is not as efficient as this one (run time O(N log N) and more overhead for building suffix trees) and is more complicated to implement. If you are interested, read Wikipedia&#8217;s article about <a href="http://en.wikipedia.org/wiki/Longest_palindromic_substring">Longest Palindromic Substring</a>.</li><li>What if you are required to find the longest palindromic subsequence? (Do you know the difference between substring and subsequence?)</li></ul><p><strong><span>Useful Links:</span></strong><br> &#187; <a href="http://www.felix021.com/blog/read.php?2040">Manacher&#8217;s Algorithm O(N) &#26102;&#38388;&#27714;&#23383;&#31526;&#20018;&#30340;&#26368;&#38271;&#22238;&#25991;&#23376;&#20018;</a> (Best explanation if you can read Chinese)<br> &#187; <a href="http://zhuhongcheng.wordpress.com/2009/08/02/a-simple-linear-time-algorithm-for-finding-longest-palindrome-sub-string/">A simple linear time algorithm for finding longest palindrome sub-string</a><br> &#187; <a href="http://johanjeuring.blogspot.com/2007/08/finding-palindromes.html">Finding Palindromes</a><br> &#187; <a href="http://www.akalin.cx/longest-palindrome-linear-time">Finding the Longest Palindromic Substring in Linear Time</a><br> &#187; <a href="http://en.wikipedia.org/wiki/Longest_palindromic_substring">Wikipedia: Longest Palindromic Substring</a></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a993">Rating: 4.8/<strong>5</strong> (121 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Longest Palindromic Substring Part II</span></span>, <span class="rating"><span class="average">4.8</span> out of <span class="best">5</span> based on <span class="votes">121</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2011/11/longest-palindromic-substring-part-ii.html" rel="tag">http://leetcode.com/2011/11/longest-palindromic-substring-part-ii.html</a></p></div></div><p id="respond"></p><h3 id="reply-title">Leave a reply <small></small></h3><div id="trackbacks"><h3>24 trackbacks</h3><ul id="trackbacklist"><li> <em>on November 20, 2011</em></li><li> <em>on January 4, 2012</em></li><li> <em>on August 16, 2012</em></li><li> <em>on October 27, 2012</em></li><li> <em>on February 25, 2013</em></li><li> <em>on June 5, 2013</em></li><li> <em>on October 28, 2013</em></li><li> <em>on November 8, 2013</em></li><li> <em>on November 9, 2013</em></li><li> <em>on January 12, 2014</em></li><li> <em>on February 5, 2014</em></li><li> <em>on February 7, 2014</em></li><li> <em>on April 21, 2014</em></li><li> <em>on May 9, 2014</em></li><li> <em>on May 9, 2014</em></li><li> <em>on September 5, 2014</em></li><li> <em>on September 18, 2014</em></li><li> <em>on September 25, 2014</em></li><li> <em>on November 10, 2014</em></li><li> <em>on December 31, 2014</em></li><li> <em>on January 8, 2015</em></li><li> <em>on February 16, 2015</em></li><li> <em>on February 18, 2015</em></li><li> <em>on February 18, 2015</em></li></ul></div></div></div></div></div></body><body><div><div class="entry"><blockquote><p>Given a string, find the length of the longest substring without repeating characters. For example, the longest substring without repeating letters for &#8220;abcabcbb&#8221; is &#8220;abc&#8221;, which the length is 3. For &#8220;bbbbb&#8221; the longest substring is &#8220;b&#8221;, with the length of 1.</p></blockquote><p><span id="more-753"></span><br> <strong>Hint:</strong><br> Is there a better way other than brute force? Consider the kind of data structure that can improve the run time complexity. An ideal solution requires only a one-time linear scan.</p><p><strong><span>Online Judge</span></strong><br> This problem is available at <a href="http://www.leetcode.com/onlinejudge">Online Judge</a>. <a href="http://www.leetcode.com/onlinejudge">Head over there</a> and it will judge your solution. Currently only able to compile C++ code. If you are using other languages, you can still verify your solution by looking at the judge&#8217;s test cases and its expected output.</p><p><strong>Solution:</strong><br> How can we can look up if a character had existed in the substring instantaneously? The answer is using a simple table to store the characters that have appeared. Make sure you communicate with your interviewer if the string can have characters other than &#8216;a&#8217;-'z&#8217;. (ie, Digits? Upper case letter? Does it contain ASCII characters only? Or even unicode character sets?)</p><p>As you traverse through the string, update by using its ASCII value as index to the table. If the string only contains &#8216;a&#8217;-'z&#8217;, you could save space by using a table of size 26 only. Assuming c is the character, then c-&#8217;a&#8217; will give you a value of 0-25 which can be used to index the table directly.</p><p>The next question is to ask yourself what happens when you found a repeated character? For example, if the string is &#8220;abcdcedf&#8221;, what happens when you reach the second appearance of &#8216;c&#8217;?</p><p>When you have found a repeated character (let&#8217;s say at index <em>j</em>), it means that the current substring (excluding the repeated character of course) is a potential maximum, so update the maximum if necessary. It also means that the repeated character must have appeared before at an index <em>i</em>, where <em>i</em> is less than <em>j</em>.</p><p>Since you know that all substrings that start before or at index <em>i</em> would be less than your current maximum, you can safely start to look for the next substring with head which starts exactly at index <em>i</em>+1.</p><p>Therefore, you would need two indices to record the head and the tail of the current substring. Since i and j both traverse at most <em>n</em> steps, the worst case would be 2<em>n</em> steps, which the run time complexity must be O(<em>n</em>).</p><p>Below is the implementation in C++. Beware of the common mistake of not updating the maximum after the main loop, which is easy to forget.</p><div id="crayon-54eca6cad75ec" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int lengthOfLongestSubstring(string s) {
  int n = s.length();
  int i = 0, j = 0;
  int maxLen = 0;
  bool exist[256] = { false };
  while (j &lt; n) {
    if (exist[s[j]]) {
      maxLen = max(maxLen, j-i);
      while (s[i] != s[j]) {
        exist[s[i]] = false;
        i++;
      }
      i++;
      j++;
    } else {
      exist[s[j]] = true;
      j++;
    }
  }
  maxLen = max(maxLen, n-i);
  return maxLen;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54eca6cad75ec-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca6cad75ec-2">2</p><p class="crayon-num" data-line="crayon-54eca6cad75ec-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca6cad75ec-4">4</p><p class="crayon-num" data-line="crayon-54eca6cad75ec-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca6cad75ec-6">6</p><p class="crayon-num" data-line="crayon-54eca6cad75ec-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca6cad75ec-8">8</p><p class="crayon-num" data-line="crayon-54eca6cad75ec-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca6cad75ec-10">10</p><p class="crayon-num" data-line="crayon-54eca6cad75ec-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca6cad75ec-12">12</p><p class="crayon-num" data-line="crayon-54eca6cad75ec-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca6cad75ec-14">14</p><p class="crayon-num" data-line="crayon-54eca6cad75ec-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca6cad75ec-16">16</p><p class="crayon-num" data-line="crayon-54eca6cad75ec-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca6cad75ec-18">18</p><p class="crayon-num" data-line="crayon-54eca6cad75ec-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca6cad75ec-20">20</p><p class="crayon-num" data-line="crayon-54eca6cad75ec-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eca6cad75ec-22">22</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eca6cad75ec-1"><span class="t">int</span><span class="h"> </span><span class="e">lengthOfLongestSubstring</span><span class="sy">(</span><span class="t">string</span><span class="h"> </span><span class="i">s</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca6cad75ec-2"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">n</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">s</span><span class="sy">.</span><span class="e">length</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eca6cad75ec-3"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca6cad75ec-4"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">maxLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eca6cad75ec-5"><span class="h">&#160;&#160;</span><span class="t">bool</span><span class="h"> </span><span class="v">exist</span><span class="sy">[</span><span class="cn">256</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">{</span><span class="h"> </span><span class="t">false</span><span class="h"> </span><span class="sy">}</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca6cad75ec-6"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">j</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eca6cad75ec-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">exist</span><span class="sy">[</span><span class="v">s</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca6cad75ec-8"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">maxLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">max</span><span class="sy">(</span><span class="i">maxLen</span><span class="sy">,</span><span class="h"> </span><span class="i">j</span><span class="o">-</span><span class="i">i</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eca6cad75ec-9"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="v">s</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">!=</span><span class="h"> </span><span class="v">s</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca6cad75ec-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">exist</span><span class="sy">[</span><span class="v">s</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eca6cad75ec-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">i</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca6cad75ec-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54eca6cad75ec-13"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">i</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca6cad75ec-14"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">j</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eca6cad75ec-15"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca6cad75ec-16"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">exist</span><span class="sy">[</span><span class="v">s</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eca6cad75ec-17"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">j</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca6cad75ec-18"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54eca6cad75ec-19"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca6cad75ec-20"><span class="h">&#160;&#160;</span><span class="v">maxLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">max</span><span class="sy">(</span><span class="i">maxLen</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="i">i</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eca6cad75ec-21"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">maxLen</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eca6cad75ec-22"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a753">Rating: 4.5/<strong>5</strong> (73 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Longest Substring Without Repeating Characters</span></span>, <span class="rating"><span class="average">4.5</span> out of <span class="best">5</span> based on <span class="votes">73</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Given a binary search tree (BST), find the lowest common ancestor of two given nodes in the BST.</p></blockquote><p><span id="more-782"></span><br></p><pre>        _______<span>6</span>______
       /              \
    ___<span>2</span>__          ___<span>8</span>__
   /      \        /      \
   <span>0</span>      _<span>4       7       9</span>
         /  \
         <span>3   5</span></pre><p>Using the above tree as an example, the lowest common ancestor (LCA) of nodes <span>2</span> and <span>8</span> is <span>6</span>. But how about LCA of nodes <span>2</span> and <span>4</span>? Should it be <span>6</span> or <span>2</span>?</p><p>According to the <a href="http://en.wikipedia.org/wiki/Least_common_ancestor">definition of LCA on  Wikipedia</a>: &#8220;The lowest common ancestor is defined between two nodes <em>v</em> and <em>w</em> as the lowest node in T that has both <em>v</em> and <em>w</em> as descendants (where we allow a node to be a descendant of itself).&#8221; Since a node can be a descendant of itself, the LCA of <span>2</span> and <span>4</span> should be <span>2</span>, according to this definition.</p><p><strong>Hint:</strong><br> A top-down walk from the root of the tree is enough.</p><p><strong>Solution:</strong><br> There&#8217;s only three cases you need to consider.</p><div class="hiblock"><ol><li>Both nodes are to the left of the tree.</li><li>Both nodes are to the right of the tree.</li><li>One node is on the left while the other is on the right.</li></ol></div><p>For case 1), the LCA must be in its left subtree. Similar with case 2), LCA must be in its right subtree. For case 3), the current node must be the LCA.</p><p>Therefore, using a top-down approach, we traverse to the left/right subtree depends on the case of 1) or 2), until we reach case 3), which we concludes that we have found the LCA.</p><p>A careful reader might notice that we forgot to handle one extra case. What if the node itself is equal to one of the two nodes? This is the exact case from our earlier example! (The LCA of <span>2</span> and <span>4</span> should be <span>2</span>). Therefore, we add case number 4):</p><p class="hiblock">4. When the current node equals to either of the two nodes, this node must be the LCA too.</p><p>The run time complexity is O(<em>h</em>), where <em>h</em> is the height of the BST. Translating this idea to code is straightforward (Note that we handle case 3) and 4) in the else statement to save us some extra typing <img src="http://leetcode.com/wp-includes/images/smilies/icon_wink.gif" alt=";)" class="wp-smiley"> ):</p><div id="crayon-54ec367aee164" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
Node *LCA(Node *root, Node *p, Node *q) {
  if (!root || !p || !q) return NULL;
  if (max(p-&gt;data, q-&gt;data) &lt; root-&gt;data)
    return LCA(root-&gt;left, p, q);
  else if (min(p-&gt;data, q-&gt;data) &gt; root-&gt;data)
    return LCA(root-&gt;right, p, q);
  else
    return root;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec367aee164-1"><span class="e ">Node *</span><span class="e">LCA</span><span class="sy">(</span><span class="e ">Node *</span><span class="i">root</span><span class="sy">,</span><span class="h"> </span><span class="e ">Node *</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="e ">Node *</span><span class="i">q</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec367aee164-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">root</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="o">!</span><span class="i">p</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="o">!</span><span class="i">q</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec367aee164-3"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="e">max</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">,</span><span class="h"> </span><span class="i">q</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">root</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec367aee164-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">LCA</span><span class="sy">(</span><span class="i">root</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="i">q</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec367aee164-5"><span class="h">&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="e">min</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">,</span><span class="h"> </span><span class="i">q</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">)</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">root</span><span class="o">-&gt;</span><span class="i">data</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec367aee164-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">LCA</span><span class="sy">(</span><span class="i">root</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="i">q</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec367aee164-7"><span class="h">&#160;&#160;</span><span class="st">else</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec367aee164-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">root</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec367aee164-9"><span class="sy">}</span></p></div></td></tr></table></div></div><p>You should realize quickly that the above code contains tail recursion. Converting the above function to an iterative one is left as an exercise to the reader.</p><p><strong><span>Further Thoughts</span></strong>:<br> What if you are required to find the LCA of a binary tree (not a BST)? Check out my next post: <a href="http://www.leetcode.com/2011/07/lowest-common-ancestor-of-a-binary-tree-part-i.html">Lowest Common Ancestor of a Binary Tree Part I</a> to find out how.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a782">Rating: 4.8/<strong>5</strong> (41 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Lowest Common Ancestor of a Binary Search Tree (BST)</span></span>, <span class="rating"><span class="average">4.8</span> out of <span class="best">5</span> based on <span class="votes">41</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Given a binary tree, find the lowest common ancestor of two given nodes in the tree.</p></blockquote><p><span id="more-790"></span><br></p><pre>        _______<span>3</span>______
       /              \
    ___<span>5</span>__          ___<span>1</span>__
   /      \        /      \
   <span>6</span>      _<span>2       0       8</span>
         /  \
         <span>7   4</span></pre><p>If you are not so sure about the definition of lowest common ancestor (LCA), please refer to my previous post: <a href="http://www.leetcode.com/2011/07/lowest-common-ancestor-of-a-binary-search-tree.html">Lowest Common Ancestor of a Binary Search Tree (BST)</a> or the definition of LCA <a href="http://en.wikipedia.org/wiki/Lowest_common_ancestor">here</a>. Using the tree above as an example, the LCA of nodes <strong><span>5</span></strong> and <strong><span>1</span></strong> is <strong><span>3</span></strong>. Please note that LCA for nodes <strong><span>5</span> </strong>and <strong><span>4</span> </strong>is <strong><span>5</span></strong>.</p><p><strong>Hint:</strong><br> Top-down or bottom-up? Consider both approaches and see which one is more efficient.</p><p><strong>A Top-Down Approach (Worst case O(n<sup>2</sup>) ):</strong><br> Let&#8217;s try the top-down approach where we traverse the nodes from the top to the bottom. First, if the current node is one of the two nodes, it must be the LCA of the two nodes. If not, we count the number of nodes that matches either p or q in the left subtree (which we call <em>totalMatches</em>). If <em>totalMatches </em>equals 1, then we know the right subtree will contain the other node. Therefore, the current node must be the LCA. If <em>totalMatches </em>equals 2, we know that both nodes are contained in the left subtree, so we traverse to its left child. Similar with the case where <em>totalMatches </em>equals 0 where we traverse to its right child.</p><div id="crayon-54ecd42b1f69a" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
// Return #nodes that matches P or Q in the subtree.
int countMatchesPQ(Node *root, Node *p, Node *q) {
  if (!root) return 0;
  int matches = countMatchesPQ(root-&gt;left, p, q) + countMatchesPQ(root-&gt;right, p, q);
  if (root == p || root == q)
    return 1 + matches;
  else
    return matches;
}

Node *LCA(Node *root, Node *p, Node *q) {
  if (!root || !p || !q) return NULL;
  if (root == p || root == q) return root;
  int totalMatches = countMatchesPQ(root-&gt;left, p, q);
  if (totalMatches == 1)
    return root;
  else if (totalMatches == 2)
    return LCA(root-&gt;left, p, q);
  else /* totalMatches == 0 */
    return LCA(root-&gt;right, p, q);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ecd42b1f69a-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd42b1f69a-2">2</p><p class="crayon-num" data-line="crayon-54ecd42b1f69a-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd42b1f69a-4">4</p><p class="crayon-num" data-line="crayon-54ecd42b1f69a-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd42b1f69a-6">6</p><p class="crayon-num" data-line="crayon-54ecd42b1f69a-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd42b1f69a-8">8</p><p class="crayon-num" data-line="crayon-54ecd42b1f69a-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd42b1f69a-10">10</p><p class="crayon-num" data-line="crayon-54ecd42b1f69a-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd42b1f69a-12">12</p><p class="crayon-num" data-line="crayon-54ecd42b1f69a-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd42b1f69a-14">14</p><p class="crayon-num" data-line="crayon-54ecd42b1f69a-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd42b1f69a-16">16</p><p class="crayon-num" data-line="crayon-54ecd42b1f69a-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd42b1f69a-18">18</p><p class="crayon-num" data-line="crayon-54ecd42b1f69a-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd42b1f69a-20">20</p><p class="crayon-num" data-line="crayon-54ecd42b1f69a-21">21</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecd42b1f69a-1"><span class="c">// Return #nodes that matches P or Q in the subtree.</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd42b1f69a-2"><span class="t">int</span><span class="h"> </span><span class="e">countMatchesPQ</span><span class="sy">(</span><span class="e ">Node *</span><span class="i">root</span><span class="sy">,</span><span class="h"> </span><span class="e ">Node *</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="e ">Node *</span><span class="i">q</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecd42b1f69a-3"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd42b1f69a-4"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">matches</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">countMatchesPQ</span><span class="sy">(</span><span class="i">root</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="i">q</span><span class="sy">)</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="e">countMatchesPQ</span><span class="sy">(</span><span class="i">root</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="i">q</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd42b1f69a-5"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">root</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">p</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="v">root</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">q</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd42b1f69a-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="cn">1</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="i">matches</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd42b1f69a-7"><span class="h">&#160;&#160;</span><span class="st">else</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd42b1f69a-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">matches</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd42b1f69a-9"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd42b1f69a-10">&#160;</p><p class="crayon-line" id="crayon-54ecd42b1f69a-11"><span class="e ">Node *</span><span class="e">LCA</span><span class="sy">(</span><span class="e ">Node *</span><span class="i">root</span><span class="sy">,</span><span class="h"> </span><span class="e ">Node *</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="e ">Node *</span><span class="i">q</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd42b1f69a-12"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">root</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="o">!</span><span class="i">p</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="o">!</span><span class="i">q</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd42b1f69a-13"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">root</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">p</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="v">root</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">q</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="i">root</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd42b1f69a-14"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">totalMatches</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">countMatchesPQ</span><span class="sy">(</span><span class="i">root</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="i">q</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd42b1f69a-15"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">totalMatches</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd42b1f69a-16"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">root</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd42b1f69a-17"><span class="h">&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">totalMatches</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">2</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd42b1f69a-18"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">LCA</span><span class="sy">(</span><span class="i">root</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="i">q</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd42b1f69a-19"><span class="h">&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="c">/* totalMatches == 0 */</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd42b1f69a-20"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">LCA</span><span class="sy">(</span><span class="i">root</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="i">q</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd42b1f69a-21"><span class="sy">}</span></p></div></td></tr></table></div></div><p>What is the run time complexity of this top-down approach?</p><p>First, just for fun, we assume that the tree contains <em>n</em> nodes and is balanced (with its height equals to log(<em>n</em>) ). In this case, the run time complexity would be O(<em>n</em>). Most people would guess a higher ordered complexity than O(<em>n</em>) due to the function <em>countMatchesPQ</em>() traverses the same nodes over and over again. Notice that the tree is balanced, you cut off half of the nodes you need to traverse in each recursive call of <em>LCA</em>() function. The proof that the complexity is indeed O(<em>n</em>) is left as an exercise to the reader.</p><p>What if the tree is not necessarily balanced? Then in the worst case the complexity could go up to O(<em>n</em><sup>2</sup>). Why? Could you come up with such case? (Hint: The tree might be a degenerate tree).</p><p><strong>A Bottom-up Approach (Worst case O(<em>n</em>) ):<br> </strong>Using a bottom-up approach, we can improve over the top-down approach by  avoiding traversing the same nodes over and over again.</p><p>We traverse from the bottom, and once we reach a node which matches one of the two nodes, we pass it up to its parent. The parent would then test its left and right subtree if each contain one of  the two nodes. If yes, then the parent must be the LCA and we pass its parent up to the root. If not, we pass the lower node which contains either one of the two nodes (if the left or right subtree contains either p or q), or NULL (if both the left and right subtree does not contain either p or q) up.</p><p>Sounds complicated? Surprisingly the code appears to be much simpler than the top-down one.</p><div id="crayon-54ecd42b1f74a" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
Node *LCA(Node *root, Node *p, Node *q) {
  if (!root) return NULL;
  if (root == p || root == q) return root;
  Node *L = LCA(root-&gt;left, p, q);
  Node *R = LCA(root-&gt;right, p, q);
  if (L &amp;&amp; R) return root;  // if p and q are on both sides
  return L ? L : R;  // either one of p,q is on one side OR p,q is not in L&amp;R subtrees
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecd42b1f74a-1"><span class="e ">Node *</span><span class="e">LCA</span><span class="sy">(</span><span class="e ">Node *</span><span class="i">root</span><span class="sy">,</span><span class="h"> </span><span class="e ">Node *</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="e ">Node *</span><span class="i">q</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd42b1f74a-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd42b1f74a-3"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">root</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">p</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="v">root</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">q</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="i">root</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd42b1f74a-4"><span class="h">&#160;&#160;</span><span class="e ">Node *</span><span class="v">L</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">LCA</span><span class="sy">(</span><span class="i">root</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="i">q</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd42b1f74a-5"><span class="h">&#160;&#160;</span><span class="e ">Node *</span><span class="v">R</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">LCA</span><span class="sy">(</span><span class="i">root</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="i">q</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd42b1f74a-6"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">L</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">R</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="i">root</span><span class="sy">;</span><span class="h">&#160;&#160;</span><span class="c">// if p and q are on both sides</span></p><p class="crayon-line" id="crayon-54ecd42b1f74a-7"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">L</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="i">L</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="i">R</span><span class="sy">;</span><span class="h">&#160;&#160;</span><span class="c">// either one of p,q is on one side OR p,q is not in L&amp;R subtrees</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd42b1f74a-8"><span class="sy">}</span></p></div></td></tr></table></div></div><p><strong>Notes:<br> </strong>The LCA problem had been studied extensively by many computer scientists. There exists efficient algorithms for finding LCA in constant time after initial processing of the tree in linear time. For the adventurous reader, please read this article for more details: <a href="http://www.topcoder.com/tc?module=Static&amp;d1=tutorials&amp;d2=lowestCommonAncestor">Range Minimum Query and Lowest Common Ancestor in Topcoder</a>.</p><p><strong><span>Further Thoughts</span></strong>:<br> What if each node in the binary tree has a link to its parent? Could you devise a non-recursive approach without using extra space?</p><p><strong><span>&#187; Continue reading</span> <a href="http://www.leetcode.com/2011/07/lowest-common-ancestor-of-a-binary-tree-part-ii.html">Lowest Common Ancestor of a Binary Tree Part II.</a></strong></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a790">Rating: 4.6/<strong>5</strong> (77 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Lowest Common Ancestor of a Binary Tree Part I</span></span>, <span class="rating"><span class="average">4.6</span> out of <span class="best">5</span> based on <span class="votes">77</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Given a binary tree, find the lowest common ancestor of two given nodes in the tree. Each node contains a parent pointer which links to its parent.</p></blockquote><p><span id="more-797"></span><br> <strong><span>Note:</span></strong><br> This is Part II of Lowest Common Ancestor of a Binary Tree. If you need to find the lowest common ancestor without parent pointers, please read <a href="http://www.leetcode.com/2011/07/lowest-common-ancestor-of-a-binary-tree-part-i.html">Lowest Common Ancestor of a Binary Tree Part I</a>.<br></p><pre>        _______<span>3</span>______
       /              \
    ___<span>5</span>__          ___<span>1</span>__
   /      \        /      \
   <span>6</span>      _<span>2       0       8</span>
         /  \
         <span>7   4</span></pre><p>If you are not so sure about the definition of lowest common ancestor (LCA), please refer to my previous post: <a href="http://www.leetcode.com/2011/07/lowest-common-ancestor-of-a-binary-search-tree.html">Lowest Common Ancestor of a Binary Search Tree (BST)</a> or the definition of LCA <a href="http://en.wikipedia.org/wiki/Lowest_common_ancestor">here</a>. Using the tree above as an example, the LCA of nodes <span>5</span> and <span>1</span> is <span>3</span>. Please note that LCA for nodes <span>5</span> and <span>4</span> is <span>5</span>.</p><p>In my last post: <a href="http://www.leetcode.com/2011/07/lowest-common-ancestor-of-a-binary-tree-part-i.html">Lowest Common Ancestor of a Binary Tree Part I</a>, we have devised a recursive solution which finds the LCA in O(<em>n</em>) time. If each node has a pointer that link to its parent, could we devise a better solution?</p><p><strong>Hint:</strong><br> No recursion is needed. There is an easy solution which uses extra space. Could you eliminate the need of extra space?</p><p><strong>An easy solution<em></em>:</strong><br> As we trace the two paths from both nodes up to the root, eventually it will merge into one single path. The LCA is the exact first intersection node where both paths merged into a single path. An easy solution is to use a hash table which records visited nodes as we trace both paths up to the root. Once we reached the first node which is already marked as visited, we immediately return that node as the LCA.</p><div id="crayon-54e2f998287e4" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" touchscreen minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick">
Node *LCA(Node *root, Node *p, Node *q) {
  hash_set&lt;Node *&gt; visited;
  while (p || q) {
    if (p) {
      if (!visited.insert(p).second)
        return p; // insert p failed (p exists in the table)
      p = p-&gt;parent;
    }
    if (q) {
      if (!visited.insert(q).second)
        return q; // insert q failed (q exists in the table)
      q = q-&gt;parent;
    }
  }
  return NULL;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e2f998287e4-1"><span class="e ">Node *</span><span class="e">LCA</span><span class="sy">(</span><span class="e ">Node *</span><span class="i">root</span><span class="sy">,</span><span class="h"> </span><span class="e ">Node *</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="e ">Node *</span><span class="i">q</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f998287e4-2"><span class="h">&#160;&#160;</span><span class="i">hash_set</span><span class="o">&lt;</span><span class="e ">Node *</span><span class="o">&gt;</span><span class="h"> </span><span class="i">visited</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e2f998287e4-3"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">p</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">q</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f998287e4-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e2f998287e4-5"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">visited</span><span class="sy">.</span><span class="e">insert</span><span class="sy">(</span><span class="i">p</span><span class="sy">)</span><span class="sy">.</span><span class="i">second</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f998287e4-6"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">p</span><span class="sy">;</span><span class="h"> </span><span class="c">// insert p failed (p exists in the table)</span></p><p class="crayon-line" id="crayon-54e2f998287e4-7"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">p</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="r">parent</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f998287e4-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e2f998287e4-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">q</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f998287e4-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">visited</span><span class="sy">.</span><span class="e">insert</span><span class="sy">(</span><span class="i">q</span><span class="sy">)</span><span class="sy">.</span><span class="i">second</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54e2f998287e4-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">q</span><span class="sy">;</span><span class="h"> </span><span class="c">// insert q failed (q exists in the table)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f998287e4-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">q</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">q</span><span class="o">-&gt;</span><span class="r">parent</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e2f998287e4-13"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f998287e4-14"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e2f998287e4-15"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f998287e4-16"><span class="sy">}</span></p></div></td></tr></table></div></div><p>The run time complexity of this approach is O(<em>h</em>), where <em>h</em> is the tree&#8217;s height. The space complexity is also O(<em>h</em>), since it can mark at most 2<em>h</em> nodes.</p><p><strong>The best solution:<br> </strong>A little creativity is needed here. Since we have the parent pointer, we could easily get the distance (height) of both nodes from the root. Once we knew both heights, we could subtract from one another and get the height&#8217;s difference (<em>dh</em>). If you observe carefully from the previous solution, the node which is closer to the root is always <em>dh</em> steps ahead of the deeper node. We could eliminate the need of marking visited nodes altogether. Why?</p><p>The reason is simple, if we advance the deeper node <em>dh</em> steps above, both nodes would be at the same depth. Then, we advance both nodes one level at a time. They would then eventually intersect at one node, which is the LCA of both nodes. If not, one of the node would eventually reach NULL (root&#8217;s parent), which we conclude that both nodes are not in the same tree. However, that part of code shouldn&#8217;t be reached, since the problem statement assumed that both nodes are in the same tree.</p><div id="crayon-54e2f99829091" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" touchscreen minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick">
int getHeight(Node *p) {
  int height = 0;
  while (p) {
    height++;
    p = p-&gt;parent;
  }
  return height;
}

// As root-&gt;parent is NULL, we don't need to pass root in.
Node *LCA(Node *p, Node *q) {
  int h1 = getHeight(p);
  int h2 = getHeight(q);
  // swap both nodes in case p is deeper than q.
  if (h1 &gt; h2) {
    swap(h1, h2);
    swap(p, q);
  }
  // invariant: h1 &lt;= h2.
  int dh = h2 - h1;
  for (int h = 0; h &lt; dh; h++)
    q = q-&gt;parent;
  while (p &amp;&amp; q) {
    if (p == q) return p;
    p = p-&gt;parent;
    q = q-&gt;parent;
  }
  return NULL;  // p and q are not in the same tree
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54e2f99829091-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e2f99829091-2">2</p><p class="crayon-num" data-line="crayon-54e2f99829091-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e2f99829091-4">4</p><p class="crayon-num" data-line="crayon-54e2f99829091-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e2f99829091-6">6</p><p class="crayon-num" data-line="crayon-54e2f99829091-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e2f99829091-8">8</p><p class="crayon-num" data-line="crayon-54e2f99829091-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e2f99829091-10">10</p><p class="crayon-num" data-line="crayon-54e2f99829091-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e2f99829091-12">12</p><p class="crayon-num" data-line="crayon-54e2f99829091-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e2f99829091-14">14</p><p class="crayon-num" data-line="crayon-54e2f99829091-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e2f99829091-16">16</p><p class="crayon-num" data-line="crayon-54e2f99829091-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e2f99829091-18">18</p><p class="crayon-num" data-line="crayon-54e2f99829091-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e2f99829091-20">20</p><p class="crayon-num" data-line="crayon-54e2f99829091-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e2f99829091-22">22</p><p class="crayon-num" data-line="crayon-54e2f99829091-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e2f99829091-24">24</p><p class="crayon-num" data-line="crayon-54e2f99829091-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e2f99829091-26">26</p><p class="crayon-num" data-line="crayon-54e2f99829091-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e2f99829091-28">28</p><p class="crayon-num" data-line="crayon-54e2f99829091-29">29</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e2f99829091-1"><span class="t">int</span><span class="h"> </span><span class="e">getHeight</span><span class="sy">(</span><span class="e ">Node *</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f99829091-2"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">height</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e2f99829091-3"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f99829091-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">height</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e2f99829091-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">p</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="r">parent</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f99829091-6"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e2f99829091-7"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">height</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f99829091-8"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e2f99829091-9">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54e2f99829091-10"><span class="c">// As root-&gt;parent is NULL, we don't need to pass root in.</span></p><p class="crayon-line" id="crayon-54e2f99829091-11"><span class="e ">Node *</span><span class="e">LCA</span><span class="sy">(</span><span class="e ">Node *</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="e ">Node *</span><span class="i">q</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f99829091-12"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">h1</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">getHeight</span><span class="sy">(</span><span class="i">p</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e2f99829091-13"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">h2</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">getHeight</span><span class="sy">(</span><span class="i">q</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f99829091-14"><span class="h">&#160;&#160;</span><span class="c">// swap both nodes in case p is deeper than q.</span></p><p class="crayon-line" id="crayon-54e2f99829091-15"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">h1</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">h2</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f99829091-16"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">swap</span><span class="sy">(</span><span class="i">h1</span><span class="sy">,</span><span class="h"> </span><span class="i">h2</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e2f99829091-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">swap</span><span class="sy">(</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="i">q</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f99829091-18"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e2f99829091-19"><span class="h">&#160;&#160;</span><span class="c">// invariant: h1 &lt;= h2.</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f99829091-20"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">dh</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">h2</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="i">h1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e2f99829091-21"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">h</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">h</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">dh</span><span class="sy">;</span><span class="h"> </span><span class="i">h</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f99829091-22"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">q</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">q</span><span class="o">-&gt;</span><span class="r">parent</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e2f99829091-23"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">p</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">q</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f99829091-24"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">p</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">q</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="i">p</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e2f99829091-25"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">p</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="r">parent</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f99829091-26"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">q</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">q</span><span class="o">-&gt;</span><span class="r">parent</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e2f99829091-27"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e2f99829091-28"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span><span class="h">&#160;&#160;</span><span class="c">// p and q are not in the same tree</span></p><p class="crayon-line" id="crayon-54e2f99829091-29"><span class="sy">}</span></p></div></td></tr></table></div></div><p><strong><span>Further Thoughts</span></strong>:<br> Isn&#8217;t the solution above neat? It requires some creative thought and is quite subtle.</p><p>A variation of this problem which seemed to be more popular is:</p><blockquote><p>Given two singly linked lists and they both intersect at one point (ie, forming a Y shaped list). Find where the two linked lists merge.</p></blockquote><p>I am sure you know how to answer this question now <img src="http://leetcode.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley"></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a797">Rating: 4.8/<strong>5</strong> (63 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Lowest Common Ancestor of a Binary Tree Part II</span></span>, <span class="rating"><span class="average">4.8</span> out of <span class="best">5</span> based on <span class="votes">63</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Given a binary tree, find its maximum height.</p></blockquote><p><span id="more-19"></span><br>The maximum height of a binary tree is defined as the number of nodes along the path from the root node to the deepest leaf node. Note that the maximum height of an empty tree is 0.</p><p><b>Recursive Solution:</b><br>We can solve this easily using recursion. Why? Because each of the leftChild and rightChild of a node is a sub-tree itself. We first compute the max height of left sub-tree, then compute the max height of right sub-tree. Therefore, the max height of the current node is the greater of the two max heights + 1. For the base case, the current node is NULL, we return zero. NULL signifies there is no tree, therefore its max height is zero.</p><p></p><div id="crayon-54eccdae7d7f4" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int maxHeight(BinaryTree *p) {
  if (!p) return 0;
  int left_height = maxHeight(p-&gt;left);
  int right_height = maxHeight(p-&gt;right);
  return (left_height &gt; right_height) ? left_height + 1 : right_height + 1;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eccdae7d7f4-1"><span class="t">int</span><span class="h"> </span><span class="e">maxHeight</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eccdae7d7f4-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eccdae7d7f4-3"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">left_height</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">maxHeight</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eccdae7d7f4-4"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">right_height</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">maxHeight</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eccdae7d7f4-5"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="i">left_height</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">right_height</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="i">left_height</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="i">right_height</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eccdae7d7f4-6"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b>Further Thoughts:</b><br>The recursive solution is pretty neat, right? Here&#8217;s a challenge: How about finding an iterative solution for maxHeight()? How would you approach this problem?</p><p></p><div class="separator"><a href="http://4.bp.blogspot.com/_UElib2WLeDE/TK0MjC3-MKI/AAAAAAAACWc/u_JaQ0YhoU4/s1600/yahoo_small.png" imageanchor="1"><img border="0" ex="true" height="287" src="http://4.bp.blogspot.com/_UElib2WLeDE/TK0MjC3-MKI/AAAAAAAACWc/u_JaQ0YhoU4/s400/yahoo_small.png" width="400"></a></div><div><small>Binary-tree visualization of the Yahoo search engine bot crawling the experimental website. The total number of nodes grow with an exponential rate as the tree deepens. The animated version showing the tree growing over the year can be found <a href="http://drunkmenworkhere.org/219.php?a=yahoo">here</a> (<span>Warning</span>: large file size, <span>13MB</span>).</small></div><p><b>Hint:</b><br>Read my post: <a href="http://www.leetcode.com/2010/04/binary-search-tree-in-order-traversal.html">Binary Search Tree In-Order Traversal Iterative Solution</a>. This should give you enough hints to get started.</p><p><b>Iterative Solution:</b><br>We could apply the same <a href="http://www.leetcode.com/2010/04/binary-search-tree-in-order-traversal.html">in-order traversal</a> of a BST in the binary tree. By saying &#8220;in-order&#8221; traversal I mean traversing the tree such that it reaches the leaf first (deepest). In other words, we are doing a <a href="http://en.wikipedia.org/wiki/Depth-first_search">Depth-first Search</a> (DFS). In fact, all three kinds of tree traversal (pre-order, in-order, and post-order) are doing DFS. Therefore, we could modify any existing iterative solution of tree traversals to solve this problem.</p><p>As pre-order and in-order iterative traversals are easier to implement, your best bet is to code either one of them during an interview session. As we traverse the tree, we would keep track of the current depth and record each node&#8217;s depth, so that we know which depth we are in when we return to the node at a later time. (In pre-order or in-order traversals, it might return several levels above the current level when a node is popped off the stack).</p><p>On the other hand, <a href="http://www.leetcode.com/2010/10/binary-tree-post-order-traversal.html">post-order traversal</a> guarantees to return exactly one level above a node that is popped off the stack. Therefore, we could devise a solution utilizing post-order traversal without modifying the existing tree structure. We keep track of the current depth and update the maximum depth as we traverse the tree.</p><p>Another solution is to utilize <a href="http://en.wikipedia.org/wiki/Breadth-first_search">Breadth-first Search</a> (BFS). Unlike DFS, we traverse the tree level by level, thus we are able to obtain the max depth in a direct manner. Read my post: <a href="http://www.leetcode.com/2010/09/printing-binary-tree-in-level-order.html">Printing a Binary Tree in Level Order</a> for more information.</p><p>Below is the code for finding the maximum depth of a binary tree using <a href="http://www.leetcode.com/2010/10/binary-tree-post-order-traversal.html">post-order traversal</a>, without recursion.</p><p></p><div id="crayon-54eccdae7d8ac" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int maxDepthIterative(BinaryTree *root) {
  if (!root) return 0;
  stack&lt;BinaryTree*&gt; s;
  s.push(root);
  int maxDepth = 0;
  BinaryTree *prev = NULL;
  while (!s.empty()) {
    BinaryTree *curr = s.top();
    if (!prev || prev-&gt;left == curr || prev-&gt;right == curr) {
      if (curr-&gt;left)
        s.push(curr-&gt;left);
      else if (curr-&gt;right)
        s.push(curr-&gt;right);
    } else if (curr-&gt;left == prev) {
      if (curr-&gt;right)
        s.push(curr-&gt;right);
    } else {
      s.pop();
    }
    prev = curr;
    if (s.size() &gt; maxDepth)
      maxDepth = s.size();
  }
  return maxDepth;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54eccdae7d8ac-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eccdae7d8ac-2">2</p><p class="crayon-num" data-line="crayon-54eccdae7d8ac-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eccdae7d8ac-4">4</p><p class="crayon-num" data-line="crayon-54eccdae7d8ac-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eccdae7d8ac-6">6</p><p class="crayon-num" data-line="crayon-54eccdae7d8ac-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eccdae7d8ac-8">8</p><p class="crayon-num" data-line="crayon-54eccdae7d8ac-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eccdae7d8ac-10">10</p><p class="crayon-num" data-line="crayon-54eccdae7d8ac-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eccdae7d8ac-12">12</p><p class="crayon-num" data-line="crayon-54eccdae7d8ac-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eccdae7d8ac-14">14</p><p class="crayon-num" data-line="crayon-54eccdae7d8ac-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eccdae7d8ac-16">16</p><p class="crayon-num" data-line="crayon-54eccdae7d8ac-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eccdae7d8ac-18">18</p><p class="crayon-num" data-line="crayon-54eccdae7d8ac-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eccdae7d8ac-20">20</p><p class="crayon-num" data-line="crayon-54eccdae7d8ac-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eccdae7d8ac-22">22</p><p class="crayon-num" data-line="crayon-54eccdae7d8ac-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eccdae7d8ac-24">24</p><p class="crayon-num" data-line="crayon-54eccdae7d8ac-25">25</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eccdae7d8ac-1"><span class="t">int</span><span class="h"> </span><span class="e">maxDepthIterative</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eccdae7d8ac-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eccdae7d8ac-3"><span class="h">&#160;&#160;</span><span class="i">stack</span><span class="o">&lt;</span><span class="e ">BinaryTree*</span><span class="o">&gt;</span><span class="h"> </span><span class="i">s</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eccdae7d8ac-4"><span class="h">&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">root</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eccdae7d8ac-5"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">maxDepth</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eccdae7d8ac-6"><span class="h">&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">prev</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eccdae7d8ac-7"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">s</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eccdae7d8ac-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">curr</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">s</span><span class="sy">.</span><span class="e">top</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eccdae7d8ac-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">prev</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">prev</span><span class="o">-&gt;</span><span class="v">left</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">curr</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">prev</span><span class="o">-&gt;</span><span class="v">right</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">curr</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eccdae7d8ac-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54eccdae7d8ac-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eccdae7d8ac-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54eccdae7d8ac-13"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eccdae7d8ac-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="v">left</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">prev</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eccdae7d8ac-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eccdae7d8ac-16"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eccdae7d8ac-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eccdae7d8ac-18"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">s</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eccdae7d8ac-19"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eccdae7d8ac-20"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">prev</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">curr</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eccdae7d8ac-21"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">s</span><span class="sy">.</span><span class="e">size</span><span class="sy">(</span><span class="sy">)</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">maxDepth</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eccdae7d8ac-22"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">maxDepth</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">s</span><span class="sy">.</span><span class="e">size</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eccdae7d8ac-23"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eccdae7d8ac-24"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">maxDepth</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eccdae7d8ac-25"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a19">Rating: 3.9/<strong>5</strong> (47 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Maximum Height (Depth) of a Binary Tree</span></span>, <span class="rating"><span class="average">3.9</span> out of <span class="best">5</span> based on <span class="votes">47</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>There are two sorted arrays A and B of size <em>m</em> and <em>n</em> respectively. Find the median of the two sorted arrays. The overall run time complexity should be <em>O</em>(log (<em>m</em>+<em>n</em>)).</p></blockquote><p><span id="more-463"></span><br> <strong><span>Note:</span></strong><br> Please head over to this <a href="http://www2.myoops.org/course_material/mit/NR/rdonlyres/Electrical-Engineering-and-Computer-Science/6-046JFall-2005/30C68118-E436-4FE3-8C79-6BAFBB07D935/0/ps9sol.pdf">MIT handout</a> for a much better solution, although their solution does not deal with some special cases, which is easy to fix. Please consult <a href="http://www.leetcode.com/2011/03/median-of-two-sorted-arrays.html#comment-1053">Sophie&#8217;s solution</a> which fixes these special cases easily. Although my solution below works, it is too complicated.</p><p><strong><span>Online Judge</span></strong><br> This problem is available at <a href="http://www.leetcode.com/onlinejudge">Online Judge</a>. <a href="http://www.leetcode.com/onlinejudge">Head over there</a> and it will judge your solution. Currently only able to compile C++ code. If you are using other languages, you can still verify your solution by looking at the judge&#8217;s test cases and its expected output.</p><p><strong>Solution:</strong><br> If you search this problem on <a href="http://www.google.com/search?q=median+of+two+sorted+arrays&amp;ie=utf-8&amp;oe=utf-8&amp;aq=t&amp;rls=org.mozilla:en-US:official&amp;client=firefox-a">Google</a>, you will find tons of hits. However, most of them deal with the special case where m == n, and even so their code are <a href="http://geeksforgeeks.org/?p=2105">filled with bugs</a>. The <a href="http://www.amazon.com/Introduction-Algorithms-CD-Rom-Thomas-Cormen/dp/0072970545/ref=sr_1_1?ie=UTF8&amp;qid=1301046297&amp;sr=8-1">CLRS</a> book has this problem as exercise in section 9.3-8, however it also assumes the case where <em>m</em> == <em>n</em>. <a href="http://www2.myoops.org/course_material/mit/NR/rdonlyres/Electrical-Engineering-and-Computer-Science/6-046JFall-2005/30C68118-E436-4FE3-8C79-6BAFBB07D935/0/ps9sol.pdf">The only reliable solution</a> I found on the web which deals with the generic case also seemed incorrect, as their definition of the median is the single middle element (although their approach of using binary search is pretty neat). According to the definition of the <a href="http://en.wikipedia.org/wiki/Median">median</a>, if (<em>m</em> + <em>n</em>) is even, then the median should be the mean of the two middle numbers.</p><p>If you read my previous post: <a href="http://www.leetcode.com/2011/01/find-k-th-smallest-element-in-union-of.html">Find the k-th Smallest Element in the Union of Two Sorted Arrays</a>, you know that this problem is somewhat similar. In fact, the problem of finding the median of two sorted arrays when (<em>m</em> + <em>n</em>) is odd can be thought of solving the special case where k=(<em>m</em>+<em>n</em>)/2. Although we can still apply the finding k-th smallest algorithm twice to find the two middle numbers when (<em>m</em> + <em>n</em>) is even, it is no more a desirable solution due to inefficiency.</p><p>You might ask: Why not adapt the previous solution to this problem? After all, the previous algorithm solves a more general case. Well, I&#8217;ve tried that and I didn&#8217;t consider the previous solution is easily adaptable to this problem. The main reason is because when (<em>m</em> + <em>n</em>) is even, the two middle elements might be located in the same array. This complicates the algorithm and many special cases have to be dealt in a case by case basis.</p><p>Similar to finding the k-th smallest, the divide and conquer method is a natural approach to this problem. First, we choose A<sub>i</sub> and B<sub>j</sub> (the middle elements of A and B) where i and j are defined as m/2 and n/2. We made an observation that if A<sub>i</sub> j, then the median must be somewhere between A<sub>i</sub> and B<sub>j</sub> (inclusive). Therefore, we could dispose a total of <em>i</em> elements from left of Ai and a total of n-j-1 elements to the right of B<sub>j</sub>. Please take extra caution not to dispose A<sub>i</sub> or B<sub>j</sub>, as we might need two middle values to calculate the median (it might also be possible that the two middle values are both in the same array). The case where A<sub>i</sub> &gt; B<sub>j</sub> is similar.</p><p><a href="http://www.leetcode.com/wp-content/uploads/2011/03/twoarrays.gif"><img class="aligncenter size-full wp-image-467" src="http://www.leetcode.com/wp-content/uploads/2011/03/twoarrays.gif" alt="" width="389" height="127"></a><span>Two sorted arrays A and B. i is chosen as m/2 and j is chosen as n/2. A<sub>i</sub> and B<sub>j</sub> are middle elements of A and B. If A<sub>i</sub> j, then the median must be between A<sub>i</sub> and B<sub>j</sub> (inclusive). Similarly with the opposite.</span></p><p>The main idea illustrated above is mostly right, however there is one more important invariant we have to maintain. It is entirely possible that the number of elements being disposed from each array is different. Look at the example above: If A<sub>i</sub> j, two elements to the left of A<sub>i</sub> and three elements to the right of B<sub>j</sub> are being disposed. Notice that this is no longer a valid sub-problem, as both sub-array&#8217;s median is no longer the original median.</p><p>Therefore, an important invariant we have to maintain is:</p><pre>The number of elements being disposed from each array must be the same.</pre><p>This could be easily achieved by choosing the number of elements to dispose from each array to be (<strong><span>Warning</span></strong>: The below condition fails to handle an edge case, for more details see the <strong><span>EDIT</span></strong> section below):</p><pre>k = min(i, n-j-1) when A<sub>i</sub> j.                   1(a)
k = min(m-i-1, j) when A<sub>i</sub> &gt; B<sub>j</sub>.                    1(b)</pre><p>Figuring out how to subdivide the problem is actually the easy part. The hard part is figuring out the base case. (ie, when should we stop subdividing?)</p><p>It is obvious that when <em>m</em>=1 or <em>n</em>=1, you must treat it as a special base case, or else it would end up in an infinite loop. The hard part is reasoning why <em>m</em>=2 or <em>n</em>=2 requires special case handling as well. (Hint: The two middle elements might be in the same array.)</p><p>Finally, implementing the above idea turns out to be an extremely tricky coding exercise. Before looking at the solution below, try to challenge yourself by coding the algorithm.</p><p>If you have a more elegant code to this problem, I would love to hear from you!</p><p><strong><span><span>EDIT:</span></span></strong><br> Thanks to <a href="http://www.leetcode.com/2011/03/median-of-two-sorted-arrays.html#comment-674">Algorist</a> for being the first person who points out a bug. (For more details, read <a href="http://www.leetcode.com/2011/03/median-of-two-sorted-arrays.html#comment-674">his comment</a>). The bug is caused by some edge cases that are not handled in the base case.</p><p>Shortly after I fixed that bug, I discovered another edge case myself which my previous code failed to handle.</p><p>An example of one of the edge cases is:</p><pre>A = { 1, 2, 4, 8, 9, 10 }
B = { 3, 5, 6, 7 }</pre><p>The above conditions ( <strong>1(a)</strong>, <strong>1(b)</strong> ) fails to handle the above edge case, which returns <strong>5</strong> as the median while the correct answer should be <strong>5.5</strong>.</p><p>The reason is because the number 5 is discarded in the first iteration, while it should be considered in the final evaluation step of the median. To resolve this edge case, we have to be careful not to discard the neighbor element when its size is even. Here are the corrected condition<em></em>s ( <strong>2(a)</strong>,<strong> 2(b)</strong>, <strong>2(c)</strong>, <strong>2(d)</strong> ) for <em>k</em> which resolves this edge case.</p><pre>k = min(i-1, n-j-1) when A<sub>i</sub> j and m is even.   2(a)
k = min(i, n-j-1)   when A<sub>i</sub> j and m is odd.    2(b)
k = min(m-i-1, j-1) when A<sub>i</sub> &gt; B<sub>j</sub>  and n is even.   2(c)
k = min(m-i-1, j)   when A<sub>i</sub> &gt; B<sub>j</sub>  and n is odd.    2(d)</pre><p>Below is the bug-free code after going through a lengthy rigorous testing of all possible edge cases. (Not for the faint of heart!)</p><div id="crayon-54ec1dce1c1f3" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
double findMedianBaseCase(int med, int C[], int n) {
  if (n == 1)
    return (med+C[0])/2.0;

  if (n % 2 == 0) {
    int a = C[n/2 - 1], b = C[n/2];
    if (med &lt;= a)
      return a;
    else if (med &lt;= b)
      return med;
    else /* med &gt; b */
      return b;
  } else {
    int a = C[n/2 - 1], b = C[n/2], c = C[n/2 + 1];
    if (med &lt;= a)
      return (a+b) / 2.0;
    else if (med &lt;= c)
      return (med+b) / 2.0;
    else /* med &gt; c */
      return (b+c) / 2.0;
  }
}

double findMedianBaseCase2(int med1, int med2, int C[], int n) {
  if (n % 2 == 0) {
    int a = (((n/2-2) &gt;= 0) ? C[n/2 - 2] : INT_MIN);
    int b = C[n/2 - 1], c = C[n/2];
    int d = (((n/2 + 1) &lt;= n-1) ? C[n/2 + 1] : INT_MAX);
    if (med2 &lt;= b)
      return (b+max(med2,a)) / 2.0;
    else if (med1 &lt;= b)
      return (b+min(med2,c)) / 2.0;
    else if (med1 &gt;= c)
      return (c+min(med1,d)) / 2.0;
    else if (med2 &gt;= c)
      return (c+max(med1,b)) / 2.0;
    else  /* a &lt; med1 &lt;= med2 &lt; b */
      return (med1+med2) / 2.0;
  } else {
    int a = C[n/2 - 1], b = C[n/2], c = C[n/2 + 1];
    if (med1 &gt;= b)
      return min(med1, c);
    else if (med2 &lt;= b)
      return max(med2, a);
    else  /* med1 &lt; b &lt; med2 */
      return b;
  }
}

double findMedianSingleArray(int A[], int n) {
  assert(n &gt; 0);
  return ((n%2 == 1) ? A[n/2] : (A[n/2-1]+A[n/2])/2.0);
}

double findMedianSortedArrays(int A[], int m, int B[], int n) {
  assert(m+n &gt;= 1);
  if (m == 0)
    return findMedianSingleArray(B, n);
  else if (n == 0)
    return findMedianSingleArray(A, m);
  else if (m == 1)
    return findMedianBaseCase(A[0], B, n);
  else if (n == 1)
    return findMedianBaseCase(B[0], A, m);
  else if (m == 2)
    return findMedianBaseCase2(A[0], A[1], B, n);
  else if (n == 2)
    return findMedianBaseCase2(B[0], B[1], A, m);

  int i = m/2, j = n/2, k;
  if (A[i] &lt;= B[j]) {
    k = ((m%2 == 0) ? min(i-1, n-j-1) : min(i, n-j-1));
    assert(k &gt; 0);
    return findMedianSortedArrays(A+k, m-k, B, n-k);
  } else {
    k = ((n%2 == 0) ? min(m-i-1, j-1) : min(m-i-1, j));
    assert(k &gt; 0);
    return findMedianSortedArrays(A, m-k, B+k, n-k);
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-2">2</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-4">4</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-6">6</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-8">8</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-10">10</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-12">12</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-14">14</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-16">16</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-18">18</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-20">20</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-22">22</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-24">24</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-26">26</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-28">28</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-30">30</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-32">32</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-34">34</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-36">36</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-38">38</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-40">40</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-41">41</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-42">42</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-43">43</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-44">44</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-45">45</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-46">46</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-47">47</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-48">48</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-49">49</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-50">50</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-51">51</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-52">52</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-53">53</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-54">54</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-55">55</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-56">56</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-57">57</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-58">58</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-59">59</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-60">60</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-61">61</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-62">62</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-63">63</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-64">64</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-65">65</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-66">66</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-67">67</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-68">68</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-69">69</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-70">70</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-71">71</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-72">72</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-73">73</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-74">74</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-75">75</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-76">76</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-77">77</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-78">78</p><p class="crayon-num" data-line="crayon-54ec1dce1c1f3-79">79</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec1dce1c1f3-80">80</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec1dce1c1f3-1"><span class="t">double</span><span class="h"> </span><span class="e">findMedianBaseCase</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">med</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">C</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">n</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-3"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="i">med</span><span class="o">+</span><span class="v">C</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="sy">)</span><span class="o">/</span><span class="cn">2.0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-4">&#160;</p><p class="crayon-line" id="crayon-54ec1dce1c1f3-5"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">n</span><span class="h"> </span><span class="o">%</span><span class="h"> </span><span class="cn">2</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">a</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">C</span><span class="sy">[</span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="v">b</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">C</span><span class="sy">[</span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">med</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">a</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-8"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">a</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">med</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">b</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">med</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="c">/* med &gt; b */</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">b</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-13"><span class="h">&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">a</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">C</span><span class="sy">[</span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="v">b</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">C</span><span class="sy">[</span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="v">c</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">C</span><span class="sy">[</span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-15"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">med</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">a</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-16"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="i">a</span><span class="o">+</span><span class="i">b</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2.0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">med</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">c</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-18"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="i">med</span><span class="o">+</span><span class="i">b</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2.0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-19"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="c">/* med &gt; c */</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-20"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="i">b</span><span class="o">+</span><span class="i">c</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2.0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-21"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-22"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-23">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-24"><span class="t">double</span><span class="h"> </span><span class="e">findMedianBaseCase2</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">med1</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">med2</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">C</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-25"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">n</span><span class="h"> </span><span class="o">%</span><span class="h"> </span><span class="cn">2</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-26"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">a</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="sy">(</span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="o">-</span><span class="cn">2</span><span class="sy">)</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="v">C</span><span class="sy">[</span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">2</span><span class="sy">]</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="i">INT_MIN</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-27"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">b</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">C</span><span class="sy">[</span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="v">c</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">C</span><span class="sy">[</span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-28"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">d</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="sy">(</span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="v">C</span><span class="sy">[</span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="i">INT_MAX</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-29"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">med2</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">b</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-30"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="i">b</span><span class="o">+</span><span class="e">max</span><span class="sy">(</span><span class="i">med2</span><span class="sy">,</span><span class="i">a</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2.0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-31"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">med1</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">b</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-32"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="i">b</span><span class="o">+</span><span class="e">min</span><span class="sy">(</span><span class="i">med2</span><span class="sy">,</span><span class="i">c</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2.0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-33"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">med1</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="i">c</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-34"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="i">c</span><span class="o">+</span><span class="e">min</span><span class="sy">(</span><span class="i">med1</span><span class="sy">,</span><span class="i">d</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2.0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-35"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">med2</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="i">c</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-36"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="i">c</span><span class="o">+</span><span class="e">max</span><span class="sy">(</span><span class="i">med1</span><span class="sy">,</span><span class="i">b</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2.0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-37"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h">&#160;&#160;</span><span class="c">/* a &lt; med1 &lt;= med2 &lt; b */</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-38"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="i">med1</span><span class="o">+</span><span class="i">med2</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2.0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-39"><span class="h">&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-40"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">a</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">C</span><span class="sy">[</span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="v">b</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">C</span><span class="sy">[</span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="v">c</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">C</span><span class="sy">[</span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-41"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">med1</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="i">b</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-42"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">min</span><span class="sy">(</span><span class="i">med1</span><span class="sy">,</span><span class="h"> </span><span class="i">c</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-43"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">med2</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">b</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-44"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">max</span><span class="sy">(</span><span class="i">med2</span><span class="sy">,</span><span class="h"> </span><span class="i">a</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-45"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h">&#160;&#160;</span><span class="c">/* med1 &lt; b &lt; med2 */</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-46"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">b</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-47"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-48"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-49">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-50"><span class="t">double</span><span class="h"> </span><span class="e">findMedianSingleArray</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-51"><span class="h">&#160;&#160;</span><span class="st">assert</span><span class="sy">(</span><span class="i">n</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-52"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">n</span><span class="o">%</span><span class="cn">2</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="sy">]</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="sy">(</span><span class="v">A</span><span class="sy">[</span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="o">+</span><span class="v">A</span><span class="sy">[</span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="sy">]</span><span class="sy">)</span><span class="o">/</span><span class="cn">2.0</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-53"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-54">&#160;</p><p class="crayon-line" id="crayon-54ec1dce1c1f3-55"><span class="t">double</span><span class="h"> </span><span class="e">findMedianSortedArrays</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">m</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">B</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-56"><span class="h">&#160;&#160;</span><span class="st">assert</span><span class="sy">(</span><span class="i">m</span><span class="o">+</span><span class="i">n</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-57"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">m</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-58"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">findMedianSingleArray</span><span class="sy">(</span><span class="i">B</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-59"><span class="h">&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">n</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-60"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">findMedianSingleArray</span><span class="sy">(</span><span class="i">A</span><span class="sy">,</span><span class="h"> </span><span class="i">m</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-61"><span class="h">&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">m</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-62"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">findMedianBaseCase</span><span class="sy">(</span><span class="v">A</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="i">B</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-63"><span class="h">&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">n</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-64"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">findMedianBaseCase</span><span class="sy">(</span><span class="v">B</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="i">A</span><span class="sy">,</span><span class="h"> </span><span class="i">m</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-65"><span class="h">&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">m</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">2</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-66"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">findMedianBaseCase2</span><span class="sy">(</span><span class="v">A</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="cn">1</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="i">B</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-67"><span class="h">&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">n</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">2</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-68"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">findMedianBaseCase2</span><span class="sy">(</span><span class="v">B</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="v">B</span><span class="sy">[</span><span class="cn">1</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="i">A</span><span class="sy">,</span><span class="h"> </span><span class="i">m</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-69">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-70"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">m</span><span class="o">/</span><span class="cn">2</span><span class="sy">,</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="sy">,</span><span class="h"> </span><span class="i">k</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-71"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">A</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="v">B</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-72"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">k</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">m</span><span class="o">%</span><span class="cn">2</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="e">min</span><span class="sy">(</span><span class="i">i</span><span class="o">-</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="i">j</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="e">min</span><span class="sy">(</span><span class="i">i</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="i">j</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-73"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">assert</span><span class="sy">(</span><span class="i">k</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-74"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">findMedianSortedArrays</span><span class="sy">(</span><span class="i">A</span><span class="o">+</span><span class="i">k</span><span class="sy">,</span><span class="h"> </span><span class="i">m</span><span class="o">-</span><span class="i">k</span><span class="sy">,</span><span class="h"> </span><span class="i">B</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="i">k</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-75"><span class="h">&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-76"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">k</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">n</span><span class="o">%</span><span class="cn">2</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="e">min</span><span class="sy">(</span><span class="i">m</span><span class="o">-</span><span class="i">i</span><span class="o">-</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">j</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="e">min</span><span class="sy">(</span><span class="i">m</span><span class="o">-</span><span class="i">i</span><span class="o">-</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">j</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-77"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">assert</span><span class="sy">(</span><span class="i">k</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-78"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">findMedianSortedArrays</span><span class="sy">(</span><span class="i">A</span><span class="sy">,</span><span class="h"> </span><span class="i">m</span><span class="o">-</span><span class="i">k</span><span class="sy">,</span><span class="h"> </span><span class="i">B</span><span class="o">+</span><span class="i">k</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="i">k</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec1dce1c1f3-79"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec1dce1c1f3-80"><span class="sy">}</span></p></div></td></tr></table></div></div><p><strong><span>EDIT2:</span></strong><br> A reader <a href="http://www.leetcode.com/2011/03/median-of-two-sorted-arrays.html#comment-771">buried.shopno</a> had managed to code the solution more elegantly! I especially like how medianOfThree and medianOfFour were implemented. For more details, read his comment <a href="http://www.leetcode.com/2011/03/median-of-two-sorted-arrays.html#comment-771">below</a>. Great job!</p><p><strong><span>Further thoughts:</span></strong><br> A reader <a href="http://www.leetcode.com/2011/03/median-of-two-sorted-arrays.html#comment-687">nimin98</a> suggested that the base case can be handled by simply doing a direct merge. In other words, we have to merge the short array (containing either one or two elements) with the longer array (pick the four elements near the middle. Deciding which four is another tricky business because of multiple special cases). <a href="http://www.leetcode.com/2011/03/median-of-two-sorted-arrays.html#comment-687">nimin98&#8242;s code</a> has few bugs in the handling of base case.</p><p>In general, The above approaches (including mine) to handle the base case are not recommended due to tricky implementation. How about Binary Search? We can use binary search to find the correct position to insert elements from the shorter array into the longer array, thus completing the merge (You don&#8217;t have to *<em>actually</em>* insert it, recording its index should be suffice).</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a463">Rating: 4.7/<strong>5</strong> (40 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Median of Two Sorted Arrays</span></span>, <span class="rating"><span class="average">4.7</span> out of <span class="best">5</span> based on <span class="votes">40</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="page" id="blog-single" role="main"><div id="post-53" class="post-53 post type-post status-publish format-standard hentry category-string"><div class="post-content"><h1 class="posttitle">A String Replacement Problem</h1><p class="date"> November 6, 2010 <span>in <a href="http://leetcode.com/category/string" title="View all posts in string" rel="category tag">string</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Replace all occurrence of the given pattern to &#8216;X&#8217;.<br>For example, given that the pattern=&#8221;abc&#8221;, replace &#8220;abcdeffdfegabcabc&#8221; with &#8220;XdeffdfegX&#8221;. Note that multiple occurrences of abc&#8217;s that are contiguous will be replaced with only one &#8216;X&#8217;.</p></blockquote><p><span id="more-53"></span><br></p><p>First, it is not clear whether the problem mentions an in-place replacement or not, so be sure to ask this question during an interview. Many interview questions asked are purposely ambiguous. It is expected that the candidate ask thought-provoking questions of the interviewer in order to better answer the question. Here, we will assume that it is an in-place replacement.</p><p><b>Hint:</b><br>If the problem seemed overly complex to you, you are in the wrong path. Try to break the problem into manageable pieces. Consider having a helper function called</p><p class="hiblock">bool isMatch(char *str, const char *pattern)</p><p>which returns true if <i>pattern </i>matches <i>str </i>starting from its first character.</p><p><b>Solution:</b><br>We should take advantage that the replacement is only one character in  length. Assume that the pattern is at least one character in length,  then the replacement&#8217;s length will never exceed the pattern&#8217;s length. This means that when we overwrite the existing string with replacement, we would never overwrite characters that would be read next.</p><p>Two pointers  are also used for an efficient in-place replacement, which traverses the string once without any extra memory.</p><p></p><div id="crayon-54e524a3cb455" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
bool isMatch(char *str, const char* pattern) {
  while (*pattern)
    if (*str++ != *pattern++)
      return false;
  return true;
}

void replace(char str[], const char *pattern) {
  if (str == NULL || pattern == NULL) return;
  char *pSlow = str, *pFast = str;
  int pLen = strlen(pattern);
  while (*pFast != '\0') {
    bool matched = false;
    while (isMatch(pFast, pattern)) {
      matched = true;
      pFast += pLen;
    }
    if (matched)
      *pSlow++ = 'X';
    // tricky case to handle here:
    // pFast might be pointing to '\0',
    // and you don't want to increment past it
    if (*pFast != '\0')
      *pSlow++ = *pFast++;  // *p++ = (*p)++
  }
  // don't forget to add a null character at the end!
  *pSlow = '\0';
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54e524a3cb455-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e524a3cb455-2">2</p><p class="crayon-num" data-line="crayon-54e524a3cb455-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e524a3cb455-4">4</p><p class="crayon-num" data-line="crayon-54e524a3cb455-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e524a3cb455-6">6</p><p class="crayon-num" data-line="crayon-54e524a3cb455-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e524a3cb455-8">8</p><p class="crayon-num" data-line="crayon-54e524a3cb455-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e524a3cb455-10">10</p><p class="crayon-num" data-line="crayon-54e524a3cb455-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e524a3cb455-12">12</p><p class="crayon-num" data-line="crayon-54e524a3cb455-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e524a3cb455-14">14</p><p class="crayon-num" data-line="crayon-54e524a3cb455-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e524a3cb455-16">16</p><p class="crayon-num" data-line="crayon-54e524a3cb455-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e524a3cb455-18">18</p><p class="crayon-num" data-line="crayon-54e524a3cb455-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e524a3cb455-20">20</p><p class="crayon-num" data-line="crayon-54e524a3cb455-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e524a3cb455-22">22</p><p class="crayon-num" data-line="crayon-54e524a3cb455-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e524a3cb455-24">24</p><p class="crayon-num" data-line="crayon-54e524a3cb455-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e524a3cb455-26">26</p><p class="crayon-num" data-line="crayon-54e524a3cb455-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e524a3cb455-28">28</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e524a3cb455-1"><span class="t">bool</span><span class="h"> </span><span class="e">isMatch</span><span class="sy">(</span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="i">str</span><span class="sy">,</span><span class="h"> </span><span class="m">const</span><span class="h"> </span><span class="t">char</span><span class="o">*</span><span class="h"> </span><span class="i">pattern</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e524a3cb455-2"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">*</span><span class="i">pattern</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54e524a3cb455-3"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">*</span><span class="i">str</span><span class="o">++</span><span class="h"> </span><span class="o">!=</span><span class="h"> </span><span class="o">*</span><span class="i">pattern</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e524a3cb455-4"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e524a3cb455-5"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e524a3cb455-6"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e524a3cb455-7">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54e524a3cb455-8"><span class="t">void</span><span class="h"> </span><span class="e">replace</span><span class="sy">(</span><span class="t">char</span><span class="h"> </span><span class="v">str</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="m">const</span><span class="h"> </span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="i">pattern</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e524a3cb455-9"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">str</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="t">NULL</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="v">pattern</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="t">NULL</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e524a3cb455-10"><span class="h">&#160;&#160;</span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="v">pSlow</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">str</span><span class="sy">,</span><span class="h"> </span><span class="o">*</span><span class="v">pFast</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">str</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e524a3cb455-11"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">pLen</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">strlen</span><span class="sy">(</span><span class="i">pattern</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e524a3cb455-12"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">*</span><span class="i">pFast</span><span class="h"> </span><span class="o">!=</span><span class="h"> </span><span class="s">'\0'</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e524a3cb455-13"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">bool</span><span class="h"> </span><span class="v">matched</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e524a3cb455-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="e">isMatch</span><span class="sy">(</span><span class="i">pFast</span><span class="sy">,</span><span class="h"> </span><span class="i">pattern</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e524a3cb455-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">matched</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e524a3cb455-16"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">pFast</span><span class="h"> </span><span class="o">+</span><span class="o">=</span><span class="h"> </span><span class="i">pLen</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e524a3cb455-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e524a3cb455-18"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">matched</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54e524a3cb455-19"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="o">*</span><span class="i">pSlow</span><span class="o">++</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="s">'X'</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e524a3cb455-20"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// tricky case to handle here:</span></p><p class="crayon-line" id="crayon-54e524a3cb455-21"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// pFast might be pointing to '\0',</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e524a3cb455-22"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// and you don't want to increment past it</span></p><p class="crayon-line" id="crayon-54e524a3cb455-23"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">*</span><span class="i">pFast</span><span class="h"> </span><span class="o">!=</span><span class="h"> </span><span class="s">'\0'</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e524a3cb455-24"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="o">*</span><span class="i">pSlow</span><span class="o">++</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="o">*</span><span class="i">pFast</span><span class="o">++</span><span class="sy">;</span><span class="h">&#160;&#160;</span><span class="c">// *p++ = (*p)++</span></p><p class="crayon-line" id="crayon-54e524a3cb455-25"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e524a3cb455-26"><span class="h">&#160;&#160;</span><span class="c">// don't forget to add a null character at the end!</span></p><p class="crayon-line" id="crayon-54e524a3cb455-27"><span class="h">&#160;&#160;</span><span class="o">*</span><span class="v">pSlow</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="s">'\0'</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e524a3cb455-28"><span class="sy">}</span></p></div></td></tr></table></div></div><br><b>Test Cases:</b><pre>Format is string, pattern = answer)
-----------------------------------
a, a = X
aa, aa = X
aa, a = X
aa, aaa = aa
abc, abc = X
abcabc, abc = X
abcabcabc, abc = X
abcaabcaabc, abc = XaXaX
abcaaabcaaabca, abc = XaaXaaXa
abcabcabababcabc, abc = XababX
abcabcabababcabcab, abc = XababXab
aabbaabbaaabbbaabb, aabb = XaXbX
aabbaabbaaabbbaabb, aaabb = aabbaabbXbaabb
aabbaabbaaabbbaaabb, aaabb = aabbaabbXbX
aabbaabbaaabbbaaabc, aaabb = aabbaabbXbaaabc
abcdeffdfegabcabc, abc = XdeffdfegX
abcdeffdfegabcabc, ab = XcdeffdfegXcXc
abcdeffdfegabcabc, a = XbcdeffdfegXbcXbc
abcdeffdfegabcab, abc = XdeffdfegXab
abcdeffdfegabcabcab, abc = XdeffdfegXab
abcdeffdfegabcaabcab, abc = XdeffdfegXaXab
abcdeffdfegabcaaaabcab, abc = XdeffdfegXaaaXab
aaaaaa, a = X
aaaaaa, aa = X
aaaaaa, aaaaaa = X
aaaaaa, aaaaaaa = aaaaaa
aabaababaaab, a = XbXbXbXb
aabaababaaa, a = XbXbXbX
aaaab, a = Xb
baaa, a = bX
aabaaabaab, aaa = aabXbaab
aabaaabaab, aa = XbXabXb
aabaaabaa, aa = XbXabX
</pre><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a53">Rating: 4.9/<strong>5</strong> (8 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">A String Replacement Problem</span></span>, <span class="rating"><span class="average">4.9</span> out of <span class="best">5</span> based on <span class="votes">8</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/11/microsoft-string-replacement-problem.html" rel="tag">http://leetcode.com/2010/11/microsoft-string-replacement-problem.html</a></p></div></div><p id="respond"></p><h3 id="reply-title">Leave a reply <small></small></h3><div id="trackbacks"><h3>5 trackbacks</h3><ul id="trackbacklist"><li> <em>on July 3, 2011</em></li><li> <em>on July 22, 2011</em></li><li> <em>on September 3, 2013</em></li><li> <em>on September 3, 2013</em></li><li> <em>on August 8, 2014</em></li></ul></div></div></div></body><body><div><div id="post-17" class="post-17 post type-post status-publish format-standard hentry category-dynamic-programming"><div class="post-content"><h1 class="posttitle">Multiplication of numbers</h1><p class="date"> April 16, 2010 <span>in <a href="http://leetcode.com/category/dynamic-programming" title="View all posts in dynamic programming" rel="category tag">dynamic programming</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>There is an array A[N] of N numbers. You have to compose an array Output[N] such that Output[i] will be equal to multiplication of all the elements of A[N] except A[i]. Solve it without division operator and in O(n).<span id="more-17"></span></p><p>For example Output[0] will be multiplication of A[1] to A[N-1] and Output[1] will be multiplication of A[0] and from A[2] to A[N-1].</p><p>Example:<br>A:      {4, 3, 2, 1, 2}<br>OUTPUT: {12, 16, 24, 48, 24}</p></blockquote><p>Since the complexity required is O(n), the obvious O(n^2) brute force solution is not good enough here. Since the brute force solution recompute the multiplication each time again and again, we can avoid this by storing the results temporarily in an array.</p><p>Let&#8217;s define array B where element B[i] = multiplication of numbers from A[0] to A[i]. For example, if A = {4, 3, 2, 1, 2}, then B = {4, 12, 24, 24, 48}. Then, we scan the array A from right to left, and have a temporary variable called product which stores the multiplication from right to left so far. Calculating OUTPUT[i] is straight forward, as OUTPUT[i] = B[i-1] * product.</p><p>The above method requires only O(n) time but uses O(n) space. We have to trade memory for speed. Is there a better way? (i.e., runs in O(n) time but without extra space?)</p><p>Yes, actually the temporary table is not required. We can have two variables called left and right, each keeping track of the product of numbers multiplied from left-&gt;right and right-&gt;left. Could you see why this works without extra space?</p><p></p><div id="crayon-54ec8628044ce" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void array_multiplication(int A[], int OUTPUT[], int n) {
 int left = 1;
  int right = 1;
  for (int i = 0; i &lt; n; i++)
  OUTPUT[i] = 1;
  for (int i = 0; i &lt; n; i++) {
    OUTPUT[i] *= left;
    OUTPUT[n - 1 - i] *= right;
    left *= A[i];
    right *= A[n - 1 - i];
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec8628044ce-1"><span class="t">void</span><span class="h"> </span><span class="e">array_multiplication</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">OUTPUT</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec8628044ce-2"><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">left</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec8628044ce-3"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">right</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec8628044ce-4"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ec8628044ce-5"><span class="h">&#160;&#160;</span><span class="v">OUTPUT</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec8628044ce-6"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec8628044ce-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">OUTPUT</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">*=</span><span class="h"> </span><span class="i">left</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec8628044ce-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">OUTPUT</span><span class="sy">[</span><span class="i">n</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">*=</span><span class="h"> </span><span class="i">right</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec8628044ce-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e ">left *</span><span class="o">=</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec8628044ce-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e ">right *</span><span class="o">=</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">n</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="i">i</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec8628044ce-11"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec8628044ce-12"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a17">Rating: 4.5/<strong>5</strong> (34 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Multiplication of numbers</span></span>, <span class="rating"><span class="average">4.5</span> out of <span class="best">5</span> based on <span class="votes">34</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/04/multiplication-of-numbers.html" rel="tag">http://leetcode.com/2010/04/multiplication-of-numbers.html</a></p></div></div></div></body><body><div><div class="page" id="blog-single" role="main"><div id="post-30" class="post-30 post type-post status-publish format-standard hentry category-bit-operations"><div class="post-content"><h1 class="posttitle">Number of 1 bits</h1><p class="date"> September 9, 2010 <span>in <a href="http://leetcode.com/category/bit-operations" title="View all posts in bit operations" rel="category tag">bit operations</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Write a function that takes an unsigned integer and returns the number of &#8217;1&#8242; bits it has. <span id="more-30"></span>For example, the 32-bit integer &#8217;11&#8242; has binary representation 00000000000000000000000000001011, so the function should return 3.</p></blockquote><p><strong>Brute force solution:</strong><br>Iterate 32 times, each time determining if the ith bit is a &#8217;1&#8242; or not. This is probably the easiest solution, and the interviewer would probably not be too happy about it. This solution is also machine dependent (You need to be sure that an unsigned integer is 32-bit). In addition, this solution is not very efficient too, as you need to iterate 32 times no matter what.</p><p><strong>Lookup table solution:</strong><br>If you need maximum speed, lookup table is the way to go. Keep in mind that you need a huge memory for this. Depending on the maximum bits an integer has, you might need up to 4GB of memory to store the table!</p><p><strong>Best solution:</strong><br>Hint: Remember my last post about making use x &amp; (x-1) to determine if an integer is a power of two? Well, there are even better uses for that! Remember every time you perform the operation x &amp; (x-1), a single 1 bit is erased?</p><p>The following solution is machine independent, and is quite efficient. It runs in the order of the number of 1s. In the worst case, it needs to iterate 32 times (for a 32-bit integer), but a case such as the number &#8217;8&#8242; would only need to iterate 1 time.</p><div id="crayon-54eb545e03df6" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int number_of_ones(unsigned int x) {
  int total_ones = 0;
  while (x != 0) {
    x = x &amp; (x-1);
    total_ones++;
  }
  return total_ones;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eb545e03df6-1"><span class="t">int</span><span class="h"> </span><span class="e">number_of_ones</span><span class="sy">(</span><span class="t">unsigned</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">x</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb545e03df6-2"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">total_ones</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb545e03df6-3"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">!=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb545e03df6-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">x</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">x</span><span class="h"> </span><span class="o">&amp;</span><span class="h"> </span><span class="sy">(</span><span class="i">x</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb545e03df6-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">total_ones</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb545e03df6-6"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54eb545e03df6-7"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">total_ones</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb545e03df6-8"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p><strong>More Bit Hacking Fun:</strong><br> If you would like to explore more about bit hacking, I recommend these resources to get you started:</p><p>&#187; <a href="http://www.catonmat.net/blog/low-level-bit-hacks-you-absolutely-must-know/">Low Level Bit Hacks You Absolutely Must Know</a><br>&#187; <a href="http://graphics.stanford.edu/%7Eseander/bithacks.html">Bit Twiddling Hacks</a></p><p>The first one is beginner-friendly, and teaches you the basic but useful bit hacks you encounter often. The latter one is more difficult and has quite some clever bit hacks. Some of the bit hacks contain just one line of code, which is amazing.</p><p><b>EDIT: (More Bit Twiddling Fun)</b></p><p>Try this question from Google CodeJam 2010 for more bit twiddling fun.<br>&#187; <a href="http://www.leetcode.com/2010/05/problem-snapper-chain-gcj-qualification.html">Google CodeJam 2010 Qualification Round Problem A: Snapper Chain</a></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a30">Rating: 4.8/<strong>5</strong> (5 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Number of 1 bits</span></span>, <span class="rating"><span class="average">4.8</span> out of <span class="best">5</span> based on <span class="votes">5</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/09/number-of-1-bits.html" rel="tag">http://leetcode.com/2010/09/number-of-1-bits.html</a></p></div></div><p id="respond"></p><h3 id="reply-title">Leave a reply <small></small></h3></div></div></body><body><div><div class="entry"><blockquote><p>A pile of nuts is in an oasis, across a desert from a town. The pile contains &#8216;N&#8217; kg of nuts, and the town is &#8216;D&#8217; kilometers away from the pile.</p><p>The goal of this problem is to write a program that will compute &#8216;X&#8217;, the maximum amount of nuts that can be transported to the town.</p><p>The nuts are transported by a horse drawn cart that is initially next to the pile of nuts. The cart can carry at most &#8216;C&#8217; kilograms of nuts at any one time. The horse uses the nuts that it is carrying as fuel. It consumes &#8216;F&#8217; kilograms of nuts per kilometer traveled regardless of how much weight it is carrying in the cart. The horse can load and unload the cart without using up any nuts.</p><p>Your program should have a function that takes as input 4 real numbers D,N,F,C and returns one real number: &#8216;X&#8217;</p></blockquote><p><span id="more-74"></span></p><p><a href="http://1.bp.blogspot.com/_UElib2WLeDE/TTgUzam3d-I/AAAAAAAACcg/G0eUEO98J-s/s1600/desert-oasis-photos21.jpg" imageanchor="1"></a></p><div class="separator"><a href="http://1.bp.blogspot.com/_UElib2WLeDE/TTgVVmGJYPI/AAAAAAAACck/5PFVfpPJkAM/s1600/desert-oasis-photos.jpg" imageanchor="1"><img border="0" height="266" src="http://1.bp.blogspot.com/_UElib2WLeDE/TTgVVmGJYPI/AAAAAAAACck/5PFVfpPJkAM/s400/desert-oasis-photos.jpg" width="400"></a></div><p><span>A desert oasis. Simply breathtaking.</span></p><p>Our first natural approach to this problem is to use a greedy approach. Since you have a cart with a maximum capacity of <i>C</i>, it would be rather stupid to not fit in as many nuts as possible into the cart. And there you have it, how about this simple approach: &#8220;If <i>N</i> = <i>C</i>, we could just fit all nuts into the cart and transport all of them in one trip; otherwise if <i>N</i> &gt; <i>C</i>, fit in <i>C</i> kg nuts into the cart, travel to the destination, go back and fetch more nuts back, until there is no more nuts left. This yields the following equation:</p><div class="separator"><a href="http://4.bp.blogspot.com/_UElib2WLeDE/TTgH8pvqzQI/AAAAAAAACcY/JD9J3mQsbkE/s1600/sumX.JPG" imageanchor="1"><img border="0" src="http://4.bp.blogspot.com/_UElib2WLeDE/TTgH8pvqzQI/AAAAAAAACcY/JD9J3mQsbkE/s1600/sumX.JPG"></a></div><div><span>The sum of <i>X</i> is the sum of two terms. The math symbol with the upper square bracket is the <a href="http://en.wikipedia.org/wiki/Floor_and_ceiling_functions">ceiling function</a>.</span></div><p>* Note that the last trip (the right term) must be handled specially as it requires only one single trip!</p><div class="separator"><a href="http://3.bp.blogspot.com/_UElib2WLeDE/TTgVs9LKNyI/AAAAAAAACco/JRcTgfEO1Wg/s1600/DSC6382.jpg" imageanchor="1"><img border="0" height="265" src="http://3.bp.blogspot.com/_UElib2WLeDE/TTgVs9LKNyI/AAAAAAAACco/JRcTgfEO1Wg/s400/DSC6382.jpg" width="400"></a></div><p><span>Our poor horse (or donkey) has to pull the cart over the desert, could this be possible? Or die of hunger if there is no nuts in the cart.</span></p><p>Sharp readers might spot a flaw in the reasoning above. We might not want to go back to transport the last round of nuts, since it might consume more than the nuts transported. Besides, what happens when <i>C</i>  FD? Then, halfway down the trip our poor horse would have died of hunger!</p><p>Well, does that mean if <i>C</i> FD, there&#8217;s no solution? How can you prove so? If there is a solution, how would your algorithm handle such cases? Worst still, even if <i>C</i> &gt; <i>FD</i>, the above method does not necessarily yield the maximum <i>X</i> (Try to find a counter example!).</p><p>For such cases where <i>C</i> FD, we definitely need to somehow subdivide the total distance (ie, choose a point somewhere in between as a transit), but the question remains:</p><p class="hiblock">How and where should we subdivide?</p><p>Here is where things might get a little hairy. Most people might be wondering if <a href="http://www.leetcode.com/search/label/dynamic%20programming">Dynamic Programming (DP)</a> is really needed to find the division point that yields the maximum. It turns out this problem is highly recursive in nature and with one important observation, the derivation of the recursive formula is actually not that difficult (No DP involved though).</p><div class="hiblock"><ul><li>The most important observation is the rate of consumption remain <b>constant </b>no matter how you subdivide the distance, as long as the number of trips required is the same.</li><li>Since we are consuming the nuts at a constant rate, eventually we will reach one such transit point where just enough nuts are consumed such that transporting nuts to the next transit point requires <b>one less round trip</b>.</li></ul></div><p>Let&#8217;s use a concrete example to illustrate the observation above. Assume <i>N</i> = 100, <i>D</i> = 20, <i>C</i> = 50, <i>F</i> = 1. Since <i>N</i>/<i>C</i> = 100/50 = 2, it requires 1 round trip + 1 last trip = a total of <b>3 trips</b> to transport from point <b>A</b> to point <b>B</b>. Assume point <b>B</b> is our transit point, and the total consumption cost is <b>50 kg</b> nuts. Point <b>B</b> could be derived mathematically, which is approximately <b>16.67 km</b> (from point <b>A</b>). Point <b>B</b> must be the first transit point in order to maximize <i>X</i>, since from the next transit onwards you save yourself one full round trip!</p><p>Although we have found point <b>B</b>, we are still not quite done yet. We still need to find point <b>C</b>, point <b>D</b>, &#8230; until it reaches the destination. Since finding point <b>C</b> is just the exact same problem as the original problem (of course, with values of <i>N</i> and <i>D</i> changed), the rest could be solved in a recursive manner.</p><p>Continuing from the above example, we found that point <b>B</b> is <b>16.67 km </b>from point <b>A</b>, which means there is about <b>3.33 km </b>left to the destination, and right at point B we have a total of <b>50 kg </b>of nuts to transport. Since we have to transport the remaining nuts directly to the destination (we could not subdivide again, since there are only <b>50 kg </b>nuts remaining), the maximum <i>X</i> for the above example is: 50 &#8211; 3.33 * 1 = <b>46.67 kg</b>.</p><p>Remember, every time you state a solution as a recursive formula, you must also provide the base case! Without the base case the recursion would never end. The base case is trivial to prove, as illustrated in the code below.</p><p>Please take note that the above example uses a case where <i>N</i> is divisible by <i>C</i>. You would have to figure out the case where <i>N</i> is not divisible by <i>C</i>, too (which should be straight forward once you understand the key observation). This would be left as an exercise to the reader. <img border="0" src="http://4.bp.blogspot.com/_UElib2WLeDE/TK7aJSBFXSI/AAAAAAAACW8/5f8CRD5dJ8o/s1600/smiley.jpg"></p><p>Below is the full code for the solution. Deriving the mathematical formula seemed to be more tricky than I initially thought and is error prone if you&#8217;re not careful. I believe with slight modification: ie, introducing additional variables to be passed in the recursive function, the math derivation complexity could be reduced. Anyhow, my advice is to start with easy examples (like the case where <i>N</i> is divisible by <i>C</i>, and gradually apply to more complicated examples) as you visualize the formula in your head.</p><p><u><b>Edit:</b></u></p><p>Updated code with better comments and added case to handle where it might run out of fuel.</p><p></p><div id="crayon-54dd00fdaeaa6" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
double getMaxNuts(double N, double D, double C, double F) {
  // base case:
  // We have the capacity to carry all nuts,
  // so fetch all the nuts in one trip
  if (N &lt;= C) {
      double nutsAtDestination = N - D*F;
      return (nutsAtDestination &gt;= 0.0) ?
              nutsAtDestination :
              0.0;    // out of fuel!
  }
  
  // # trips you would travel back and forth
  int numTrips = 2*(ceil(N/C) - 1) + 1;
  // how many nuts you consume per km
  double costPerKm = numTrips * F;
  // remaining weight of nuts after consumption
  double remainingNuts = C*(ceil(N/C) - 1.0);
  // this is the distance you are able to travel before you
  // reach ONE LESS round trip fetching nuts
  // derived from eq: N - costPerKm * traveled = remainingNuts
  double traveled = (N - remainingNuts) / costPerKm;
  
  // we are able to travel greater (or equal) than the remaining
  // distance, so fetch the nuts right to the destination
  if (traveled &gt;= D)
      return N - D*costPerKm;
  
  // calculate recursively as we travel ONE less round trip now.
  return getMaxNuts(remainingNuts, D-traveled, C, F);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54dd00fdaeaa6-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dd00fdaeaa6-2">2</p><p class="crayon-num" data-line="crayon-54dd00fdaeaa6-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dd00fdaeaa6-4">4</p><p class="crayon-num" data-line="crayon-54dd00fdaeaa6-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dd00fdaeaa6-6">6</p><p class="crayon-num" data-line="crayon-54dd00fdaeaa6-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dd00fdaeaa6-8">8</p><p class="crayon-num" data-line="crayon-54dd00fdaeaa6-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dd00fdaeaa6-10">10</p><p class="crayon-num" data-line="crayon-54dd00fdaeaa6-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dd00fdaeaa6-12">12</p><p class="crayon-num" data-line="crayon-54dd00fdaeaa6-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dd00fdaeaa6-14">14</p><p class="crayon-num" data-line="crayon-54dd00fdaeaa6-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dd00fdaeaa6-16">16</p><p class="crayon-num" data-line="crayon-54dd00fdaeaa6-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dd00fdaeaa6-18">18</p><p class="crayon-num" data-line="crayon-54dd00fdaeaa6-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dd00fdaeaa6-20">20</p><p class="crayon-num" data-line="crayon-54dd00fdaeaa6-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dd00fdaeaa6-22">22</p><p class="crayon-num" data-line="crayon-54dd00fdaeaa6-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dd00fdaeaa6-24">24</p><p class="crayon-num" data-line="crayon-54dd00fdaeaa6-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dd00fdaeaa6-26">26</p><p class="crayon-num" data-line="crayon-54dd00fdaeaa6-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dd00fdaeaa6-28">28</p><p class="crayon-num" data-line="crayon-54dd00fdaeaa6-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dd00fdaeaa6-30">30</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54dd00fdaeaa6-1"><span class="t">double</span><span class="h"> </span><span class="e">getMaxNuts</span><span class="sy">(</span><span class="t">double</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="t">double</span><span class="h"> </span><span class="i">D</span><span class="sy">,</span><span class="h"> </span><span class="t">double</span><span class="h"> </span><span class="i">C</span><span class="sy">,</span><span class="h"> </span><span class="t">double</span><span class="h"> </span><span class="i">F</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dd00fdaeaa6-2"><span class="h">&#160;&#160;</span><span class="c">// base case:</span></p><p class="crayon-line" id="crayon-54dd00fdaeaa6-3"><span class="h">&#160;&#160;</span><span class="c">// We have the capacity to carry all nuts,</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dd00fdaeaa6-4"><span class="h">&#160;&#160;</span><span class="c">// so fetch all the nuts in one trip</span></p><p class="crayon-line" id="crayon-54dd00fdaeaa6-5"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">N</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">C</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dd00fdaeaa6-6"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="t">double</span><span class="h"> </span><span class="v">nutsAtDestination</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">N</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="e ">D*</span><span class="i">F</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dd00fdaeaa6-7"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="i">nutsAtDestination</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">0.0</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dd00fdaeaa6-8"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">nutsAtDestination</span><span class="h"> </span><span class="o">:</span></p><p class="crayon-line" id="crayon-54dd00fdaeaa6-9"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="cn">0.0</span><span class="sy">;</span><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// out of fuel!</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dd00fdaeaa6-10"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54dd00fdaeaa6-11"><span class="h">&#160;&#160;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dd00fdaeaa6-12"><span class="h">&#160;&#160;</span><span class="c">// # trips you would travel back and forth</span></p><p class="crayon-line" id="crayon-54dd00fdaeaa6-13"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">numTrips</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">2</span><span class="o">*</span><span class="sy">(</span><span class="e">ceil</span><span class="sy">(</span><span class="i">N</span><span class="o">/</span><span class="i">C</span><span class="sy">)</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dd00fdaeaa6-14"><span class="h">&#160;&#160;</span><span class="c">// how many nuts you consume per km</span></p><p class="crayon-line" id="crayon-54dd00fdaeaa6-15"><span class="h">&#160;&#160;</span><span class="t">double</span><span class="h"> </span><span class="v">costPerKm</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e ">numTrips *</span><span class="h"> </span><span class="i">F</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dd00fdaeaa6-16"><span class="h">&#160;&#160;</span><span class="c">// remaining weight of nuts after consumption</span></p><p class="crayon-line" id="crayon-54dd00fdaeaa6-17"><span class="h">&#160;&#160;</span><span class="t">double</span><span class="h"> </span><span class="v">remainingNuts</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e ">C*</span><span class="sy">(</span><span class="e">ceil</span><span class="sy">(</span><span class="i">N</span><span class="o">/</span><span class="i">C</span><span class="sy">)</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1.0</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dd00fdaeaa6-18"><span class="h">&#160;&#160;</span><span class="c">// this is the distance you are able to travel before you</span></p><p class="crayon-line" id="crayon-54dd00fdaeaa6-19"><span class="h">&#160;&#160;</span><span class="c">// reach ONE LESS round trip fetching nuts</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dd00fdaeaa6-20"><span class="h">&#160;&#160;</span><span class="c">// derived from eq: N - costPerKm * traveled = remainingNuts</span></p><p class="crayon-line" id="crayon-54dd00fdaeaa6-21"><span class="h">&#160;&#160;</span><span class="t">double</span><span class="h"> </span><span class="v">traveled</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="i">N</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="i">remainingNuts</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="i">costPerKm</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dd00fdaeaa6-22"><span class="h">&#160;&#160;</span></p><p class="crayon-line" id="crayon-54dd00fdaeaa6-23"><span class="h">&#160;&#160;</span><span class="c">// we are able to travel greater (or equal) than the remaining</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dd00fdaeaa6-24"><span class="h">&#160;&#160;</span><span class="c">// distance, so fetch the nuts right to the destination</span></p><p class="crayon-line" id="crayon-54dd00fdaeaa6-25"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">traveled</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="i">D</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dd00fdaeaa6-26"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">N</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="e ">D*</span><span class="i">costPerKm</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dd00fdaeaa6-27"><span class="h">&#160;&#160;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dd00fdaeaa6-28"><span class="h">&#160;&#160;</span><span class="c">// calculate recursively as we travel ONE less round trip now.</span></p><p class="crayon-line" id="crayon-54dd00fdaeaa6-29"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">getMaxNuts</span><span class="sy">(</span><span class="i">remainingNuts</span><span class="sy">,</span><span class="h"> </span><span class="i">D</span><span class="o">-</span><span class="i">traveled</span><span class="sy">,</span><span class="h"> </span><span class="i">C</span><span class="sy">,</span><span class="h"> </span><span class="i">F</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dd00fdaeaa6-30"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a74">Rating: 2.9/<strong>5</strong> (16 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Nuts in an Oasis</span></span>, <span class="rating"><span class="average">2.9</span> out of <span class="best">5</span> based on <span class="votes">16</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Determine whether an integer is a palindrome. Do this without extra space.</p></blockquote><p><span id="more-1224"></span></p><p><strong><span>Online Judge</span></strong><br> This problem is available at <a href="http://www.leetcode.com/onlinejudge">Online Judge</a>. <a href="http://www.leetcode.com/onlinejudge">Head over there</a> and it will judge your solution. Currently only able to compile C++/Java code. If you are using other languages, you can still verify your solution by looking at the judge&#8217;s test cases and its expected output.</p><p>In previous posts (<a href="http://www.leetcode.com/2011/11/longest-palindromic-substring-part-i.html">Longest Palindromic Substring Part I</a>, <a href="http://www.leetcode.com/2011/11/longest-palindromic-substring-part-ii.html">Part II</a>) we have discussed multiple approaches on finding the longest palindrome in a string. In this post we discuss ways to determine whether an integer is a palindrome. Sounds easy?</p><p><strong>Hint:</strong><br> Don&#8217;t be deceived by this problem which seemed easy to solve. Also note the restriction of doing it without extra space. Think of a generic solution that is not language/platform specific. Also, consider cases where your solution might go wrong.</p><p><strong>Solution:</strong><br> First, the problem statement did not specify if negative integers qualify as palindromes. Does negative integer such as -1 qualify as a palindrome? Finding out the full requirements of a problem before coding is what every programmer <i>must</i> do. For the purpose of discussion here, we define negative integers as non-palindromes.</p><p>The most intuitive approach is to first represent the integer as a string, since it is more convenient to manipulate. Although this certainly does work, it violates the restriction of not using extra space. (ie, you have to allocate <i>n</i> characters to store the reversed integer as string, where <i>n</i> is the maximum number of digits). I know, this sound like an unreasonable requirement (since it uses so little space), but don&#8217;t most interview problems have such requirements?</p><p>Another approach is to first reverse the number. If the number is the same as its reversed, then it must be a palindrome. You could reverse a number by doing the following:</p><p></p><div id="crayon-54ec68ec46df0" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int reverse(int num) {
  assert(num &gt;= 0);   // for non-negative integers only.
  int rev = 0;
  while (num != 0) {
    rev = rev * 10 + num % 10;
    num /= 10;
  }
  return rev;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec68ec46df0-1"><span class="t">int</span><span class="h"> </span><span class="e">reverse</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">num</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec68ec46df0-2"><span class="h">&#160;&#160;</span><span class="st">assert</span><span class="sy">(</span><span class="i">num</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="sy">;</span><span class="h">&#160;&#160; </span><span class="c">// for non-negative integers only.</span></p><p class="crayon-line" id="crayon-54ec68ec46df0-3"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">rev</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec68ec46df0-4"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">num</span><span class="h"> </span><span class="o">!=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec68ec46df0-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">rev</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e ">rev *</span><span class="h"> </span><span class="cn">10</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="i">num</span><span class="h"> </span><span class="o">%</span><span class="h"> </span><span class="cn">10</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec68ec46df0-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">num</span><span class="h"> </span><span class="o">/=</span><span class="h"> </span><span class="cn">10</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec68ec46df0-7"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec68ec46df0-8"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">rev</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec68ec46df0-9"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>This seemed to work too, but did you consider the possibility that the reversed number might overflow? If it overflows, the behavior is language specific (For Java the number wraps around on overflow, but in C/C++ its behavior is undefined). Yuck.</p><p>Of course, we could avoid overflow by storing and returning a type that has larger size than int (ie, long long). However, do note that this is language specific, and the larger type might not always be available on all languages.</p><p>We could construct a better and more generic solution. One pointer is that, we must start comparing the digits somewhere. And you know there could only be two ways, either expand from the middle or compare from the two ends.</p><p>It turns out that comparing from the two ends is easier. First, compare the first and last digit. If they are not the same, it must not be a palindrome. If they are the same, chop off one digit from both ends and continue until you have no digits left, which you conclude that it must be a palindrome.</p><p>Now, getting and chopping the last digit is easy. However, getting and chopping the first digit in a generic way requires some thought. I will leave this to you as an exercise. Please think your solution out before you peek on the solution below.</p><p></p><div id="crayon-54ec68ec46e96" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
bool isPalindrome(int x) {
  if (x &lt; 0) return false;
  int div = 1;
  while (x / div &gt;= 10) {
    div *= 10;
  }        
  while (x != 0) {
    int l = x / div;
    int r = x % 10;
    if (l != r) return false;
    x = (x % div) / 10;
    div /= 100;
  }
  return true;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec68ec46e96-1"><span class="t">bool</span><span class="h"> </span><span class="e">isPalindrome</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">x</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec68ec46e96-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec68ec46e96-3"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">div</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec68ec46e96-4"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="i">div</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">10</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec68ec46e96-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e ">div *</span><span class="o">=</span><span class="h"> </span><span class="cn">10</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec68ec46e96-6"><span class="h">&#160;&#160;</span><span class="sy">}</span><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span></p><p class="crayon-line" id="crayon-54ec68ec46e96-7"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">!=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec68ec46e96-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">l</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">x</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="i">div</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec68ec46e96-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">r</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">x</span><span class="h"> </span><span class="o">%</span><span class="h"> </span><span class="cn">10</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec68ec46e96-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">l</span><span class="h"> </span><span class="o">!=</span><span class="h"> </span><span class="i">r</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec68ec46e96-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">x</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">%</span><span class="h"> </span><span class="i">div</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">10</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec68ec46e96-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">div</span><span class="h"> </span><span class="o">/=</span><span class="h"> </span><span class="cn">100</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec68ec46e96-13"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec68ec46e96-14"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec68ec46e96-15"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p><strong>Alternative Solution:</strong><br> Credits go to <font color="red"><strong><a href="http://www.leetcode.com/2012/01/palindrome-number.html#comment-11400">Dev</a></strong></font> who suggested a recursive solution (if extra stack space does not count as extra space), which is pretty neat too.</p><p></p><div id="crayon-54ec68ec46f43" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
bool isPalindrome(int x, int &amp;y) {
  if (x &lt; 0) return false;
  if (x == 0) return true;
  if (isPalindrome(x/10, y) &amp;&amp; (x%10 == y%10)) {
    y /= 10;
    return true;
  } else {
    return false;
  }
}
bool isPalindrome(int x) {
  return isPalindrome(x, x);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec68ec46f43-1"><span class="t">bool</span><span class="h"> </span><span class="e">isPalindrome</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">x</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">y</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec68ec46f43-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec68ec46f43-3"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">x</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec68ec46f43-4"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="e">isPalindrome</span><span class="sy">(</span><span class="i">x</span><span class="o">/</span><span class="cn">10</span><span class="sy">,</span><span class="h"> </span><span class="i">y</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="sy">(</span><span class="i">x</span><span class="o">%</span><span class="cn">10</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">y</span><span class="o">%</span><span class="cn">10</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec68ec46f43-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">y</span><span class="h"> </span><span class="o">/=</span><span class="h"> </span><span class="cn">10</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec68ec46f43-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec68ec46f43-7"><span class="h">&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec68ec46f43-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec68ec46f43-9"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec68ec46f43-10"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ec68ec46f43-11"><span class="t">bool</span><span class="h"> </span><span class="e">isPalindrome</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">x</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec68ec46f43-12"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">isPalindrome</span><span class="sy">(</span><span class="i">x</span><span class="sy">,</span><span class="h"> </span><span class="i">x</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec68ec46f43-13"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a1224">Rating: 4.7/<strong>5</strong> (115 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Palindrome Number</span></span>, <span class="rating"><span class="average">4.7</span> out of <span class="best">5</span> based on <span class="votes">115</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div id="post-72" class="post-72 post type-post status-publish format-standard hentry category-uncategorized"><div class="post-content"><h1 class="posttitle">Peg Game Problem Analysis</h1><p class="date"> January 10, 2011 <span>in <a href="http://leetcode.com/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>At the arcade, you can play a simple game where a ball is dropped into the top of the game, from a position of your choosing. There are a number of pegs that the ball will bounce off of as it drops through the game. Whenever the ball hits a peg, it will bounce to the left with probability 0.5 and to the right with probability 0.5. The one exception to this is when it hits a peg on the far left or right side, in which case it always bounces towards the middle.</p><p>When the game was first made, the pegs where arranged in a regular grid. However, it&#8217;s an old game, and now some of the pegs are missing. Your goal in the game is to get the ball to fall out of the bottom of the game in a specific location. Your task is, given the arrangement of the game, to determine the optimal place to drop the ball, such that the probability of getting it to this specific location is maximized.</p><p>The image below shows an example of a game with five rows of five columns. Notice that the top row has five pegs, the next row has four pegs, the next five, and so on. With five columns, there are four choices to drop the ball into (indexed from 0). Note that in this example, there are three pegs missing. The top row is row 0, and the leftmost peg is column 0, so the coordinates of the missing pegs are (1,1), (2,1) and (3,2). In this example, the best place to drop the ball is on the far left, in column 0, which gives a 50% chance that it will end in the goal.</p><pre>x.x.x.x.x
 x...x.x
x...x.x.x
 x.x...x
x.x.x.x.x
 G
</pre><p>&#8216;x&#8217; indicates a peg, &#8216;.&#8217; indicates empty space.</p><p><b>Input</b><br>You should first read an integer <b>N</b>, the number of test cases. Each of the next <b>N </b>lines will then contain a single test case. Each test case will start with integers <b>R </b>and <b>C</b>, the number of rows and columns (<b>R </b>will be odd). Next, an integer <b>K </b>will specify the target column. Finally, an integer <b>M </b>will be followed by <b>M </b>pairs of integer <b>r<sub>i</sub></b> and <b>c<sub>i</sub></b>, giving the locations of the missing pegs.</p><p><b>Constraints</b><br>1 = <b>N</b> = 100<br>3 = <b>R</b>,<b>C</b> = 100</p><p>The top and bottom rows will not have any missing pegs.<br>Other parameters will all be valid, given <b>R </b>and <b>C</b></p><p><b>Output</b><br>For each test case, you should output an integer, the location to drop the ball into, followed by the probability that the ball will end in columns <b>K</b>, formatted with exactly six digits after the decimal point (round the last digit, don&#8217;t truncate).</p><p><b>Notes</b><br>The input will be designed such that minor rounding errors will not impact the output (i.e. there will be no ties or near &#8212; up to 1E-9 &#8212; ties, and the direction of rounding for the output will not be impacted by small errors).</p></blockquote><p>Here is my problem analysis for Facebook Hacker Cup Qualification Round: Peg Game.</p><p><u><b>Peg Game Problem Analysis:</b></u><br>This is the most confusing problem of the three problems due to the problem description being unnecessary long and ambiguous. You can see how many people are asking clarifications for this problem in the wall posts compared to the other problems (I really think Facebook should create a clarification section to answer people&#8217;s questions). Besides, the example they used to illustrate the problem is not included in the sample input, which doesn&#8217;t help at all.</p><div><a href="http://2.bp.blogspot.com/_UElib2WLeDE/TSvQrmRgLqI/AAAAAAAACcQ/uCnM5VuUJTY/s1600/Galton-board.jpg" imageanchor="1"><img border="0" height="331" src="http://2.bp.blogspot.com/_UElib2WLeDE/TSvQrmRgLqI/AAAAAAAACcQ/uCnM5VuUJTY/s400/Galton-board.jpg" width="400"></a><span><br></span></div><div><span> A <a href="http://en.wikipedia.org/wiki/Galton_board">Galton box</a> (also known as the bean machine) is a machine consists of a vertical board with interleaved rows of  pins. Balls are dropped from the top, and bounce left and right as they  hit the pins. Eventually, they are collected into one-ball-wide bins at  the bottom. The height of ball columns in the bins approximates a <a href="http://en.wikipedia.org/wiki/Normal_distribution" title="Normal distribution">bell curve</a>.</span></div><p>It definitely takes me more than few times re-reading the problem description to finally &#8220;guess&#8221; what they really mean. Anyway, after understanding the problem, it is not that difficult to code the solution using a direct simulation.</p><p>However, there are a few places where you need to be careful, and I found that most people fall into this fallacy below:</p><p class="hiblock">Count the total number of ways to reach the goal, then divide it by the total number of ways to reach the bottom.</p><p>Why the above approach is incorrect? This is simply because one necessary condition for the above statement to be true is that ways that reaches the bottom must all be equally likely. Unfortunately, this is not necessarily true.</p><p>The correct method is to multiply the probabilities as the ball falls in a step-wise fashion. You would also need to determine if the ball is at an edge peg. If it is at an edge peg, then the ball always fall toward the opposite direction of the edge peg with 100% chance. On the other hand, if it is not at an edge peg, then it will fall in either direction with 50-50 chance.</p><p>Below is the coded solution for <b>Peg Game</b>.</p><p></p><div id="crayon-54e7d7cb57735" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
char pegs[2000][2000];
void initPegs(int R, int C) {
  int c, CLim, k;
  for (int r = 0; r &lt; R; r++) {
    if (r%2==0) {CLim = C-1; k = 0;}
    else {CLim = C-2; k = 1; pegs[r][0] = '#';}
    for (c = 0; c &lt; CLim; c++) {
      pegs[r][2*c+k] = 'x';
      pegs[r][2*c+1+k] = '.';
    }
    pegs[r][2*c+k] = 'x';
    pegs[r][2*c+1+k] = '#';
  }
}

void setMissingPeg(int r, int c) {
  if (r % 2 == 0) {
    pegs[r][2*c] = '.';
  } else {
    pegs[r][2*c+1] = '.';
  }
}

double ways[2000][2000];
double putBall(int colK, int targetCol, int R, int C) {
  for (int i = 0; i &lt; 2000; i++)
    for (int j = 0; j &lt; 2000; j++)
      ways[i][j] = 0.0;
  ways[0][2*colK+1] = 1.0;
  for (int i = 1; i &lt; R; i++) {
    for (int j = 0; j &lt; 2*C-1; j++) {
      if (pegs[i][j] == '.') {
        if (pegs[i][j-1] == 'x') {
          if (i%2 == 1 &amp;&amp; j == 2)
            ways[i][j] += ways[i-1][j-1];
          else
            ways[i][j] += .5 * ways[i-1][j-1];
        }
        if (pegs[i][j+1] == 'x') {
          if (i%2 == 1 &amp;&amp; j == 2*C-4)
            ways[i][j] += ways[i-1][j+1];
          else
            ways[i][j] += .5 * ways[i-1][j+1];
        }
        if (pegs[i-1][j] == '.') {
          ways[i][j] += ways[i-1][j];
        }
      }
    }
  }
  return ways[R-1][1+2*targetCol];
}

int main() {
  int N, R, C, K, M, r, c;
  cin &gt;&gt; N;
  for (int i = 0; i &lt; N; i++) {
    cin &gt;&gt; R &gt;&gt; C;
    initPegs(R, C);
    cin &gt;&gt; K;
    cin &gt;&gt; M;
    for (int j = 0; j &lt; M; j++) {
      cin &gt;&gt; r &gt;&gt; c;
      setMissingPeg(r, c);
    }
    int maxCol = 0;
    double maxP = 0.0;
    for (int j = 0; j &lt; C-1; j++) {
      double p = putBall(j, K, R, C);
      if (p &gt; maxP) {
        maxP = p;
        maxCol = j;
      }
    }
    printf("%d %.6f\n", maxCol, maxP);
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54e7d7cb57735-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-2">2</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-4">4</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-6">6</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-8">8</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-10">10</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-12">12</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-14">14</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-16">16</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-18">18</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-20">20</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-22">22</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-24">24</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-26">26</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-28">28</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-30">30</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-32">32</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-34">34</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-36">36</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-38">38</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-40">40</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-41">41</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-42">42</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-43">43</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-44">44</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-45">45</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-46">46</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-47">47</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-48">48</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-49">49</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-50">50</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-51">51</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-52">52</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-53">53</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-54">54</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-55">55</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-56">56</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-57">57</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-58">58</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-59">59</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-60">60</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-61">61</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-62">62</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-63">63</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-64">64</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-65">65</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-66">66</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-67">67</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-68">68</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-69">69</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-70">70</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-71">71</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-72">72</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-73">73</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-74">74</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-75">75</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7d7cb57735-76">76</p><p class="crayon-num" data-line="crayon-54e7d7cb57735-77">77</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e7d7cb57735-1"><span class="t">char</span><span class="h"> </span><span class="v">pegs</span><span class="sy">[</span><span class="cn">2000</span><span class="sy">]</span><span class="sy">[</span><span class="cn">2000</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-2"><span class="t">void</span><span class="h"> </span><span class="e">initPegs</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">R</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">C</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-3"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="i">c</span><span class="sy">,</span><span class="h"> </span><span class="i">CLim</span><span class="sy">,</span><span class="h"> </span><span class="i">k</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-4"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">r</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">r</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">R</span><span class="sy">;</span><span class="h"> </span><span class="i">r</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">r</span><span class="o">%</span><span class="cn">2</span><span class="o">==</span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span><span class="v">CLim</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">C</span><span class="o">-</span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="v">k</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="sy">{</span><span class="v">CLim</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">C</span><span class="o">-</span><span class="cn">2</span><span class="sy">;</span><span class="h"> </span><span class="v">k</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="v">pegs</span><span class="sy">[</span><span class="i">r</span><span class="sy">]</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="s">'#'</span><span class="sy">;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="v">c</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">c</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">CLim</span><span class="sy">;</span><span class="h"> </span><span class="i">c</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-8"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">pegs</span><span class="sy">[</span><span class="i">r</span><span class="sy">]</span><span class="sy">[</span><span class="cn">2</span><span class="o">*</span><span class="i">c</span><span class="o">+</span><span class="i">k</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="s">'x'</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-9"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">pegs</span><span class="sy">[</span><span class="i">r</span><span class="sy">]</span><span class="sy">[</span><span class="cn">2</span><span class="o">*</span><span class="i">c</span><span class="o">+</span><span class="cn">1</span><span class="o">+</span><span class="i">k</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="s">'.'</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">pegs</span><span class="sy">[</span><span class="i">r</span><span class="sy">]</span><span class="sy">[</span><span class="cn">2</span><span class="o">*</span><span class="i">c</span><span class="o">+</span><span class="i">k</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="s">'x'</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">pegs</span><span class="sy">[</span><span class="i">r</span><span class="sy">]</span><span class="sy">[</span><span class="cn">2</span><span class="o">*</span><span class="i">c</span><span class="o">+</span><span class="cn">1</span><span class="o">+</span><span class="i">k</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="s">'#'</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-13"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-14"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-15">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-16"><span class="t">void</span><span class="h"> </span><span class="e">setMissingPeg</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">r</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">c</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-17"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">r</span><span class="h"> </span><span class="o">%</span><span class="h"> </span><span class="cn">2</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-18"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">pegs</span><span class="sy">[</span><span class="i">r</span><span class="sy">]</span><span class="sy">[</span><span class="cn">2</span><span class="o">*</span><span class="i">c</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="s">'.'</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-19"><span class="h">&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-20"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">pegs</span><span class="sy">[</span><span class="i">r</span><span class="sy">]</span><span class="sy">[</span><span class="cn">2</span><span class="o">*</span><span class="i">c</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="s">'.'</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-21"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-22"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-23">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-24"><span class="t">double</span><span class="h"> </span><span class="v">ways</span><span class="sy">[</span><span class="cn">2000</span><span class="sy">]</span><span class="sy">[</span><span class="cn">2000</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-25"><span class="t">double</span><span class="h"> </span><span class="e">putBall</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">colK</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">targetCol</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">R</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">C</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-26"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="cn">2000</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-27"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="cn">2000</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-28"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">ways</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0.0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-29"><span class="h">&#160;&#160;</span><span class="v">ways</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="sy">[</span><span class="cn">2</span><span class="o">*</span><span class="i">colK</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1.0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-30"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">R</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-31"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="cn">2</span><span class="o">*</span><span class="i">C</span><span class="o">-</span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-32"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">pegs</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="s">'.'</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-33"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">pegs</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">[</span><span class="i">j</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="s">'x'</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-34"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">i</span><span class="o">%</span><span class="cn">2</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">1</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">2</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-35"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">ways</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">+</span><span class="o">=</span><span class="h"> </span><span class="v">ways</span><span class="sy">[</span><span class="i">i</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="i">j</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-36"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">else</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-37"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">ways</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">+</span><span class="o">=</span><span class="h"> </span><span class="sy">.</span><span class="cn">5</span><span class="h"> </span><span class="o">*</span><span class="h"> </span><span class="v">ways</span><span class="sy">[</span><span class="i">i</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="i">j</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-38"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-39"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">pegs</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">[</span><span class="i">j</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="s">'x'</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-40"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">i</span><span class="o">%</span><span class="cn">2</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">1</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">2</span><span class="o">*</span><span class="i">C</span><span class="o">-</span><span class="cn">4</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-41"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">ways</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">+</span><span class="o">=</span><span class="h"> </span><span class="v">ways</span><span class="sy">[</span><span class="i">i</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="i">j</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-42"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">else</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-43"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">ways</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">+</span><span class="o">=</span><span class="h"> </span><span class="sy">.</span><span class="cn">5</span><span class="h"> </span><span class="o">*</span><span class="h"> </span><span class="v">ways</span><span class="sy">[</span><span class="i">i</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="i">j</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-44"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-45"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">pegs</span><span class="sy">[</span><span class="i">i</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="s">'.'</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-46"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">ways</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">+</span><span class="o">=</span><span class="h"> </span><span class="v">ways</span><span class="sy">[</span><span class="i">i</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-47"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-48"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-49"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-50"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-51"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="v">ways</span><span class="sy">[</span><span class="i">R</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="cn">1</span><span class="o">+</span><span class="cn">2</span><span class="o">*</span><span class="i">targetCol</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-52"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-53">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-54"><span class="t">int</span><span class="h"> </span><span class="e">main</span><span class="sy">(</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-55"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="i">R</span><span class="sy">,</span><span class="h"> </span><span class="i">C</span><span class="sy">,</span><span class="h"> </span><span class="i">K</span><span class="sy">,</span><span class="h"> </span><span class="i">M</span><span class="sy">,</span><span class="h"> </span><span class="i">r</span><span class="sy">,</span><span class="h"> </span><span class="i">c</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-56"><span class="h">&#160;&#160;</span><span class="i">cin</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">N</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-57"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">N</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-58"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cin</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">R</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">C</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-59"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">initPegs</span><span class="sy">(</span><span class="i">R</span><span class="sy">,</span><span class="h"> </span><span class="i">C</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-60"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cin</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">K</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-61"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cin</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">M</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-62"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">M</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-63"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cin</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">r</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">c</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-64"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="e">setMissingPeg</span><span class="sy">(</span><span class="i">r</span><span class="sy">,</span><span class="h"> </span><span class="i">c</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-65"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-66"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">maxCol</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-67"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">double</span><span class="h"> </span><span class="v">maxP</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0.0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-68"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">C</span><span class="o">-</span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-69"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="t">double</span><span class="h"> </span><span class="v">p</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">putBall</span><span class="sy">(</span><span class="i">j</span><span class="sy">,</span><span class="h"> </span><span class="i">K</span><span class="sy">,</span><span class="h"> </span><span class="i">R</span><span class="sy">,</span><span class="h"> </span><span class="i">C</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-70"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">p</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">maxP</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-71"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">maxP</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-72"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">maxCol</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">j</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-73"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-74"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-75"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">printf</span><span class="sy">(</span><span class="s">"%d %.6f\n"</span><span class="sy">,</span><span class="h"> </span><span class="i">maxCol</span><span class="sy">,</span><span class="h"> </span><span class="i">maxP</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7d7cb57735-76"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e7d7cb57735-77"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a72">Rating: 2.3/<strong>5</strong> (3 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Peg Game Problem Analysis</span></span>, <span class="rating"><span class="average">2.3</span> out of <span class="best">5</span> based on <span class="votes">3</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2011/01/peg-game-problem-analysis.html" rel="tag">http://leetcode.com/2011/01/peg-game-problem-analysis.html</a></p></div></div></div></body><body><div><div id="post-44" class="post-44 post type-post status-publish format-standard hentry category-backtracking"><div class="post-content"><h1 class="posttitle">Print All Combinations of a Number as a Sum of Candidate Numbers</h1><p class="date"> September 30, 2010 <span>in <a href="http://leetcode.com/category/backtracking" title="View all posts in backtracking" rel="category tag">backtracking</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Given a target number, and a series of candidate numbers, print out all combinations, so that the sum of candidate numbers equals to the target.<br> <span id="more-44"></span><br> Here order is not important, so don&#8217;t print the duplicated combination.</p><p>e.g. target is <strong>7</strong>, candidate is <strong>2</strong>,<strong>3</strong>,<strong>6</strong>,<strong>7</strong><br> output should be <strong>7</strong> and <strong>3</strong>+<strong>2</strong>+<strong>2</strong> (but not print <strong>2</strong>+<strong>3</strong>+<strong>2</strong>, <strong>2</strong>+<strong>2</strong>+<strong>3</strong>)</p></blockquote><p>Please note that the same repeated number may be chosen from the candidate set. We may also assume that the candidate set does not contain duplicate numbers, as this will be redundant. We assume all numbers will be positive integers, I will explain why this assumption is important for obtaining a solution later.</p><p><strong>Hint:</strong><br> Think about how to avoid printing duplicates. Think about developing a systematic method to search all possible solutions. How do you determine the condition that ends the search? (<strong>Note:</strong> <span>Thanks to a kind reader</span> who pointed out that <em>sorting the numbers </em>is not necessary for removing duplicates, as indicated in my previous version of this post.)</p><div><a href="http://1.bp.blogspot.com/_UElib2WLeDE/TKMGpoqmi3I/AAAAAAAACVw/zkiyFZ3yBOw/s1600/wordlock.jpg"><img src="http://1.bp.blogspot.com/_UElib2WLeDE/TKMGpoqmi3I/AAAAAAAACVw/zkiyFZ3yBOw/s320/wordlock.jpg" border="0" alt="" width="320" height="320"></a><br> A wordlock combination lock</div><p><strong>Solution:</strong><br> To search for all combination, we use a&#160;backtracking algorithm. Here, we use the above example of candidate=<strong>{2,3,6,7}</strong> and target=<strong>7</strong>.</p><p>First, we start with a sum of <strong>0</strong>. Then, we iterate over all possibilities that can be added to sum, which yields the possible set of sum=<strong>{2,3,6,7}</strong>. Assume now that sum=<strong>2</strong>, we continue adding all possible candidate numbers <strong>{2,3,6,7}</strong> to sum=<strong>2</strong>, which yields sum=<strong>{4,5,8,9}</strong>. Each step we have to use an array to keep track of all the indices of candidate numbers that add to the current sum, so that we can print the combination later. The next case would be sum=<strong>3</strong>. We look at all possible candidate numbers <strong>{3,6,7</strong>} to be added to sum=<strong>3</strong>, which yields sum=<strong>{6,9,10}</strong>. Note that there is no need to look backward (ie, candidate numbers that are smaller than <strong>3</strong>), as this would only yield duplicate results. We keep doing this recursively, until we reach the conditions below, where we stop.</p><p>We stop when the sum is <em>greater </em>than the target sum. Why? Remember our earlier assumption that candidate numbers must <em>all be positive</em>? Since the candidate array contains only <em>positive numbers</em>, if we continue searching, we would only add larger numbers to the sum, and this would not help us achieving the target sum. The other case where we stop is when the sum is <em>equal </em>to the target sum. Hooray! We have found a valid combination.</p><p>If the candidate array contains both positive and negative numbers, is there a condition to end the search? To answer this question, think of this example where you could add up to a very large positive number (with repeated sum of positive numbers) and then repeatedly subtract down to a very small number. There would be infinitely number of combinations that can be found, and yet searching could not be stopped with an ending condition.</p><div id="crayon-54ec0f08e0e6b" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void printSum(int candidates[], int index[], int n) {
  for (int i = 1; i &lt;= n; i++)
    cout &lt;&lt; candidates[index[i]] &lt;&lt; ((i == n) ? "" : "+");
  cout &lt;&lt; endl;
}

void solve(int target, int sum, int candidates[], int sz, int index[], int n) {
  if (sum &gt; target)
    return;
  if (sum == target)
    printSum(candidates, index, n);

  for (int i = index[n]; i &lt; sz; i++) {
    index[n+1] = i;
    solve(target, sum + candidates[i], candidates, sz, index, n+1);
  }
}

void solve(int target, int candidates[], int sz) {
  int index[10000];
  index[0] = 0;
  solve(target, 0, candidates, sz, index, 0);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ec0f08e0e6b-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec0f08e0e6b-2">2</p><p class="crayon-num" data-line="crayon-54ec0f08e0e6b-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec0f08e0e6b-4">4</p><p class="crayon-num" data-line="crayon-54ec0f08e0e6b-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec0f08e0e6b-6">6</p><p class="crayon-num" data-line="crayon-54ec0f08e0e6b-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec0f08e0e6b-8">8</p><p class="crayon-num" data-line="crayon-54ec0f08e0e6b-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec0f08e0e6b-10">10</p><p class="crayon-num" data-line="crayon-54ec0f08e0e6b-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec0f08e0e6b-12">12</p><p class="crayon-num" data-line="crayon-54ec0f08e0e6b-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec0f08e0e6b-14">14</p><p class="crayon-num" data-line="crayon-54ec0f08e0e6b-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec0f08e0e6b-16">16</p><p class="crayon-num" data-line="crayon-54ec0f08e0e6b-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec0f08e0e6b-18">18</p><p class="crayon-num" data-line="crayon-54ec0f08e0e6b-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec0f08e0e6b-20">20</p><p class="crayon-num" data-line="crayon-54ec0f08e0e6b-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec0f08e0e6b-22">22</p><p class="crayon-num" data-line="crayon-54ec0f08e0e6b-23">23</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec0f08e0e6b-1"><span class="t">void</span><span class="h"> </span><span class="e">printSum</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">candidates</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">index</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec0f08e0e6b-2"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ec0f08e0e6b-3"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="v">candidates</span><span class="sy">[</span><span class="v">index</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="v">i</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="s">""</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="s">"+"</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec0f08e0e6b-4"><span class="h">&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">endl</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec0f08e0e6b-5"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec0f08e0e6b-6">&#160;</p><p class="crayon-line" id="crayon-54ec0f08e0e6b-7"><span class="t">void</span><span class="h"> </span><span class="e">solve</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">target</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">sum</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">candidates</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">sz</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">index</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec0f08e0e6b-8"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">sum</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">target</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ec0f08e0e6b-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec0f08e0e6b-10"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">sum</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">target</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ec0f08e0e6b-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">printSum</span><span class="sy">(</span><span class="i">candidates</span><span class="sy">,</span><span class="h"> </span><span class="i">index</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec0f08e0e6b-12">&#160;</p><p class="crayon-line" id="crayon-54ec0f08e0e6b-13"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">index</span><span class="sy">[</span><span class="i">n</span><span class="sy">]</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">sz</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec0f08e0e6b-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">index</span><span class="sy">[</span><span class="i">n</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">i</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec0f08e0e6b-15"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">solve</span><span class="sy">(</span><span class="i">target</span><span class="sy">,</span><span class="h"> </span><span class="i">sum</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="v">candidates</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="i">candidates</span><span class="sy">,</span><span class="h"> </span><span class="i">sz</span><span class="sy">,</span><span class="h"> </span><span class="i">index</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="o">+</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec0f08e0e6b-16"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ec0f08e0e6b-17"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec0f08e0e6b-18">&#160;</p><p class="crayon-line" id="crayon-54ec0f08e0e6b-19"><span class="t">void</span><span class="h"> </span><span class="e">solve</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">target</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">candidates</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">sz</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec0f08e0e6b-20"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">index</span><span class="sy">[</span><span class="cn">10000</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec0f08e0e6b-21"><span class="h">&#160;&#160;</span><span class="v">index</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec0f08e0e6b-22"><span class="h">&#160;&#160;</span><span class="e">solve</span><span class="sy">(</span><span class="i">target</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="i">candidates</span><span class="sy">,</span><span class="h"> </span><span class="i">sz</span><span class="sy">,</span><span class="h"> </span><span class="i">index</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec0f08e0e6b-23"><span class="sy">}</span></p></div></td></tr></table></div></div><p><strong>Further Thoughts:</strong></p><p>Let&#8217;s change the question a little bit.</p><blockquote><p>Find all possible combination of numbers using a pre-defined candidate set.<br> Each number from the candidate set may be used only once in the combination.</p><p>For example,</p><p>Candidate Set = <strong>{10, 1, 2, 7, 6, 1, 5}</strong><br> Target Number = <strong>8 </strong></p><p>One possible output could be:<br> <strong>1+1+6<br> 1+2+5<br> 1+7<br> 2+6 </strong></p></blockquote><p>This question is left as an exercise. You should be able to solve this problem with little modification to the previous algorithm.</p><p>The <a href="http://uva.onlinejudge.org/">UVa Online Judge website</a> has&#160;this same&#160;problem called <a href="http://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;category=7&amp;page=show_problem&amp;problem=515">Problem 574 &#8211; Sum It Up</a>. If you don&#8217;t know about the UVa Online Judge, it is a website&#160;I <em>highly recommended</em>. It has tons of programming problems (ranging from easy to difficult) to practice. You may also submit your code to their server, which the machine will run your program against their secret input and automatically judge if your solution is correct.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a44">Rating: 2.8/<strong>5</strong> (12 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Print All Combinations of a Number as a Sum of Candidate Numbers</span></span>, <span class="rating"><span class="average">2.8</span> out of <span class="best">5</span> based on <span class="votes">12</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/09/print-all-combinations-of-number-as-sum.html" rel="tag">http://leetcode.com/2010/09/print-all-combinations-of-number-as-sum.html</a></p></div></div></div></body><body><div><div class="post-content"><h1 class="posttitle">Print Edge Nodes (Boundary) of a Binary Tree</h1><p class="date"> October 20, 2010 <span>in <a href="http://leetcode.com/category/binary-tree" title="View all posts in binary tree" rel="category tag">binary tree</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Print all edge nodes of a complete binary tree anti-clockwise.<br> That is all the left most nodes starting at root, then the leaves left to right and finally all the rightmost nodes.<br> In other words, print the boundary of the tree.</p><p>Variant: Print the same for a tree that is not complete.</p></blockquote><p><span id="more-50"></span><br> <a href="http://www.leetcode.com/2010/09/serializationdeserialization-of-binary.html?showComment=1287501533764#comment-c9201470073217100945"><span>Thanks to one reader</span></a> who contributed this interesting question.</p><p><strong>Some Examples:</strong><br> ** Please see <strong>Further Thoughts</strong> section below for an example which points out an ambiguity found in the problem statement. **<strong> </strong></p><p>Assume we have a binary tree below:</p><pre><span>&#160; &#160; </span>_<span>30</span>_
&#160;&#160; /&#160;&#160;  \&#160;&#160;&#160;
&#160; <span>10</span>&#160;&#160;&#160; <span>20</span>
&#160;/&#160;&#160;&#160;&#160; /&#160; \<span>
50&#160;&#160;&#160; </span><span>45&#160; 35</span></pre><p>The correct solution should print <strong><span>30</span></strong>, <strong><span>10</span></strong>, <strong><span>50</span></strong>, <strong><span>45</span></strong>, <strong><span>35</span></strong>, <strong><span>20</span></strong>.</p><p>Another binary tree:</p><pre><span>        <span>______</span>30<span>______</span>
<span>       /              \</span>
    <span>__</span>20<span>__</span>          <span>__</span>40<span>__</span>
<span>   /      \        /      \</span>
  10      25      35      50
<span> /  \       \            /</span>
 5  15      28          41</span></pre><p>The correct solution should print <strong><span>30</span></strong>, <strong><span>20</span></strong>, <strong><span>10</span></strong>, <strong><span>5</span></strong>, <strong><span>15</span></strong>, <strong><span>28</span></strong>,<span> <strong>35</strong></span>,<span> <strong>41</strong></span>,<span> <strong>50</strong></span>,<span> <strong>40</strong></span>.</p><p><strong>Hint: </strong><br> To solve this problem, you first need to pay attention to these three key areas:</p><div class="hiblock"><ul><li>Printing the leftmost edges from top to bottom. When a node is a leftmost edge, its left child must also be a leftmost edge.</li><li>Printing the leaves from left to right. Remember depth-first traversal?</li><li>Printing the rightmost edges. You would need to print from bottom to top.  The key is printing in the opposite order.  Easy if you know how to manipulate recursion into a stack-based solution.  Remember post-order traversal?</li></ul></div><p><strong>Solution:</strong><br> We could divide the tree into two subtrees. One is the left subtree, and the other is the right subtree.  For the left subtree, we print the leftmost edges from top to bottom. Then we print its leaves from left to right.  For the right subtree, we print its leaves from left to right, then its rightmost edges from bottom to top.</p><p>Printing the leaves from left to right order is a classic example of depth-first traversal. If you are not familiar with depth-first traversal, you should attempt other questions such as <a href="http://www.leetcode.com/2010/04/maximum-height-of-binary-tree.html">Maximum Height of a Binary Tree</a>, <a href="http://www.leetcode.com/2010/03/first-on-site-technical-interview.html">Populating Next Right Pointers in Each Node</a>. How do you know if a node is a leaf? Easy, if the node does not have both left and right children.</p><p>Printing the leftmost edges is just a trivial addition to the depth-first traversal. When a node is a leftmost edge, then its left child must also be a leftmost edge. We could use a variable to pass this information down the tree. Please note that you must add the condition to avoid printing the node twice (a node could be a leftmost edge as well as a leaf node).</p><p>Printing the rightmost edges from bottom to top is easy if you realize the trick of manipulating recursion as a stack. Try relate this with how post-order traversal works. When calling recursive functions, function calls are pushed onto a stack, and therefore you could use the implicit stack to your advantage. This trick is especially handy when applied in situation where you need to reverse the order of operations. See my post: <a href="http://www.leetcode.com/2010/02/here-is-one-of-questions-from-microsoft.html">Recursion to the Rescue!</a> and <a href="http://www.leetcode.com/2010/04/reversing-linked-list-iteratively-and.html">Reversing Linked List Iteratively and Recursively</a> for more practice using this trick.</p><p>This solution works whether the tree itself is complete or not.</p><div id="crayon-54d2fde33ed42" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void printLeftEdges(BinaryTree *p, bool print) {
  if (!p) return;
  if (print || (!p-&gt;left &amp;&amp; !p-&gt;right))
    cout &lt;&lt; p-&gt;data &lt;&lt; " ";
  printLeftEdges(p-&gt;left, print);
  printLeftEdges(p-&gt;right, false);
}

void printRightEdges(BinaryTree *p, bool print) {
  if (!p) return;
  printRightEdges(p-&gt;left, false);
  printRightEdges(p-&gt;right, print);
  if (print || (!p-&gt;left &amp;&amp; !p-&gt;right))
    cout &lt;&lt; p-&gt;data &lt;&lt; " ";
}

void printOuterEdges(BinaryTree *root) {
  if (!root) return;
  cout &lt;&lt; root-&gt;data &lt;&lt; " ";
  printLeftEdges(root-&gt;left, true);
  printRightEdges(root-&gt;right, true);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54d2fde33ed42-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54d2fde33ed42-2">2</p><p class="crayon-num" data-line="crayon-54d2fde33ed42-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54d2fde33ed42-4">4</p><p class="crayon-num" data-line="crayon-54d2fde33ed42-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54d2fde33ed42-6">6</p><p class="crayon-num" data-line="crayon-54d2fde33ed42-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54d2fde33ed42-8">8</p><p class="crayon-num" data-line="crayon-54d2fde33ed42-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54d2fde33ed42-10">10</p><p class="crayon-num" data-line="crayon-54d2fde33ed42-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54d2fde33ed42-12">12</p><p class="crayon-num" data-line="crayon-54d2fde33ed42-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54d2fde33ed42-14">14</p><p class="crayon-num" data-line="crayon-54d2fde33ed42-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54d2fde33ed42-16">16</p><p class="crayon-num" data-line="crayon-54d2fde33ed42-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54d2fde33ed42-18">18</p><p class="crayon-num" data-line="crayon-54d2fde33ed42-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54d2fde33ed42-20">20</p><p class="crayon-num" data-line="crayon-54d2fde33ed42-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54d2fde33ed42-22">22</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54d2fde33ed42-1"><span class="t">void</span><span class="h"> </span><span class="e">printLeftEdges</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="t">bool</span><span class="h"> </span><span class="i">print</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54d2fde33ed42-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54d2fde33ed42-3"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">print</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="o">!</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54d2fde33ed42-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54d2fde33ed42-5"><span class="h">&#160;&#160;</span><span class="e">printLeftEdges</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">print</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54d2fde33ed42-6"><span class="h">&#160;&#160;</span><span class="e">printLeftEdges</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="t">false</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54d2fde33ed42-7"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54d2fde33ed42-8">&#160;</p><p class="crayon-line" id="crayon-54d2fde33ed42-9"><span class="t">void</span><span class="h"> </span><span class="e">printRightEdges</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="t">bool</span><span class="h"> </span><span class="i">print</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54d2fde33ed42-10"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54d2fde33ed42-11"><span class="h">&#160;&#160;</span><span class="e">printRightEdges</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="t">false</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54d2fde33ed42-12"><span class="h">&#160;&#160;</span><span class="e">printRightEdges</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="i">print</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54d2fde33ed42-13"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">print</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="o">!</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54d2fde33ed42-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54d2fde33ed42-15"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54d2fde33ed42-16">&#160;</p><p class="crayon-line" id="crayon-54d2fde33ed42-17"><span class="t">void</span><span class="h"> </span><span class="e">printOuterEdges</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54d2fde33ed42-18"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54d2fde33ed42-19"><span class="h">&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">root</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54d2fde33ed42-20"><span class="h">&#160;&#160;</span><span class="e">printLeftEdges</span><span class="sy">(</span><span class="i">root</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="t">true</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54d2fde33ed42-21"><span class="h">&#160;&#160;</span><span class="e">printRightEdges</span><span class="sy">(</span><span class="i">root</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="t">true</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54d2fde33ed42-22"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p><strong>Further Thoughts:</strong></p><p>Please note that the above problem statement does not give a clear definition of &#8220;left-most&#8221; node. Thanks to my dear readers who pointed out this ambiguity, which I didn&#8217;t consider earlier in my above solution.</p><p>For example, consider the binary tree below: Is node<span> </span><strong>8</strong> a left-most node?</p><pre>&#160;&#160; _______________<span>28</span>_______________
  /                                \
  <span>4</span>____                        ____<span>69</span>
       \                      /
      __<span>8</span>__                __<span>56</span>__
     /     \              /      \
   __<span>7     12</span>__        __<span>34</span>    __<span>27</span>__
  /            \      /       /      \
  <span>5</span>_          _<span>13</span>    _<span>2 </span>     _<span>3      39</span>
    \        /      /       /
<span>     6      11     10       9</span></pre><p>The above code prints: <strong><span>28</span></strong>, <strong><span>4</span></strong>, <strong><span>6</span></strong>, <strong><span>11</span></strong>, <strong><span>10</span></strong>,<span> <strong>9</strong></span>,<span> <strong>39</strong></span>,<span> <strong>69</strong></span>.</p><p>It seems that nodes <strong>8</strong>, <strong>7</strong>, and <strong>5</strong> should be left-most nodes as well, but are not printed by the above code. This is because we made an implicit assumption that all left-most nodes could only be reached by following each node&#8217;s left branch (similar for right-most nodes).</p><p>To remedy this, we use a modified recursive definition for left-most node (similar for right-most node):</p><div class="hiblock"><ul><li>If a node is a left-most node, then its left child must be a left-most node as well.</li><li>If its left child does not exist, then its right child will be a left-most node.</li></ul></div><p>The below code prints the correct output of: <strong><span>28</span></strong>, <strong><span>4</span></strong>, <strong><span>8</span></strong>, <strong><span>7</span></strong>, <strong><span>5</span></strong>, <strong><span>6</span></strong>,<strong><span> 11</span></strong>,<span> <strong>10</strong></span>,<span> <strong>9</strong></span>,<span> <strong>39</strong></span>,<span> <strong>27</strong></span>,<span> <strong>56</strong></span>,<span> <strong>69</strong></span>.</p><p>All that are needed is just two lines of code changes.</p><pre class="brush: cpp highlight: [6, 11]">void printLeftEdges(BinaryTree *p, bool print) {
  if (!p) return;
  if (print || (!p-&gt;left &amp;&amp; !p-&gt;right))
    cout data left, print);
  printLeftEdges(p-&gt;right, (print &amp;&amp; !p-&gt;left ? true : false));
}

void printRightEdges(BinaryTree *p, bool print) {
  if (!p) return;
  printRightEdges(p-&gt;left, (print &amp;&amp; !p-&gt;right ? true : false));
  printRightEdges(p-&gt;right, print);
  if (print || (!p-&gt;left &amp;&amp; !p-&gt;right))
    cout data data left, true);
  printRightEdges(root-&gt;right, true);
}</pre><p><span><strong>Note:</strong></span><br> Some readers claimed that the above algorithm does not always print all edge nodes. For example, by moving node <strong><span>5</span></strong> to be the left child of node <strong><span>12</span></strong>, we get the binary tree below:</p><pre>   _______________<span>28</span>_______________
  /                                \
  <span>4</span>___                         ____<span>69</span>
      \                       /
    ___<span>8</span>__                 __<span>56</span>__
   /      \               /      \
   <span>7</span>    __<span>12</span>___        __<span>34</span>    __<span>27</span>__
       /       \      /       /      \
  <span>    5</span>_      _<span>13</span>    _<span>2 </span>     _<span>3      39</span>
        \    /      /       /
<span>         6  11     10       9</span></pre><p>And the algorithm in the <span>Further Thoughts</span> section prints the following:<br> <strong><span>28</span></strong>, <strong><span>4</span></strong>, <strong><span>8</span></strong>, <strong><span>7</span></strong>, <strong><span>6</span></strong>,<strong><span> 11</span></strong>,<span> <strong>10</strong></span>,<span> <strong>9</strong></span>,<span> <strong>39</strong></span>,<span> <strong>27</strong></span>,<span> <strong>56</strong></span>,<span> <strong>69</strong></span>.</p><p>Some readers argued that node <strong><span>5</span> </strong>should be printed too. However, if you read the definition of &#8220;left-most node&#8221; carefully in the above section, you would agree with me that node <strong><span>5</span> </strong>is not a left-most node. This is because node <strong><span>8</span> </strong>(which is a left-most node) has a left child, node <strong><span>7</span></strong>. Therefore, node <strong><span>7</span> </strong>is a left-most node but not node <strong><span>12</span></strong>. As a result, all descendants of node <strong><span>12</span> </strong>must not be left-most nodes.</p><p>You could use your own definition of left-most node as you pleased, but keep in mind that the problem statement is ambiguous to start with, so communicating this with your interviewer will be your best bet.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a50">Rating: 5.0/<strong>5</strong> (20 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Print Edge Nodes (Boundary) of a Binary Tree</span></span>, <span class="rating"><span class="average">5.0</span> out of <span class="best">5</span> based on <span class="votes">20</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/10/print-edge-nodes-boundary-of-binary.html" rel="tag">http://leetcode.com/2010/10/print-edge-nodes-boundary-of-binary.html</a></p></div></div></body><body><div><div class="page" id="blog-single" role="main"><div id="post-38" class="post-38 post type-post status-publish format-standard hentry category-binary-tree"><div class="post-content"><h1 class="posttitle">Printing a Binary Tree in Level Order</h1><p class="date"> September 16, 2010 <span>in <a href="http://leetcode.com/category/binary-tree" title="View all posts in binary tree" rel="category tag">binary tree</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Given a binary tree, print out the tree in level order (ie, from left to right, level by level). Output a newline after the end of each level.<span id="more-38"></span></p><pre><span>     3</span>
   /  \
  <span>9</span>   <span>20</span>    
     /  \
    <span>15</span>    <span>7</span>
</pre><p>For example, the level order output of the tree above is:</p><pre><span>3 
9 20 
15 7</span></pre></blockquote><p>By now, you should be able to do pre-order, in-order, and post-order tree traversal off the top of your head. These are called <a href="http://en.wikipedia.org/wiki/Depth-first_search">Depth First Search</a> (DFS), since they visit the tree by proceeding deeper and deeper until it reaches the leaf nodes.</p><p>DFS uses a data structure called <a href="http://en.wikipedia.org/wiki/Stack_%28data_structure%29">Stack</a> and is commonly implemented using recursion (since function calls are pushed and popped off the memory stack). If recursion is not allowed, we can simulate the recursion by using iterative method with the help of stack. See my older post: <a href="http://www.leetcode.com/2010/04/binary-search-tree-in-order-traversal.html">Binary Search Tree In-Order Traversal Iterative Solution</a> on how to do a DFS iteratively using a stack.</p><p>The most natural solution for level-order traversal is <a href="http://en.wikipedia.org/wiki/Breadth-first_search">Breadth First Search</a> (BFS), since it visits the nodes level by level. BFS requires the use of a data structure called <a href="http://en.wikipedia.org/wiki/Queue_%28data_structure%29">Queue</a>, which is a First In First Out (FIFO) structure. If you are curious, level-order traversal can be implemented using DFS too. See my next post: <a href="http://www.leetcode.com/2010/09/binary-tree-level-order-traversal-using_17.html">Binary Tree Level-Order Traversal Using Depth First Search (DFS)</a> for the challenge.</p><p>In order to print the binary tree in level order with newline in the end of each level, we can utilize two queues. The first queue stores the current level&#8217;s nodes, while the second queue stores the next level&#8217;s nodes (the current level nodes&#8217; children).</p><p>When the first queue is emptied, we know that it must have reached the end of the current level, therefore we print a newline. Then, we switch the emptied first queue with the second queue (which is populated with the next level&#8217;s nodes). Then we repeat the process over again.</p><p></p><div id="crayon-54ecdb42196cf" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void printLevelOrder(BinaryTree *root) {
  if (!root) return;
  queue&lt;BinaryTree*&gt; currentLevel, nextLevel;
  currentLevel.push(root);
  while (!currentLevel.empty()) {
    BinaryTree *currNode = currentLevel.front();
    currentLevel.pop();
    if (currNode) {
      cout &lt;&lt; currNode-&gt;data &lt;&lt; " ";
      nextLevel.push(currNode-&gt;left);
      nextLevel.push(currNode-&gt;right);
    }
    if (currentLevel.empty()) {
      cout &lt;&lt; endl;
      swap(currentLevel, nextLevel);
    }
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ecdb42196cf-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb42196cf-2">2</p><p class="crayon-num" data-line="crayon-54ecdb42196cf-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb42196cf-4">4</p><p class="crayon-num" data-line="crayon-54ecdb42196cf-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb42196cf-6">6</p><p class="crayon-num" data-line="crayon-54ecdb42196cf-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb42196cf-8">8</p><p class="crayon-num" data-line="crayon-54ecdb42196cf-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb42196cf-10">10</p><p class="crayon-num" data-line="crayon-54ecdb42196cf-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb42196cf-12">12</p><p class="crayon-num" data-line="crayon-54ecdb42196cf-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb42196cf-14">14</p><p class="crayon-num" data-line="crayon-54ecdb42196cf-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb42196cf-16">16</p><p class="crayon-num" data-line="crayon-54ecdb42196cf-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb42196cf-18">18</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecdb42196cf-1"><span class="t">void</span><span class="h"> </span><span class="e">printLevelOrder</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb42196cf-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdb42196cf-3"><span class="h">&#160;&#160;</span><span class="i">queue</span><span class="o">&lt;</span><span class="e ">BinaryTree*</span><span class="o">&gt;</span><span class="h"> </span><span class="i">currentLevel</span><span class="sy">,</span><span class="h"> </span><span class="i">nextLevel</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb42196cf-4"><span class="h">&#160;&#160;</span><span class="v">currentLevel</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">root</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdb42196cf-5"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">currentLevel</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb42196cf-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">currNode</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">currentLevel</span><span class="sy">.</span><span class="e">front</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdb42196cf-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">currentLevel</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb42196cf-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">currNode</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecdb42196cf-9"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">currNode</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb42196cf-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">nextLevel</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">currNode</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdb42196cf-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">nextLevel</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">currNode</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb42196cf-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecdb42196cf-13"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">currentLevel</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb42196cf-14"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">endl</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdb42196cf-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="e">swap</span><span class="sy">(</span><span class="i">currentLevel</span><span class="sy">,</span><span class="h"> </span><span class="i">nextLevel</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb42196cf-16"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecdb42196cf-17"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb42196cf-18"><span class="sy">}</span></p></div></td></tr></table></div></div><p>Is it possible that a solution exists using only one single queue? Yes, you bet.   The single queue solution requires two extra counting variables which keep tracks of the number of nodes in the current level (<b><i>nodesInCurrentLevel</i></b>) and the next level (<b><i>nodesInNextLevel</i></b>).   When we pop a node off the queue, we decrement <b><i>nodesInCurrentLevel</i></b> by <i>one</i>. When we push its child nodes to the queue, we increment <b><i>nodesInNextLevel</i></b> by <i>two</i>. When <b><i>nodesInCurrentLevel</i></b> reaches <i>0</i>, we know that the current level has ended, therefore we print an endline here.</p><p></p><div id="crayon-54ecdb4219c53" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void printLevelOrder(BinaryTree *root) {
  if (!root) return;
  queue&lt;BinaryTree*&gt; nodesQueue;
  int nodesInCurrentLevel = 1;
  int nodesInNextLevel = 0;
  nodesQueue.push(root);
  while (!nodesQueue.empty()) {
    BinaryTree *currNode = nodesQueue.front();
    nodesQueue.pop();
    nodesInCurrentLevel--;
    if (currNode) {
      cout &lt;&lt; currNode-&gt;data &lt;&lt; " ";
      nodesQueue.push(currNode-&gt;left);
      nodesQueue.push(currNode-&gt;right);
      nodesInNextLevel += 2;
    }
    if (nodesInCurrentLevel == 0) {
      cout &lt;&lt; endl;
      nodesInCurrentLevel = nodesInNextLevel;
      nodesInNextLevel = 0;
    }
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ecdb4219c53-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb4219c53-2">2</p><p class="crayon-num" data-line="crayon-54ecdb4219c53-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb4219c53-4">4</p><p class="crayon-num" data-line="crayon-54ecdb4219c53-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb4219c53-6">6</p><p class="crayon-num" data-line="crayon-54ecdb4219c53-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb4219c53-8">8</p><p class="crayon-num" data-line="crayon-54ecdb4219c53-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb4219c53-10">10</p><p class="crayon-num" data-line="crayon-54ecdb4219c53-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb4219c53-12">12</p><p class="crayon-num" data-line="crayon-54ecdb4219c53-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb4219c53-14">14</p><p class="crayon-num" data-line="crayon-54ecdb4219c53-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb4219c53-16">16</p><p class="crayon-num" data-line="crayon-54ecdb4219c53-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb4219c53-18">18</p><p class="crayon-num" data-line="crayon-54ecdb4219c53-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb4219c53-20">20</p><p class="crayon-num" data-line="crayon-54ecdb4219c53-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecdb4219c53-22">22</p><p class="crayon-num" data-line="crayon-54ecdb4219c53-23">23</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecdb4219c53-1"><span class="t">void</span><span class="h"> </span><span class="e">printLevelOrder</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb4219c53-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdb4219c53-3"><span class="h">&#160;&#160;</span><span class="i">queue</span><span class="o">&lt;</span><span class="e ">BinaryTree*</span><span class="o">&gt;</span><span class="h"> </span><span class="i">nodesQueue</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb4219c53-4"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">nodesInCurrentLevel</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdb4219c53-5"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">nodesInNextLevel</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb4219c53-6"><span class="h">&#160;&#160;</span><span class="v">nodesQueue</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">root</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdb4219c53-7"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">nodesQueue</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb4219c53-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">currNode</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">nodesQueue</span><span class="sy">.</span><span class="e">front</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdb4219c53-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">nodesQueue</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb4219c53-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">nodesInCurrentLevel</span><span class="o">--</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdb4219c53-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">currNode</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb4219c53-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">currNode</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdb4219c53-13"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">nodesQueue</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">currNode</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb4219c53-14"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">nodesQueue</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">currNode</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdb4219c53-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">nodesInNextLevel</span><span class="h"> </span><span class="o">+</span><span class="o">=</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb4219c53-16"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecdb4219c53-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">nodesInCurrentLevel</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb4219c53-18"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">endl</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdb4219c53-19"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">nodesInCurrentLevel</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">nodesInNextLevel</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb4219c53-20"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">nodesInNextLevel</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecdb4219c53-21"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecdb4219c53-22"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecdb4219c53-23"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a38">Rating: 4.7/<strong>5</strong> (62 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Printing a Binary Tree in Level Order</span></span>, <span class="rating"><span class="average">4.7</span> out of <span class="best">5</span> based on <span class="votes">62</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/09/printing-binary-tree-in-level-order.html" rel="tag">http://leetcode.com/2010/09/printing-binary-tree-in-level-order.html</a></p></div></div><p id="respond"></p><h3 id="reply-title">Leave a reply <small></small></h3><div id="trackbacks"><h3>7 trackbacks</h3><ul id="trackbacklist"><li> <em>on October 13, 2012</em></li><li> <em>on October 20, 2012</em></li><li> <em>on December 25, 2012</em></li><li> <em>on October 14, 2013</em></li><li> <em>on November 19, 2013</em></li><li> <em>on August 11, 2014</em></li><li> <em>on January 5, 2015</em></li></ul></div></div></div></body><body><div><div class="page" id="blog-single" role="main"><div id="post-40" class="post-40 post type-post status-publish format-standard hentry category-binary-tree"><div class="post-content"><h1 class="posttitle">Printing a Binary Tree in Zig Zag Level-Order</h1><p class="date"> September 18, 2010 <span>in <a href="http://leetcode.com/category/binary-tree" title="View all posts in binary tree" rel="category tag">binary tree</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Given a binary tree, print out the tree in zig zag level order (ie, from left to right, then right to left for the next level and alternate between). Output a newline after the end of each level.<span id="more-40"></span></p><pre><span>     3</span>
   /  \
  <span>9</span>   <span>20</span>    
     /  \
    <span>15</span>    <span>7</span>
</pre><p>For example, the zig zag level order output of the tree above is:</p><pre><span>3 
20 9
15 7</span></pre></blockquote><p>This question is a variation of the question <a href="http://www.leetcode.com/2010/09/printing-binary-tree-in-level-order.html">Printing a Binary Tree in Level Order</a>.</p><p><b>Hint:</b><br><a href="http://en.wikipedia.org/wiki/Queue_%28data_structure%29">Queue</a> is not helpful here. You might want to consider using <a href="http://en.wikipedia.org/wiki/Stack_%28data_structure%29">Stack</a> instead.</p><p><b>Solution:</b><br>This problem can be solved easily using two stacks (one called <i>currentLevel</i> and the other one called <i>nextLevel</i>). You would also need a variable to keep track of the current level&#8217;s order (whether it is left-&gt;right or right-&gt;left).</p><p>You pop from stack <i>currentLevel</i> and print the node&#8217;s value. Whenever the current level&#8217;s order is from left-&gt;right, you push the node&#8217;s left child, then its right child to stack <i>nextLevel</i>. Remember a Stack is a Last In First OUT (LIFO) structure, so the next time when nodes are popped off <i>nextLevel</i>, it will be in the reverse order.</p><p>On the other hand, when the current level&#8217;s order is from right-&gt;left, you would push the node&#8217;s right child first, then its left child. Finally, don&#8217;t forget to swap those two stacks at the end of each level (ie, when <i>currentLevel</i> is empty).</p><p></p><div id="crayon-54ecd7b3161bb" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void printLevelOrderZigZag(BinaryTree *root) {
  stack&lt;BinaryTree*&gt; currentLevel, nextLevel;
  bool leftToRight = true;
  currentLevel.push(root);
  while (!currentLevel.empty()) {
    BinaryTree *currNode = currentLevel.top();
    currentLevel.pop();
    if (currNode) {
      cout &lt;&lt; currNode-&gt;data &lt;&lt; " ";
      if (leftToRight) {
        nextLevel.push(currNode-&gt;left);
        nextLevel.push(currNode-&gt;right);
      } else {
        nextLevel.push(currNode-&gt;right);
        nextLevel.push(currNode-&gt;left);
      }
    }
    if (currentLevel.empty()) {
      cout &lt;&lt; endl;
      leftToRight = !leftToRight;
      swap(currentLevel, nextLevel);
    }
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ecd7b3161bb-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd7b3161bb-2">2</p><p class="crayon-num" data-line="crayon-54ecd7b3161bb-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd7b3161bb-4">4</p><p class="crayon-num" data-line="crayon-54ecd7b3161bb-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd7b3161bb-6">6</p><p class="crayon-num" data-line="crayon-54ecd7b3161bb-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd7b3161bb-8">8</p><p class="crayon-num" data-line="crayon-54ecd7b3161bb-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd7b3161bb-10">10</p><p class="crayon-num" data-line="crayon-54ecd7b3161bb-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd7b3161bb-12">12</p><p class="crayon-num" data-line="crayon-54ecd7b3161bb-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd7b3161bb-14">14</p><p class="crayon-num" data-line="crayon-54ecd7b3161bb-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd7b3161bb-16">16</p><p class="crayon-num" data-line="crayon-54ecd7b3161bb-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd7b3161bb-18">18</p><p class="crayon-num" data-line="crayon-54ecd7b3161bb-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd7b3161bb-20">20</p><p class="crayon-num" data-line="crayon-54ecd7b3161bb-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd7b3161bb-22">22</p><p class="crayon-num" data-line="crayon-54ecd7b3161bb-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd7b3161bb-24">24</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecd7b3161bb-1"><span class="t">void</span><span class="h"> </span><span class="e">printLevelOrderZigZag</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">root</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd7b3161bb-2"><span class="h">&#160;&#160;</span><span class="i">stack</span><span class="o">&lt;</span><span class="e ">BinaryTree*</span><span class="o">&gt;</span><span class="h"> </span><span class="i">currentLevel</span><span class="sy">,</span><span class="h"> </span><span class="i">nextLevel</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd7b3161bb-3"><span class="h">&#160;&#160;</span><span class="t">bool</span><span class="h"> </span><span class="v">leftToRight</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd7b3161bb-4"><span class="h">&#160;&#160;</span><span class="v">currentLevel</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">root</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd7b3161bb-5"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">currentLevel</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd7b3161bb-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e ">BinaryTree *</span><span class="v">currNode</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">currentLevel</span><span class="sy">.</span><span class="e">top</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd7b3161bb-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">currentLevel</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd7b3161bb-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">currNode</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecd7b3161bb-9"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">currNode</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd7b3161bb-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">leftToRight</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecd7b3161bb-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">nextLevel</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">currNode</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd7b3161bb-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">nextLevel</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">currNode</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd7b3161bb-13"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd7b3161bb-14"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">nextLevel</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">currNode</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd7b3161bb-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">nextLevel</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">currNode</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd7b3161bb-16"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecd7b3161bb-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd7b3161bb-18"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">currentLevel</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecd7b3161bb-19"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">endl</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd7b3161bb-20"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">leftToRight</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="o">!</span><span class="i">leftToRight</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd7b3161bb-21"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="e">swap</span><span class="sy">(</span><span class="i">currentLevel</span><span class="sy">,</span><span class="h"> </span><span class="i">nextLevel</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd7b3161bb-22"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecd7b3161bb-23"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd7b3161bb-24"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a40">Rating: 4.8/<strong>5</strong> (34 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Printing a Binary Tree in Zig Zag Level-Order</span></span>, <span class="rating"><span class="average">4.8</span> out of <span class="best">5</span> based on <span class="votes">34</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/09/printing-binary-tree-in-zig-zag-level_18.html" rel="tag">http://leetcode.com/2010/09/printing-binary-tree-in-zig-zag-level_18.html</a></p></div></div><p id="respond"></p><h3 id="reply-title">Leave a reply <small></small></h3><div id="trackbacks"><h3>4 trackbacks</h3><ul id="trackbacklist"><li> <em>on October 20, 2012</em></li><li> <em>on October 20, 2012</em></li><li> <em>on December 25, 2012</em></li><li> <em>on October 8, 2014</em></li></ul></div></div></div></body><body><div><div id="post-21" class="post-21 post type-post status-publish format-standard hentry category-uncategorized"><div class="post-content"><h1 class="posttitle">Printing Matrix (2D array) in Spiral Order</h1><p class="date"> May 1, 2010 <span>in <a href="http://leetcode.com/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Given a matrix (2D array) of m x n elements (m rows, n columns), write a function that prints the elements in the array in a spiral manner.</p></blockquote><p><span id="more-21"></span></p><p>If you have done enough training by now, you would have immediately recognized the sub-problems within this problem. When you recognize this property, then you know that this problem is easily solvable with recursion!</p><p>Imagine that you are peeling an onion (I know your eye hurts!). First, you peel off the outer-layer skin. After the first layer is peeled off, there&#8217;s another layer to peel. So you peel off the remaining onion again until there is no more to peel, which is where you stop.</p><p>It&#8217;s the same with printing the matrix spirally! Print the outer layer of the matrix, then print the remaining sub-matrix recursively. Please do not forget to handle the base case! (Hint: Check when m == 1 or n == 1).</p><p></p><div id="crayon-54ec4ce4f140f" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void print_spiral(int mat[][N_MAX], int m, int n, int k) {
  if (m &lt;= 0 || n &lt;= 0)
    return;
  if (m == 1) {
    for (int j = 0; j &lt; n; j++)
      cout &lt;&lt; mat[k][k+j] &lt;&lt; " ";
    return;
  }
  if (n == 1) {
    for (int i = 0; i &lt; m; i++)
      cout &lt;&lt; mat[k+i][k] &lt;&lt; " ";
    return;
  }
  // print from top left
  for (int j = 0; j &lt; n - 1; j++)
    cout &lt;&lt; mat[k][k+j] &lt;&lt; " ";
  // print from top right
  for (int i = 0; i &lt; m - 1; i++)
    cout &lt;&lt; mat[k+i][k+n-1] &lt;&lt; " ";
  // print from bottom right
  for (int j = 0; j &lt; n - 1; j++)
    cout &lt;&lt; mat[k+m-1][k+n-1-j] &lt;&lt; " ";
  // print from bottom left
  for (int i = 0; i &lt; m - 1; i++)
    cout &lt;&lt; mat[k+m-1-i][k] &lt;&lt; " ";

  print_spiral(mat, m-2, n-2, k+1);
}

void print_spiral_helper(int mat[][N_MAX], int m, int n) {
  print_spiral(mat, m, n, 0);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ec4ce4f140f-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4ce4f140f-2">2</p><p class="crayon-num" data-line="crayon-54ec4ce4f140f-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4ce4f140f-4">4</p><p class="crayon-num" data-line="crayon-54ec4ce4f140f-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4ce4f140f-6">6</p><p class="crayon-num" data-line="crayon-54ec4ce4f140f-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4ce4f140f-8">8</p><p class="crayon-num" data-line="crayon-54ec4ce4f140f-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4ce4f140f-10">10</p><p class="crayon-num" data-line="crayon-54ec4ce4f140f-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4ce4f140f-12">12</p><p class="crayon-num" data-line="crayon-54ec4ce4f140f-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4ce4f140f-14">14</p><p class="crayon-num" data-line="crayon-54ec4ce4f140f-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4ce4f140f-16">16</p><p class="crayon-num" data-line="crayon-54ec4ce4f140f-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4ce4f140f-18">18</p><p class="crayon-num" data-line="crayon-54ec4ce4f140f-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4ce4f140f-20">20</p><p class="crayon-num" data-line="crayon-54ec4ce4f140f-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4ce4f140f-22">22</p><p class="crayon-num" data-line="crayon-54ec4ce4f140f-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4ce4f140f-24">24</p><p class="crayon-num" data-line="crayon-54ec4ce4f140f-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4ce4f140f-26">26</p><p class="crayon-num" data-line="crayon-54ec4ce4f140f-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4ce4f140f-28">28</p><p class="crayon-num" data-line="crayon-54ec4ce4f140f-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4ce4f140f-30">30</p><p class="crayon-num" data-line="crayon-54ec4ce4f140f-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4ce4f140f-32">32</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec4ce4f140f-1"><span class="t">void</span><span class="h"> </span><span class="e">print_spiral</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="sy">]</span><span class="sy">[</span><span class="i">N_MAX</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">m</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">k</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4ce4f140f-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">m</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="cn">0</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">n</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ec4ce4f140f-3"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4ce4f140f-4"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">m</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec4ce4f140f-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4ce4f140f-6"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="i">k</span><span class="sy">]</span><span class="sy">[</span><span class="i">k</span><span class="o">+</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec4ce4f140f-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4ce4f140f-8"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ec4ce4f140f-9"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">n</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4ce4f140f-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">m</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ec4ce4f140f-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="i">k</span><span class="o">+</span><span class="i">i</span><span class="sy">]</span><span class="sy">[</span><span class="i">k</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4ce4f140f-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec4ce4f140f-13"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4ce4f140f-14"><span class="h">&#160;&#160;</span><span class="c">// print from top left</span></p><p class="crayon-line" id="crayon-54ec4ce4f140f-15"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4ce4f140f-16"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="i">k</span><span class="sy">]</span><span class="sy">[</span><span class="i">k</span><span class="o">+</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec4ce4f140f-17"><span class="h">&#160;&#160;</span><span class="c">// print from top right</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4ce4f140f-18"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">m</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ec4ce4f140f-19"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="i">k</span><span class="o">+</span><span class="i">i</span><span class="sy">]</span><span class="sy">[</span><span class="i">k</span><span class="o">+</span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4ce4f140f-20"><span class="h">&#160;&#160;</span><span class="c">// print from bottom right</span></p><p class="crayon-line" id="crayon-54ec4ce4f140f-21"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4ce4f140f-22"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="i">k</span><span class="o">+</span><span class="i">m</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="i">k</span><span class="o">+</span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="o">-</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec4ce4f140f-23"><span class="h">&#160;&#160;</span><span class="c">// print from bottom left</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4ce4f140f-24"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">m</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ec4ce4f140f-25"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="i">k</span><span class="o">+</span><span class="i">m</span><span class="o">-</span><span class="cn">1</span><span class="o">-</span><span class="i">i</span><span class="sy">]</span><span class="sy">[</span><span class="i">k</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4ce4f140f-26">&#160;</p><p class="crayon-line" id="crayon-54ec4ce4f140f-27"><span class="h">&#160;&#160;</span><span class="e">print_spiral</span><span class="sy">(</span><span class="i">mat</span><span class="sy">,</span><span class="h"> </span><span class="i">m</span><span class="o">-</span><span class="cn">2</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="cn">2</span><span class="sy">,</span><span class="h"> </span><span class="i">k</span><span class="o">+</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4ce4f140f-28"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ec4ce4f140f-29">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ec4ce4f140f-30"><span class="t">void</span><span class="h"> </span><span class="e">print_spiral_helper</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="sy">]</span><span class="sy">[</span><span class="i">N_MAX</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">m</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec4ce4f140f-31"><span class="h">&#160;&#160;</span><span class="e">print_spiral</span><span class="sy">(</span><span class="i">mat</span><span class="sy">,</span><span class="h"> </span><span class="i">m</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4ce4f140f-32"><span class="sy">}</span></p></div></td></tr></table></div></div><p><span><b>EDIT: (Added test data)</b></span> <br>Below are the input and output data set I created for testing purposes. In the input file, the first line signifies the total number of cases. Then all cases are listed where the the number of row and column are specified first, then followed by elements of all rows and columns.</p><p><b>Attachment:</b> <br>&#187; <a href="https://sites.google.com/site/ihas1337code/matrix_spiral_input.txt">Download Input Data Set</a> <br>&#187; <a href="https://sites.google.com/site/ihas1337code/matrix_spiral_output.txt">Download Output Data Set</a></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a21">Rating: 4.5/<strong>5</strong> (11 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Printing Matrix (2D array) in Spiral Order</span></span>, <span class="rating"><span class="average">4.5</span> out of <span class="best">5</span> based on <span class="votes">11</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/05/printing-matrix-in-spiral-order.html" rel="tag">http://leetcode.com/2010/05/printing-matrix-in-spiral-order.html</a></p></div></div></div></body><body><div><div class="entry"><blockquote><p>Read the question here from GCJ Qualification Round 2010:<br>&#187; <a href="http://code.google.com/codejam/contest/dashboard?c=433101#s=p1">Problem B: Fair Warning</a></p></blockquote><p><span id="more-26"></span></p><p>This problem is cryptic in description, but it can be summarize as a Math problem below:</p><blockquote><p>Given a list of positive integers: t<sub>1</sub>, t<sub>2</sub>, &#8230;, t<sub>n</sub>, and t<sub>i</sub> ? t<sub>j</sub> for some i, j. Find the smallest integer y &gt;= 0 such that each t<sub>i</sub> + y is divisible by an integer T. T must be the largest of all possible divisors.</p></blockquote><p>First, this problem is named &#8220;Fair Warning&#8221; for a reason. It is a fair warning to you that a problem using Big Integer library is possible (which the large input requires), and you should prepare for that in future rounds.</p><p>I guess many would agree that this is the hardest problem for most people. If you know basic number theory, you would probably breeze through this problem. If you don&#8217;t (like me), it is still possible to find your way to the solution, but it is a bit harder.</p><p>Before we go for the general solution, let&#8217;s consider the easier case where n=2, and assume t<sub>1</sub> is greater than t<sub>2</sub>.</p><p>Therefore,<br>t<sub>1</sub> + y = k<sub>1</sub> * T &#8212;&#8211; (1)<br>t<sub>2</sub> + y = k<sub>2</sub> * T &#8212;&#8211; (2)</p><p>t<sub>i</sub>, y, k<sub>i</sub>, and T are all integers.</p><p>Eq. (1) &#8211; (2) gives<br>t<sub>1</sub> &#8211; t<sub>2</sub> = (k<sub>1</sub> &#8211; k<sub>2</sub>) * T</p><p>Therefore, we can conclude that t<sub>1</sub> &#8211; t<sub>2</sub> is also divisible by T. Since T must be the largest among all possible divisors, k<sub>1</sub> &#8211; k<sub>2</sub> must equal 1. Why? Consider when k<sub>1</sub> &#8211; k<sub>2</sub> = 2, then the value of T would be halved. We have just found the value of T, which is equal to t<sub>1</sub> &#8211; t<sub>2</sub>.</p><p>After we have found the value of T, we can obtain value of y. From the previous information that k<sub>1</sub> &#8211; k<sub>2</sub> = 1, we can deduce from Eq. (1) and (2) that k<sub>2</sub> = 1 and k<sub>1</sub> = 2. Why not k<sub>2</sub> = 2 and k<sub>1</sub> = 3? Recall that y is the smallest value that fulfill the requirement.</p><p>Substituting in Eq. (2), we get <br>y = k<sub>2</sub> * T &#8211; t<sub>2</sub><br> = 1 * (t<sub>1</sub> &#8211; t<sub>2</sub>) &#8211; t<sub>2</sub><br> = t<sub>1</sub> &#8211; 2 * t<sub>2</sub></p><p>We have solved the easy case. Now generalize for all cases. You can probably see that for n &gt;= 3, the value of T is equal to the Greatest Common Divisor (GCD) of all possible t<sub>i</sub> &#8211; t<sub>j</sub>, i ? j, t<sub>i</sub> &gt; t<sub>j</sub>. Note that finding all such possible pairs of i and j takes O(n^2) time.</p><p>Once we found the value of T, we can then solve for y.</p><p>For large input, you have to use a Big Integer library and there is one possible optimization. When a = b = c, then gcd(b &#8211; a, c &#8211; a) = gcd(b &#8211; a, c &#8211; a, c &#8211; b). Taking advantage of this property, we are able to reduce the GCD step from O(n^2) to O(n).</p><p>The below solution only works for the small input (without the optimization mentioned above). Unfortunately, it timeouts for the large input. (I am using my own Big Integer library). I suspect that my Big Integer library is not efficient enough. I would love to know if you have tested my solution using a Big Integer library and if it finishes within the time limit. Anyway, the below solution gives a general idea on how to approach this problem.</p><p></p><div id="crayon-54dc0a790a884" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
long long gcd(long long a, long long b) {
  if (b == 0)
    return a;
  return gcd(b, a % b);
}

long long gcd(long long arr[], int n) {
  long long temp = arr[0];
  for (int i = 1; i &lt; n; i++) {
    temp = gcd(temp, arr[i]);
  }
  return temp;
}

int n, m;
long long arr[1400], arr2[100000];
  cin &gt;&gt; n;
for (int i = 0; i &lt; n; i++) {
  cin &gt;&gt; m;
  for (int j = 0; j &lt; m; j++) 
    cin &gt;&gt; arr[j];

  sort(arr, arr+m);
  int sz = 0;
  for (int j = m-1; j &gt;=0; j--) {
    for (int k = j-1; k &gt;= 0; k--) {
      arr2[sz++] = arr[j]-arr[k];
    }
  }
  long long T = gcd(arr2, sz);
  long long ans = (ceil((double)arr[0] / T))*T - arr[0];
  cout &lt;&lt; "Case #" &lt;&lt; i+1 &lt;&lt; ": " &lt;&lt; ans &lt;&lt; endl;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54dc0a790a884-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc0a790a884-2">2</p><p class="crayon-num" data-line="crayon-54dc0a790a884-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc0a790a884-4">4</p><p class="crayon-num" data-line="crayon-54dc0a790a884-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc0a790a884-6">6</p><p class="crayon-num" data-line="crayon-54dc0a790a884-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc0a790a884-8">8</p><p class="crayon-num" data-line="crayon-54dc0a790a884-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc0a790a884-10">10</p><p class="crayon-num" data-line="crayon-54dc0a790a884-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc0a790a884-12">12</p><p class="crayon-num" data-line="crayon-54dc0a790a884-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc0a790a884-14">14</p><p class="crayon-num" data-line="crayon-54dc0a790a884-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc0a790a884-16">16</p><p class="crayon-num" data-line="crayon-54dc0a790a884-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc0a790a884-18">18</p><p class="crayon-num" data-line="crayon-54dc0a790a884-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc0a790a884-20">20</p><p class="crayon-num" data-line="crayon-54dc0a790a884-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc0a790a884-22">22</p><p class="crayon-num" data-line="crayon-54dc0a790a884-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc0a790a884-24">24</p><p class="crayon-num" data-line="crayon-54dc0a790a884-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc0a790a884-26">26</p><p class="crayon-num" data-line="crayon-54dc0a790a884-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc0a790a884-28">28</p><p class="crayon-num" data-line="crayon-54dc0a790a884-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc0a790a884-30">30</p><p class="crayon-num" data-line="crayon-54dc0a790a884-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54dc0a790a884-32">32</p><p class="crayon-num" data-line="crayon-54dc0a790a884-33">33</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54dc0a790a884-1"><span class="t">long</span><span class="h"> </span><span class="t">long</span><span class="h"> </span><span class="e">gcd</span><span class="sy">(</span><span class="t">long</span><span class="h"> </span><span class="t">long</span><span class="h"> </span><span class="i">a</span><span class="sy">,</span><span class="h"> </span><span class="t">long</span><span class="h"> </span><span class="t">long</span><span class="h"> </span><span class="i">b</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc0a790a884-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">b</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54dc0a790a884-3"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">a</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc0a790a884-4"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">gcd</span><span class="sy">(</span><span class="i">b</span><span class="sy">,</span><span class="h"> </span><span class="i">a</span><span class="h"> </span><span class="o">%</span><span class="h"> </span><span class="i">b</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc0a790a884-5"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc0a790a884-6">&#160;</p><p class="crayon-line" id="crayon-54dc0a790a884-7"><span class="t">long</span><span class="h"> </span><span class="t">long</span><span class="h"> </span><span class="e">gcd</span><span class="sy">(</span><span class="t">long</span><span class="h"> </span><span class="t">long</span><span class="h"> </span><span class="v">arr</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc0a790a884-8"><span class="h">&#160;&#160;</span><span class="t">long</span><span class="h"> </span><span class="t">long</span><span class="h"> </span><span class="v">temp</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">arr</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc0a790a884-9"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc0a790a884-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">temp</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">gcd</span><span class="sy">(</span><span class="i">temp</span><span class="sy">,</span><span class="h"> </span><span class="v">arr</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc0a790a884-11"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc0a790a884-12"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">temp</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc0a790a884-13"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc0a790a884-14">&#160;</p><p class="crayon-line" id="crayon-54dc0a790a884-15"><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="i">m</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc0a790a884-16"><span class="t">long</span><span class="h"> </span><span class="t">long</span><span class="h"> </span><span class="v">arr</span><span class="sy">[</span><span class="cn">1400</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="v">arr2</span><span class="sy">[</span><span class="cn">100000</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc0a790a884-17"><span class="h">&#160;&#160;</span><span class="i">cin</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc0a790a884-18"><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54dc0a790a884-19"><span class="h">&#160;&#160;</span><span class="i">cin</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">m</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc0a790a884-20"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">m</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span></p><p class="crayon-line" id="crayon-54dc0a790a884-21"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cin</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="v">arr</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc0a790a884-22">&#160;</p><p class="crayon-line" id="crayon-54dc0a790a884-23"><span class="h">&#160;&#160;</span><span class="e">sort</span><span class="sy">(</span><span class="i">arr</span><span class="sy">,</span><span class="h"> </span><span class="i">arr</span><span class="o">+</span><span class="i">m</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc0a790a884-24"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">sz</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc0a790a884-25"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">m</span><span class="o">-</span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="h"> </span><span class="o">&gt;=</span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="o">--</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc0a790a884-26"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">k</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">j</span><span class="o">-</span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">k</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">k</span><span class="o">--</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54dc0a790a884-27"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">arr2</span><span class="sy">[</span><span class="i">sz</span><span class="o">++</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">arr</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="o">-</span><span class="v">arr</span><span class="sy">[</span><span class="i">k</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc0a790a884-28"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54dc0a790a884-29"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc0a790a884-30"><span class="h">&#160;&#160;</span><span class="t">long</span><span class="h"> </span><span class="t">long</span><span class="h"> </span><span class="v">T</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">gcd</span><span class="sy">(</span><span class="i">arr2</span><span class="sy">,</span><span class="h"> </span><span class="i">sz</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc0a790a884-31"><span class="h">&#160;&#160;</span><span class="t">long</span><span class="h"> </span><span class="t">long</span><span class="h"> </span><span class="v">ans</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="e">ceil</span><span class="sy">(</span><span class="sy">(</span><span class="t">double</span><span class="sy">)</span><span class="v">arr</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="i">T</span><span class="sy">)</span><span class="sy">)</span><span class="o">*</span><span class="i">T</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="v">arr</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54dc0a790a884-32"><span class="h">&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">"Case #"</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">i</span><span class="o">+</span><span class="cn">1</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">": "</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">ans</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">endl</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54dc0a790a884-33"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a26">Rating: 4.3/<strong>5</strong> (4 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Problem B: Fair Warning Solution (Google Code Jam Qualification Round 2010)</span></span>, <span class="rating"><span class="average">4.3</span> out of <span class="best">5</span> based on <span class="votes">4</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Read the question here from GCJ Qualification Round 2010:<br>&#187; <a href="http://code.google.com/codejam/contest/dashboard?c=433101#s=p2">Problem C: Theme Park</a></p></blockquote><p><span id="more-27"></span></p><p>This question is the easiest to understand, and is also the easiest to solve (for the small input). It&#8217;s tricky for the large input though, as you can see from the statistics &#8212; Only <b>40%</b> of the submitted attempts are correct. First, I&#8217;ll explain the easy way to solve this question which works for the small input. Then, I&#8217;ll explain why the large input is tricky to solve.</p><p>The first thing that might come to your mind is, what is a good data structure to represent the groups of people? A natural and appropriate choice is to use a queue.</p><p>To fill people into the roller coaster, you pop the first group from the front. Then the second, and third&#8230; Eventually you stop when the roller coaster is unable to fill the next group, or when the queue has been emptied.</p><p>For the next ride, push all previous groups to the back of the queue, and repeat the same steps again for a total of <b>R</b> times. (<b>R</b> is the total # of rides).</p><p>Alright, easy enough. You&#8217;ve passed the small input, and now you&#8217;re going for the large input.</p><p>Wait! We haven&#8217;t looked at the complexity of this solution. Since you are repeating <b>R</b> times, and each time there are at most <b>N</b> groups to fit in the roller coaster, the worst case is in the order of O(<b>R</b>*<b>N</b>). For the large input, the biggest <b>R</b> is 10^8 and the biggest N is 1000. Besides, there are at most 50 input set, which means the complexity is in the order of 10^12. Do you think this will run within minutes? (Hint: A solution that runs in minutes must be in the order of less than 10^9.)</p><p>Therefore, we need a different strategy! There are multiple optimizations given in Google&#8217;s <a href="http://code.google.com/codejam/contest/dashboard?c=433101#s=a">contest analysis</a>, but here are two of my observations:</p><p>1) We can use an array as the data structure. We do not have to move the contents of the array, as we can use an index which tells us where does the queue start. The index wraps around, which makes the array a circular array. This is much more efficient than using a queue.</p><p>2) We can exchange space for speed. Pre-processing comes to mind. At any index of the queue, we can know exactly where the next queue starts at. We can also be definite how many people will fit in the roller coaster for any starting index of queue. We store these two information in two tables.  The pre-processing step has a complexity of O(<b>N</b>^2).</p><p>Using optimization 2) above, the complexity decreases to either O(<b>N</b>^2) or O(<b>R</b>), depend on which is bigger &#8211; <b>N</b>^2 or <b>R</b>.</p><p>We are almost done, however there is another trap. Note that each group&#8217;s number, <b>g<sub>i</sub></b> could be as large as 10^7. There might be a case where you might add all <b>g<sub>i</sub></b>, from i=1 to i=N, therefore the sum could be as large as 10^10, which is more than what a 32 bit integer could store. In short, just use 64 bit integer for the sum.</p><p></p><div id="crayon-54e7651b46fd2" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int n;
cin &gt;&gt; n;
for (int m = 0; m &lt; n; m++) {
  long long R, k, N;
  cin &gt;&gt; R &gt;&gt; k &gt;&gt; N;
  long long li[2000];
  for (int i = 0; i &lt; N; i++) 
    cin &gt;&gt; li[i];

  long long result_money[2000] = {0};
  int result_st[2000] = {0};
  for (int h = 0; h &lt; N; h++) {
    long long sum = 0;
    int st = h;
    bool done = false;
    for (int b = 0; b &lt; N; b++) {
      if (sum + li[(h+b)%N] &lt;= k) {
        sum += li[(h+b)%N];
        st = (st+1)%N;
      } else {
        result_money[h] = sum;
        result_st[h] = st;
        done = true;
        break;
      }
    }
    if (!done) {
      result_money[h] = sum;
      result_st[h] = st;
    }
  }
  long long money = 0;
  int st = 0;
  for (long long i = 0; i &lt; R; i++) {
    money += result_money[st];
    st = result_st[st];
  }
  cout &lt;&lt; "Case #" &lt;&lt; m + 1 &lt;&lt; ": " &lt;&lt; money &lt;&lt; endl;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54e7651b46fd2-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-2">2</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-4">4</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-6">6</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-8">8</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-10">10</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-12">12</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-14">14</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-16">16</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-18">18</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-20">20</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-22">22</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-24">24</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-26">26</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-28">28</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-30">30</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-32">32</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-34">34</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-36">36</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e7651b46fd2-38">38</p><p class="crayon-num" data-line="crayon-54e7651b46fd2-39">39</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e7651b46fd2-1"><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-2"><span class="i">cin</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-3"><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">m</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">m</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">m</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-4"><span class="h">&#160;&#160;</span><span class="t">long</span><span class="h"> </span><span class="t">long</span><span class="h"> </span><span class="i">R</span><span class="sy">,</span><span class="h"> </span><span class="i">k</span><span class="sy">,</span><span class="h"> </span><span class="i">N</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-5"><span class="h">&#160;&#160;</span><span class="i">cin</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">R</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">k</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">N</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-6"><span class="h">&#160;&#160;</span><span class="t">long</span><span class="h"> </span><span class="t">long</span><span class="h"> </span><span class="v">li</span><span class="sy">[</span><span class="cn">2000</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-7"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">N</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cin</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="v">li</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-9">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-10"><span class="h">&#160;&#160;</span><span class="t">long</span><span class="h"> </span><span class="t">long</span><span class="h"> </span><span class="v">result_money</span><span class="sy">[</span><span class="cn">2000</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">{</span><span class="cn">0</span><span class="sy">}</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-11"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">result_st</span><span class="sy">[</span><span class="cn">2000</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">{</span><span class="cn">0</span><span class="sy">}</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-12"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">h</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">h</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">N</span><span class="sy">;</span><span class="h"> </span><span class="i">h</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-13"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">long</span><span class="h"> </span><span class="t">long</span><span class="h"> </span><span class="v">sum</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">st</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">h</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-15"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">bool</span><span class="h"> </span><span class="v">done</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-16"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">b</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">b</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">N</span><span class="sy">;</span><span class="h"> </span><span class="i">b</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-17"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">sum</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="v">li</span><span class="sy">[</span><span class="sy">(</span><span class="i">h</span><span class="o">+</span><span class="i">b</span><span class="sy">)</span><span class="o">%</span><span class="i">N</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">k</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-18"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">sum</span><span class="h"> </span><span class="o">+</span><span class="o">=</span><span class="h"> </span><span class="v">li</span><span class="sy">[</span><span class="sy">(</span><span class="i">h</span><span class="o">+</span><span class="i">b</span><span class="sy">)</span><span class="o">%</span><span class="i">N</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-19"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">st</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="i">st</span><span class="o">+</span><span class="cn">1</span><span class="sy">)</span><span class="o">%</span><span class="i">N</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-20"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-21"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">result_money</span><span class="sy">[</span><span class="i">h</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">sum</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-22"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">result_st</span><span class="sy">[</span><span class="i">h</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">st</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-23"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">done</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-24"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">break</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-25"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-26"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-27"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">done</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-28"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">result_money</span><span class="sy">[</span><span class="i">h</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">sum</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-29"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">result_st</span><span class="sy">[</span><span class="i">h</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">st</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-30"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-31"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-32"><span class="h">&#160;&#160;</span><span class="t">long</span><span class="h"> </span><span class="t">long</span><span class="h"> </span><span class="v">money</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-33"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">st</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-34"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">long</span><span class="h"> </span><span class="t">long</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">R</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-35"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">money</span><span class="h"> </span><span class="o">+</span><span class="o">=</span><span class="h"> </span><span class="v">result_money</span><span class="sy">[</span><span class="i">st</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-36"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">st</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">result_st</span><span class="sy">[</span><span class="i">st</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-37"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e7651b46fd2-38"><span class="h">&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">"Case #"</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">m</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">": "</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">money</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">endl</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e7651b46fd2-39"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a27">Rating: 5.0/<strong>5</strong> (1 vote cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Problem C: Theme Park Solution (Google Code Jam Qualification Round 2010)</span></span>, <span class="rating"><span class="average">5.0</span> out of <span class="best">5</span> based on <span class="votes">1</span> rating <span class="summary"></span></span></span></div></div></body><body><div><div id="post-25" class="post-25 post type-post status-publish format-standard hentry category-bit-operations"><div class="post-content"><h1 class="posttitle">Problem A: Snapper Chain Solution (Google Code Jam Qualification Round 2010)</h1><p class="date"> May 8, 2010 <span>in <a href="http://leetcode.com/category/bit-operations" title="View all posts in bit operations" rel="category tag">bit operations</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Read the question here from GCJ Qualification Round 2010:<br>&#187; <a href="http://code.google.com/codejam/contest/dashboard?c=433101#s=p0">Problem A: Snapper Chain</a></p></blockquote><p><span id="more-25"></span></p><p>Once you understand how the snapper works, it is easy. This problem can be solved in various ways, but the main observations are:</p><p>Let <i>k</i> be the number of times you snap your finger, <i>n</i> be the light&#8217;s position, and assume 0 = OFF and 1 = ON.</p><p>The configuration of the first five snappers (with the first snapper on the far left side) as <i>k</i> increases are:<br><b>00000</b> <i>k</i> = 0<br><b>10000</b> <i>k</i> = 1<br><b>01000</b> <i>k</i> = 2<br><b>11000</b> <i>k</i> = 3<br><b>00100</b> <i>k</i> = 4<br><b>10100</b> <i>k</i> = 5<br><b>01100</b> <i>k</i> = 6<br><b>11100</b> <i>k</i> = 7<br><b>00010</b> <i>k</i> = 8</p><p>See the pattern? The configuration of the snapper for any <i>k</i> is the binary representation of <i>k</i> itself!</p><p>For example, when <i>k</i>=3 and <i>n</i>=3, we know that the light is OFF because the snapper is in the OFF position (because the 3rd bit of <i>k</i>=3 is 0). When <i>k</i>=3 and <i>n</i>=2, the light is ON. However, when <i>k</i>=5 and <i>n</i>=3, the light is OFF even though the 3rd bit is 1. As the 2nd bit is 0, the electric couldn&#8217;t &#8220;flow&#8221; to the light bulb.</p><p>Therefore, in order for a bulb to light, it requires all of the bits from 1 to <i>n</i> to be all 1s.</p><p>The problem can still be solved using arrays representing the bits and iterate through them to check, but it is more efficient using bit manipulation. If you are familiar with bit manipulation, you can check if the bits from 1 to <i>n</i> are all 1s using the XOR operation and some bit shifting. My solution is shown below. This is just one sample solution. If you have a more elegant solution, you are welcome to add to that in the comments section.</p><p></p><div id="crayon-54d6680f6b79a" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int T, n, k;
    cin &gt;&gt; T;
    for (int i = 0; i &lt; T; i++) {
    cin &gt;&gt; n &gt;&gt; k;
    cout &lt;&lt; "Case #" &lt;&lt; i + 1 &lt;&lt; ": ";
    if (((1 &lt;&lt; (n-1)) ^ (k &amp; ((1 &lt;&lt; n)-1))) == ((1 &lt;&lt; (n-1))-1)) {
      cout &lt;&lt; "ON\n";
    } else {
      cout &lt;&lt; "OFF\n";
    }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54d6680f6b79a-1"><span class="t">int</span><span class="h"> </span><span class="i">T</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="i">k</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54d6680f6b79a-2"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cin</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">T</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54d6680f6b79a-3"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">T</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54d6680f6b79a-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cin</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">n</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">k</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54d6680f6b79a-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">"Case #"</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">": "</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54d6680f6b79a-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="sy">(</span><span class="cn">1</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="sy">(</span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="o">^</span><span class="h"> </span><span class="sy">(</span><span class="i">k</span><span class="h"> </span><span class="o">&amp;</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="cn">1</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="cn">1</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="sy">(</span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">)</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54d6680f6b79a-7"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">"ON\n"</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54d6680f6b79a-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54d6680f6b79a-9"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">"OFF\n"</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54d6680f6b79a-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54d6680f6b79a-11"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a25">Rating: 2.7/<strong>5</strong> (3 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Problem A: Snapper Chain Solution (Google Code Jam Qualification Round 2010)</span></span>, <span class="rating"><span class="average">2.7</span> out of <span class="best">5</span> based on <span class="votes">3</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/05/problem-snapper-chain-gcj-qualification.html" rel="tag">http://leetcode.com/2010/05/problem-snapper-chain-gcj-qualification.html</a></p></div></div></div></body><body><div><div class="entry"><blockquote><p>Implement regular expression matching with support for &#8216;.&#8217; and &#8216;*&#8217;.</p></blockquote><p><span id="more-877"></span></p><div class="hiblock">&#8216;.&#8217; Matches any single character.<br> &#8216;*&#8217; Matches zero or more of the preceding element.<p>The matching should cover the <strong>entire</strong> input string (not partial).</p><p>The function prototype should be:<br> bool isMatch(const char *s, const char *p)</p><p>Some examples:<br> isMatch(&#8220;aa&#8221;,&#8221;a&#8221;) &#8594; false<br> isMatch(&#8220;aa&#8221;,&#8221;aa&#8221;) &#8594; true<br> isMatch(&#8220;aaa&#8221;,&#8221;aa&#8221;) &#8594; false<br> isMatch(&#8220;aa&#8221;, &#8220;a*&#8221;) &#8594; true<br> isMatch(&#8220;aa&#8221;, &#8220;.*&#8221;) &#8594; true<br> isMatch(&#8220;ab&#8221;, &#8220;.*&#8221;) &#8594; true<br> isMatch(&#8220;aab&#8221;, &#8220;c*a*b&#8221;) &#8594; true</p></div><p><strong><span>Online Judge</span></strong><br> This problem is available at <a href="http://www.leetcode.com/onlinejudge">Online Judge</a>. <a href="http://www.leetcode.com/onlinejudge">Head over there</a> and it will judge your solution. Currently only able to compile C++/Java code. If you are using other languages, you can still verify your solution by looking at the judge&#8217;s test cases and its expected output.</p><p><strong>Background:</strong><br> It might seem deceptively easy even you know the general idea, but programming it correctly with all the details require careful thought.</p><p><strong><span>Edit:</span></strong><br> It seems that some readers are confused about why the regex pattern &#8220;.*&#8221; matches the string &#8220;ab&#8221;. &#8220;.*&#8221; means repeat the <em>preceding</em> element 0 or more times. Here, the <em>&#8220;preceding&#8221;</em> element is the <strong>dot</strong> character in the <em>pattern</em>, which can match any characters. Therefore, the regex pattern &#8220;.*&#8221; allows the dot to be repeated any number of times, which matches any string (even an empty string).</p><p><strong>Hints:</strong><br> Think carefully how you would do matching of &#8216;*&#8217;. Please note that &#8216;*&#8217; in regular expression is <em>different </em>from wildcard matching, as we match the previous character 0 or more times. But, how many times? If you are stuck, recursion is your friend.</p><p>This problem is a tricky one. Due to the huge number of edge cases, many people would write lengthy code and have numerous bugs on their first try. Try your best getting your code correct first, then refactor mercilessly to as clean and concise as possible!</p><p><a href="http://www.leetcode.com/wp-content/uploads/2011/08/DFAsmall.png"><img class="aligncenter size-full wp-image-892" title="DFAsmall" src="http://www.leetcode.com/wp-content/uploads/2011/08/DFAsmall.png" alt="" width="307" height="215"></a><br> A sample diagram of a deterministic finite state automata (DFA). DFAs are useful for doing lexical analysis and pattern matching. An example is UNIX&#8217;s grep tool. Please note that this post does not attempt to descibe a solution using DFA.</p><p><strong>Solution:</strong><br> This looks just like a straight forward string matching, isn&#8217;t it? Couldn&#8217;t we just match the pattern and the input string character by character? The question is, how to match a &#8216;*&#8217;?</p><p>A natural way is to use a greedy approach; that is, we attempt to match the previous character as many as we can. Does this work? Let us look at some examples.</p><p><em>s</em> = &#8220;abbbc&#8221;, <em>p</em> = &#8220;ab*c&#8221;<br> Assume we have matched the first &#8216;a&#8217; on both <em>s</em> and <em>p</em>. When we see &#8220;b*&#8221; in <em>p</em>, we skip all b&#8217;s in <em>s</em>. Since the last &#8216;c&#8217; matches on both side, they both match.</p><p><em>s</em> = &#8220;ac&#8221;, <em>p</em> = &#8220;ab*c&#8221;<br> After the first &#8216;a&#8217;, we see that there is no b&#8217;s to skip for &#8220;b*&#8221;. We match the last &#8216;c&#8217; on both side and conclude that they both match.</p><p>It seems that being greedy is good. But how about this case?</p><p><em>s</em> = &#8220;abbc&#8221;, <em>p</em> = &#8220;ab*bbc&#8221;<br> When we see &#8220;b*&#8221; in <em>p</em>, we would have skip all b&#8217;s in s. They both should match, but we have no more b&#8217;s to match. Therefore, the greedy approach fails in the above case.</p><p>One might be tempted to think of a quick workaround. How about counting the number of consecutive b&#8217;s in <em>s</em>? If it is smaller or equal to the number of consecutive b&#8217;s after &#8220;b*&#8221; in <em>p</em>, we conclude they both match and continue from there. For the opposite, we conclude there is not a match.</p><p>This seem to solve the above problem, but how about this case:<br> <em>s</em> = &#8220;abcbcd&#8221;, <em>p</em> = &#8220;a.*c.*d&#8221;</p><p>Here, &#8220;.*&#8221; in <em>p</em> means repeat &#8216;.&#8217; 0 or more times. Since &#8216;.&#8217; can match any character, it is not clear how many times &#8216;.&#8217; should be repeated. Should the &#8216;c&#8217; in <em>p</em> matches the first or second &#8216;c&#8217; in <em>s</em>? Unfortunately, there is no way to tell without using some kind of exhaustive search.</p><p>We need some kind of backtracking mechanism such that when a matching fails, we return to the last successful matching state and attempt to match more characters in <em>s</em> with &#8216;*&#8217;. This approach leads naturally to recursion.</p><p>The recursion mainly breaks down elegantly to the following two cases:</p><div class="hiblock"><ol><li>If the next character of <em>p</em> is <strong>NOT</strong> &#8216;*&#8217;, then it must match the current character of <em>s</em>. Continue pattern matching with the next character of both <em>s</em> and <em>p</em>.</li><li>If the next character of <em>p</em> is &#8216;*&#8217;, then we do a brute force exhaustive matching of 0, 1, or more repeats of current character of <em>p</em>&#8230; Until we could not match any more characters.</li></ol></div><p>You would need to consider the base case carefully too. That would be left as an exercise to the reader. <img src="http://leetcode.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley"></p><p>Below is the extremely concise code (Excluding comments and asserts, it&#8217;s about 10 lines of code).</p><div id="crayon-54eba1cfb4e1a" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
bool isMatch(const char *s, const char *p) {
  assert(s &amp;&amp; p);
  if (*p == '\0') return *s == '\0';

  // next char is not '*': must match current character
  if (*(p+1) != '*') {
    assert(*p != '*');
    return ((*p == *s) || (*p == '.' &amp;&amp; *s != '\0')) &amp;&amp; isMatch(s+1, p+1);
  }
  // next char is '*'
  while ((*p == *s) || (*p == '.' &amp;&amp; *s != '\0')) {
    if (isMatch(s, p+2)) return true;
    s++;
  }
  return isMatch(s, p+2);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eba1cfb4e1a-1"><span class="t">bool</span><span class="h"> </span><span class="e">isMatch</span><span class="sy">(</span><span class="m">const</span><span class="h"> </span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="i">s</span><span class="sy">,</span><span class="h"> </span><span class="m">const</span><span class="h"> </span><span class="t">char</span><span class="h"> </span><span class="o">*</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eba1cfb4e1a-2"><span class="h">&#160;&#160;</span><span class="st">assert</span><span class="sy">(</span><span class="i">s</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">p</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eba1cfb4e1a-3"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">*</span><span class="v">p</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="s">'\0'</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="o">*</span><span class="v">s</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="s">'\0'</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eba1cfb4e1a-4">&#160;</p><p class="crayon-line" id="crayon-54eba1cfb4e1a-5"><span class="h">&#160;&#160;</span><span class="c">// next char is not '*': must match current character</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eba1cfb4e1a-6"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">*</span><span class="sy">(</span><span class="i">p</span><span class="o">+</span><span class="cn">1</span><span class="sy">)</span><span class="h"> </span><span class="o">!=</span><span class="h"> </span><span class="s">'*'</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eba1cfb4e1a-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">assert</span><span class="sy">(</span><span class="o">*</span><span class="i">p</span><span class="h"> </span><span class="o">!=</span><span class="h"> </span><span class="s">'*'</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eba1cfb4e1a-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="o">*</span><span class="v">p</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="o">*</span><span class="i">s</span><span class="sy">)</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="sy">(</span><span class="o">*</span><span class="v">p</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="s">'.'</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="o">*</span><span class="i">s</span><span class="h"> </span><span class="o">!=</span><span class="h"> </span><span class="s">'\0'</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="e">isMatch</span><span class="sy">(</span><span class="i">s</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="o">+</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eba1cfb4e1a-9"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eba1cfb4e1a-10"><span class="h">&#160;&#160;</span><span class="c">// next char is '*'</span></p><p class="crayon-line" id="crayon-54eba1cfb4e1a-11"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="o">*</span><span class="v">p</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="o">*</span><span class="i">s</span><span class="sy">)</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="sy">(</span><span class="o">*</span><span class="v">p</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="s">'.'</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="o">*</span><span class="i">s</span><span class="h"> </span><span class="o">!=</span><span class="h"> </span><span class="s">'\0'</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eba1cfb4e1a-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="e">isMatch</span><span class="sy">(</span><span class="i">s</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="o">+</span><span class="cn">2</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eba1cfb4e1a-13"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">s</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eba1cfb4e1a-14"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54eba1cfb4e1a-15"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">isMatch</span><span class="sy">(</span><span class="i">s</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="o">+</span><span class="cn">2</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eba1cfb4e1a-16"><span class="sy">}</span></p></div></td></tr></table></div></div><p><strong><span>Further Thoughts:</span></strong><br> Some extra exercises to this problem:</p><div class="hiblock"><ol><li>If you think carefully, you can exploit some cases that the above code runs in exponential complexity. Could you think of some examples? How would you make the above code more efficient?</li><li>Try to implement partial matching instead of full matching. In addition, add &#8216;^&#8217; and &#8216;$&#8217; to the rule. &#8216;^&#8217; matches the starting position within the string, while &#8216;$&#8217; matches the ending position of the string.</li><li>Try to implement wildcard matching where &#8216;*&#8217; means any sequence of zero or more characters.</li></ol></div><p>For the interested reader, real world regular expression matching (such as the grep tool) are usually implemented by applying formal language theory. To understand more about it, you may read <a href="http://swtch.com/~rsc/regexp/regexp1.html">this article</a>.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a877">Rating: 4.8/<strong>5</strong> (67 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Regular Expression Matching</span></span>, <span class="rating"><span class="average">4.8</span> out of <span class="best">5</span> based on <span class="votes">67</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Given a function which generates a random integer in the range 1 to 7, write a function which generates a random integer in the range 1 to 10 uniformly.</p></blockquote><p><span id="more-54"></span><br></p><p>This appear to be one of those probabilistic analysis questions. You should be familiar with the concept of <a href="http://en.wikipedia.org/wiki/Expected_value">expected value</a>, as it could be extremely helpful in probabilistic analysis.</p><p><b>Hint:</b><br>Assume you could generate a random integer in the range <b>1</b> to <b>49</b>. How would you generate a random integer in the range of <b>1</b> to<b> 10</b>? What would you do if the generated number is in the desired range? What if it&#8217;s not?</p><p><b>Solution:</b><br>This solution is based upon <a href="http://en.wikipedia.org/wiki/Rejection_sampling">Rejection Sampling</a>. The main idea is when you generate a number in the desired range, output that number immediately. If the number is out of the desired range, reject it and re-sample again. As each number in the desired range has the same probability of being chosen, a uniform distribution is produced.</p><p>Obviously, we have to run <i>rand7()</i> function at least twice, as there are not enough numbers in the range of <b>1</b> to <b>10</b>. By running <i>rand7()</i> twice, we can get integers from <b>1</b> to <b>49</b> uniformly. Why?<br></p><center><pre class="controlledwidth"><b>   1  2  3  4  5  6  7</b>
<b>1</b>  <span>1  2  3  4  5  6  7</span>
<b>2</b>  <span>8  9 10  1  2  3  4</span>
<b>3</b>  <span>5  6  7  8  9 10  1</span>
<b>4</b>  <span>2  3  4  5  6  7  8</span>
<b>5</b>  <span>9 10  1  2  3  4  5</span>
<b>6</b>  <span>6  7  8  9 10  *  *</span>
<b>7</b>  <span>*  *  *  *  *  *  *</span></pre><p><span>A table is used to illustrate the concept of rejection sampling. Calling <i>rand7()</i> twice will get us row and column index that corresponds to a unique position in the table above. </span><span>Imagine that you are choosing a number randomly from the table above. If you hit a number, you return that number immediately. If you hit a *, you repeat the process again until you hit a number.</span></p></center><p>Since <b>49</b> is not a multiple of tens, we have to use rejection sampling. Our desired range is integers from <b>1</b> to <b>40</b>, which we can return the answer immediately. If not (the integer falls between<b> 41</b> to <b>49</b>), we reject it and repeat the whole process again.</p><p></p><div id="crayon-54eaffc326b1d" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int rand10() {
  int row, col, idx;
  do {
    row = rand7();
    col = rand7();
    idx = col + (row-1)*7;
  } while (idx &gt; 40);
  return 1 + (idx-1)%10;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eaffc326b1d-1"><span class="t">int</span><span class="h"> </span><span class="e">rand10</span><span class="sy">(</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eaffc326b1d-2"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="i">row</span><span class="sy">,</span><span class="h"> </span><span class="i">col</span><span class="sy">,</span><span class="h"> </span><span class="i">idx</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eaffc326b1d-3"><span class="h">&#160;&#160;</span><span class="st">do</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eaffc326b1d-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">row</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">rand7</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eaffc326b1d-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">col</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">rand7</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eaffc326b1d-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">idx</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">col</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="i">row</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="o">*</span><span class="cn">7</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eaffc326b1d-7"><span class="h">&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">idx</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="cn">40</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eaffc326b1d-8"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="cn">1</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="i">idx</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="o">%</span><span class="cn">10</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eaffc326b1d-9"><span class="sy">}</span></p></div></td></tr></table></div></div><p>Now let&#8217;s get our hands dirty to calculate the <a href="http://en.wikipedia.org/wiki/Expected_value">expected value</a> for the number of calls to <i>rand7()</i> function.</p><pre><b>E(# calls to rand7)</b> = 2 * (40/49) + 
                      4 * (9/49) * (40/49) + 
                      6 * (9/49)<sup>2</sup> * (40/49) + 
                      ...

                      <span><sub>&#8734;</sub></span>
                    = <span><b>&#8721;</b></span> 2k * (9/49)<sup>k-1</sup> * (40/49)
                      <span>k=1</span>

                    = (80/49) / (1 - 9/49)<sup>2</sup>
                    = <b>2.45</b></pre><p><b>Optimization:</b><br>There are a total of <b>2.45</b> calls to <i>rand7()</i> on average using the above method. Can we do better? Glad that you asked. In fact, we are able to improved the above method by <b>10%</b> faster.</p><p>It seems wasteful to throw away the integers in the range <b>41</b> to <b>49</b>. In fact, we could reuse them in the hope of minimizing the number of calls to <i>rand7()</i>. In the event that we could not generate a number in the desired range (<b>1</b> to <b>40</b>), it is equally likely that each number of <b>41</b> to <b>49</b> would be chosen. In other words, we are able to obtain integers in the range of <b>1 </b>to <b>9</b> uniformly. Now, run<i> rand7()</i> again and we obtain integers in the range of <b>1</b> to <b>63</b> uniformly. Apply rejection sampling where the desired range is <b>1</b> to <b>60</b>. If the generated number is in the desired range (<b>1</b> to<b> 60</b>), we return the number. If it is not (<b>61</b> to <b>63</b>), we at least obtain integers of <b>1</b> to <b>3</b> uniformly. Run <i>rand7()</i> again and we obtain integers in the range of <b>1</b> to <b>21</b> uniformly. The desired range is <b>1</b> to <b>20</b>, and in the unlikely event we get a <b>21</b>, we reject it and repeat the entire process again.</p><p>Below is the code for this optimized method. Note that there are code sections that are repeated, but I leave it as it is for code clarity. (Take it as a challenge to refactor the code below!)</p><p></p><div id="crayon-54eaffc326bd0" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int rand10Imp() {
  int a, b, idx;
  while (true) {
    a = rand7();
    b = rand7();
    idx = b + (a-1)*7;
    if (idx &lt;= 40)
      return 1 + (idx-1)%10;
    a = idx-40;
    b = rand7();
    // get uniform dist from 1 - 63
    idx = b + (a-1)*7;
    if (idx &lt;= 60)
      return 1 + (idx-1)%10;
    a = idx-60;
    b = rand7();
    // get uniform dist from 1-21
    idx = b + (a-1)*7;
    if (idx &lt;= 20)
      return 1 + (idx-1)%10;
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54eaffc326bd0-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eaffc326bd0-2">2</p><p class="crayon-num" data-line="crayon-54eaffc326bd0-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eaffc326bd0-4">4</p><p class="crayon-num" data-line="crayon-54eaffc326bd0-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eaffc326bd0-6">6</p><p class="crayon-num" data-line="crayon-54eaffc326bd0-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eaffc326bd0-8">8</p><p class="crayon-num" data-line="crayon-54eaffc326bd0-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eaffc326bd0-10">10</p><p class="crayon-num" data-line="crayon-54eaffc326bd0-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eaffc326bd0-12">12</p><p class="crayon-num" data-line="crayon-54eaffc326bd0-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eaffc326bd0-14">14</p><p class="crayon-num" data-line="crayon-54eaffc326bd0-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eaffc326bd0-16">16</p><p class="crayon-num" data-line="crayon-54eaffc326bd0-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eaffc326bd0-18">18</p><p class="crayon-num" data-line="crayon-54eaffc326bd0-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eaffc326bd0-20">20</p><p class="crayon-num" data-line="crayon-54eaffc326bd0-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eaffc326bd0-22">22</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eaffc326bd0-1"><span class="t">int</span><span class="h"> </span><span class="e">rand10Imp</span><span class="sy">(</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eaffc326bd0-2"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="i">a</span><span class="sy">,</span><span class="h"> </span><span class="i">b</span><span class="sy">,</span><span class="h"> </span><span class="i">idx</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eaffc326bd0-3"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="t">true</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eaffc326bd0-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">a</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">rand7</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eaffc326bd0-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">b</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">rand7</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eaffc326bd0-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">idx</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">b</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="i">a</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="o">*</span><span class="cn">7</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eaffc326bd0-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">idx</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="cn">40</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eaffc326bd0-8"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="cn">1</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="i">idx</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="o">%</span><span class="cn">10</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eaffc326bd0-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">a</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">idx</span><span class="o">-</span><span class="cn">40</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eaffc326bd0-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">b</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">rand7</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eaffc326bd0-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// get uniform dist from 1 - 63</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eaffc326bd0-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">idx</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">b</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="i">a</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="o">*</span><span class="cn">7</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eaffc326bd0-13"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">idx</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="cn">60</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eaffc326bd0-14"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="cn">1</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="i">idx</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="o">%</span><span class="cn">10</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eaffc326bd0-15"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">a</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">idx</span><span class="o">-</span><span class="cn">60</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eaffc326bd0-16"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">b</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">rand7</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eaffc326bd0-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// get uniform dist from 1-21</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eaffc326bd0-18"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">idx</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">b</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="i">a</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="o">*</span><span class="cn">7</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eaffc326bd0-19"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">idx</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="cn">20</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eaffc326bd0-20"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="cn">1</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="i">idx</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="o">%</span><span class="cn">10</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eaffc326bd0-21"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eaffc326bd0-22"><span class="sy">}</span></p></div></td></tr></table></div></div><p>The expected value for the number of calls to <i>rand7()</i> function using this optimization is:</p><pre><b>E(# calls to rand7)</b> = 2 * (40/49) + 
                      3 * (9/49) * (60/63) + 
                      4 * (9/49) * (3/63) * (20/21) + 

                      (9/49) * (3/63) * (1/21) * 
                      [ 6 * (40/49) + 
                        7 * (9/49) * (60/63) +
                        8 * (9/49) * (3/63) * (20/21) ] +

                      ((9/49) * (3/63) * (1/21))<sup>2</sup> * 
                      [ 10 * (40/49) + 
                        11 * (9/49) * (60/63) +
                        12 * (9/49) * (3/63) * (20/21) ] +
                      ...

                    = <b>2.2123</b></pre><p>I omitted some steps above because it involves some tedious math. Anyway, using this optimization, we are able to achieve <b>2.2123</b> calls to<i> rand7()</i> on average, which is <b>10%</b> less calls than the unoptimized method.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a54">Rating: 4.8/<strong>5</strong> (21 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Rejection Sampling</span></span>, <span class="rating"><span class="average">4.8</span> out of <span class="best">5</span> based on <span class="votes">21</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Reverse bits of an unsigned integer.</p></blockquote><p><span id="more-813"></span><br> There are several methods of reversing the bits of an unsigned integer. Here, we devise an algorithm using the XOR swap trick, and then optimize it using a divide and conquer methodology.</p><p><strong>Hint:</strong><br> How do you swap the i<sup>th</sup> bit with the j<sup>th</sup> bit? Try to figure out if you could use the XOR operation to do it.</p><p><strong>The XOR swap trick:</strong><br> Reversing bits could be done by swapping the n/2 least significant bits with its most significant bits. The trick is to implement a function called swapBits(i, j), which swaps the i<sup>th</sup> bit with the j<sup>th</sup> bit. If you still remember how XOR operation works: 0 ^ 0 == 0, 1 ^ 1 == 0, 0 ^ 1 == 1, and 1 ^ 0 == 1.</p><p>We only need to perform the swap when the i<sup>th</sup> bit and the j<sup>th</sup> bit are different. To test if two bits are different, we could use the XOR operation. Then, we need to toggle both i<sup>th</sup> and j<sup>th</sup> bits. We could apply the XOR operation again. By XOR-ing the i<sup>th</sup> and j<sup>th</sup> bit with 1, both bits are toggled.</p><div id="crayon-54e9fda1d5322" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
typedef unsigned int uint;
uint swapBits(uint x, uint i, uint j) {
  uint lo = ((x &gt;&gt; i) &amp; 1);
  uint hi = ((x &gt;&gt; j) &amp; 1);
  if (lo ^ hi) {
    x ^= ((1U &lt;&lt; i) | (1U &lt;&lt; j));
  }
  return x;
}

uint reverseXor(uint x) {
  uint n = sizeof(x) * 8;
  for (uint i = 0; i &lt; n/2; i++) {
    x = swapBits(x, i, n-i-1);
  }
  return x;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54e9fda1d5322-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e9fda1d5322-2">2</p><p class="crayon-num" data-line="crayon-54e9fda1d5322-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e9fda1d5322-4">4</p><p class="crayon-num" data-line="crayon-54e9fda1d5322-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e9fda1d5322-6">6</p><p class="crayon-num" data-line="crayon-54e9fda1d5322-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e9fda1d5322-8">8</p><p class="crayon-num" data-line="crayon-54e9fda1d5322-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e9fda1d5322-10">10</p><p class="crayon-num" data-line="crayon-54e9fda1d5322-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e9fda1d5322-12">12</p><p class="crayon-num" data-line="crayon-54e9fda1d5322-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e9fda1d5322-14">14</p><p class="crayon-num" data-line="crayon-54e9fda1d5322-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e9fda1d5322-16">16</p><p class="crayon-num" data-line="crayon-54e9fda1d5322-17">17</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e9fda1d5322-1"><span class="r">typedef</span><span class="h"> </span><span class="t">unsigned</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">uint</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e9fda1d5322-2"><span class="e">uint </span><span class="e">swapBits</span><span class="sy">(</span><span class="i">uint</span><span class="h"> </span><span class="i">x</span><span class="sy">,</span><span class="h"> </span><span class="i">uint</span><span class="h"> </span><span class="i">i</span><span class="sy">,</span><span class="h"> </span><span class="i">uint</span><span class="h"> </span><span class="i">j</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e9fda1d5322-3"><span class="h">&#160;&#160;</span><span class="e">uint </span><span class="v">lo</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">i</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e9fda1d5322-4"><span class="h">&#160;&#160;</span><span class="e">uint </span><span class="v">hi</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">j</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e9fda1d5322-5"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">lo</span><span class="h"> </span><span class="o">^</span><span class="h"> </span><span class="i">hi</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e9fda1d5322-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">x</span><span class="h"> </span><span class="o">^=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="cn">1U</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">i</span><span class="sy">)</span><span class="h"> </span><span class="o">|</span><span class="h"> </span><span class="sy">(</span><span class="cn">1U</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">j</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e9fda1d5322-7"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e9fda1d5322-8"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">x</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e9fda1d5322-9"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e9fda1d5322-10">&#160;</p><p class="crayon-line" id="crayon-54e9fda1d5322-11"><span class="e">uint </span><span class="e">reverseXor</span><span class="sy">(</span><span class="i">uint</span><span class="h"> </span><span class="i">x</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e9fda1d5322-12"><span class="h">&#160;&#160;</span><span class="i">uint</span><span class="h"> </span><span class="v">n</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">sizeof</span><span class="sy">(</span><span class="i">x</span><span class="sy">)</span><span class="h"> </span><span class="o">*</span><span class="h"> </span><span class="cn">8</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e9fda1d5322-13"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="i">uint</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="o">/</span><span class="cn">2</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e9fda1d5322-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">x</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">swapBits</span><span class="sy">(</span><span class="i">x</span><span class="sy">,</span><span class="h"> </span><span class="i">i</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="i">i</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e9fda1d5322-15"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e9fda1d5322-16"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">x</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e9fda1d5322-17"><span class="sy">}</span></p></div></td></tr></table></div></div><p>The run time complexity using the XOR trick to reverse bits is O(<em>n</em>), where <em>n</em> is the total number of bits in an unsigned integer.</p><p><strong>The divide and conquer approach:<br> </strong>Remember how merge sort works? Let us use an example of <em>n</em> == 8 (one byte) to see how this works:</p><pre>      01101001
    /         \
   0110      1001
  /   \     /   \
 01   10   10   01
 /\   /\   /\   /\
0 1  1 0  1 0  0 1</pre><p>The first step is to swap all odd and even bits. After that swap consecutive pairs of bits, and so on&#8230;</p><p>Therefore, only a total of log(n) operations are necessary.</p><p>The below code shows a specific case where <em>n</em> == 32, but it could be easily adapted to larger <em>n</em>&#8216;s as well.</p><div id="crayon-54e9fda1d53da" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
uint reverseMask(uint x) {
  assert(sizeof(x) == 4); // special case: only works for 4 bytes (32 bits).
  x = ((x &amp; 0x55555555) &lt;&lt; 1) | ((x &amp; 0xAAAAAAAA) &gt;&gt; 1);
  x = ((x &amp; 0x33333333) &lt;&lt; 2) | ((x &amp; 0xCCCCCCCC) &gt;&gt; 2);
  x = ((x &amp; 0x0F0F0F0F) &lt;&lt; 4) | ((x &amp; 0xF0F0F0F0) &gt;&gt; 4);
  x = ((x &amp; 0x00FF00FF) &lt;&lt; 8) | ((x &amp; 0xFF00FF00) &gt;&gt; 8);
  x = ((x &amp; 0x0000FFFF) &lt;&lt; 16) | ((x &amp; 0xFFFF0000) &gt;&gt; 16);
  return x;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e9fda1d53da-1"><span class="e">uint </span><span class="e">reverseMask</span><span class="sy">(</span><span class="i">uint</span><span class="h"> </span><span class="i">x</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e9fda1d53da-2"><span class="h">&#160;&#160;</span><span class="st">assert</span><span class="sy">(</span><span class="e">sizeof</span><span class="sy">(</span><span class="i">x</span><span class="sy">)</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">4</span><span class="sy">)</span><span class="sy">;</span><span class="h"> </span><span class="c">// special case: only works for 4 bytes (32 bits).</span></p><p class="crayon-line" id="crayon-54e9fda1d53da-3"><span class="h">&#160;&#160;</span><span class="v">x</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">&amp;</span><span class="h"> </span><span class="cn">0x55555555</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span><span class="h"> </span><span class="o">|</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">&amp;</span><span class="h"> </span><span class="cn">0xAAAAAAAA</span><span class="sy">)</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e9fda1d53da-4"><span class="h">&#160;&#160;</span><span class="v">x</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">&amp;</span><span class="h"> </span><span class="cn">0x33333333</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="cn">2</span><span class="sy">)</span><span class="h"> </span><span class="o">|</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">&amp;</span><span class="h"> </span><span class="cn">0xCCCCCCCC</span><span class="sy">)</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="cn">2</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e9fda1d53da-5"><span class="h">&#160;&#160;</span><span class="v">x</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">&amp;</span><span class="h"> </span><span class="cn">0x0F0F0F0F</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="cn">4</span><span class="sy">)</span><span class="h"> </span><span class="o">|</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">&amp;</span><span class="h"> </span><span class="cn">0xF0F0F0F0</span><span class="sy">)</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="cn">4</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e9fda1d53da-6"><span class="h">&#160;&#160;</span><span class="v">x</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">&amp;</span><span class="h"> </span><span class="cn">0x00FF00FF</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="cn">8</span><span class="sy">)</span><span class="h"> </span><span class="o">|</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">&amp;</span><span class="h"> </span><span class="cn">0xFF00FF00</span><span class="sy">)</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="cn">8</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e9fda1d53da-7"><span class="h">&#160;&#160;</span><span class="v">x</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">&amp;</span><span class="h"> </span><span class="cn">0x0000FFFF</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="cn">16</span><span class="sy">)</span><span class="h"> </span><span class="o">|</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">x</span><span class="h"> </span><span class="o">&amp;</span><span class="h"> </span><span class="cn">0xFFFF0000</span><span class="sy">)</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="cn">16</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e9fda1d53da-8"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">x</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e9fda1d53da-9"><span class="sy">}</span></p></div></td></tr></table></div></div><p><strong>Note:</strong><br> These are not the only methods for reversing bits, and not necessarily the fastest way. For more ideas/algorithms to reverse bits, please visit <a href="http://graphics.stanford.edu/~seander/bithacks.html#BitReverseObvious">Bit Twiddling Hacks</a>.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a813">Rating: 4.6/<strong>5</strong> (38 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Reverse Bits</span></span>, <span class="rating"><span class="average">4.6</span> out of <span class="best">5</span> based on <span class="votes">38</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="page" id="blog-single" role="main"><div id="post-10" class="post-10 post type-post status-publish format-standard hentry category-uncategorized"><div class="post-content"><h1 class="posttitle">Reversing linked list iteratively and recursively</h1><p class="date"> April 12, 2010 <span>in <a href="http://leetcode.com/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Implement the reversal of a singly linked list iteratively and recursively.</p></blockquote><p><span id="more-10"></span><br> Reversing linked list can be done both iteratively and recursively. In my opinion, the iterative solution should be more efficient and less memory overhead than its recursive counterpart (Imagine reversing a link list that has one million elements recursively! It would quickly run out of stack space).</p><p>The recursive solution can be coded in fewer lines of code, but is harder to code correctly. On the other hand, the iterative solution requires more code but is easier to verify.</p><p>1) The iterative way:</p><div id="crayon-54ec901f30347" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void reverse(Node*&amp; head) {
  if (!head) return;
  Node* prev = NULL;
  Node* curr = head;
  while (curr) {
    Node* next = curr-&gt;next;
    curr-&gt;next = prev;
    prev = curr;
    curr = next;
  }
  head = prev;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec901f30347-1"><span class="t">void</span><span class="h"> </span><span class="e">reverse</span><span class="sy">(</span><span class="e ">Node*</span><span class="o">&amp;</span><span class="h"> </span><span class="i">head</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec901f30347-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">head</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec901f30347-3"><span class="h">&#160;&#160;</span><span class="e ">Node*</span><span class="h"> </span><span class="v">prev</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec901f30347-4"><span class="h">&#160;&#160;</span><span class="e ">Node*</span><span class="h"> </span><span class="v">curr</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">head</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec901f30347-5"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">curr</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec901f30347-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e ">Node*</span><span class="h"> </span><span class="v">next</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">curr</span><span class="o">-&gt;</span><span class="i">next</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec901f30347-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">curr</span><span class="o">-&gt;</span><span class="v">next</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">prev</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec901f30347-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">prev</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">curr</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec901f30347-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">curr</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">next</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec901f30347-10"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ec901f30347-11"><span class="h">&#160;&#160;</span><span class="v">head</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">prev</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec901f30347-12"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>Please do note that the head pointer is passed in by reference. If you have trouble understanding the syntax, think the pointer as a type, and an &amp; sign followed by a type signifies the variable is passed by reference. The head pointer must be passed in by reference whenever there might be a change to the head pointer itself!</p><p>2) The recursive way:</p><div id="crayon-54ec901f30404" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void reverse(Node*&amp; p) {
  if (!p) return;
  Node* rest = p-&gt;next;
  if (!rest) return;
  reverse(rest);
  p-&gt;next-&gt;next = p;
  p-&gt;next = NULL;
  p = rest;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec901f30404-1"><span class="t">void</span><span class="h"> </span><span class="e">reverse</span><span class="sy">(</span><span class="e ">Node*</span><span class="o">&amp;</span><span class="h"> </span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec901f30404-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec901f30404-3"><span class="h">&#160;&#160;</span><span class="e ">Node*</span><span class="h"> </span><span class="v">rest</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">next</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec901f30404-4"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">rest</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec901f30404-5"><span class="h">&#160;&#160;</span><span class="e">reverse</span><span class="sy">(</span><span class="i">rest</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec901f30404-6"><span class="h">&#160;&#160;</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">next</span><span class="o">-&gt;</span><span class="v">next</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">p</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec901f30404-7"><span class="h">&#160;&#160;</span><span class="i">p</span><span class="o">-&gt;</span><span class="v">next</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec901f30404-8"><span class="h">&#160;&#160;</span><span class="v">p</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">rest</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec901f30404-9"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>Can you see why the head pointer is eventually updated to point to the last element of the list? Try to draw a diagram and see how the rest pointer changes when the recursion exits. (Hint: the rest pointer points to the last element and does not change).</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a10">Rating: 4.5/<strong>5</strong> (63 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Reversing linked list iteratively and recursively</span></span>, <span class="rating"><span class="average">4.5</span> out of <span class="best">5</span> based on <span class="votes">63</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/04/reversing-linked-list-iteratively-and.html" rel="tag">http://leetcode.com/2010/04/reversing-linked-list-iteratively-and.html</a></p></div></div><p id="respond"></p><h3 id="reply-title">Leave a reply <small></small></h3><div id="trackbacks"><h3>4 trackbacks</h3><ul id="trackbacklist"><li> <em>on June 21, 2014</em></li><li> <em>on June 21, 2014</em></li><li> <em>on June 21, 2014</em></li><li> <em>on October 8, 2014</em></li></ul></div></div></div></body><body><div><div id="post-14" class="post-14 post type-post status-publish format-standard hentry category-uncategorized"><div class="post-content"><h1 class="posttitle">Rotating an array in place</h1><p class="date"> April 13, 2010 <span>in <a href="http://leetcode.com/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Rotate a one-dimensional array of n elements to the right by k steps. <br>For instance, with n=7 and k=3, the array {a, b, c, d, e, f, g} is rotated to {e, f, g, a, b, c, d}.</p></blockquote><p><span id="more-14"></span></p><p>In my previous post we discussed about finding an element in a rotated array. You might ask, how do we rotate an array?</p><p>The straight forward way is to allocate a temporary array of size n, and then copy elements starting from index k to the new array, and copy it back to the old array. This is highly inefficient because:</p><ol><li>It needs extra space to store a temporary array (O(n) space).</li><p></p><li>It involves back-and-forth copying, a total of 2*n copy operations.</li><p></p></ol><p>So, the question is, can we do this more efficiently, preferably an in-place rotation method.</p><p>The answer is of course, yes. This is a trick so important that it becomes one of the frequently asked interview questions. An in-depth discussion is in <a href="http://www.cs.bell-labs.com/cm/cs/pearls/">Programming Pearls</a>, one of the must-read book in Computer Science.</p><p>The trick is to do three reverse operation. One for the entire string, one from index 0 to k-1, and lastly index k to n-1. Magically, this will yield the correct rotated array, without any extra space! (Of course, you need a temporary variable for swapping).</p><p></p><div id="crayon-54ec4002bdf8b" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void reverse_string(char* str, int left, int right) {
  char* p1 = str + left;
  char* p2 = str + right;
  while (p1 &lt; p2) {
    char temp = *p1;
    *p1 = *p2;
    *p2 = temp;
    p1++;
    p2--;
  }
}

void rotate(char* str, int k) {
  int n = strlen(str);
  reverse_string(str, 0, n-1);
  reverse_string(str, 0, k-1);
  reverse_string(str, k, n-1);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ec4002bdf8b-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4002bdf8b-2">2</p><p class="crayon-num" data-line="crayon-54ec4002bdf8b-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4002bdf8b-4">4</p><p class="crayon-num" data-line="crayon-54ec4002bdf8b-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4002bdf8b-6">6</p><p class="crayon-num" data-line="crayon-54ec4002bdf8b-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4002bdf8b-8">8</p><p class="crayon-num" data-line="crayon-54ec4002bdf8b-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4002bdf8b-10">10</p><p class="crayon-num" data-line="crayon-54ec4002bdf8b-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4002bdf8b-12">12</p><p class="crayon-num" data-line="crayon-54ec4002bdf8b-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4002bdf8b-14">14</p><p class="crayon-num" data-line="crayon-54ec4002bdf8b-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4002bdf8b-16">16</p><p class="crayon-num" data-line="crayon-54ec4002bdf8b-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec4002bdf8b-18">18</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec4002bdf8b-1"><span class="t">void</span><span class="h"> </span><span class="e">reverse_string</span><span class="sy">(</span><span class="t">char</span><span class="o">*</span><span class="h"> </span><span class="i">str</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">right</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4002bdf8b-2"><span class="h">&#160;&#160;</span><span class="t">char</span><span class="o">*</span><span class="h"> </span><span class="v">p1</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">str</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="i">left</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec4002bdf8b-3"><span class="h">&#160;&#160;</span><span class="t">char</span><span class="o">*</span><span class="h"> </span><span class="v">p2</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">str</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="i">right</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4002bdf8b-4"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">p1</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">p2</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec4002bdf8b-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">char</span><span class="h"> </span><span class="v">temp</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="o">*</span><span class="i">p1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4002bdf8b-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="o">*</span><span class="v">p1</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="o">*</span><span class="i">p2</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec4002bdf8b-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="o">*</span><span class="v">p2</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">temp</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4002bdf8b-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">p1</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec4002bdf8b-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">p2</span><span class="o">--</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4002bdf8b-10"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ec4002bdf8b-11"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4002bdf8b-12">&#160;</p><p class="crayon-line" id="crayon-54ec4002bdf8b-13"><span class="t">void</span><span class="h"> </span><span class="e">rotate</span><span class="sy">(</span><span class="t">char</span><span class="o">*</span><span class="h"> </span><span class="i">str</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">k</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4002bdf8b-14"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">n</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">strlen</span><span class="sy">(</span><span class="i">str</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec4002bdf8b-15"><span class="h">&#160;&#160;</span><span class="e">reverse_string</span><span class="sy">(</span><span class="i">str</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4002bdf8b-16"><span class="h">&#160;&#160;</span><span class="e">reverse_string</span><span class="sy">(</span><span class="i">str</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="i">k</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec4002bdf8b-17"><span class="h">&#160;&#160;</span><span class="e">reverse_string</span><span class="sy">(</span><span class="i">str</span><span class="sy">,</span><span class="h"> </span><span class="i">k</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec4002bdf8b-18"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a14">Rating: 4.4/<strong>5</strong> (20 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Rotating an array in place</span></span>, <span class="rating"><span class="average">4.4</span> out of <span class="best">5</span> based on <span class="votes">20</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/04/rotating-array-in-place.html" rel="tag">http://leetcode.com/2010/04/rotating-array-in-place.html</a></p></div></div></div></body><body><div><div class="entry"><blockquote><p>Describe an algorithm to save a Binary Search Tree (BST) to a file in terms of run-time and disk space complexity. You must be able to restore to the exact original BST using the saved format.</p></blockquote><p><span id="more-42"></span><br></p><p><b>Hint:</b><br>Remember the <b>big three</b> tree traversal algorithm? Yes, it&#8217;s <b>pre-order</b>, <b>in-order</b>, and <b>post-order</b> traversal. Only one of them is useful for storing a BST.</p><p>Assume we have the following BST:</p><pre><span>    </span>_<span>30</span>_ 
   /    \    
  <span>20</span>    <span>40</span>
 /     /  \<span>
10    </span><span>35  50</span></pre><p><b>In-order traversal</b><br>If we do an in-order traversal, we will output <span>10</span> <span>20</span><span> 30</span> <span>35</span> <span>40</span> <span>50</span>. There is no way of telling how the original BST structure looks like, as the following unbalanced BST is one of the possible BST sets from the output <span>10</span> <span>20</span><span> 30</span> <span>35</span> <span>40</span> <span>50</span>.</p><pre><span>          </span>_<span>50</span> 
         /       
        <span>40</span> 
       /   <span> 
      35</span>
     /<span>
    30</span>
   /
<span>  20</span>
 /
<span>10</span></pre><p><b>Post-order traversal:</b><br>If we do a post-order traversal, we will output the leaf nodes before its parent node. Specifically, we will output <span>10</span> <span>20</span><span> </span><span>35</span> <span>50</span> <span>40</span> <span>30</span> using post-order traversal. Imagine we&#8217;re reading the nodes to construct the tree back. See the problem that we are reading the leaf nodes before its parent? There&#8217;s too much trouble to create the child nodes before its parent. Remember that the BST insertion algorithm works by traversing the tree from the root to the correct leaf to insert.</p><p><b>Pre-order traversal:</b><br>Pre-order traversal is the <i>perfect </i>algorithm for making a copy of a BST. The output of a pre-order traversal of the BST above is <span>30</span> <span>20</span><span> 10</span> <span>40</span> <span>35</span> <span>50</span>. Please note the following important observation:</p><p class="hiblock">A node&#8217;s parent is always output before itself.</p><p>Therefore, when we read the BST back from the file, we are always able to create the parent node before creating its child nodes. The code for writing a BST to a file is exactly the same as pre-order traversal.</p><p></p><div class="separator"><img border="0" src="http://3.bp.blogspot.com/_UElib2WLeDE/TKG-JD1BdzI/AAAAAAAACVs/0TVEf9SRcYU/s1600/phonebook.jpg"></div><p><small>A Binary Search Tree (BST) is useful for storing phone book records in a memory limited device, such as a cell phone. The records are always maintained in sorted order, inserting and deleting a record takes <i>O</i>(lg <i>n</i>) time (slower than linked list, but much better than array).</small></p><p><b>Reading a BST from a file:</b><br>The question now is, how would you reconstruct a BST back from the file? Assume that we have the following pre-order traversal output of the BST earlier: <span>30</span> <span>20</span><span> 10</span> <span>40</span> <span>35</span> <span>50</span>.</p><p><b>Hint:</b><br>When we encounter a new node to insert, we should always place it into the first empty space which it will fit using a pre-order traversal. How do we determine the first empty space which a node will fit in? We can use the ordinary BST insertion algorithm, but the run-time complexity will be <i>O</i>(<i>n</i> lg <i>n</i>), since inserting a node takes <i>O</i>(lg <i>n</i>) time. Not efficient enough!</p><p><b>Solution:</b><br>Remember my post: <a href="http://www.leetcode.com/2010/09/determine-if-binary-tree-is-binary.html">Determine if a Binary Tree is a Binary Search Tree (BST)?</a></p><p>We use the same idea here. We pass the valid range of the values from the parent node to its child nodes. When we are about to insert a node, we will check if the insert value is in the valid range. If it is, this is the right space to insert. If it is not, we will try the next empty space. Reconstructing the whole BST from a file will take only <i>O</i>(<i>n</i>) time.</p><p></p><div id="crayon-54ea84bc1f720" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void readBSTHelper(int min, int max, int &amp;insertVal,
                   BinaryTree *&amp;p, ifstream &amp;fin) {
  if (insertVal &gt; min &amp;&amp; insertVal &lt; max) {
    int val = insertVal;
    p = new BinaryTree(val);
    if (fin &gt;&gt; insertVal) {
      readBSTHelper(min, val, insertVal, p-&gt;left, fin);
      readBSTHelper(val, max, insertVal, p-&gt;right, fin);
    }
  }
}

void readBST(BinaryTree *&amp;root, ifstream &amp;fin) {
  int val;
  fin &gt;&gt; val;
  readBSTHelper(INT_MIN, INT_MAX, val, root, fin);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ea84bc1f720-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ea84bc1f720-2">2</p><p class="crayon-num" data-line="crayon-54ea84bc1f720-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ea84bc1f720-4">4</p><p class="crayon-num" data-line="crayon-54ea84bc1f720-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ea84bc1f720-6">6</p><p class="crayon-num" data-line="crayon-54ea84bc1f720-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ea84bc1f720-8">8</p><p class="crayon-num" data-line="crayon-54ea84bc1f720-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ea84bc1f720-10">10</p><p class="crayon-num" data-line="crayon-54ea84bc1f720-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ea84bc1f720-12">12</p><p class="crayon-num" data-line="crayon-54ea84bc1f720-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ea84bc1f720-14">14</p><p class="crayon-num" data-line="crayon-54ea84bc1f720-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ea84bc1f720-16">16</p><p class="crayon-num" data-line="crayon-54ea84bc1f720-17">17</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ea84bc1f720-1"><span class="t">void</span><span class="h"> </span><span class="e">readBSTHelper</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">min</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">max</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">insertVal</span><span class="sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ea84bc1f720-2"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="e ">BinaryTree *</span><span class="o">&amp;</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="i">ifstream</span><span class="h"> </span><span class="o">&amp;</span><span class="i">fin</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ea84bc1f720-3"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">insertVal</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">min</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">insertVal</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">max</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ea84bc1f720-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">val</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">insertVal</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ea84bc1f720-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">p</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="r">new</span><span class="h"> </span><span class="e">BinaryTree</span><span class="sy">(</span><span class="i">val</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ea84bc1f720-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">fin</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">insertVal</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ea84bc1f720-7"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="e">readBSTHelper</span><span class="sy">(</span><span class="i">min</span><span class="sy">,</span><span class="h"> </span><span class="i">val</span><span class="sy">,</span><span class="h"> </span><span class="i">insertVal</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">fin</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ea84bc1f720-8"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="e">readBSTHelper</span><span class="sy">(</span><span class="i">val</span><span class="sy">,</span><span class="h"> </span><span class="i">max</span><span class="sy">,</span><span class="h"> </span><span class="i">insertVal</span><span class="sy">,</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="i">fin</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ea84bc1f720-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ea84bc1f720-10"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ea84bc1f720-11"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ea84bc1f720-12">&#160;</p><p class="crayon-line" id="crayon-54ea84bc1f720-13"><span class="t">void</span><span class="h"> </span><span class="e">readBST</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="o">&amp;</span><span class="i">root</span><span class="sy">,</span><span class="h"> </span><span class="i">ifstream</span><span class="h"> </span><span class="o">&amp;</span><span class="i">fin</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ea84bc1f720-14"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="i">val</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ea84bc1f720-15"><span class="h">&#160;&#160;</span><span class="i">fin</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">val</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ea84bc1f720-16"><span class="h">&#160;&#160;</span><span class="e">readBSTHelper</span><span class="sy">(</span><span class="i">INT_MIN</span><span class="sy">,</span><span class="h"> </span><span class="i">INT_MAX</span><span class="sy">,</span><span class="h"> </span><span class="i">val</span><span class="sy">,</span><span class="h"> </span><span class="i">root</span><span class="sy">,</span><span class="h"> </span><span class="i">fin</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ea84bc1f720-17"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b>Further thoughts:</b><br>How about storing a binary tree (not BST) to a file? Does the algorithm above works? Why and why not?</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a42">Rating: 4.9/<strong>5</strong> (41 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Saving a Binary Search Tree to a File</span></span>, <span class="rating"><span class="average">4.9</span> out of <span class="best">5</span> based on <span class="votes">41</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Write an efficient algorithm that searches for a value in an <i>n</i> x <i>m</i> table (two-dimensional array). This table is sorted along the rows and columns &#8212; that is,</p><p>Table[i][j] &#8804; Table[i][j + 1], <br>Table[i][j] &#8804; Table[i + 1][j]</p></blockquote><p><span id="more-47"></span><br></p><p><b><span>Note:</span></b><br>This is Part II of the article: <a href="http://www.leetcode.com/2010/10/searching-2d-sorted-matrix.html">Searching a 2D Sorted Matrix</a>. Please read <a href="http://www.leetcode.com/2010/10/searching-2d-sorted-matrix.html">Part I</a> for more background information.</p><p><b>Step-wise Linear Search:</b><br>We call this the <i>Step-wise Linear Search </i>method. Similar to <i>Diagonal Binary Search</i>, we begin with the upper right corner (or the bottom left corner). Instead of traversing diagonally each step, we traverse one step to the left or bottom. For example, the picture below shows the traversed path (the red line) when we search for <b>13</b>.</p><p>Essentially, each step we are able to eliminate either a row or a column. The worst case scenario is where it ended up in the opposite corner of the matrix, which takes at most 2<i>n</i> steps. Therefore, this algorithm runs in O(<i>n</i>) time, which is better than previous approaches.</p><div class="separator"><a href="http://4.bp.blogspot.com/_UElib2WLeDE/TK6IxlaUjRI/AAAAAAAACWk/xQkntM5OeC8/s1600/matrix_hi5.png" imageanchor="1"><img border="0" src="http://4.bp.blogspot.com/_UElib2WLeDE/TK6IxlaUjRI/AAAAAAAACWk/xQkntM5OeC8/s1600/matrix_hi5.png"></a></div><p class="separator"></p><p><small>An example showing the traversed path using step-wise linear search (colored in red) when the target element is <b>13</b>.</small></p><p>Below is the code and it is simple and straight to the point. You should not make any careless mistake during the interview.</p><p></p><div id="crayon-54eb522a1c8f4" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
bool stepWise(int mat[][N_MAX], int N, int target, 
              int &amp;row, int &amp;col) {
  if (target &lt; mat[0][0] || target &gt; mat[N-1][N-1]) return false;
  row = 0;
  col = N-1;
  while (row &lt;= N-1 &amp;&amp; col &gt;= 0) {
    if (mat[row][col] &lt; target) 
      row++;
    else if (mat[row][col] &gt; target)
      col--;
    else
      return true;
  }
  return false;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eb522a1c8f4-1"><span class="t">bool</span><span class="h"> </span><span class="e">stepWise</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="sy">]</span><span class="sy">[</span><span class="i">N_MAX</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">target</span><span class="sy">,</span><span class="h"> </span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c8f4-2"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">row</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">col</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eb522a1c8f4-3"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">target</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">target</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="i">N</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="i">N</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c8f4-4"><span class="h">&#160;&#160;</span><span class="v">row</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb522a1c8f4-5"><span class="h">&#160;&#160;</span><span class="v">col</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">N</span><span class="o">-</span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c8f4-6"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">row</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">N</span><span class="o">-</span><span class="cn">1</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">col</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">0</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eb522a1c8f4-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">mat</span><span class="sy">[</span><span class="i">row</span><span class="sy">]</span><span class="sy">[</span><span class="i">col</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">target</span><span class="sy">)</span><span class="h"> </span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c8f4-8"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">row</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb522a1c8f4-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">mat</span><span class="sy">[</span><span class="i">row</span><span class="sy">]</span><span class="sy">[</span><span class="i">col</span><span class="sy">]</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">target</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c8f4-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">col</span><span class="o">--</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb522a1c8f4-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c8f4-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb522a1c8f4-13"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c8f4-14"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb522a1c8f4-15"><span class="sy">}</span></p></div></td></tr></table></div></div><p>This is probably the answer that most interviewers would be looking for. But we will not stop here. Let us continue exploring some more interesting solutions.</p><p><b><span><span>Quad Partition:</span></span></b><br><span><span>Did you realize that this problem is actually solvable using a <a href="http://en.wikipedia.org/wiki/Divide_and_conquer_algorithm">divide and conquer</a> approach? I bet you did!</span></span></p><p><span><span> </span></span><span><span>First, we make an observation that the center element always partition the matrix into four smaller matrices. </span></span>For example, the center element <b>9</b> partitions the matrix into four matrices as shown in the picture below. <span><span>Since the four smaller matrices are also sorted both row and column-wise, the problem can naturally be divided into four sub-problems.</span></span></p><p>If you notice carefully, we are always able to eliminate one of the four sub-problems in each step. Assume our target is <b>21</b>, which is greater than the center element <b>9</b>. We can eliminate the upper left quadrant instantly, because all elements in that quadrant are always less than or equal to <b>9</b>. Now assume our target is <b>6</b>, which is less than <b>9</b>.</p><p>Similarly, we eliminate the bottom right quadrant from consideration, because elements in that quadrant must all be greater than <b>9</b>. Please note however, we still need to search the upper right and bottom left quadrant, even though the example below seems to show all elements in the two mentioned quadrants are greater than <b>9</b>.</p><p>Of course, if the center element is our target element, we have found the target and stop searching. If not, we proceed by searching the rest of three quadrants.</p><div class="separator"><a href="http://1.bp.blogspot.com/_UElib2WLeDE/TK6PT3SwHJI/AAAAAAAACWo/aatX4kZ8HPE/s1600/matrix_hi6.png" imageanchor="1"><img border="0" src="http://1.bp.blogspot.com/_UElib2WLeDE/TK6PT3SwHJI/AAAAAAAACWo/aatX4kZ8HPE/s1600/matrix_hi6.png"></a></div><p><small>The center element <b>9</b> partitions the matrix into four smaller quadrants (shown as four different colors).</small></p><p><span>What&#8217;s the complexity of the <i>Quad Partition </i>method?</span><b><span><span> </span></span></b><span><span>As it turns out, the run time complexity could be written directly as a recurrence relation:</span></span></p><pre><span> T(<i>n</i>) = 3T(<i>n</i>/2) + <i>c</i>,</span><span><span>

 where <i>n</i> is the dimension of the matrix.</span></span></pre><p><span>We add a constant <i>c</i> because each step we do a comparison between the target element and the center element, which takes some constant time.</span></p><p><span><span>We need to solve the above equation to obtain the complexity. This is where most confusion comes in. If you have taken advanced algorithm course, you could solve it using the <a href="http://en.wikipedia.org/wiki/Master_theorem">Master&#8217;s theorem</a>, but you <i>don&#8217;t really need to</i>. You could just expand the recurrence relation directly to solve it.</span></span></p><pre><span><span> </span></span><span><span>T(<i>n</i>) = 3T(<i>n</i>/2) + <i>c</i>,</span></span> <span><span>
      = 3 [ 3T(<i>n</i>/4) + <i>c</i><sub><i> </i></sub>] +<i> c</i></span></span> <span><span>
      = 3 [ 3 [ 3T(<i>n</i>/8) </span></span><span><span> + <i>c</i></span></span><span><span> ] + <i>c</i><sub><i> </i></sub>] +<i> c</i></span></span> 
      = 3<i><sup>k</sup></i> T(<i>n</i>/2<i><sup>k</sup></i>) + <i>c </i>(3<sup>k</sup> - 1)/2   
      = 3<i><sup>k </sup></i>( T(n/2<i><sup>k</sup></i>) + <i>c</i> ) - c/2


 Setting <i>k</i> = lg <i>n</i>,  
 T(<i>n</i>)  = 3<sup>lg </sup><i><sup>n</sup></i> ( T(1) + <i>c</i> ) - c/2 
       = <i>O</i>(3<sup>lg </sup><i><sup>n</sup></i>) 
       = <i>O</i>(<i>n</i><sup>lg 3</sup>)           lg <i><sup>n</sup></i><i> = n</i><sup>lg 3</sup> 
       = O(<i>n</i><sup>1.58</sup>)  
</pre><p>Below is the code for the <i>Quad Partition</i> method. <i>l</i> and<i> </i><i>u</i> represents the upper left corner, while <i>r</i> and<i> d</i> represents the bottom right corner of the matrix. Be very careful of corner cases. Please note that the code below checks for when <i>l</i> equals <i>r</i> (left = right) and <i>u</i> equals <i>d</i> (up = down) (ie, the matrix has only one element). If this only element differs from the target, the function must return false. If you omit this condition, then the code below never terminates, which in other word translates to: <i>You never double check your code</i>, and it is <a href="http://en.wikipedia.org/wiki/Hasta_la_vista,_baby">Hasta la vista, baby</a> from your interviewer.</p><p></p><div id="crayon-54eb522a1c9ab" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
bool quadPart(int mat[][N_MAX], int M, int N, int target, int l, int u, int r, int d, int &amp;targetRow, int &amp;targetCol) {
  if (l &gt; r || u &gt; d) return false;
  if (target &lt; mat[u][l] || target &gt; mat[d][r]) return false;
  int col = l + (r-l)/2;
  int row = u + (d-u)/2;
  if (mat[row][col] == target) {
    targetRow = row;
    targetCol = col;
    return true;
  } else if (l == r &amp;&amp; u == d) {
    return false;
  }
  if (mat[row][col] &gt; target) {
    return quadPart(mat, M, N, target, col+1, u, r, row, targetRow, targetCol) || 
           quadPart(mat, M, N, target, l, row+1, col, d, targetRow, targetCol) ||
           quadPart(mat, M, N, target, l, u, col, row, targetRow, targetCol);
  } else {
    return quadPart(mat, M, N, target, col+1, u, r, row, targetRow, targetCol) || 
           quadPart(mat, M, N, target, l, row+1, col, d, targetRow, targetCol) ||
           quadPart(mat, M, N, target, col+1, row+1, r, d, targetRow, targetCol);
  }
}

bool quadPart(int mat[][N_MAX], int N, int target, int &amp;row, int &amp;col) {
  return quadPart(mat, N, N, target, 0, 0, N-1, N-1, row, col);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54eb522a1c9ab-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1c9ab-2">2</p><p class="crayon-num" data-line="crayon-54eb522a1c9ab-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1c9ab-4">4</p><p class="crayon-num" data-line="crayon-54eb522a1c9ab-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1c9ab-6">6</p><p class="crayon-num" data-line="crayon-54eb522a1c9ab-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1c9ab-8">8</p><p class="crayon-num" data-line="crayon-54eb522a1c9ab-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1c9ab-10">10</p><p class="crayon-num" data-line="crayon-54eb522a1c9ab-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1c9ab-12">12</p><p class="crayon-num" data-line="crayon-54eb522a1c9ab-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1c9ab-14">14</p><p class="crayon-num" data-line="crayon-54eb522a1c9ab-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1c9ab-16">16</p><p class="crayon-num" data-line="crayon-54eb522a1c9ab-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1c9ab-18">18</p><p class="crayon-num" data-line="crayon-54eb522a1c9ab-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1c9ab-20">20</p><p class="crayon-num" data-line="crayon-54eb522a1c9ab-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1c9ab-22">22</p><p class="crayon-num" data-line="crayon-54eb522a1c9ab-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1c9ab-24">24</p><p class="crayon-num" data-line="crayon-54eb522a1c9ab-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1c9ab-26">26</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eb522a1c9ab-1"><span class="t">bool</span><span class="h"> </span><span class="e">quadPart</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="sy">]</span><span class="sy">[</span><span class="i">N_MAX</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">M</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">target</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">l</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">u</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">r</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">d</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">targetRow</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">targetCol</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c9ab-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">l</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">r</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">u</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">d</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb522a1c9ab-3"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">target</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="i">u</span><span class="sy">]</span><span class="sy">[</span><span class="i">l</span><span class="sy">]</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">target</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="i">d</span><span class="sy">]</span><span class="sy">[</span><span class="i">r</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c9ab-4"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">col</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">l</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="i">r</span><span class="o">-</span><span class="i">l</span><span class="sy">)</span><span class="o">/</span><span class="cn">2</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb522a1c9ab-5"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">row</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">u</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="i">d</span><span class="o">-</span><span class="i">u</span><span class="sy">)</span><span class="o">/</span><span class="cn">2</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c9ab-6"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">mat</span><span class="sy">[</span><span class="i">row</span><span class="sy">]</span><span class="sy">[</span><span class="i">col</span><span class="sy">]</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">target</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eb522a1c9ab-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">targetRow</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">row</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c9ab-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">targetCol</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">col</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb522a1c9ab-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c9ab-10"><span class="h">&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">l</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">r</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="v">u</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">d</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eb522a1c9ab-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c9ab-12"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54eb522a1c9ab-13"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">mat</span><span class="sy">[</span><span class="i">row</span><span class="sy">]</span><span class="sy">[</span><span class="i">col</span><span class="sy">]</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">target</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c9ab-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">quadPart</span><span class="sy">(</span><span class="i">mat</span><span class="sy">,</span><span class="h"> </span><span class="i">M</span><span class="sy">,</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="i">target</span><span class="sy">,</span><span class="h"> </span><span class="i">col</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">u</span><span class="sy">,</span><span class="h"> </span><span class="i">r</span><span class="sy">,</span><span class="h"> </span><span class="i">row</span><span class="sy">,</span><span class="h"> </span><span class="i">targetRow</span><span class="sy">,</span><span class="h"> </span><span class="i">targetCol</span><span class="sy">)</span><span class="h"> </span><span class="o">||</span><span class="h"> </span></p><p class="crayon-line" id="crayon-54eb522a1c9ab-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="e">quadPart</span><span class="sy">(</span><span class="i">mat</span><span class="sy">,</span><span class="h"> </span><span class="i">M</span><span class="sy">,</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="i">target</span><span class="sy">,</span><span class="h"> </span><span class="i">l</span><span class="sy">,</span><span class="h"> </span><span class="i">row</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">col</span><span class="sy">,</span><span class="h"> </span><span class="i">d</span><span class="sy">,</span><span class="h"> </span><span class="i">targetRow</span><span class="sy">,</span><span class="h"> </span><span class="i">targetCol</span><span class="sy">)</span><span class="h"> </span><span class="o">||</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c9ab-16"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="e">quadPart</span><span class="sy">(</span><span class="i">mat</span><span class="sy">,</span><span class="h"> </span><span class="i">M</span><span class="sy">,</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="i">target</span><span class="sy">,</span><span class="h"> </span><span class="i">l</span><span class="sy">,</span><span class="h"> </span><span class="i">u</span><span class="sy">,</span><span class="h"> </span><span class="i">col</span><span class="sy">,</span><span class="h"> </span><span class="i">row</span><span class="sy">,</span><span class="h"> </span><span class="i">targetRow</span><span class="sy">,</span><span class="h"> </span><span class="i">targetCol</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb522a1c9ab-17"><span class="h">&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c9ab-18"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">quadPart</span><span class="sy">(</span><span class="i">mat</span><span class="sy">,</span><span class="h"> </span><span class="i">M</span><span class="sy">,</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="i">target</span><span class="sy">,</span><span class="h"> </span><span class="i">col</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">u</span><span class="sy">,</span><span class="h"> </span><span class="i">r</span><span class="sy">,</span><span class="h"> </span><span class="i">row</span><span class="sy">,</span><span class="h"> </span><span class="i">targetRow</span><span class="sy">,</span><span class="h"> </span><span class="i">targetCol</span><span class="sy">)</span><span class="h"> </span><span class="o">||</span><span class="h"> </span></p><p class="crayon-line" id="crayon-54eb522a1c9ab-19"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="e">quadPart</span><span class="sy">(</span><span class="i">mat</span><span class="sy">,</span><span class="h"> </span><span class="i">M</span><span class="sy">,</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="i">target</span><span class="sy">,</span><span class="h"> </span><span class="i">l</span><span class="sy">,</span><span class="h"> </span><span class="i">row</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">col</span><span class="sy">,</span><span class="h"> </span><span class="i">d</span><span class="sy">,</span><span class="h"> </span><span class="i">targetRow</span><span class="sy">,</span><span class="h"> </span><span class="i">targetCol</span><span class="sy">)</span><span class="h"> </span><span class="o">||</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c9ab-20"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="e">quadPart</span><span class="sy">(</span><span class="i">mat</span><span class="sy">,</span><span class="h"> </span><span class="i">M</span><span class="sy">,</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="i">target</span><span class="sy">,</span><span class="h"> </span><span class="i">col</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">row</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">r</span><span class="sy">,</span><span class="h"> </span><span class="i">d</span><span class="sy">,</span><span class="h"> </span><span class="i">targetRow</span><span class="sy">,</span><span class="h"> </span><span class="i">targetCol</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb522a1c9ab-21"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c9ab-22"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54eb522a1c9ab-23">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c9ab-24"><span class="t">bool</span><span class="h"> </span><span class="e">quadPart</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="sy">]</span><span class="sy">[</span><span class="i">N_MAX</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">target</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">row</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">col</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eb522a1c9ab-25"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">quadPart</span><span class="sy">(</span><span class="i">mat</span><span class="sy">,</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="i">target</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="i">N</span><span class="o">-</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">N</span><span class="o">-</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">row</span><span class="sy">,</span><span class="h"> </span><span class="i">col</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1c9ab-26"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b><span><span>Binary</span></span></b><b><span><span> Partition:</span></span></b><br>We can even reduce the number of sub-problems from three to only two using a method we called <i>Binary Partition</i>. This time we traverse along either the middle row, middle column, or diagonally (as shown in highlighted gray cells in images <i>a</i>), <i>b</i>), and <i>c</i>) below). As we traverse, we find the point such that the target element <i>s</i> satisfies the following condition:</p><pre><i> a<sub>i</sub></i> s a<sub><i>i</i>+1</sub> ,  

 where <i>a</i><i><sub>i</sub></i> is the <i>i</i><sup>th</sup> traversed cell.
</pre><p></p><div class="separator"><a href="http://3.bp.blogspot.com/_UElib2WLeDE/TK6nPzke1xI/AAAAAAAACW4/ZDCFvqyvq3M/s1600/matrix_hi9.png"><img border="0" src="http://3.bp.blogspot.com/_UElib2WLeDE/TK6nPzke1xI/AAAAAAAACW4/ZDCFvqyvq3M/s1600/matrix_hi9.png"></a></div><p><small><i>a</i>) Row-wise binary partition. The highlighted gray cells represents the traversed row (the middle row). The target <b>10</b> is found between <b>9</b> and <b>16</b>.</small><br><small><br></small></p><div class="separator"><a href="http://4.bp.blogspot.com/_UElib2WLeDE/TK6lmlteMMI/AAAAAAAACW0/_Muq6wSeSXg/s1600/matrix_hi7.png"><img border="0" src="http://4.bp.blogspot.com/_UElib2WLeDE/TK6lmlteMMI/AAAAAAAACW0/_Muq6wSeSXg/s1600/matrix_hi7.png"></a></div><p><small><i>b</i>) Column-wise binary partition. </small><small>The highlighted gray cells represents the traversed column (the middle column). </small><small>The target <b>10</b> is found between <b>9</b> and <b>14</b>.</small></p><p></p><div class="separator"><a href="http://2.bp.blogspot.com/_UElib2WLeDE/TK6lVHFdKsI/AAAAAAAACWw/953Uuf_DC8c/s1600/matrix_hi8.png"><img border="0" src="http://2.bp.blogspot.com/_UElib2WLeDE/TK6lVHFdKsI/AAAAAAAACWw/953Uuf_DC8c/s1600/matrix_hi8.png"></a></div><p><small><i>c</i>) Diagonal-based binary partition. </small><small>The highlighted gray cells represents the traversed diagonal. </small><small>The target <b>10</b> is found between <b>9</b> and <b>17</b>. Please note that diagonal-based binary partition would fail in a non-square matrix (for the above example, it will not work in the two sub-matrices because they are non-square matrices).</small></p><p>If the target element equals one of the traversed cells, we immediately return the element as found. Otherwise we partition the matrix into two sub-matrices following the partition point we found. As it turns out, we need <i>c</i><i>n</i> time (linear time) to find such partition point, since we are essentially performing a linear search. Therefore, the complexity could be written as the following recurrence relation: (Note: I omitted the proof, as it is left as an exercise to the reader. <img border="0" src="http://4.bp.blogspot.com/_UElib2WLeDE/TK7aJSBFXSI/AAAAAAAACW8/5f8CRD5dJ8o/s1600/smiley.jpg"> )</p><pre> T(<i>n</i>) = 2T(<i>n</i>/2) + <i>c</i><i>n</i>
      = <i>O</i>(<i>n</i> lg <i>n</i>)             
</pre><p>The <i>Binary Partition</i> algorithm runs in <i>O</i>(<i>n</i> lg <i>n</i>) time. You might expect its complexity to be lower than <i>Quad Partition</i>, since it has only two sub-problems (instead of three) to solve. The reason of the higher order complexity is due to the extra <i>O</i>(<i>n</i>) time doing a linear search for the partition point where <i>a<sub>i</sub></i> s a<sub><i>i</i>+1</sub>.</p><p>Please note that the matrix is not necessarily divided into two equal-sized sub-matrices. One of the matrix could be bigger than the other one, or in the extreme case, the other matrix could be of size zero. Here, we have made an assumption that each partition step divides the matrix into two equal-sized sub-matrices, just for the sake of complexity analysis.</p><p>Below is the code for the <i>Binary Partition </i>method. The code below chooses the middle column as the place to search for the partition point.</p><p></p><div id="crayon-54eb522a1ca60" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
bool binPart(int mat[][N_MAX], int M, int N, int target, int l, int u, int r, int d, int &amp;targetRow, int &amp;targetCol) {
  if (l &gt; r || u &gt; d) return false;
  if (target &lt; mat[u][l] || target &gt; mat[d][r]) return false;
  int mid = l + (r-l)/2;
  int row = u;
  while (row &lt;= d &amp;&amp; mat[row][mid] &lt;= target) {
    if (mat[row][mid] == target) {
      targetRow = row;
      targetCol = mid;
      return true;
    }
    row++;
  }
  return binPart(mat, M, N, target, mid+1, u, r, row-1, targetRow, targetCol) ||
         binPart(mat, M, N, target, l, row, mid-1, d, targetRow, targetCol);
}

bool binPart(int mat[][N_MAX], int N, int target, int &amp;row, int &amp;col) {
  return binPart(mat, N, N, target, 0, 0, N-1, N-1, row, col);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54eb522a1ca60-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1ca60-2">2</p><p class="crayon-num" data-line="crayon-54eb522a1ca60-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1ca60-4">4</p><p class="crayon-num" data-line="crayon-54eb522a1ca60-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1ca60-6">6</p><p class="crayon-num" data-line="crayon-54eb522a1ca60-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1ca60-8">8</p><p class="crayon-num" data-line="crayon-54eb522a1ca60-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1ca60-10">10</p><p class="crayon-num" data-line="crayon-54eb522a1ca60-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1ca60-12">12</p><p class="crayon-num" data-line="crayon-54eb522a1ca60-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1ca60-14">14</p><p class="crayon-num" data-line="crayon-54eb522a1ca60-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1ca60-16">16</p><p class="crayon-num" data-line="crayon-54eb522a1ca60-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1ca60-18">18</p><p class="crayon-num" data-line="crayon-54eb522a1ca60-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb522a1ca60-20">20</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eb522a1ca60-1"><span class="t">bool</span><span class="h"> </span><span class="e">binPart</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="sy">]</span><span class="sy">[</span><span class="i">N_MAX</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">M</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">target</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">l</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">u</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">r</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">d</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">targetRow</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">targetCol</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1ca60-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">l</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">r</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">u</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">d</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb522a1ca60-3"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">target</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="i">u</span><span class="sy">]</span><span class="sy">[</span><span class="i">l</span><span class="sy">]</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">target</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="i">d</span><span class="sy">]</span><span class="sy">[</span><span class="i">r</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1ca60-4"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">mid</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">l</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="i">r</span><span class="o">-</span><span class="i">l</span><span class="sy">)</span><span class="o">/</span><span class="cn">2</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb522a1ca60-5"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">row</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">u</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1ca60-6"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">row</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">d</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="i">row</span><span class="sy">]</span><span class="sy">[</span><span class="i">mid</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">target</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eb522a1ca60-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">mat</span><span class="sy">[</span><span class="i">row</span><span class="sy">]</span><span class="sy">[</span><span class="i">mid</span><span class="sy">]</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">target</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1ca60-8"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">targetRow</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">row</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb522a1ca60-9"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">targetCol</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">mid</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1ca60-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb522a1ca60-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1ca60-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">row</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb522a1ca60-13"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1ca60-14"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">binPart</span><span class="sy">(</span><span class="i">mat</span><span class="sy">,</span><span class="h"> </span><span class="i">M</span><span class="sy">,</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="i">target</span><span class="sy">,</span><span class="h"> </span><span class="i">mid</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">u</span><span class="sy">,</span><span class="h"> </span><span class="i">r</span><span class="sy">,</span><span class="h"> </span><span class="i">row</span><span class="o">-</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">targetRow</span><span class="sy">,</span><span class="h"> </span><span class="i">targetCol</span><span class="sy">)</span><span class="h"> </span><span class="o">||</span></p><p class="crayon-line" id="crayon-54eb522a1ca60-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span class="e">binPart</span><span class="sy">(</span><span class="i">mat</span><span class="sy">,</span><span class="h"> </span><span class="i">M</span><span class="sy">,</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="i">target</span><span class="sy">,</span><span class="h"> </span><span class="i">l</span><span class="sy">,</span><span class="h"> </span><span class="i">row</span><span class="sy">,</span><span class="h"> </span><span class="i">mid</span><span class="o">-</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">d</span><span class="sy">,</span><span class="h"> </span><span class="i">targetRow</span><span class="sy">,</span><span class="h"> </span><span class="i">targetCol</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1ca60-16"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54eb522a1ca60-17">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1ca60-18"><span class="t">bool</span><span class="h"> </span><span class="e">binPart</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="sy">]</span><span class="sy">[</span><span class="i">N_MAX</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">target</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">row</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">col</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eb522a1ca60-19"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">binPart</span><span class="sy">(</span><span class="i">mat</span><span class="sy">,</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="i">target</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="i">N</span><span class="o">-</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">N</span><span class="o">-</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">row</span><span class="sy">,</span><span class="h"> </span><span class="i">col</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb522a1ca60-20"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b>Improved Binary Partition:</b> <br>Since the partition column (or row, or diagonal) is sorted, not utilizing the sorted configuration is a waste. In fact, we are able to modify binary search to search for the partition point in lg <i>n</i> time. Then, the complexity can be expressed as the following recurrence relation:   (Note: I&#8217;ve omitted some steps, try to work out the math by yourself)</p><pre> T(<i>n</i>) = 2T(<i>n</i>/2) + <i>c</i> lg <i>n
                       </i><span>lg</span><i><span> n</span></i>
      = 2 <sup>lg <i>n</i></sup> T(1) + <i>c</i> <span class="large"><b>&#8721;</b></span> ( 2 lg (<i>n</i>/2<sup>k</sup>) ) 
                       <span><i>k</i>=1</span>
      = <i>O</i>(<i>n</i>) + <i>c</i> (2<i>n</i> - lg <i>n</i> - 2)
      = <i>O</i>(<i>n</i>)
</pre><p>By incorporating binary search, we are able to reduce the complexity to <i>O</i>(<i>n</i>). However, we have made an assumption, that is: <i>Each subdivision of matrices must be of equal size</i> <i>(or, each partition point is exactly at the center of the partition column)</i>. This leads to the following question:</p><p class="hiblock">It is entirely possible that the subdivided matrices are of different sizes. Would the complexity change by an order in this case?</p><p>This turns out to be a difficult question to answer, but I could provide further insight to you by deriving the complexity of the other extreme, that is:</p><p class="hiblock">Each subdivision results in only one sub-matrix (ie, one matrix has the original matrix being halved, while the other matrix is empty.)</p><p>For an example of the above case, try searching for <b>&#8211;1</b> in the above sample matrix shown in image (<i>a</i>). Since each subdivision results in the original matrix being halved, the total number of subdivisions can be at most lg <i>n</i> times. Assuming each binary search performed before a subdivision takes <i>c</i> lg <i>n</i> time, the complexity can be expressed as follow:</p><pre>T(<i>n</i>) = <i>c </i>lg <i>n</i> + ... + <i>c </i>lg <i>n</i>    (a total of lg <i>n</i> times)   
     = <i>c </i>lg <i>n * </i>lg<i> n</i>
     = <i>O</i>(lg <i>n</i>)<sup>2</sup></pre><p>As you can see, the run time complexity of this extreme case is <i>O</i>(lg <i>n</i>)<sup>2</sup>, which turns out to be even less than <i>O</i>(<i>n</i>). We conclude that this is not the worst case scenario, as some people might believe.</p><p>Please note that the worst case for the <i>Improved Binary Partition </i>method had not been proven here. We had merely proven that one case of the <i>Improved Binary Partition</i> could run in <i>O</i>(<i>n</i>). If you know the proof of the worst case, I would be interested to hear from you.</p><p><b><span>&#187; Continue reading</span> <a href="http://www.leetcode.com/2010/10/searching-2d-sorted-matrix-part-iii.html">Part III: Searching a 2D Sorted Matrix</a>.</b></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a47">Rating: 4.9/<strong>5</strong> (33 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Searching a 2D Sorted Matrix Part II</span></span>, <span class="rating"><span class="average">4.9</span> out of <span class="best">5</span> based on <span class="votes">33</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="page" id="blog-single" role="main"><div id="post-48" class="post-48 post type-post status-publish format-standard hentry category-divide-and-conquer"><div class="post-content"><h1 class="posttitle">Searching a 2D Sorted Matrix Part III</h1><p class="date"> October 13, 2010 <span>in <a href="http://leetcode.com/category/divide-and-conquer" title="View all posts in divide and conquer" rel="category tag">divide and conquer</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Write an efficient algorithm that searches for a value in an <i>n</i> x <i>m</i> table (two-dimensional array). This table is sorted along the rows and columns &#8212; that is,</p><p>Table[i][j] &#8804; Table[i][j + 1], <br>Table[i][j] &#8804; Table[i + 1][j]</p></blockquote><p><span id="more-48"></span><br></p><p><b><span>Note:</span></b><br>This is Part III of the article: <a href="http://www.leetcode.com/2010/10/searching-2d-sorted-matrix.html">Searching a 2D Sorted Matrix</a>. Please read <a href="http://www.leetcode.com/2010/10/searching-2d-sorted-matrix.html">Part I</a> and <a href="http://www.leetcode.com/2010/10/searching-2d-sorted-matrix-part-ii.html">Part II</a> for more background information.</p><p><b>Test Data Sets:</b><br>I created three test input files (Download all of them below) by myself for testing and studying purposes. Each file contains multiple test cases. The easy input contains 15 test cases, with <b>M</b> and <b>N</b> = 10, <b>K</b> = 50. The hard input contains 23 test cases, but with <b>M</b> and <b>N</b> = 100, <b>K</b> = 100,000. The performance input has <b>M</b> and <b>N</b> = 1000, and <b>K</b> = 1,000,000.</p><p>Here are the run times of the five different algorithms using the performance input data set.</p><pre>Binary Search:             <b>31.62s
</b>Diagonal Binary Search:    <b>32.46s</b>
Step-wise Linear Search:   <b>10.71s</b> 
Quad Partition:            <b>17.33s</b>
Binary Partition:          <b>10.93s</b>
Improved Binary Partition:  <b>6.56s</b>
</pre><p>As you can see from the results above, the <i>Improved Binary Partition </i>method is clearly the winner here.</p><p><b>Input:</b><br>Each test case starts with two integers, <b>M</b> and <b>N</b>. <b>M</b> is the number of rows and <b>N</b> is the number of columns of the matrix. The subsequent <b>M</b> lines would be the contents of the matrix in row-order. Each line would contain <b>N</b> integers separated by a single space. Following that is a blank line, with an integer, <b>K</b>, the total number of targets to be searched in the matrix. The next line contains <b>K</b> integers in one line, each of them separated by a single space. After that is a blank line. Then followed by the next case. <b>M</b>=0 and <b>N</b>=0 and <b>K</b>=0 indicates that there are no more inputs.</p><p><b>Output:</b><br>For each test case, output &#8220;Test case #<i>x</i>&#8220;, where <i>x</i> is the test case number starting from 1. After that you should have <b>K</b> lines, each line telling if the target is found in the matrix or not. If the target is found in the matrix, output &#8220;Target <i>y</i> found at (<i>i</i>,<i>j</i>)&#8221;, where <i>y</i> is the searched element, while<i> i</i> and <i>j</i> are the row and column number of the found element respectively. If the target could not be found, then output &#8220;Target <i>y</i> not found&#8221;. The next test case should be separated by a blank line from the above test case.</p><p><b>Sample Input:</b></p><pre>1 1
1

3
0 1 2

1 2
-1 3

8
-2 -1 0 1 2 3 4 5

0 0
0
</pre><p><b>Sample Output:</b></p><pre>Test case #1
Target 0 not found
Target 1 found at (1,1)
Target 2 not found

Test case #2
Target -2 not found
Target -1 found at (1,1)
Target 0 not found
Target 1 not found
Target 2 not found
Target 3 found at (1,2)
Target 4 not found
Target 5 not found
</pre><p><b>Attachments:</b><br>&#187; <a href="http://sites.google.com/site/ihas1337code/matrix_search_easy_input.txt">Download Easy Input</a><br>&#187; <a href="http://sites.google.com/site/ihas1337code/matrix_search_easy_output.txt">Download Easy Output</a><br>&#187; <a href="http://sites.google.com/site/ihas1337code/matrix_search_hard_input.txt">Download Hard Input</a><br>&#187; <a href="http://sites.google.com/site/ihas1337code/matrix_search_hard_output.txt">Download Hard Output</a><br>&#187; <a href="http://sites.google.com/site/ihas1337code/matrix_search_performance1000_input.txt">Download Performance Input</a></p><p><b>Further Thoughts:</b><br>A variation of this problem had been asked in Amazon interviews:<br></p><blockquote>2D Matrix(<i>n</i> * <i>n</i>) of positive and negative numbers is given. Matrix is sorted rowwise and columnwise. You have to return the count of -ve numbers in most optimal way.</blockquote><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a48">Rating: 4.8/<strong>5</strong> (15 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Searching a 2D Sorted Matrix Part III</span></span>, <span class="rating"><span class="average">4.8</span> out of <span class="best">5</span> based on <span class="votes">15</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/10/searching-2d-sorted-matrix-part-iii.html" rel="tag">http://leetcode.com/2010/10/searching-2d-sorted-matrix-part-iii.html</a></p></div></div><p id="respond"></p><h3 id="reply-title">Leave a reply <small></small></h3><div id="trackbacks"><h3>3 trackbacks</h3><ul id="trackbacklist"><li> <em>on July 25, 2011</em></li><li> <em>on August 8, 2014</em></li><li> <em>on October 8, 2014</em></li></ul></div></div></div></body><body><div><div class="entry"><blockquote><p>Write an efficient algorithm that searches for a value in an <i>n</i> x <i>m</i> table (two-dimensional array). This table is sorted along the rows and columns &#8212; that is,</p><p>Table[i][j] &#8804; Table[i][j + 1], <br>Table[i][j] &#8804; Table[i + 1][j]</p></blockquote><p><span id="more-46"></span><br></p><p><a href="http://www.google.com/search?q=searching+an+element+in+a+sorted+matrix">Google this problem</a> and you will see that a lot of sites have posted this problem before me. So why another blog post?</p><p>I have read through forums, blog posts, and go through each comment people made. Surprisingly, most people had answered this question incorrectly. Especially the run time complexity part. They just put down the recurrence formula and &#8220;guess&#8221; the complexity.  It just don&#8217;t work like that. To save you from frustration, I decided to  post all possible solutions and my in-depth analysis here.</p><p>The most efficient solution is surprisingly easy to code. Its run time analysis is also easy to prove. It is also surprisingly easy to make incorrect assumptions if you are not careful.</p><p><b>Note:</b> <br>For the sake of run time complexity analysis, we will assume that the matrix is a square matrix of size <i>n</i> x <i>n</i>. Your algorithm should work on matrix of size <i>m</i> x <i>n</i> though.</p><div><a href="http://3.bp.blogspot.com/_UElib2WLeDE/TKxHZ0TZjeI/AAAAAAAACWI/53zbyt6LwpE/s1600/matrix.png"><img border="0" src="http://3.bp.blogspot.com/_UElib2WLeDE/TKxHZ0TZjeI/AAAAAAAACWI/53zbyt6LwpE/s1600/matrix.png"></a></div><div><small>Elements are sorted across each row and each column in this 2D matrix. This is also known as a <a href="http://en.wikipedia.org/wiki/Young_tableau">Young Tableau</a>. </small></div><p><b>Hint:</b><br>If you are choosing a place to start from, try the top right corner. Or the bottom left corner.</p><p><b>Binary Search Solution:</b><br>Most people will observe the keyword &#8220;sorted&#8221;, which no surprise that the idea of applying Binary Search to each row (or to each column) came up immediately. As each row takes <i>O</i>(lg <i>n</i>) time to search, and there are a total of <i>n</i> rows, we are able to do it in <i>O</i>(<i>n</i> lg<i> n</i>) time. Of course, your interviewer will tell you that this is not a good enough solution. In fact, this is the first trap that you should look out for! Do not confine yourself into thinking that binary search is the only way to solve this problem.</p><p><b>Incorrect Solution:</b> <br>Here is another trap that most people will fall into if they are not careful enough. This is based on an incorrect assumption that if the target element falls between two numbers in the first row, then the target element must be within that two column. If not, then the target element does not exist.</p><p>Assume that you are searching for <b>9</b>. You scan through the first row and see that <b>9</b> appears between <b>7</b> and <b>11</b>. Therefore, apply Binary Search on these two columns (highlighted in yellow below). This is wrong, try to look for <b>10</b> in the matrix. <b>10</b> does not belong to any of those two columns.</p><div class="separator"><a href="http://3.bp.blogspot.com/_UElib2WLeDE/TKxUbgvK3qI/AAAAAAAACWM/iD0Zbx201yI/s1600/matrix_hi1.png" imageanchor="1"><img border="0" src="http://3.bp.blogspot.com/_UElib2WLeDE/TKxUbgvK3qI/AAAAAAAACWM/iD0Zbx201yI/s1600/matrix_hi1.png"></a></div><p><small>Apply binary search across the </small><small>highlighted </small><small>columns. Searches <b>9</b> but failed to search for <b>10</b>.</small></p><p>What if we do the same to the rows too? That is, since <b>10</b> is between <b>3</b> and <b>10</b>, we apply binary search both to the two rows and two columns (as highlighted in yellow below). Finally, <b>10</b> could be found now. Although it seems to work in this example matrix, this is an incorrect solution. Coming up with a counter example is left as an exercise to the reader.</p><div class="separator"><a href="http://1.bp.blogspot.com/_UElib2WLeDE/TKxW1avetEI/AAAAAAAACWQ/PAqTro0QqdM/s1600/matrix_hi2.png" imageanchor="1"><img border="0" src="http://1.bp.blogspot.com/_UElib2WLeDE/TKxW1avetEI/AAAAAAAACWQ/PAqTro0QqdM/s1600/matrix_hi2.png"></a></div><p><small>Apply binary search across the highlighted rows and columns. Searches both <b>9</b> and <b>10</b> now. Is this solution correct? Try to come up with a counter example.</small></p><p><b>Diagonal Binary Search (Still not there yet):</b><br>Still not giving up, you keep on brainstorming on how you can do a Binary Search in a more efficient manner.</p><p>How about we traverse the matrix diagonally starting from the top right corner? We will call this method the <i>Diagonal Binary Search</i> method. You may also start from the bottom left corner, it doesn&#8217;t matter.</p><p>Assume that our target is &#8217;10&#8242;. We start from the top right corner, which contains the element <b>15</b>. Since <b>10</b> is less than <b>15</b>, we could eliminate the entire column from consideration as illustrated below (Areas that are eliminated are colored in gray). This follows from the rule that the column is in sorted order.</p><div class="separator"><a href="http://1.bp.blogspot.com/_UElib2WLeDE/TKxaSgQBzGI/AAAAAAAACWU/IDe3LNjWAl8/s1600/matrix_hi3.png" imageanchor="1"><img border="0" src="http://1.bp.blogspot.com/_UElib2WLeDE/TKxaSgQBzGI/AAAAAAAACWU/IDe3LNjWAl8/s1600/matrix_hi3.png"></a></div><p><small>Eliminated areas are shown in gray. We start from the upper right corner, and traverse in a diagonal pattern.</small></p><p>We apply binary search from element <b>1</b> to <b>11</b> on the first row. Since <b>10</b> is not found, we proceed to the next diagonal step, which is <b>12</b>. <b>10</b> is less than <b>12</b>, therefore we do a binary search from <b>2</b> to <b>8</b> across the second row. Since <b>8</b> is less than <b>12</b>, you could skip doing a binary search anyway. Now, the eliminated areas are shown below. You could see that we continue next with element <b>9</b> and do a binary search across the third column from <b>14</b> to <b>23</b>. Eventually we will find <b>10</b> following that.</p><div class="separator"><a href="http://4.bp.blogspot.com/_UElib2WLeDE/TKxb9NkEl1I/AAAAAAAACWY/UjB_9L1GXf4/s1600/matrix_hi4.png" imageanchor="1"><img border="0" src="http://4.bp.blogspot.com/_UElib2WLeDE/TKxb9NkEl1I/AAAAAAAACWY/UjB_9L1GXf4/s1600/matrix_hi4.png"></a></div><p><small>Eliminated areas are shown in gray. We have just completed the second step.</small></p><p>As we traverse diagonally, there&#8217;s one less item to search for either across the row or column. Therefore, the run time complexity can be written as:</p><pre>T(<i>n</i>) = lg <i>n</i> + lg (<i>n</i>-1) + lg (<i>n</i>-2) + ... + lg (1) 
     = lg <i>n</i>(<i>n</i>-1)(<i>n</i>-2)...(1) 
     = lg <i>n</i>!
</pre><p>Compared to the previous method, this is a tiny bit of improvement over the last method. Proof of lg <i>n</i>! is less than <i>n</i> lg <i>n</i> is left as an exercise to the reader.</p><p><b><span>&#187; Continue reading</span> <a href="http://www.leetcode.com/2010/10/searching-2d-sorted-matrix-part-ii.html">Part II: Searching a 2D Sorted Matrix</a>.</b></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a46">Rating: 4.6/<strong>5</strong> (13 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Searching a 2D Sorted Matrix Part I</span></span>, <span class="rating"><span class="average">4.6</span> out of <span class="best">5</span> based on <span class="votes">13</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Suppose a sorted array is rotated at some pivot unknown to you beforehand. (i.e., 0 1 2 4 5 6 7 might become 4 5 6 7 0 1 2). How do you find an element in the rotated array efficiently? You may assume no duplicate exists in the array.</p></blockquote><p><span id="more-13"></span><br></p><p><strong><span>Note:</span></strong><br> I have updated the problem description to assume that there exists no duplicate in the array. Some readers have noted that the below code does not work for input with duplicates. For example, for input &#8220;1 2 1 1 1 1&#8243;, the binary search method below would not work, as there is no way to know if an element exists in the array without going through each element one by one.<br> <br><a href="http://3.bp.blogspot.com/_UElib2WLeDE/S8TAqqC2_4I/AAAAAAAACII/BJ11UEyVDp0/s1600/rotatedarray.PNG"><img alt="" border="0" id="BLOGGER_PHOTO_ID_5459700487353204610" src="http://3.bp.blogspot.com/_UElib2WLeDE/S8TAqqC2_4I/AAAAAAAACII/BJ11UEyVDp0/s320/rotatedarray.PNG"></a></p><p>At first look, we know that we can do a linear search in O(<i>n</i>) time. But linear search does not need the elements to be sorted in any way.</p><p>First, we know that it is a sorted array that&#8217;s been rotated. Although we do not know where the rotation pivot is, there is a property we can take advantage of. Here, we make an observation that a rotated array can be classified as two sub-array that is sorted (i.e., 4 5 6 7 0 1 2 consists of two sub-arrays 4 5 6 7 and 0 1 2.</p><p>Do not jump to conclusion that we need to first find the location of the pivot and then do binary search on both sub-arrays. Although this can be done in O(lg <i>n</i>) time, this is not necessary and is more complicated.</p><p>In fact, we don&#8217;t need to know where the pivot is. Look at the middle element (<b>7</b>). Compare it with the left most (<b>4</b>) and right most element (<b>2</b>). The left most element (<b>4</b>) is less than (<b>7</b>). This gives us valuable information &#8212; All elements in the bottom half must be in <i>strictly increasing order</i>. Therefore, if the key we are looking for is between <b>4</b> and <b>7</b>, we eliminate the upper half; if not, we eliminate the bottom half.</p><p>When left index is greater than right index, we have to stop searching as the key we are finding is not in the array.</p><p>Since we reduce the search space by half each time, the complexity must be in the order of <i>O</i>(lg<i> n</i>). It is similar to binary search but is somehow modified for this problem. In fact, this is more general than binary search, as it works for both rotated and non-rotated arrays.</p><p></p><div id="crayon-54ec25ae3a6cc" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int rotated_binary_search(int A[], int N, int key) {
  int L = 0;
  int R = N - 1;

  while (L &lt;= R) {
    // Avoid overflow, same as M=(L+R)/2
    int M = L + ((R - L) / 2);
    if (A[M] == key) return M;

    // the bottom half is sorted
    if (A[L] &lt;= A[M]) {
      if (A[L] &lt;= key &amp;&amp; key &lt; A[M])
        R = M - 1;
      else
        L = M + 1;
    }
    // the upper half is sorted
    else {
      if (A[M] &lt; key &amp;&amp; key &lt;= A[R])
        L = M + 1;
      else 
        R = M - 1;
    }
  }
  return -1;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ec25ae3a6cc-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec25ae3a6cc-2">2</p><p class="crayon-num" data-line="crayon-54ec25ae3a6cc-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec25ae3a6cc-4">4</p><p class="crayon-num" data-line="crayon-54ec25ae3a6cc-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec25ae3a6cc-6">6</p><p class="crayon-num" data-line="crayon-54ec25ae3a6cc-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec25ae3a6cc-8">8</p><p class="crayon-num" data-line="crayon-54ec25ae3a6cc-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec25ae3a6cc-10">10</p><p class="crayon-num" data-line="crayon-54ec25ae3a6cc-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec25ae3a6cc-12">12</p><p class="crayon-num" data-line="crayon-54ec25ae3a6cc-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec25ae3a6cc-14">14</p><p class="crayon-num" data-line="crayon-54ec25ae3a6cc-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec25ae3a6cc-16">16</p><p class="crayon-num" data-line="crayon-54ec25ae3a6cc-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec25ae3a6cc-18">18</p><p class="crayon-num" data-line="crayon-54ec25ae3a6cc-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec25ae3a6cc-20">20</p><p class="crayon-num" data-line="crayon-54ec25ae3a6cc-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec25ae3a6cc-22">22</p><p class="crayon-num" data-line="crayon-54ec25ae3a6cc-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec25ae3a6cc-24">24</p><p class="crayon-num" data-line="crayon-54ec25ae3a6cc-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec25ae3a6cc-26">26</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec25ae3a6cc-1"><span class="t">int</span><span class="h"> </span><span class="e">rotated_binary_search</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">key</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a6cc-2"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">L</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec25ae3a6cc-3"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">R</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">N</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a6cc-4">&#160;</p><p class="crayon-line" id="crayon-54ec25ae3a6cc-5"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">L</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">R</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a6cc-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// Avoid overflow, same as M=(L+R)/2</span></p><p class="crayon-line" id="crayon-54ec25ae3a6cc-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">M</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">L</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="sy">(</span><span class="i">R</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="i">L</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a6cc-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">A</span><span class="sy">[</span><span class="i">M</span><span class="sy">]</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">key</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="i">M</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec25ae3a6cc-9">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a6cc-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// the bottom half is sorted</span></p><p class="crayon-line" id="crayon-54ec25ae3a6cc-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">A</span><span class="sy">[</span><span class="i">L</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">M</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a6cc-12"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">A</span><span class="sy">[</span><span class="i">L</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">key</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">key</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">M</span><span class="sy">]</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ec25ae3a6cc-13"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">R</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">M</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a6cc-14"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">else</span></p><p class="crayon-line" id="crayon-54ec25ae3a6cc-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">L</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">M</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a6cc-16"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ec25ae3a6cc-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="c">// the upper half is sorted</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a6cc-18"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec25ae3a6cc-19"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">A</span><span class="sy">[</span><span class="i">M</span><span class="sy">]</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">key</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="i">key</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">R</span><span class="sy">]</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a6cc-20"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">L</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">M</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec25ae3a6cc-21"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">else</span><span class="h"> </span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a6cc-22"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">R</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">M</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec25ae3a6cc-23"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a6cc-24"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ec25ae3a6cc-25"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="o">-</span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a6cc-26"><span class="sy">}</span></p></div></td></tr></table></div></div><p>The above solution is able to search for an element without knowing where the pivot is. Challenge yourself with the problem below.<br></p><blockquote>Implement the following function, FindSortedArrayRotation, which takes as its input an array of unique integers that has been sorted in ascending order, then rotated by an unknown amount X where 0 </blockquote><p><b>Solution:</b><br>This time you have to search for the rotation pivot. There is a subtle observation. This problem is in fact the same as finding the minimum element&#8217;s index. If the middle element is greater than the right most element, then the pivot must be to the right; if it is not, the pivot must be to the left.</p><p></p><div id="crayon-54ec25ae3a781" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int FindSortedArrayRotation(int A[], int N) {
  int L = 0;
  int R = N - 1;
  
  while (A[L] &gt; A[R]) {
    int M = L + (R - L) / 2;
    if (A[M] &gt; A[R])
      L = M + 1;
    else
      R = M;
  }
  return L;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec25ae3a781-1"><span class="t">int</span><span class="h"> </span><span class="e">FindSortedArrayRotation</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">N</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a781-2"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">L</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec25ae3a781-3"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">R</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">N</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a781-4"><span class="h">&#160;&#160;</span></p><p class="crayon-line" id="crayon-54ec25ae3a781-5"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="v">A</span><span class="sy">[</span><span class="i">L</span><span class="sy">]</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">R</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a781-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">M</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">L</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="i">R</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="i">L</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec25ae3a781-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">A</span><span class="sy">[</span><span class="i">M</span><span class="sy">]</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">R</span><span class="sy">]</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a781-8"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">L</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">M</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec25ae3a781-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a781-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">R</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">M</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec25ae3a781-11"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec25ae3a781-12"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">L</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec25ae3a781-13"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b>Some Test Cases:</b></p><div class="hiblock">{ 1 }<br>return 0<p>{ 1, 2 }<br>return 0</p><p>{ 2, 1 }<br>return 1</p><p>{ 1, 2, 3 }<br>return 0</p><p>{ 3, 1, 2 }<br>return 1</p><p>{ 2, 3, 1 }<br>return 2</p><p>{ 1, 2, 3, 4, 5 }<br>return 0</p><p>{ 2, 3, 4, 5, 1 }<br>return 4</p><p>{ 3, 4, 5, 1, 2 }<br>return 3</p><p>{ 4, 5, 1, 2, 3 }<br>return 2</p><p>{ 5, 1, 2, 3, 4 }<br>return 1</p><p>{ 1, 2, 3, 4, 5, 6 }<br>return 0</p><p>{ 2, 3, 4, 5, 6, 1 }<br>return 5</p><p>{ 3, 4, 5, 6, 1, 2 }<br>return 4</p><p>{ 4, 5, 6, 1, 2, 3 }<br>return 3</p><p>{ 5, 6, 1, 2, 3, 4 }<br>return 2</p><p>{ 6, 1, 2, 3, 4, 5 }<br>return 1</p><p>{ 6, 8, 1, 2, 4, 5 }<br>return 2</p></div><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a13">Rating: 4.7/<strong>5</strong> (25 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Searching an Element in a Rotated Sorted Array</span></span>, <span class="rating"><span class="average">4.7</span> out of <span class="best">5</span> based on <span class="votes">25</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>Design an algorithm and write code to serialize and deserialize a binary tree. Writing the tree to a file is called &#8216;serialization&#8217; and reading back from the file to reconstruct the exact same binary tree is &#8216;deserialization&#8217;.</p></blockquote><p><span id="more-43"></span></p><p>Being able to store a binary tree to a file presents lots of benefits. First, we are able to save the binary tree to a file and restore it at a later time. We are also able to transmit the binary tree representation via network and load it into another computer. Without doubt, serialization/deserialization of a binary tree is important and an algorithm to represent a binary tree in a compact way is very desirable.</p><p></p><div class="separator"><a href="http://3.bp.blogspot.com/_UElib2WLeDE/TKOkWuJhDLI/AAAAAAAACV0/J7U4Z-ee4tc/s1600/binary.jpg" imageanchor="1"><img border="0" height="240" px="true" src="http://3.bp.blogspot.com/_UElib2WLeDE/TKOkWuJhDLI/AAAAAAAACV0/J7U4Z-ee4tc/s320/binary.jpg" width="320"></a></div><p><small>Serialization is the process of converting a data structure or object into a sequence of bits so that it can be stored in a file or memory buffer, or transmitted across a network connection link to be &#8220;resurrected&#8221; later in the same or another computer environment.</small></p><p><b>Hint:</b><br>If you have not read my previous article about <a href="http://www.leetcode.com/2010/09/saving-binary-search-tree-to-file.html">Saving a Binary Search Tree to a File</a>, you should read it now. Since we are dealing with a binary tree, not a binary search tree (BST), our previous method will not work. However, this will get you started.</p><p><b>Solution:</b><br>Our previous method will not work in the case of Binary Tree, because binary trees are not bound with the same rule as BST. In order for the nodes to be inserted at the correct place, we would need to output the NULL nodes using some kind of sentinel (Here, we use &#8216;<b>#</b>&#8216; as the sentinel) as we are doing pre-order traversal.</p><p>Assume we have a binary tree below:</p><pre><span>    </span>_<span>30</span>_ 
   /    \    
  <span>10</span>    <span>20</span>
 /     /  \<span> 
50    </span><span>45  35</span></pre><p>Using pre-order traversal, the algorithm should write the following to a file:</p><pre><span>30 10 50 # # # 20 45 # # 35 # #</span></pre><p>The pre-order traversal code below does all the job to serialize a binary tree, believe it or not!</p><div id="crayon-54e8d7e5dae2a" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" touchscreen minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick">
void writeBinaryTree(BinaryTree *p, ostream &amp;out) {
  if (!p) {
    out &lt;&lt; "# ";
  } else {
    out &lt;&lt; p-&gt;data &lt;&lt; " ";
    writeBinaryTree(p-&gt;left, out);
    writeBinaryTree(p-&gt;right, out);
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e8d7e5dae2a-1"><span class="t">void</span><span class="h"> </span><span class="e">writeBinaryTree</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="i">ostream</span><span class="h"> </span><span class="o">&amp;</span><span class="i">out</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8d7e5dae2a-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">p</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e8d7e5dae2a-3"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">out</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">"# "</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8d7e5dae2a-4"><span class="h">&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e8d7e5dae2a-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">out</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">p</span><span class="o">-&gt;</span><span class="i">data</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="s">" "</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8d7e5dae2a-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">writeBinaryTree</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">out</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8d7e5dae2a-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">writeBinaryTree</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="i">out</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8d7e5dae2a-8"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e8d7e5dae2a-9"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b>Deserializing a Binary Tree:</b></p><p>Reading the binary tree from the file is similar. We read tokens one at a time using pre-order traversal. If the token is a sentinel, we ignore it. If the token is a number, we insert it to the current node, and traverse to its left child, then its right child.</p><div id="crayon-54e8d7e5daef1" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" touchscreen minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick">
void readBinaryTree(BinaryTree *&amp;p, ifstream &amp;fin) {
  int token;
  bool isNumber;
  if (!readNextToken(token, fin, isNumber)) 
    return;
  if (isNumber) {
    p = new BinaryTree(token);
    readBinaryTree(p-&gt;left, fin);
    readBinaryTree(p-&gt;right, fin);
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e8d7e5daef1-1"><span class="t">void</span><span class="h"> </span><span class="e">readBinaryTree</span><span class="sy">(</span><span class="e ">BinaryTree *</span><span class="o">&amp;</span><span class="i">p</span><span class="sy">,</span><span class="h"> </span><span class="i">ifstream</span><span class="h"> </span><span class="o">&amp;</span><span class="i">fin</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8d7e5daef1-2"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="i">token</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8d7e5daef1-3"><span class="h">&#160;&#160;</span><span class="t">bool</span><span class="h"> </span><span class="i">isNumber</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8d7e5daef1-4"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="e">readNextToken</span><span class="sy">(</span><span class="i">token</span><span class="sy">,</span><span class="h"> </span><span class="i">fin</span><span class="sy">,</span><span class="h"> </span><span class="i">isNumber</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span></p><p class="crayon-line" id="crayon-54e8d7e5daef1-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8d7e5daef1-6"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">isNumber</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e8d7e5daef1-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">p</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="r">new</span><span class="h"> </span><span class="e">BinaryTree</span><span class="sy">(</span><span class="i">token</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8d7e5daef1-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">readBinaryTree</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">left</span><span class="sy">,</span><span class="h"> </span><span class="i">fin</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e8d7e5daef1-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">readBinaryTree</span><span class="sy">(</span><span class="i">p</span><span class="o">-&gt;</span><span class="i">right</span><span class="sy">,</span><span class="h"> </span><span class="i">fin</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e8d7e5daef1-10"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e8d7e5daef1-11"><span class="sy">}</span></p></div></td></tr></table></div></div><p><b>Alternative Solution:</b><br>We may also use level-order traversal to write/read binary tree. Level-order traversal works because like pre-order traversal, we see the parent node before its child nodes. The implementation of it using level-order traversal is left as an exercise to the reader. Read my post: <a href="http://www.leetcode.com/2010/09/printing-binary-tree-in-level-order.html">Printing a Binary Tree in Level Order</a> on how to traverse a binary tree in level-order.</p><p><strong>Further Thoughts:</strong><br>There is an obvious shortcoming in this method, that is: a sentinel is required to represent empty nodes. What if we need to store strings that can contain any characters (including the sentinel) in the binary tree? Could you come up with a solution to overcome this shortcoming?</p><p>Please note that this is not the only way to serialize a binary tree, and also probably not the most compact way. But this is good enough for a standard interview question. If you would like to explore deeper, and even apply serialization/deserialization to general trees, you may read the <a href="http://en.wikipedia.org/wiki/Binary_tree#Encodings">Binary Tree article&#8217;s encoding section</a> on Wikipedia.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a43">Rating: 4.7/<strong>5</strong> (39 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Serialization/Deserialization of a Binary Tree</span></span>, <span class="rating"><span class="average">4.7</span> out of <span class="best">5</span> based on <span class="votes">39</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>A long array A[] is given to you. There is a sliding window of size <em>w</em> which is moving from the very left of the array to the very right. You can only see the <em>w</em> numbers in the window. Each time the sliding window moves rightwards by one position. Following is an example:<br> The array is [1 3 -1 -3 5 3 6 7], and <em>w</em> is 3.</p><pre>Window position                Max
---------------               -----
[1  3  -1] -3  5  3  6  7       3
 1 [3  -1  -3] 5  3  6  7       3
 1  3 [-1  -3  5] 3  6  7       5
 1  3  -1 [-3  5  3] 6  7       5
 1  3  -1  -3 [5  3  6] 7       6
 1  3  -1  -3  5 [3  6  7]      7</pre><p><strong>Input</strong>: A long array A[], and a window width w<br> <strong>Output</strong>: An array B[], B[i] is the maximum value of from A[i] to A[i+w-1]<br> <strong>Requirement</strong>: Find a good optimal way to get B[i]</p></blockquote><p><span id="more-75"></span></p><p>The obvious brute force solution with run time complexity of <em>O</em>(<em>nw</em>) is definitely not efficient enough. Every time the window is moved, you have to search for a total of <em>w</em> elements in the window.</p><p>A <a href="http://en.wikipedia.org/wiki/Heap_%28data_structure%29">heap</a> data structure quickly comes to mind. We could boost the run time to approximately <em>O</em>(<em>n</em> lg <em>w</em>) (Note that I said approximately because the size of the heap changes constantly and averages about <em>w</em>). Insert operation takes <em>O</em>(lg <em>w</em>) time, where <em>w</em> is the size of the heap. However, getting the maximum value is cheap, it merely takes constant time as the maximum value is always kept in the root (head) of the heap.</p><p>As the window slides to the right, some elements in the heap might not be valid anymore (range is outside of the current window). How should you remove them? You would need to be somewhat careful here. Since you only remove elements that are out of the window&#8217;s range, you would need to keep track of the elements&#8217; indices too.</p><p><del>Note that as <em>n</em> grows larger, the term lg <em>w</em> is pretty insignificant compared to <em>n</em>, and thus the overall complexity approximates to <em>O</em>(<em>n</em>).</del> (<strong><span>Edit:</span></strong> In fact, the correct run time complexity should be O(<em>n</em> log <em>n</em>). If A is sorted, then the inner while loop will never run. This is due to the next element (which is larger) being pushed to the queue&#8217;s top as the new maximum. (Thanks to my readers <a href="http://www.leetcode.com/2011/01/sliding-window-maximum.html#comment-726"><strong><span>anonymous</span></strong></a> and <strong><span>faircoin</span></strong> who pointed out this.)</p><div id="crayon-54ec69e462f21" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
typedef pair&lt;int, int&gt; Pair;
void maxSlidingWindow(int A[], int n, int w, int B[]) {
  priority_queue&lt;Pair&gt; Q;
  for (int i = 0; i &lt; w; i++)
    Q.push(Pair(A[i], i));
  for (int i = w; i &lt; n; i++) {
    Pair p = Q.top();
    B[i-w] = p.first;
    while (p.second &lt;= i-w) {
      Q.pop();
      p = Q.top();
    }
    Q.push(Pair(A[i], i));
  }
  B[n-w] = Q.top().first;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec69e462f21-1"><span class="r">typedef</span><span class="h"> </span><span class="i">pair</span><span class="o">&lt;</span><span class="t">int</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="o">&gt;</span><span class="h"> </span><span class="i">Pair</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec69e462f21-2"><span class="t">void</span><span class="h"> </span><span class="e">maxSlidingWindow</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">w</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">B</span><span class="sy">[</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec69e462f21-3"><span class="h">&#160;&#160;</span><span class="i">priority_queue</span><span class="o">&lt;</span><span class="i">Pair</span><span class="o">&gt;</span><span class="h"> </span><span class="i">Q</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec69e462f21-4"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">w</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ec69e462f21-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">Q</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="e">Pair</span><span class="sy">(</span><span class="v">A</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="i">i</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec69e462f21-6"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">w</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec69e462f21-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">Pair</span><span class="h"> </span><span class="v">p</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">Q</span><span class="sy">.</span><span class="e">top</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec69e462f21-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">B</span><span class="sy">[</span><span class="i">i</span><span class="o">-</span><span class="i">w</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">p</span><span class="sy">.</span><span class="i">first</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec69e462f21-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="v">p</span><span class="sy">.</span><span class="i">second</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">i</span><span class="o">-</span><span class="i">w</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec69e462f21-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">Q</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec69e462f21-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">p</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">Q</span><span class="sy">.</span><span class="e">top</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec69e462f21-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ec69e462f21-13"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">Q</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="e">Pair</span><span class="sy">(</span><span class="v">A</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="i">i</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec69e462f21-14"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ec69e462f21-15"><span class="h">&#160;&#160;</span><span class="v">B</span><span class="sy">[</span><span class="i">n</span><span class="o">-</span><span class="i">w</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">Q</span><span class="sy">.</span><span class="e">top</span><span class="sy">(</span><span class="sy">)</span><span class="sy">.</span><span class="i">first</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec69e462f21-16"><span class="sy">}</span></p></div></td></tr></table></div></div><p>You might be wondering: Is there a better way of doing this without using a heap? How about using a <a href="http://en.wikipedia.org/wiki/Double-ended_queue">double-ended queue</a>? (A linked list should be fine too)</p><p>The double-ended queue is the perfect data structure for this problem. It supports insertion/deletion from the front and back. The trick is to find a way such that the largest element in the window would always appear in the front of the queue. How would you maintain this requirement as you push and pop elements in and out of the queue?</p><p>Besides, you might notice that there are some redundant elements in the queue that we shouldn&#8217;t even consider about. For example, if the current queue has the elements: [10 5 3], and a new element in the window has the element 11. Now, we could have emptied the queue without considering elements 10, 5, and 3, and insert only element 11 into the queue.</p><p>A natural way most people would think is to try to maintain the queue size the same as the window&#8217;s size. Try to break away from this thought and try to think outside of the box. Removing redundant elements and storing only elements that need to be considered in the queue is the key to achieve the efficient O(<em>n</em>) solution below.</p><div id="crayon-54ec69e462fe0" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void maxSlidingWindow(int A[], int n, int w, int B[]) {
  deque&lt;int&gt; Q;
  for (int i = 0; i &lt; w; i++) {
    while (!Q.empty() &amp;&amp; A[i] &gt;= A[Q.back()])
      Q.pop_back();
    Q.push_back(i);
  }
  for (int i = w; i &lt; n; i++) {
    B[i-w] = A[Q.front()];
    while (!Q.empty() &amp;&amp; A[i] &gt;= A[Q.back()])
      Q.pop_back();
    while (!Q.empty() &amp;&amp; Q.front() &lt;= i-w)
      Q.pop_front();
    Q.push_back(i);
  }
  B[n-w] = A[Q.front()];
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ec69e462fe0-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec69e462fe0-2">2</p><p class="crayon-num" data-line="crayon-54ec69e462fe0-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec69e462fe0-4">4</p><p class="crayon-num" data-line="crayon-54ec69e462fe0-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec69e462fe0-6">6</p><p class="crayon-num" data-line="crayon-54ec69e462fe0-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec69e462fe0-8">8</p><p class="crayon-num" data-line="crayon-54ec69e462fe0-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec69e462fe0-10">10</p><p class="crayon-num" data-line="crayon-54ec69e462fe0-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec69e462fe0-12">12</p><p class="crayon-num" data-line="crayon-54ec69e462fe0-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec69e462fe0-14">14</p><p class="crayon-num" data-line="crayon-54ec69e462fe0-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ec69e462fe0-16">16</p><p class="crayon-num" data-line="crayon-54ec69e462fe0-17">17</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ec69e462fe0-1"><span class="t">void</span><span class="h"> </span><span class="e">maxSlidingWindow</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">w</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">B</span><span class="sy">[</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec69e462fe0-2"><span class="h">&#160;&#160;</span><span class="i">deque</span><span class="o">&lt;</span><span class="t">int</span><span class="o">&gt;</span><span class="h"> </span><span class="i">Q</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec69e462fe0-3"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">w</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec69e462fe0-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">Q</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="v">Q</span><span class="sy">.</span><span class="e">back</span><span class="sy">(</span><span class="sy">)</span><span class="sy">]</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ec69e462fe0-5"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">Q</span><span class="sy">.</span><span class="e">pop_back</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec69e462fe0-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">Q</span><span class="sy">.</span><span class="e">push_back</span><span class="sy">(</span><span class="i">i</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec69e462fe0-7"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec69e462fe0-8"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">w</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ec69e462fe0-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">B</span><span class="sy">[</span><span class="i">i</span><span class="o">-</span><span class="i">w</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="v">Q</span><span class="sy">.</span><span class="e">front</span><span class="sy">(</span><span class="sy">)</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec69e462fe0-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">Q</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="v">Q</span><span class="sy">.</span><span class="e">back</span><span class="sy">(</span><span class="sy">)</span><span class="sy">]</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ec69e462fe0-11"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">Q</span><span class="sy">.</span><span class="e">pop_back</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec69e462fe0-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">Q</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="v">Q</span><span class="sy">.</span><span class="e">front</span><span class="sy">(</span><span class="sy">)</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">i</span><span class="o">-</span><span class="i">w</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ec69e462fe0-13"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">Q</span><span class="sy">.</span><span class="e">pop_front</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec69e462fe0-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">Q</span><span class="sy">.</span><span class="e">push_back</span><span class="sy">(</span><span class="i">i</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec69e462fe0-15"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ec69e462fe0-16"><span class="h">&#160;&#160;</span><span class="v">B</span><span class="sy">[</span><span class="i">n</span><span class="o">-</span><span class="i">w</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="v">Q</span><span class="sy">.</span><span class="e">front</span><span class="sy">(</span><span class="sy">)</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ec69e462fe0-17"><span class="sy">}</span></p></div></td></tr></table></div></div><p>The above algorithm could be proven to have run time complexity of O(<em>n</em>). This is because each element in the list is being inserted and then removed <strong>at most once</strong>. Therefore, the total number of insert + delete operations is 2<em>n</em>.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a75">Rating: 4.8/<strong>5</strong> (79 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Sliding Window Maximum</span></span>, <span class="rating"><span class="average">4.8</span> out of <span class="best">5</span> based on <span class="votes">79</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div id="post-32" class="post-32 post type-post status-publish format-standard hentry category-linked-list"><div class="post-content"><h1 class="posttitle">Splitting Linked List</h1><p class="date"> September 11, 2010 <span>in <a href="http://leetcode.com/category/linked-list" title="View all posts in linked list" rel="category tag">linked list</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Given a list, split it into two sublists &#8212; one for the front half, and one for the back half. If the number of elements is odd, the extra element should go in the front list. So FrontBackSplit() on the list {2, 3, 5, 7, 11} should yield the two lists {2, 3, 5} and {7, 11}.</p></blockquote><p><span id="more-32"></span>This is a very good linked list question, as there are tricky cases you have to consider, and getting them all right in one place is harder than it looks. It also has a very obvious simple solution, which is to iterate the list twice. The first time to count how many elements in the list, and the second time to find the splitting point.</p><p>Can we do better? You bet.</p><p>Hint: Try to use two pointers to traverse the list.</p><p>Solution: We use two pointers (we call it a slow pointer and a fast pointer). The slow pointer advances one node at a time, while the fast pointer advances two nodes at a time. By the time the fast pointer reaches the end, the slow pointer would have reached the splitting point (or near). Care must be taken to account those special cases. Below is a solution that works for all cases.</p><div id="crayon-54e5a48dc834e" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
void FrontBackSplit(Node *head, Node **front, Node **back) {
  if (!head) return;  // Handle empty list
  Node *front_last_node;
  Node *slow = head;
  Node *fast = head;
  while (fast) {
    front_last_node = slow;
    slow = slow-&gt;next;
    fast = (fast-&gt;next) ? fast-&gt;next-&gt;next : NULL;
  }
  front_last_node-&gt;next = NULL;  // ends the front sublist
  *front = head;
  *back = slow;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e5a48dc834e-1"><span class="t">void</span><span class="h"> </span><span class="e">FrontBackSplit</span><span class="sy">(</span><span class="e ">Node *</span><span class="i">head</span><span class="sy">,</span><span class="h"> </span><span class="e ">Node *</span><span class="o">*</span><span class="i">front</span><span class="sy">,</span><span class="h"> </span><span class="e ">Node *</span><span class="o">*</span><span class="i">back</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e5a48dc834e-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="i">head</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="sy">;</span><span class="h">&#160;&#160;</span><span class="c">// Handle empty list</span></p><p class="crayon-line" id="crayon-54e5a48dc834e-3"><span class="h">&#160;&#160;</span><span class="e ">Node *</span><span class="i">front_last_node</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e5a48dc834e-4"><span class="h">&#160;&#160;</span><span class="e ">Node *</span><span class="v">slow</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">head</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e5a48dc834e-5"><span class="h">&#160;&#160;</span><span class="e ">Node *</span><span class="v">fast</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">head</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e5a48dc834e-6"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">fast</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e5a48dc834e-7"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">front_last_node</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">slow</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e5a48dc834e-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">slow</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">slow</span><span class="o">-&gt;</span><span class="i">next</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e5a48dc834e-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">fast</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="i">fast</span><span class="o">-&gt;</span><span class="i">next</span><span class="sy">)</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="i">fast</span><span class="o">-&gt;</span><span class="i">next</span><span class="o">-&gt;</span><span class="i">next</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e5a48dc834e-10"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e5a48dc834e-11"><span class="h">&#160;&#160;</span><span class="i">front_last_node</span><span class="o">-&gt;</span><span class="v">next</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">NULL</span><span class="sy">;</span><span class="h">&#160;&#160;</span><span class="c">// ends the front sublist</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e5a48dc834e-12"><span class="h">&#160;&#160;</span><span class="o">*</span><span class="v">front</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">head</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e5a48dc834e-13"><span class="h">&#160;&#160;</span><span class="o">*</span><span class="v">back</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">slow</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e5a48dc834e-14"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a32">Rating: 4.1/<strong>5</strong> (8 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Splitting Linked List</span></span>, <span class="rating"><span class="average">4.1</span> out of <span class="best">5</span> based on <span class="votes">8</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/09/splitting-linked-list.html" rel="tag">http://leetcode.com/2010/09/splitting-linked-list.html</a></p></div></div></div></body><body><div><div class="page" id="blog-single" role="main"><div id="post-57" class="post-57 post type-post status-publish format-standard hentry category-uncategorized"><div class="post-content"><h1 class="posttitle">Stack that Support Push, Pop, and GetMin in Constant Time</h1><p class="date"> November 16, 2010 <span>in <a href="http://leetcode.com/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>Design a stack that supports push, pop, and retrieving the minimum element in constant time. Can you do this?</p></blockquote><p><span id="more-57"></span><br> Today, I read this interesting problem (<b>exercise 4-44</b>) from the excellent book &#8220;<a href="http://www.amazon.com/Algorithm-Design-Manual-Steve-Skiena/dp/0387948600">The Algorithm Design Manual</a>&#8221; by Steven Skiena.</p><p>Initially I thought of using an extra min-heap to store the elements. Although this enables us to retrieve the minimum element in <i>O</i>(1), push and pop operations both operates in <i>O</i>(lg <i>N</i>), where <i>N</i> is the total number of elements in the stack. Definitely not a desirable method.</p><p>How about recording the current minimum in the stack? This works until you pop current minimum off the stack, where you would have to update your next minimum, which takes <i>O</i>(<i>N</i>) time to examine all elements.</p><p><b>Hint:</b><br>Assume you have an extra stack. What would you do with the extra stack?</p><p></p><div class="separator"><a href="http://4.bp.blogspot.com/_UElib2WLeDE/TONExbuGwPI/AAAAAAAACYs/4QBqKnu8WlU/s1600/stack.jpg" imageanchor="1"><img border="0" height="232" src="http://4.bp.blogspot.com/_UElib2WLeDE/TONExbuGwPI/AAAAAAAACYs/4QBqKnu8WlU/s320/stack.jpg" width="320"></a></div><p><span>Stack is a last in, first out (LIFO) data structure. It can be easily implemented either through an array or a linked list.</span></p><p><b>Solution:</b><br>The solution is surprisingly simple and elegant &#8212; Use an extra stack to maintain the minimums. What does this mean?</p><div class="hiblock"><ul><li>To retrieve the current minimum, just return the top element from minimum stack.</li><li>Each time you perform a push operation, check if the pushed element is a new minimum. If it is, push it to the minimum stack too.</li><li>When you perform a pop operation, check if the popped element is the same as the current minimum. If it is, pop it off the minimum stack too.</li></ul></div><p>All of the above operates in <i>O</i>(1) constant time.</p><p><b>A Gotcha:</b></p><p>There is one small gotcha I purposely left in the above solution. Could you figure it out without looking at the code below first?</p><p></p><div id="crayon-54ecd58a9de30" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
struct StackGetMin {
  void push(int x) {
    elements.push(x);
    if (minStack.empty() || x &lt;= minStack.top())
      minStack.push(x);
  }
  bool pop() {
    if (elements.empty()) return false;
    if (elements.top() == minStack.top())
      minStack.pop();
    elements.pop();
    return true;
  }
  bool getMin(int &amp;min) {
    if (minStack.empty()) {
      return false;
    } else {
      min = minStack.top();
      return true;
    }
  }
  stack&lt;int&gt; elements;
  stack&lt;int&gt; minStack;
};</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ecd58a9de30-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd58a9de30-2">2</p><p class="crayon-num" data-line="crayon-54ecd58a9de30-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd58a9de30-4">4</p><p class="crayon-num" data-line="crayon-54ecd58a9de30-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd58a9de30-6">6</p><p class="crayon-num" data-line="crayon-54ecd58a9de30-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd58a9de30-8">8</p><p class="crayon-num" data-line="crayon-54ecd58a9de30-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd58a9de30-10">10</p><p class="crayon-num" data-line="crayon-54ecd58a9de30-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd58a9de30-12">12</p><p class="crayon-num" data-line="crayon-54ecd58a9de30-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd58a9de30-14">14</p><p class="crayon-num" data-line="crayon-54ecd58a9de30-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd58a9de30-16">16</p><p class="crayon-num" data-line="crayon-54ecd58a9de30-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd58a9de30-18">18</p><p class="crayon-num" data-line="crayon-54ecd58a9de30-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd58a9de30-20">20</p><p class="crayon-num" data-line="crayon-54ecd58a9de30-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd58a9de30-22">22</p><p class="crayon-num" data-line="crayon-54ecd58a9de30-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecd58a9de30-24">24</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecd58a9de30-1"><span class="t">struct</span><span class="h"> </span><span class="e">StackGetMin</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd58a9de30-2"><span class="h">&#160;&#160;</span><span class="t">void</span><span class="h"> </span><span class="e">push</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">x</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecd58a9de30-3"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">elements</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">x</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd58a9de30-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">minStack</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">x</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="v">minStack</span><span class="sy">.</span><span class="e">top</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54ecd58a9de30-5"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">minStack</span><span class="sy">.</span><span class="e">push</span><span class="sy">(</span><span class="i">x</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd58a9de30-6"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecd58a9de30-7"><span class="h">&#160;&#160;</span><span class="t">bool</span><span class="h"> </span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd58a9de30-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">elements</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="st">return</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd58a9de30-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">elements</span><span class="sy">.</span><span class="e">top</span><span class="sy">(</span><span class="sy">)</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="v">minStack</span><span class="sy">.</span><span class="e">top</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd58a9de30-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">minStack</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd58a9de30-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">elements</span><span class="sy">.</span><span class="e">pop</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd58a9de30-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd58a9de30-13"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd58a9de30-14"><span class="h">&#160;&#160;</span><span class="t">bool</span><span class="h"> </span><span class="e">getMin</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="o">&amp;</span><span class="i">min</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecd58a9de30-15"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">minStack</span><span class="sy">.</span><span class="e">empty</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd58a9de30-16"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">false</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd58a9de30-17"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span><span class="h"> </span><span class="st">else</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd58a9de30-18"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">min</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">minStack</span><span class="sy">.</span><span class="e">top</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd58a9de30-19"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="t">true</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd58a9de30-20"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecd58a9de30-21"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd58a9de30-22"><span class="h">&#160;&#160;</span><span class="i">stack</span><span class="o">&lt;</span><span class="t">int</span><span class="o">&gt;</span><span class="h"> </span><span class="i">elements</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecd58a9de30-23"><span class="h">&#160;&#160;</span><span class="i">stack</span><span class="o">&lt;</span><span class="t">int</span><span class="o">&gt;</span><span class="h"> </span><span class="i">minStack</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecd58a9de30-24"><span class="sy">}</span><span class="sy">;</span></p></div></td></tr></table></div></div><p></p><p><b>Further Thoughts:</b></p><p>Before we conclude this section, try a variation of this problem (appeared as a <a href="http://www.leetcode.com/search/label/google%20interview">Google interview question</a>):<br></p><blockquote>Design a queue that supports push_rear, pop_front, and get_min in <i>O</i>(1). Would that be elegantly possible too?</blockquote><p><b>Hint:</b><br>Use two queues.</p><p>If you need extra hints, see <a href="http://www.leetcode.com/2011/01/sliding-window-maximum.html">this post</a> (both problems are related). If you could design a queue with push_rear, pop_front, and get_min in <i>O</i>(1), then finding the <a href="http://www.leetcode.com/2011/01/sliding-window-maximum.html">Sliding Window Maximum</a> could be solved by direct application of such data structure.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a57">Rating: 4.7/<strong>5</strong> (31 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Stack that Support Push, Pop, and GetMin in Constant Time</span></span>, <span class="rating"><span class="average">4.7</span> out of <span class="best">5</span> based on <span class="votes">31</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2010/11/stack-that-supports-push-pop-and-getmin.html" rel="tag">http://leetcode.com/2010/11/stack-that-supports-push-pop-and-getmin.html</a></p></div></div><p id="respond"></p><h3 id="reply-title">Leave a reply <small></small></h3><div id="trackbacks"><h3>4 trackbacks</h3><ul id="trackbacklist"><li> <em>on October 20, 2012</em></li><li> <em>on June 14, 2013</em></li><li> <em>on October 8, 2014</em></li><li> <em>on November 16, 2014</em></li></ul></div></div></div></body><body><div><div id="post-73" class="post-73 post type-post status-publish format-standard hentry category-uncategorized"><div class="post-content"><h1 class="posttitle">Studious Student Problem Analysis</h1><p class="date"> January 10, 2011 <span>in <a href="http://leetcode.com/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span> <span class="post-utility alignright"></span></p><div class="entry"><blockquote><p>You&#8217;ve been given a list of words to study and memorize. Being a  diligent student of language and the arts, you&#8217;ve decided to not study  them at all and instead make up pointless games based on them. One game  you&#8217;ve come up with is to see how you can concatenate the words to  generate the lexicographically lowest possible string.<span id="more-73"></span></p><p><b>Input</b><br><b></b>As input for playing this game you will receive a text file containing an integer <b>N</b>, the number of word sets you need to play your game against. This will be followed by <b>N</b> word sets, each starting with an integer <b>M</b>, the number of words in the set, followed by <b>M</b> words. All tokens in the input will be separated by some whitespace and, aside from <b>N</b> and <b>M</b>, will consist entirely of lowercase letters.<br><b><br>Output</b><br><b></b>Your  submission should contain the lexicographically shortest strings for  each corresponding word set, one per line and in order.<br><b><br>Constraints</b><br>1 N 1 M 1 </p></blockquote><p>Here is my problem analysis for Facebook Hacker Cup Qualification Round: Studious Student.</p><p><u><b>Studious Student Problem Analysis:</b></u><br>As I mentioned, this problem is not as straight forward as you think it might be. The first most natural way to approach this problem is sorting. Most people will reason that you can sort and concatenate each individual word together to form the lexicographically smallest string. This is incorrect, as illustrated in one of the sample inputs:</p><p class="hiblock"><b>jibw ji jp bw jibw</b></p><p>By sorting and concatenate, the answer is:</p><p class="hiblock"><b>bwjijibwjibwjp</b>,</p><p>while the correct answer should be:</p><p class="hiblock"><b>bwjibwjibwjijp</b>.</p><p></p><div class="separator"><a href="http://2.bp.blogspot.com/_UElib2WLeDE/TSuum2i-8oI/AAAAAAAACcM/Vt55w-yj2Rk/s1600/dictionary_page.jpg"><img border="0" height="228" src="http://2.bp.blogspot.com/_UElib2WLeDE/TSuum2i-8oI/AAAAAAAACcM/Vt55w-yj2Rk/s320/dictionary_page.jpg" width="320"></a></div><p><span>Lexicographical order is also known as dictionary order, since it is how the words are ordered in the dictionary.</span></p><p>Notice in the above words, &#8220;<b>ji</b>&#8221; is the prefix of &#8220;<b>jibw</b>&#8220;. The &#8220;<i>sort and concatenate</i>&#8221; method definitely does not work when there is a case where a word is a prefix of one or more other words.</p><p>Well, one might try a naive way of doing a brute force. Although it is  highly inefficient, it works for this problem. This is because each  input would be at most <b>9 </b>words, and it turns out there are only a total of <b>9!</b> = <b>362880</b> possible permutations of words being concatenated together. Therefore,  one can generate all possible permutations and find the answer.</p><p>We make an easy observation that if all words in the list are of equal length, then <i>sort + concatenate</i> must yield the smallest dictionary order. In fact, a better argument would be:</p><p class="hiblock">If no word appears to be a prefix of any other words, then the simple <i>sort + concatenate</i> must yield the smallest dictionary order string.</p><p>To solve this problem correctly, we must also handle the special case where a word appears as a prefix of other words. One efficient and easy (non-trivial to prove but easy to reason) solution for this problem is to re-define the order relation of two words, <i>s1</i> and <i>s2</i>, as:</p><p class="hiblock"><i> s1</i> is less than <i>s2</i> <b>iff (if and only if)</b><br><b><br> </b><i>s1</i> + <i>s2</i> s2 + <i>s1</i>.</p><p>Then, by sorting and concatenating the words using the above ordering, it must yield the lexicographically smallest string. Why?</p><p>Here is a concrete example why this works. We use an example where the list of words are:</p><p class="hiblock"><b>ji</b> <b>jibw</b> <b>jijibw</b></p><p>By the definition of <i>s1</i> is less than<i> s2</i> iff <i>s1</i>+<i>s2</i> s2+<i>s1</i>, we found that the lowest ordered word in the list is &#8220;<b>jibw</b>&#8220;. This is because &#8220;<b>jibwji</b>&#8221; jijibw&#8221; and &#8220;<b>jibwjijibw</b>&#8221; jijibwjibw&#8220;.</p><p>Now, the key to understand why the order relation s1+s2 </p><ul><li>We have found the smallest-ordered word such that s1+x </li><li>For a case with more words, then this order relation holds: s1+x </li><li>This result can be generalized to all <i>M</i> words by induction, due to the transitive property mentioned above.</li></ul></div><p>I do not claim that this is a rigid  or even a correctly constructed proof. However, it does help me in  convincing myself this is a valid solution.</p><p></p><div id="crayon-54e23bf7c5540" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
bool compareSort(const string &amp;s1, const string &amp;s2) {
  return s1 + s2 &lt; s2 + s1;
}

int main() {
  string words[10];
  int N, M;
  cin &gt;&gt; N;

  for (int i = 0; i &lt; N; i++) {
    cin &gt;&gt; M;

    for (int j = 0; j &lt; M; j++)
      cin &gt;&gt; words[j];

    sort(words, words+M, compareSort);

    for (int j = 0; j &lt; M; j++)
      cout &lt;&lt; words[j];
    cout &lt;&lt; endl;
  }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54e23bf7c5540-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e23bf7c5540-2">2</p><p class="crayon-num" data-line="crayon-54e23bf7c5540-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e23bf7c5540-4">4</p><p class="crayon-num" data-line="crayon-54e23bf7c5540-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e23bf7c5540-6">6</p><p class="crayon-num" data-line="crayon-54e23bf7c5540-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e23bf7c5540-8">8</p><p class="crayon-num" data-line="crayon-54e23bf7c5540-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e23bf7c5540-10">10</p><p class="crayon-num" data-line="crayon-54e23bf7c5540-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e23bf7c5540-12">12</p><p class="crayon-num" data-line="crayon-54e23bf7c5540-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e23bf7c5540-14">14</p><p class="crayon-num" data-line="crayon-54e23bf7c5540-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e23bf7c5540-16">16</p><p class="crayon-num" data-line="crayon-54e23bf7c5540-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e23bf7c5540-18">18</p><p class="crayon-num" data-line="crayon-54e23bf7c5540-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e23bf7c5540-20">20</p><p class="crayon-num" data-line="crayon-54e23bf7c5540-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e23bf7c5540-22">22</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e23bf7c5540-1"><span class="t">bool</span><span class="h"> </span><span class="e">compareSort</span><span class="sy">(</span><span class="m">const</span><span class="h"> </span><span class="t">string</span><span class="h"> </span><span class="o">&amp;</span><span class="i">s1</span><span class="sy">,</span><span class="h"> </span><span class="m">const</span><span class="h"> </span><span class="t">string</span><span class="h"> </span><span class="o">&amp;</span><span class="i">s2</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e23bf7c5540-2"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">s1</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="i">s2</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">s2</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="i">s1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e23bf7c5540-3"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e23bf7c5540-4">&#160;</p><p class="crayon-line" id="crayon-54e23bf7c5540-5"><span class="t">int</span><span class="h"> </span><span class="e">main</span><span class="sy">(</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e23bf7c5540-6"><span class="h">&#160;&#160;</span><span class="t">string</span><span class="h"> </span><span class="v">words</span><span class="sy">[</span><span class="cn">10</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e23bf7c5540-7"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="i">N</span><span class="sy">,</span><span class="h"> </span><span class="i">M</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e23bf7c5540-8"><span class="h">&#160;&#160;</span><span class="i">cin</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">N</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e23bf7c5540-9">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54e23bf7c5540-10"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">N</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e23bf7c5540-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cin</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="i">M</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e23bf7c5540-12">&#160;</p><p class="crayon-line" id="crayon-54e23bf7c5540-13"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">M</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e23bf7c5540-14"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cin</span><span class="h"> </span><span class="o">&gt;&gt;</span><span class="h"> </span><span class="v">words</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e23bf7c5540-15">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54e23bf7c5540-16"><span class="h">&#160;&#160;&#160;&#160;</span><span class="e">sort</span><span class="sy">(</span><span class="i">words</span><span class="sy">,</span><span class="h"> </span><span class="i">words</span><span class="o">+</span><span class="i">M</span><span class="sy">,</span><span class="h"> </span><span class="i">compareSort</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e23bf7c5540-17">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54e23bf7c5540-18"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">M</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54e23bf7c5540-19"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="v">words</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e23bf7c5540-20"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">cout</span><span class="h"> </span><span class="o">&lt;&lt;</span><span class="h"> </span><span class="i">endl</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e23bf7c5540-21"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e23bf7c5540-22"><span class="sy">}</span></p></div></td></tr></table></div></div><p></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a73">Rating: 4.4/<strong>5</strong> (14 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Studious Student Problem Analysis</span></span>, <span class="rating"><span class="average">4.4</span> out of <span class="best">5</span> based on <span class="votes">14</span> ratings <span class="summary"></span></span></span><h3>Source</h3><p><a href="http://leetcode.com/2011/01/studious-student-problem-analysis.html" rel="tag">http://leetcode.com/2011/01/studious-student-problem-analysis.html</a></p></div><p class="postmetadata">&#160;</p></div></div></body><body><div><div class="post-content"><h1 class="posttitle">The Painter&#8217;s Partition Problem Part II</h1><p class="date"> April 6, 2011 <span>in <a href="http://leetcode.com/category/binary-search" title="View all posts in binary search" rel="category tag">binary search</a></span> <span class="post-utility alignright"></span></p><div class="entry"><p><span><strong>Note:</strong></span><br> This is Part II of the article: <a href="http://www.leetcode.com/2011/04/the-painters-partition-problem.html">The Painter&#8217;s Partition Problem</a>. Please read <a href="http://www.leetcode.com/2011/04/the-painters-partition-problem.html">Part I</a> for more background information.<br> <span id="more-538"></span></p><blockquote><p>You have to paint N boards of length {A<sub>0</sub>, A<sub>1</sub>, A<sub>2</sub> &#8230; A<sub>N-1</sub>}. There are <em>K</em> painters available and you are also given how much time a painter takes to paint 1 unit of board. You have to get this job done as soon as possible under the constraints that any painter will only paint continuous sections of board, say board {2, 3, 4} or only board {1} or nothing but not board {2, 4, 5}.</p></blockquote><p>In my <a href="http://www.leetcode.com/2011/04/the-painters-partition-problem.html">previous post</a> we talked about how to use the power of <a href="http://www.leetcode.com/category/dynamic-programming">Dynamic Programming</a> (DP) to solve a fairly difficult problem. Although the DP approach is pretty neat, it uses an extra O(<em>kN</em>) space. In this post, we introduce an algorithm without extra space and runs in the order of O(<em>N</em> log <em>c</em>) time, where <em>c</em> is the sum of all elements in A.</p><p><strong>Hint:</strong><br> Try to think how to apply Binary Search indirectly to solve this problem. First, it does not require A to be sorted in any way. Second, if you sort A, the constraint that the painter must paint continuous sections of board does not necessarily hold anymore. Think carefully: What if you have a maximum board length in mind such that no painter can exceed this value?</p><p><strong>Solution:</strong><br> Assume that you are assigning continuous section of board to each painter such that its total length must not exceed a predefined maximum, cost<sub>max</sub>. Then, you are able to find the number of painters that is required, <em>x</em>. Following are some key observations:</p><div class="hiblock"><ol><li>The lowest possible value for cost<sub>max</sub> must be the maximum element in A (name this as <strong>lo</strong>).</li><li>The highest possible value for cost<sub>max</sub> must be the entire sum of A, (name this as <strong>hi</strong>).</li><li>As cost<sub>max</sub> increases, <em>x</em> decreases. The opposite also holds true.</li></ol></div><p>Now, the question translates directly into:</p><p class="hiblock">How do we use binary search to find the minimum of cost<sub>max</sub> while satisfying the condition <em>x</em> = <em>k</em>? The search space will be the range of [<strong>lo</strong>, <strong>hi</strong>].</p><p>Let us study using the example below to understand how this works:</p><pre>Assume that A = { 100, 200, 300, 400, 500, 600, 700, 800, 900 }, 
and k = 3.</pre><p>Since <em>k</em> is positive, we know that the highest possible cost<sub>max </sub>must be the sum of A, 4500. (ie, assigning all boards to one painter).</p><p>The lowest possible cost<sub>max</sub> must be the largest element in A, 900. This requires a total of six painters &#8212; The first painter paints {100, 200, 300}, second painter paints {400, 500} while the rest of them paints one board each).</p><p>Below is a simple conceptual illustration of how the search space looks like, with its corresponding <em>x</em> value (the required number of painters) pointing to cost<sub>max</sub>.</p><pre>900        ...       4500
 &#8593;                     &#8593;
x=6                   x=1</pre><p>Note that <em>x</em> decreases while cost<sub>max</sub> increases.<br> We want to find the minimum of cost<sub>max</sub> under the constraint of <em>x</em> = <em>k</em>.</p><pre>900  ...  2700  ...  4500
 &#8593;          &#8593;          &#8593;
x=6        x=2        x=1</pre><p>We choose the middle element, 2700, and find its corresponding <em>x</em>, which is 2.<br> Since <em>x</em> = <em>k</em> (which equals to 3), we can find a better minimum (ie, the real solution) in the lower half.<br> Therefore, we discard the upper half and continue searching in the lower half.</p><pre>900  ...  1800  ...  2700
 &#8593;          &#8593;          &#8593;
x=6        x=3        x=2</pre><p>The middle element now is 1800 and its corresponding <em>x</em> is 3, which is still = <em>k</em>.<br> We discard the upper half again and continue searching in the lower half.</p><pre>900  ...  1350  ...  1800
 &#8593;          &#8593;          &#8593;
x=6        x=5        x=3</pre><p>This time, the middle element is 1350 and its corresponding <em>x</em> is 5, which is &gt; <em>k</em>.<br> We have to discard the lower half <strong>including the middle element itself</strong>, since <em>x</em> &gt; <em>k</em> in that region (ie, no valid solution).<br> Here, read the phrase in bold <strong>&#8220;</strong><strong>including the middle element itself</strong><strong>&#8220;</strong> again, as this is extremely important to maintain the invariant. Why?<br> Yes, that means the lower half <strong>including </strong>the value 1350 would be discarded.<br> We continue searching in the upper half (ie, in the range of [1351, 1800]).</p><p>&#8230;</p><p>After multiple successions of halving the search space, the final answer is 1700, and its corresponding <em>x</em> is 3. This is also the minimum of cost<sub>max</sub> while maintaining the requirement <em>x</em> = <em>k</em>.</p><p>The complexity of this algorithm is <em>O</em>(<em>N</em> log (<strong> &#8721; </strong>A<sub>i</sub> )), which is quite efficient. Furthermore, it does not require any extra space, unlike the DP solution which requires <em>O</em>(<em>kN</em>) space. This solution is also easier to code. Just be very careful while writing code for any variation of binary search, and think through all the corner cases while you code.</p><div id="crayon-54ecde8be56b2" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int getMax(int A[], int n) {
  int max = INT_MIN;
  for (int i = 0; i &lt; n; i++) {
     if (A[i] &gt; max) max = A[i];
  }
  return max;
}

int getSum(int A[], int n) {
  int total = 0;
  for (int i = 0; i &lt; n; i++)
    total += A[i];
  return total;
}

int getRequiredPainters(int A[], int n, int maxLengthPerPainter) {
  int total = 0, numPainters = 1;
  for (int i = 0; i &lt; n; i++) {
    total += A[i];
    if (total &gt; maxLengthPerPainter) {
      total = A[i];
      numPainters++;
    }
  }
  return numPainters;
}

int partition(int A[], int n, int k) {
  int lo = getMax(A, n);
  int hi = getSum(A, n);

  while (lo &lt; hi) {
    int mid = lo + (hi-lo)/2;
    int requiredPainters = getRequiredPainters(A, n, mid);
    if (requiredPainters &lt;= k)
      hi = mid;
    else
      lo = mid+1;
  }
  return lo;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54ecde8be56b2-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-2">2</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-4">4</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-6">6</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-8">8</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-10">10</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-12">12</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-14">14</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-16">16</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-18">18</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-20">20</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-22">22</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-24">24</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-26">26</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-28">28</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-30">30</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-32">32</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-34">34</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-36">36</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-38">38</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-54ecde8be56b2-40">40</p><p class="crayon-num" data-line="crayon-54ecde8be56b2-41">41</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54ecde8be56b2-1"><span class="t">int</span><span class="h"> </span><span class="e">getMax</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-2"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">max</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">INT_MIN</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-3"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-4"><span class="h">&#160;&#160;&#160;&#160; </span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">A</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">max</span><span class="sy">)</span><span class="h"> </span><span class="v">max</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-5"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-6"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">max</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-7"><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-8">&#160;</p><p class="crayon-line" id="crayon-54ecde8be56b2-9"><span class="t">int</span><span class="h"> </span><span class="e">getSum</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-10"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">total</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-11"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">total</span><span class="h"> </span><span class="o">+</span><span class="o">=</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-13"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">total</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-14"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-15">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-16"><span class="t">int</span><span class="h"> </span><span class="e">getRequiredPainters</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">maxLengthPerPainter</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-17"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">total</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="v">numPainters</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-18"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-19"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">total</span><span class="h"> </span><span class="o">+</span><span class="o">=</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-20"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">total</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">maxLengthPerPainter</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-21"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">total</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-22"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="i">numPainters</span><span class="o">++</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-23"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-24"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-25"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">numPainters</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-26"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-27">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-28"><span class="t">int</span><span class="h"> </span><span class="e">partition</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">k</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-29"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">lo</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">getMax</span><span class="sy">(</span><span class="i">A</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-30"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">hi</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">getSum</span><span class="sy">(</span><span class="i">A</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-31">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-32"><span class="h">&#160;&#160;</span><span class="st">while</span><span class="h"> </span><span class="sy">(</span><span class="i">lo</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">hi</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-33"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">mid</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">lo</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="sy">(</span><span class="i">hi</span><span class="o">-</span><span class="i">lo</span><span class="sy">)</span><span class="o">/</span><span class="cn">2</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-34"><span class="h">&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">requiredPainters</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">getRequiredPainters</span><span class="sy">(</span><span class="i">A</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="i">mid</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-35"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">requiredPainters</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">k</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-36"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">hi</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">mid</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-37"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">else</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-38"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">lo</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">mid</span><span class="o">+</span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-39"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54ecde8be56b2-40"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">lo</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54ecde8be56b2-41"><span class="sy">}</span></p></div></td></tr></table></div></div><p><strong>Additional Reference:</strong><br> <a href="http://www.topcoder.com/tc?module=Static&amp;d1=tutorials&amp;d2=binarySearch">TopCoder&#8217;s Tutorial on Binary Search</a></p><p><span><strong>Further Thoughts:</strong></span><br> The above binary search solution has a run time complexity of O(N log ( &#8721; Ai )). What impact would the term ? Ai (ie, the search space) have over the run time itself? What if the search space is extremely large?</p><p>As you may have known, binary search is extremely fast. For example, binary search in a range of one million elements requires no more than 20 iterations. Here, we explore an alternative solution which reduces the search space even further. (Thanks to an id grass for the idea)</p><p>The idea is to first build a cumulative sum array B, where B[j] = &#8721;{i=0..j} Ai. We know that we must allocate one of the amount found in B[j] to the first painter. Since the elements in B is in increasing order, we can apply binary search in B to answer the following question:</p><p class="hiblock">Find the index j such that B[j] fails to satisfy the condition while B[j+1] satisfy.</p><p>Finally, we can set lo = B[j] and hi = B[j+1], and apply the same binary search from method 1 from above.</p><p>Using the above example:</p><pre>A = { 100, 200, 300, 400, 500, 600, 700, 800, 900 }, and k = 3.</pre><p>We build the cumulative array B:</p><pre>B = { 100, 300, 600, 1000, 1500, 2100, 2800, 3600, 4500 }</pre><p>After we apply binary search, we are able to find that B[4] = 1500, B[5] = 2100, because for costmax = 1500, x = 4; while costmax = 2100, x =3.</p><p>Time required: O(N log N)</p><p>Then, we set lo = 1500 and hi = 2100, then apply binary search to find in that range.</p><p>Time required: O(N log (B[j+1]-B[j]) ) = O(N log A[j+1]).</p><p>Therefore, the worst case run time complexity = O(N log N + N log max(A) )</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a538">Rating: 4.7/<strong>5</strong> (25 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">The Painter's Partition Problem Part II</span></span>, <span class="rating"><span class="average">4.7</span> out of <span class="best">5</span> based on <span class="votes">25</span> ratings <span class="summary"></span></span></span></div><p class="postmetadata">&#160;</p><h3>Source</h3><p><a href="http://leetcode.com/2011/04/the-painters-partition-problem-part-ii.html" rel="tag">http://leetcode.com/2011/04/the-painters-partition-problem-part-ii.html</a></p></div></div></body><body><div><div class="entry"><blockquote><p>You have to paint N boards of length {A<sub>0</sub>, A<sub>1</sub>, A<sub>2</sub> &#8230; A<sub>N-1</sub>}. There are <em>K</em> painters available and you are also given how much time a painter takes to paint 1 unit of board. You have to get this job done as soon as possible under the constraints that any painter will only paint continuous sections of board, say board {2, 3, 4} or only board {1} or nothing but not board {2, 4, 5}.</p></blockquote><p><span id="more-516"></span><br> This is a problem which is fairly difficult. Try your very best to really think through it. You will improve your problem solving technique by struggling through it!</p><p>It turns out that this problem is the same as &#8220;<a href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=1901&amp;rd=4650">FairWorkload</a>&#8221; from TopCoder&#8217;s division 1 level 2 problem in SRM 169. If you find the problem statement above is difficult to understand, head over to <a href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=1901&amp;rd=4650">TopCoder&#8217;s FairWorkload problem statement</a> for a clearer description with examples. This problem is an interesting problem because it has several approaches, which I will outline them one by one here.</p><p>For most people, the first natural approach is to brute force. Let&#8217;s look at an example where you have nine boards, each of length 100, and you have three painters. How would you divide the boards?</p><p>Very easy, just divide it into three equal-sized partitions!</p><pre>100 100 100 | 100 100 100 | 100 100 100</pre><p>But what if the boards are of different lengths? If we just divide the boards into three equal-sized partitions, the below configuration would be divided as:</p><pre>100 200 300 | 400 500 600 | 700 800 900</pre><p>The above allocation is clearly not appropriate, as it is extremely unfair to the third painter. The third painter has to paint 2400 units while the first painter paints only 600 units! The fairest possible way to divide the boards among the three painters should be:</p><pre>100 200 300 400 500 | 600 700 | 800 900</pre><p>In this way, the largest board to paint is 1700 units whilst the smallest board to paint is 1300 units. Compared to the previous allocation, this allocation allows painting to finish faster because the maximum over the partitions has decreased from 2400 to 1700 units.</p><p>Now that we understand the problem better, we can re-state the above problem as follow:</p><p class="hiblock">Given an array of non-negative integers A and a positive integer <em>k</em>, we want to:<br> Divide A into <em>k</em> or fewer partitions,<br> such that the maximum sum over all the partitions is minimized.</p><p>By now, I am sure a handful of people would start thinking a heuristic approach to solve this problem. How about just computing the average size of a partition (ie, &#8721;{<em>i</em>=0..<em>n</em>-1} A<sub>i</sub> / <em>k</em>) and try to match each partition as closely to the average as possible? Although this <em>seemed</em> to work for the above examples, there is no way you could evaluate all possibilities systematically and thus do not always produce the correct solution.</p><p>A more systematic way is to use the brute force approach to evaluate all possibilities. However, brute force in this case is not as straight forward as it used to be. Stop for awhile and think how you would do an exhaustive search for all possibilities. (Hint: Try to think recursively)</p><p>Recursion can be utilized to solve this problem easily. Imagine that we already have (<em>k</em>-1) partitions in place (the left partition) and we are trying to put the last separator (the (<em>k</em>-1)th separator). What are the possible locations to put the last separator? It must lie somewhere between the (<em>j</em>-1)th and <em>j</em>th element, where 1 = <em>j</em> = <em>n</em>. Once we have the last separator in place, we have completed all <em>k</em> partitions. The cost of this partition arrangement can be readily calculated as the larger of the two quantities below:</p><pre>    i) The cost of the last partition, <strong>&#8721;</strong>{<em>i</em>=<em>j</em>..<em>n</em>-1} A<sub>i</sub>
   ii) The cost of the largest partition formed to the left of <em>j</em>
       (ie, the left partition = { A<sub>0</sub>, A<sub>1</sub>, ..., A<sub>j-1</sub> } ).</pre><p>Now, how do we find ii)? It turns out that we want to place the remaining (<em>k</em>-2) separators such that the left partition is divided as fairly as possible, which leads to another valid sub-problem itself. Therefore, we can solve it recursively!</p><p>By defining M[<em>n</em>, <em>k</em>] as the optimum cost of a partition arrangement with <em>n</em> total blocks from the first block and <em>k</em> partitions, the recurrence relation can be stated as follow:</p><pre>                <span> n </span>               <span>n-1</span>
M[n, k] = min { max { M[j, k-1], <span><strong>&#8721;</strong></span> A<sub>i</sub> } }
                <span>j=1</span>               <span>i=j</span></pre><p>The base cases are:</p><pre>M[1, k] = A<sub>0</sub>
          <span>n-1</span>
M[n, 1] = <span><strong>&#8721;</strong></span> A<sub>i
</sub>          <span>i=0</span></pre><p>Therefore, the brute force solution can then be coded directly from the recurrence relation above:</p><div id="crayon-54e75e9484788" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int sum(int A[], int from, int to) {
  int total = 0;
  for (int i = from; i &lt;= to; i++)
    total += A[i];
  return total;
}

int partition(int A[], int n, int k) {
  if (k == 1)
    return sum(A, 0, n-1);
  if (n == 1)
    return A[0];

  int best = INT_MAX;
  for (int j = 1; j &lt;= n; j++)
    best = min(best, max(partition(A, j, k-1), sum(A, j, n-1)));

  return best;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54e75e9484788-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484788-2">2</p><p class="crayon-num" data-line="crayon-54e75e9484788-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484788-4">4</p><p class="crayon-num" data-line="crayon-54e75e9484788-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484788-6">6</p><p class="crayon-num" data-line="crayon-54e75e9484788-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484788-8">8</p><p class="crayon-num" data-line="crayon-54e75e9484788-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484788-10">10</p><p class="crayon-num" data-line="crayon-54e75e9484788-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484788-12">12</p><p class="crayon-num" data-line="crayon-54e75e9484788-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484788-14">14</p><p class="crayon-num" data-line="crayon-54e75e9484788-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484788-16">16</p><p class="crayon-num" data-line="crayon-54e75e9484788-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484788-18">18</p><p class="crayon-num" data-line="crayon-54e75e9484788-19">19</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e75e9484788-1"><span class="t">int</span><span class="h"> </span><span class="e">sum</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">from</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="st">to</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484788-2"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">total</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e75e9484788-3"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">from</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="st">to</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484788-4"><span class="h">&#160;&#160;&#160;&#160;</span><span class="i">total</span><span class="h"> </span><span class="o">+</span><span class="o">=</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e75e9484788-5"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">total</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484788-6"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e75e9484788-7">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484788-8"><span class="t">int</span><span class="h"> </span><span class="e">partition</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">k</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e75e9484788-9"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">k</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484788-10"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">sum</span><span class="sy">(</span><span class="i">A</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e75e9484788-11"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">n</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484788-12"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e75e9484788-13">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484788-14"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">best</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">INT_MAX</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e75e9484788-15"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484788-16"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">best</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">min</span><span class="sy">(</span><span class="i">best</span><span class="sy">,</span><span class="h"> </span><span class="e">max</span><span class="sy">(</span><span class="e">partition</span><span class="sy">(</span><span class="i">A</span><span class="sy">,</span><span class="h"> </span><span class="i">j</span><span class="sy">,</span><span class="h"> </span><span class="i">k</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">,</span><span class="h"> </span><span class="e">sum</span><span class="sy">(</span><span class="i">A</span><span class="sy">,</span><span class="h"> </span><span class="i">j</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e75e9484788-17">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484788-18"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="i">best</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e75e9484788-19"><span class="sy">}</span></p></div></td></tr></table></div></div><p>As you already knew, the brute force solution is definitely not very efficient. It is exponential in run time complexity due to re-computation of the same values over and over again. We can do much better by caching our results in a <em>k</em>x<em>N</em> table utilizing Dynamic programming (DP). The table has to be constructed in a way such that the sub-problems are calculated first in a bottom-up fashion.</p><p>Each entry in the table needs <em>O</em>(<em>N</em><sup>2</sup>) time to calculate. This is due to the summation term (<strong>&#8721;</strong>{i=j..n-1} A<sub>i</sub>) needs <em>O</em>(<em>N</em>) time, and on top of that you need to find the minimum across all partitions which increases the complexity by an order to O(<em>N</em><sup>2</sup>). Since there are a total of <em>kN</em> entries in the table, the overall run time complexity has to be <em>O</em>(<em>k</em><em>N</em><sup>3</sup>).</p><p>It is easy to further reduce the complexity down to <em>O</em>(<em>kN</em><sup>2</sup>). The extra calculation of the summation term (<strong>&#8721;</strong>{i=j..n-1} A<sub>i</sub>) can be easily avoided by caching the results using an array that stores cumulative sums.</p><p>Below is the DP solution with <em>O</em>(<em>kN</em><sup>2</sup>) run time and using <em>O</em>(<em>kN</em>) space complexity.</p><div id="crayon-54e75e9484839" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
const int MAX_N = 100;
int findMax(int A[], int n, int k) {
  int M[MAX_N+1][MAX_N+1] = {0};
  int cum[MAX_N+1] = {0};
  for (int i = 1; i &lt;= n; i++)
    cum[i] = cum[i-1] + A[i-1];

  for (int i = 1; i &lt;= n; i++)
    M[i][1] = cum[i];
  for (int i = 1; i &lt;= k; i++)
    M[1][i] = A[0];

  for (int i = 2; i &lt;= k; i++) {
    for (int j = 2; j &lt;= n; j++) {
      int best = INT_MAX;
      for (int p = 1; p &lt;= j; p++) {
        best = min(best, max(M[p][i-1], cum[j]-cum[p]));
      }
      M[j][i] = best;
    }
  }
  return M[n][k];
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54e75e9484839-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484839-2">2</p><p class="crayon-num" data-line="crayon-54e75e9484839-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484839-4">4</p><p class="crayon-num" data-line="crayon-54e75e9484839-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484839-6">6</p><p class="crayon-num" data-line="crayon-54e75e9484839-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484839-8">8</p><p class="crayon-num" data-line="crayon-54e75e9484839-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484839-10">10</p><p class="crayon-num" data-line="crayon-54e75e9484839-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484839-12">12</p><p class="crayon-num" data-line="crayon-54e75e9484839-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484839-14">14</p><p class="crayon-num" data-line="crayon-54e75e9484839-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484839-16">16</p><p class="crayon-num" data-line="crayon-54e75e9484839-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484839-18">18</p><p class="crayon-num" data-line="crayon-54e75e9484839-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484839-20">20</p><p class="crayon-num" data-line="crayon-54e75e9484839-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54e75e9484839-22">22</p><p class="crayon-num" data-line="crayon-54e75e9484839-23">23</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54e75e9484839-1"><span class="m">const</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">MAX_N</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">100</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484839-2"><span class="t">int</span><span class="h"> </span><span class="e">findMax</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">k</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e75e9484839-3"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">M</span><span class="sy">[</span><span class="i">MAX_N</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="i">MAX_N</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">{</span><span class="cn">0</span><span class="sy">}</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484839-4"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">cum</span><span class="sy">[</span><span class="i">MAX_N</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">{</span><span class="cn">0</span><span class="sy">}</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e75e9484839-5"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484839-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">cum</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">cum</span><span class="sy">[</span><span class="i">i</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="i">i</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e75e9484839-7">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484839-8"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54e75e9484839-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">M</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">[</span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">cum</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484839-10"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">k</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54e75e9484839-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">M</span><span class="sy">[</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">A</span><span class="sy">[</span><span class="cn">0</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484839-12">&#160;</p><p class="crayon-line" id="crayon-54e75e9484839-13"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">k</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484839-14"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e75e9484839-15"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">best</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">INT_MAX</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484839-16"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">p</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">p</span><span class="h"> </span><span class="o">&lt;=</span><span class="h"> </span><span class="i">j</span><span class="sy">;</span><span class="h"> </span><span class="i">p</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54e75e9484839-17"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">best</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">min</span><span class="sy">(</span><span class="i">best</span><span class="sy">,</span><span class="h"> </span><span class="e">max</span><span class="sy">(</span><span class="v">M</span><span class="sy">[</span><span class="i">p</span><span class="sy">]</span><span class="sy">[</span><span class="i">i</span><span class="o">-</span><span class="cn">1</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="v">cum</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="o">-</span><span class="v">cum</span><span class="sy">[</span><span class="i">p</span><span class="sy">]</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484839-18"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e75e9484839-19"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">M</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">best</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484839-20"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54e75e9484839-21"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54e75e9484839-22"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="v">M</span><span class="sy">[</span><span class="i">n</span><span class="sy">]</span><span class="sy">[</span><span class="i">k</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54e75e9484839-23"><span class="sy">}</span></p></div></td></tr></table></div></div><p><strong><span>Follow up:</span></strong><br> Could you think of another non DP algorithm which doesn&#8217;t requires any extra space?</p><p><strong><span>&#187; Continue reading</span> <a href="http://www.leetcode.com/2011/04/the-painters-partition-problem-part-ii.html">Part II: The Painter&#8217;s Partition Problem.</a></strong></p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a516">Rating: 4.4/<strong>5</strong> (10 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">The Painter's Partition Problem Part I</span></span>, <span class="rating"><span class="average">4.4</span> out of <span class="best">5</span> based on <span class="votes">10</span> ratings <span class="summary"></span></span></span></div></div></body><body><div><div class="entry"><blockquote><p>A robot is located at the top-left corner of a <em>m</em> x <em>n</em> grid (marked &#8216;Start&#8217; in the diagram below). The robot can only move either down or right at any point in time. The robot is trying to reach the bottom-right corner of the grid (marked &#8216;Finish&#8217; in the diagram below). How many possible unique paths are there?</p></blockquote><p><span id="more-52"></span></p><div class="separator"><a href="http://leetcode.com/wp-content/uploads/2014/12/robot_maze.png"><img src="http://leetcode.com/wp-content/uploads/2014/12/robot_maze.png" alt="" width="400" height="182" border="0"></a></div><p><span>Note: The grid above is 7&#215;3, and is used to illustrate the problem.</span></p><p>This question appears originally from <a href="http://treasurehunt.appspot.com/historic/robot/">Google Treasure Hunt</a>. This problem is interesting because it can be solved using multiple approaches.</p><p><strong>Hint:</strong> Try to use the most direct way to solve it, and see if you can improve the efficiency.</p><p><strong>Backtracking Solution:</strong><br> The most direct way is to<strong> </strong>write code that traverses each possible path, which can be done using backtracking. When you reach row=<em>m</em> and col=<em>n</em>, you know you&#8217;ve reached the bottom-right corner, and there is one additional unique path to it. However, when you reach row&gt;<em>m</em> or col&gt;<em>n</em>, then it&#8217;s an invalid path and you should stop traversing. For any grid at row=<em>r</em> and col=<em>c</em>, you have two choices: Traverse to the right or traverse to the bottom. Therefore, the total unique paths at grid (<em>r</em>,<em>c</em>) is equal to the sum of total unique paths from the grid to the right and the grid below. Below is the backtracking code in 5 lines of code:</p><div id="crayon-54eb74f25c152" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
int backtrack(int r, int c, int m, int n) {
  if (r == m &amp;&amp; c == n)
    return 1;
  if (r &gt; m || c &gt; n)
    return 0;

  return backtrack(r+1, c, m, n) + backtrack(r, c+1, m, n);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eb74f25c152-1"><span class="t">int</span><span class="h"> </span><span class="e">backtrack</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">r</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">c</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">m</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c152-2"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">r</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">m</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="v">c</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54eb74f25c152-3"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c152-4"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">r</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">m</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">c</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54eb74f25c152-5"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c152-6">&#160;</p><p class="crayon-line" id="crayon-54eb74f25c152-7"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">backtrack</span><span class="sy">(</span><span class="i">r</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">c</span><span class="sy">,</span><span class="h"> </span><span class="i">m</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="e">backtrack</span><span class="sy">(</span><span class="i">r</span><span class="sy">,</span><span class="h"> </span><span class="i">c</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">m</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c152-8"><span class="sy">}</span></p></div></td></tr></table></div></div><p><strong>Improved Backtracking Solution using Memoization:</strong><br> Although the above backtracking solution is easy to code, it is very inefficient in the sense that it recalculates the same solution for a grid over and over again. By caching the results, we prevent recalculation and only calculates when necessary. Here, we are using a <a href="http://en.wikipedia.org/wiki/Dynamic_programming">dynamic programming</a> (DP) technique called <a href="http://en.wikipedia.org/wiki/Memoization">memoization</a>.</p><div id="crayon-54eb74f25c219" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
const int M_MAX = 100;
const int N_MAX = 100;

int backtrack(int r, int c, int m, int n, int mat[][N_MAX+2]) {
  if (r == m &amp;&amp; c == n)
    return 1;
  if (r &gt; m || c &gt; n)
    return 0;

  if (mat[r+1][c] == -1)
    mat[r+1][c] = backtrack(r+1, c, m, n, mat);
  if (mat[r][c+1] == -1)
    mat[r][c+1] = backtrack(r, c+1, m, n, mat);

  return mat[r+1][c] + mat[r][c+1];
}

int bt(int m, int n) {
  int mat[M_MAX+2][N_MAX+2];
  for (int i = 0; i &lt; M_MAX+2; i++) {
    for (int j = 0; j &lt; N_MAX+2; j++) {
      mat[i][j] = -1;
    }
  }
  return backtrack(1, 1, m, n, mat);
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-54eb74f25c219-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb74f25c219-2">2</p><p class="crayon-num" data-line="crayon-54eb74f25c219-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb74f25c219-4">4</p><p class="crayon-num" data-line="crayon-54eb74f25c219-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb74f25c219-6">6</p><p class="crayon-num" data-line="crayon-54eb74f25c219-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb74f25c219-8">8</p><p class="crayon-num" data-line="crayon-54eb74f25c219-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb74f25c219-10">10</p><p class="crayon-num" data-line="crayon-54eb74f25c219-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb74f25c219-12">12</p><p class="crayon-num" data-line="crayon-54eb74f25c219-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb74f25c219-14">14</p><p class="crayon-num" data-line="crayon-54eb74f25c219-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb74f25c219-16">16</p><p class="crayon-num" data-line="crayon-54eb74f25c219-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb74f25c219-18">18</p><p class="crayon-num" data-line="crayon-54eb74f25c219-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb74f25c219-20">20</p><p class="crayon-num" data-line="crayon-54eb74f25c219-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb74f25c219-22">22</p><p class="crayon-num" data-line="crayon-54eb74f25c219-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb74f25c219-24">24</p><p class="crayon-num" data-line="crayon-54eb74f25c219-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-54eb74f25c219-26">26</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eb74f25c219-1"><span class="m">const</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">M_MAX</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">100</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c219-2"><span class="m">const</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">N_MAX</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">100</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb74f25c219-3">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c219-4"><span class="t">int</span><span class="h"> </span><span class="e">backtrack</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">r</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">c</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">m</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="sy">]</span><span class="sy">[</span><span class="i">N_MAX</span><span class="o">+</span><span class="cn">2</span><span class="sy">]</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eb74f25c219-5"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">r</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">m</span><span class="h"> </span><span class="o">&amp;&amp;</span><span class="h"> </span><span class="v">c</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c219-6"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb74f25c219-7"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="i">r</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">m</span><span class="h"> </span><span class="o">||</span><span class="h"> </span><span class="i">c</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c219-8"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb74f25c219-9">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c219-10"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">mat</span><span class="sy">[</span><span class="i">r</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="i">c</span><span class="sy">]</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54eb74f25c219-11"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">mat</span><span class="sy">[</span><span class="i">r</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="i">c</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">backtrack</span><span class="sy">(</span><span class="i">r</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">c</span><span class="sy">,</span><span class="h"> </span><span class="i">m</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="i">mat</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c219-12"><span class="h">&#160;&#160;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">mat</span><span class="sy">[</span><span class="i">r</span><span class="sy">]</span><span class="sy">[</span><span class="i">c</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="o">-</span><span class="cn">1</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54eb74f25c219-13"><span class="h">&#160;&#160;&#160;&#160;</span><span class="v">mat</span><span class="sy">[</span><span class="i">r</span><span class="sy">]</span><span class="sy">[</span><span class="i">c</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">backtrack</span><span class="sy">(</span><span class="i">r</span><span class="sy">,</span><span class="h"> </span><span class="i">c</span><span class="o">+</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">m</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="i">mat</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c219-14">&#160;</p><p class="crayon-line" id="crayon-54eb74f25c219-15"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="i">r</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="i">c</span><span class="sy">]</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="i">r</span><span class="sy">]</span><span class="sy">[</span><span class="i">c</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c219-16"><span class="sy">}</span></p><p class="crayon-line" id="crayon-54eb74f25c219-17">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c219-18"><span class="t">int</span><span class="h"> </span><span class="e">bt</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">m</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eb74f25c219-19"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="i">M_MAX</span><span class="o">+</span><span class="cn">2</span><span class="sy">]</span><span class="sy">[</span><span class="i">N_MAX</span><span class="o">+</span><span class="cn">2</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c219-20"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">i</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">M_MAX</span><span class="o">+</span><span class="cn">2</span><span class="sy">;</span><span class="h"> </span><span class="i">i</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eb74f25c219-21"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">j</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="h"> </span><span class="o">&lt;</span><span class="h"> </span><span class="i">N_MAX</span><span class="o">+</span><span class="cn">2</span><span class="sy">;</span><span class="h"> </span><span class="i">j</span><span class="o">++</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c219-22"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">mat</span><span class="sy">[</span><span class="i">i</span><span class="sy">]</span><span class="sy">[</span><span class="i">j</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="o">-</span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb74f25c219-23"><span class="h">&#160;&#160;&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c219-24"><span class="h">&#160;&#160;</span><span class="sy">}</span></p><p class="crayon-line" id="crayon-54eb74f25c219-25"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="e">backtrack</span><span class="sy">(</span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="cn">1</span><span class="sy">,</span><span class="h"> </span><span class="i">m</span><span class="sy">,</span><span class="h"> </span><span class="i">n</span><span class="sy">,</span><span class="h"> </span><span class="i">mat</span><span class="sy">)</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c219-26"><span class="sy">}</span></p></div></td></tr></table></div></div><p><strong>Dynamic Programming Solution using Bottom-up Approach:</strong><br> If you notice closely, the above DP solution is using a top-down approach. Now let&#8217;s try a bottom-up approach. Remember this important relationship that is necessary for this DP solution to work:</p><p class="hiblock">The total unique paths at grid (<em>r</em>,<em>c</em>) is equal to the sum of total unique paths from grid to the right (<em>r</em>,<em>c</em>+1) and the grid below (<em>r</em>+1,<em>c</em>).</p><p>How can this relationship help us solve the problem? We observe that all grids of the bottom edge and right edge must all have only one unique path to the bottom-right corner. Using this as the base case, we can build our way up to our solution at grid (1,1) using the relationship above.</p><div class="separator"><a href="http://leetcode.com/wp-content/uploads/2014/12/robot_maze_dp.png"><img src="http://leetcode.com/wp-content/uploads/2014/12/robot_maze_dp.png" alt="" width="400" height="182" border="0"></a></div><p><span>The total unique paths at grid (<em>r</em>,<em>c</em>) is equal to the sum of total unique paths from grid to the right (<em>r</em>,<em>c</em>+1) and the grid below (<em>r</em>+1,<em>c</em>).</span></p><p></p><div id="crayon-54eb74f25c2ca" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly>
const int M_MAX = 100;
const int N_MAX = 100;

int dp(int m, int n) {
  int mat[M_MAX+2][N_MAX+2] = {0};
  mat[m][n+1] = 1;

  for (int r = m; r &gt;= 1; r--)
    for (int c = n; c &gt;= 1; c--)
      mat[r][c] = mat[r+1][c] + mat[r][c+1];

  return mat[1][1];
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="hide"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54eb74f25c2ca-1"><span class="m">const</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">M_MAX</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">100</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c2ca-2"><span class="m">const</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="v">N_MAX</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">100</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb74f25c2ca-3">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c2ca-4"><span class="t">int</span><span class="h"> </span><span class="e">dp</span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="i">m</span><span class="sy">,</span><span class="h"> </span><span class="t">int</span><span class="h"> </span><span class="i">n</span><span class="sy">)</span><span class="h"> </span><span class="sy">{</span></p><p class="crayon-line" id="crayon-54eb74f25c2ca-5"><span class="h">&#160;&#160;</span><span class="t">int</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="i">M_MAX</span><span class="o">+</span><span class="cn">2</span><span class="sy">]</span><span class="sy">[</span><span class="i">N_MAX</span><span class="o">+</span><span class="cn">2</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">{</span><span class="cn">0</span><span class="sy">}</span><span class="sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c2ca-6"><span class="h">&#160;&#160;</span><span class="v">mat</span><span class="sy">[</span><span class="i">m</span><span class="sy">]</span><span class="sy">[</span><span class="i">n</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb74f25c2ca-7">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c2ca-8"><span class="h">&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">r</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">m</span><span class="sy">;</span><span class="h"> </span><span class="i">r</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">r</span><span class="o">--</span><span class="sy">)</span></p><p class="crayon-line" id="crayon-54eb74f25c2ca-9"><span class="h">&#160;&#160;&#160;&#160;</span><span class="st">for</span><span class="h"> </span><span class="sy">(</span><span class="t">int</span><span class="h"> </span><span class="v">c</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="i">n</span><span class="sy">;</span><span class="h"> </span><span class="i">c</span><span class="h"> </span><span class="o">&gt;=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h"> </span><span class="i">c</span><span class="o">--</span><span class="sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c2ca-10"><span class="h">&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="v">mat</span><span class="sy">[</span><span class="i">r</span><span class="sy">]</span><span class="sy">[</span><span class="i">c</span><span class="sy">]</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="i">r</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="i">c</span><span class="sy">]</span><span class="h"> </span><span class="o">+</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="i">r</span><span class="sy">]</span><span class="sy">[</span><span class="i">c</span><span class="o">+</span><span class="cn">1</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb74f25c2ca-11">&#160;</p><p class="crayon-line crayon-striped-line" id="crayon-54eb74f25c2ca-12"><span class="h">&#160;&#160;</span><span class="st">return</span><span class="h"> </span><span class="v">mat</span><span class="sy">[</span><span class="cn">1</span><span class="sy">]</span><span class="sy">[</span><span class="cn">1</span><span class="sy">]</span><span class="sy">;</span></p><p class="crayon-line" id="crayon-54eb74f25c2ca-13"><span class="sy">}</span></p></div></td></tr></table></div></div><p><strong>Combinatorial Solution:</strong><br> It turns out this problem could be solved using combinatorics, which no doubt would be the most efficient solution. In order to see it as a combinatorial problem, there are some necessary observations. Look at the 7&#215;3 sample grid in the picture above. Notice that no matter how you traverse the grids, you always traverse a total of 8 steps. To be more exact, you always have to choose 6 steps to the right (<strong>R</strong>) and 2 steps to the bottom (<strong>B</strong>). Therefore, the problem can be transformed to a question of how many ways can you choose 6<strong>R</strong>&#8216;s and 2<strong>B</strong>&#8216;s in these 8 steps. The answer is <strong>C</strong>(8,2) (or <strong>C</strong>(8,6)). Therefore, the general solution for a <em>m</em> x<em> n</em> grid is <strong>C</strong>(<em>m</em>+<em>n</em>-2, <em>m</em>-1).</p><p><strong>Further Thoughts: </strong></p><p>Now consider if some obstacles are added to the grids marked as &#8216;X&#8217;. How many unique paths would there be? A combinatorial solution is difficult to obtain (I don&#8217;t know myself, quite frankly), but the DP solution can be modified easily to accommodate this constraint.</p><p>VN:F [1.9.22_1171]</p><div class="ratingblock "><div class="ratingtext "><p id="gdr_text_a52">Rating: 4.9/<strong>5</strong> (30 votes cast)</p></div></div><span class="hreview-aggregate"><span class="item"><span class="fn">Unique Paths</span></span>, <span class="rating"><span class="average">4.9</span> out of <span class="best">5</span> based on <span class="votes">30</span> ratings <span class="summary"></span></span></span></div></div></body>