<body><div><p class="post-title-info">
						</p><h2 class="post-title">Red-Black Tree | Set 2 (Insert)</h2>
								
					<div class="post-content" id="post-content">
					<p>In the <a href="http://www.geeksforgeeks.org/red-black-tree-set-1-introduction-2/" target="_blank">previous post</a>, we discussed introduction to Red-Black Trees. In this post, insertion is discussed.<span id="more-126793"></span></p>
<p>In<a href="http://www.geeksforgeeks.org/avl-tree-set-1-insertion/" target="_blank"> AVL tree insertion</a>, we used rotation as a tool to do balancing after insertion caused imbalance. In Red-Black tree, we use two tools to do balancing.</p>
<p><strong>1)</strong> Recoloring<br>
<strong>2)</strong> <a href="http://en.wikipedia.org/wiki/Tree_rotation" target="_blank">Rotation</a></p>
<p>We try recoloring first, if recoloring doesn&#8217;t work, then we go for rotation. Following is detailed algorithm.  The algorithms has mainly two cases depending upon the color of uncle.  If uncle is red, we do recoloring. If uncle is black, we do rotations and/or recoloring.</p>
<p>Color of a NULL node is considered as BLACK.</p>
<p>Let x be the newly inserted node.<br>
<strong>1)</strong> Perform <a href="http://geeksquiz.com/binary-search-tree-set-1-search-and-insertion/" target="_blank">standard BST insertion</a> and make the color of newly inserted nodes as RED.</p>
<p><strong>2) </strong>Do following if color of x&#8217;s parent is not BLACK or x is not root.<br>
&#8230;.<strong>a)</strong><strong> If x&#8217;s uncle is</strong> <strong><span>RED</span></strong> (Grand parent must have been black from <a href="http://www.geeksforgeeks.org/red-black-tree-set-1-introduction-2/" target="_blank">property 4</a>)<br>
&#8230;&#8230;..<strong>(i)</strong> Change color of parent and uncle as BLACK.<br>
&#8230;&#8230;..<strong>(ii)</strong> color of grand parent as RED.<br>
&#8230;&#8230;..<strong>(iii)</strong> Change x = x&#8217;s grandparent, repeat steps 2 and 3 for new x.<br>
<a href="http://d2o58evtke57tz.cloudfront.net/wp-content/uploads/redBlackCase2.png"><img class="aligncenter  wp-image-126803" alt="redBlackCase2" src="http://d2o58evtke57tz.cloudfront.net/wp-content/uploads/redBlackCase2.png" width="419" height="185"></a></p>
<p>&#8230;.<strong>b)</strong><strong> If x&#8217;s uncle is BLACK</strong>, then there can be four configurations for x, x&#8217;s parent (<strong>p</strong>) and x&#8217;s grandparent (<strong>g</strong>) (This is similar to<a href="http://www.geeksforgeeks.org/avl-tree-set-1-insertion/" target="_blank"> AVL Tree</a>)<br>
&#8230;&#8230;..<strong>i)</strong> Left Left Case (p is left child of g and x is left child of p)<br>
&#8230;&#8230;..<strong>ii)</strong> Left Right Case (p is left child of g and x is right child of p)<br>
&#8230;&#8230;..<strong>iii)</strong> Right Right Case (Mirror of case a)<br>
&#8230;&#8230;..<strong>iv)</strong> Right Left Case (Mirror of case c)</p>
<p><strong>3)</strong> If x is root, change color of x as BLACK (Black height of complete tree increases by 1).</p>
<p>Following are operations to be performed in four subcases when uncle is BLACK.</p>
<h2>All four cases when Uncle is BLACK</h2>
<p><strong>Left Left Case (See g, p and x)</strong><br>
<a href="http://d2o58evtke57tz.cloudfront.net/wp-content/uploads/redBlackCase3a1.png"><img class="aligncenter size-full wp-image-126728" alt="redBlackCase3a" src="http://d2o58evtke57tz.cloudfront.net/wp-content/uploads/redBlackCase3a1.png" width="404" height="144"></a></p>
<p><strong>Left Right Case (See g, p and x)</strong><br>
<a href="http://d2o58evtke57tz.cloudfront.net/wp-content/uploads/redBlackCase3b.png"><img class="aligncenter size-full wp-image-126734" alt="redBlackCase3b" src="http://d2o58evtke57tz.cloudfront.net/wp-content/uploads/redBlackCase3b.png" width="491" height="195"></a></p>
<p><strong>Right Right Case (See g, p and x)</strong><br>
<a href="http://d2o58evtke57tz.cloudfront.net/wp-content/uploads/redBlackCase3c.png"><img class="aligncenter size-full wp-image-126731" alt="redBlackCase3c" src="http://d2o58evtke57tz.cloudfront.net/wp-content/uploads/redBlackCase3c.png" width="410" height="190"></a></p>
<p><strong>Right Left Case (See g, p and x)</strong><br>
<a href="http://d2o58evtke57tz.cloudfront.net/wp-content/uploads/redBlackCase3d.png"><img class="aligncenter size-full wp-image-126739" alt="redBlackCase3d" src="http://d2o58evtke57tz.cloudfront.net/wp-content/uploads/redBlackCase3d.png" width="472" height="203"></a></p>
<h2>Examples of Insertion</h2>
<p><a href="http://d2o58evtke57tz.cloudfront.net/wp-content/uploads/Examples.png"><img src="http://d2o58evtke57tz.cloudfront.net/wp-content/uploads/Examples_new.png" alt="Examples" width="500" height="365" class="aligncenter size-full wp-image-126882"></a></p>
<p>Please refer <a href="http://geeksquiz.com/c-program-red-black-tree-insertion/" target="_blank">C Program for Red Black Tree Insertion</a> for complete implementation of above algorithm.</p>
<p>Please write comments if you find anything incorrect, or you want to share more information about the topic discussed above.</p>
		
&#160;
&#160;







&#160;
&#160;
&#160;
<p>Tags: <a href="http://www.geeksforgeeks.org/tag/advance-data-structures/" rel="tag">Advance Data Structures</a>, <a href="http://www.geeksforgeeks.org/tag/advanced-data-structures/" rel="tag">Advanced Data Structures</a></p> 






				<h3>Source:</h3><p><a href="http://www.geeksforgeeks.org/red-black-tree-set-2-insert/" rel="tag">http://www.geeksforgeeks.org/red-black-tree-set-2-insert/</a></p></div>		  
			</div></body>